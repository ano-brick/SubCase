/**
 *  ███████╗██╗   ██╗██████╗       ███████╗████████╗ ██████╗ ██████╗ ███████╗
 *  ██╔════╝██║   ██║██╔══██╗      ██╔════╝╚══██╔══╝██╔═══██╗██╔══██╗██╔════╝
 *  ███████╗██║   ██║██████╔╝█████╗███████╗   ██║   ██║   ██║██████╔╝█████╗
 *  ╚════██║██║   ██║██╔══██╗╚════╝╚════██║   ██║   ██║   ██║██╔══██╗██╔══╝
 *  ███████║╚██████╔╝██████╔╝      ███████║   ██║   ╚██████╔╝██║  ██║███████╗
 *  ╚══════╝ ╚═════╝ ╚═════╝       ╚══════╝   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝
 * Advanced Subscription Manager for QX, Loon, Surge, Stash and ShadowRocket!
 * @updated: 2024/10/18 04:42:18
 * @version: 2.14.401
 * @author: Peng-YM
 * @github: https://github.com/sub-store-org/Sub-Store
 * @documentation: https://www.notion.so/Sub-Store-6259586994d34c11a4ced5c406264b46
 */

!function(){var createModuleFactory=function(e){var t;return function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}},_$proxyUtils_88=createModuleFactory((function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyUtils=void 0;var n=_$buffer_3({}),o=d(_$rs_134),s=d(_$yaml_137),i=d(_$download_124),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=function(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return function(e){return e?r:t}(e)}(void 0);if(n&&n.has(e))return n.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=s?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}(_$processors_95({})),u=d(_$preprocessors_94),c=d(_$producers_98),l=d(_$parsers_89),p=d(_$app_87),f=_$sync_121({}),h=d(_$gist_128);function d(e){return e&&e.__esModule?e:{default:e}}function _(){_=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,s=Object.create(o.prototype),i=new S(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=E(i,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var p={};function f(){}function h(){}function d(){}var g={};u(g,s,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(C([])));v&&v!==t&&n.call(v,s)&&(g=v);var m=d.prototype=f.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var o;this._invoke=function(s,i){function a(){return new t((function(o,a){!function o(s,i,a,u){var c=l(e[s],e,i);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){p.value=e,a(p)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}(s,i,o,a)}))}return o=o?o.then(a,a):a()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new w(c(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(m),u(m,a,"Generator"),u(m,s,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=C,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function g(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function m(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(){var e;return e=_().mark((function e(t){var r,n,o,s,u,c,l,h,d,g,y,m,b,w,E,x,A,S,C,P,I,F,k,R,$,O,T=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=T.length>1&&void 0!==T[1]?T[1]:[],n=T.length>2?T[2]:void 0,o=T.length>3?T[3]:void 0,s=T.length>4?T[4]:void 0,u=v(r),e.prev=5,u.s();case 7:if((c=u.n()).done){e.next=72;break}if(l=c.value,h=void 0,d={},-1===l.type.indexOf("Script")){e.next=61;break}if(g=l.args,y=g.mode,m=g.content,"link"!==y){e.next=60;break}if(b=void 0,(w=m||"").endsWith("#noCache")&&(w=w.replace(/#noCache$/,""),b=!0),(E=w.split("#")).length>1)try{d=JSON.parse(decodeURIComponent(E[1]))}catch(_){x=v(E[1].split("&"));try{for(x.s();!(A=x.n()).done;)S=A.value,C=S.split("=")[0],P=S.split("=")[1],d[C]=null==P||""===P||decodeURIComponent(P)}catch(D){x.e(D)}finally{x.f()}}if(w="".concat(w.split("#")[0]).concat(b?"#noCache":""),!(I=w.match(/^\/api\/(file|module)\/(.+)/))){e.next=48;break}if(F="",e.prev=23,F=null==I?void 0:I[1],null!=(k=null==I?void 0:I[2])){e.next=28;break}throw new Error("\u672c\u5730 ".concat(F," URL \u65e0\u6548: ").concat(w));case 28:if(k=decodeURIComponent(k),R="module"===F?_$constants_86.MODULES_KEY:_$constants_86.FILES_KEY,$=(0,_$database_122.findByName)(p.default.read(R),k)){e.next=33;break}throw new Error("\u627e\u4e0d\u5230 ".concat(F,": ").concat(k));case 33:if("module"!==F){e.next=37;break}h=$.content,e.next=40;break;case 37:return e.next=39,(0,f.produceArtifact)({type:"file",name:k});case 39:h=e.sent;case 40:e.next=46;break;case 42:throw e.prev=42,e.t0=e.catch(23),p.default.error("Error when loading ".concat(F,": ").concat(l.args.content,".\n Reason: ").concat(e.t0)),new Error("\u65e0\u6cd5\u52a0\u8f7d ".concat(F,": ").concat(w));case 46:e.next=58;break;case 48:return e.prev=48,e.next=51,(0,i.default)(w);case 51:h=e.sent,e.next=58;break;case 54:throw e.prev=54,e.t1=e.catch(48),p.default.error("Error when downloading remote script: ".concat(l.args.content,".\n Reason: ").concat(e.t1)),new Error("\u65e0\u6cd5\u4e0b\u8f7d\u811a\u672c: ".concat(w));case 58:e.next=61;break;case 60:h=m;case 61:if(a.default[l.type]){e.next=64;break}return p.default.error('Unknown operator: "'.concat(l.type,'"')),e.abrupt("continue",70);case 64:return p.default.log('Applying "'.concat(l.type,'" with arguments:\n >>> ').concat(JSON.stringify(l.args,null,2)||"None")),O=void 0,O=-1!==l.type.indexOf("Script")?a.default[l.type](h,n,d,o,s):a.default[l.type](l.args||{}),e.next=69,(0,a.ApplyProcessor)(O,t);case 69:t=e.sent;case 70:e.next=7;break;case 72:e.next=77;break;case 74:e.prev=74,e.t2=e.catch(5),u.e(e.t2);case 77:return e.prev=77,u.f(),e.finish(77);case 80:return e.abrupt("return",t);case 81:case"end":return e.stop()}}),e,null,[[5,74,77,80],[23,42],[48,54]])})),(w=function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){g(s,n,o,i,a,"next",e)}function a(e){g(s,n,o,i,a,"throw",e)}i(void 0)}))}).apply(this,arguments)}var E={parse:function(e){e=function(e){var t,r=v(u.default);try{for(r.s();!(t=r.n()).done;){var n=t.value;try{if(n.test(e))return p.default.info("Pre-processor [".concat(n.name,"] activated")),n.parse(e)}catch(o){p.default.error("Parser [".concat(n.name,"] failed\n Reason: ").concat(o))}}}catch(s){r.e(s)}finally{r.f()}return e}(e);var t,r,n=[],o=v(e.split("\n"));try{for(o.s();!(r=o.n()).done;){var s=r.value;if(0!==(s=s.trim()).length){var i=!1;if(t){var a=y(x(t,s),2),c=a[0];a[1]||(n.push(S(c)),i=!0)}if(!i){var f,h=v(l.default);try{for(h.s();!(f=h.n()).done;){var d=f.value,_=y(x(d,s),2),g=_[0];if(!_[1]){n.push(S(g)),t=d,i=!0,p.default.info("".concat(d.name," is activated"));break}}}catch(m){h.e(m)}finally{h.f()}}i||p.default.error("Failed to parse line: ".concat(s))}}}catch(m){o.e(m)}finally{o.f()}return n},process:function(e){return w.apply(this,arguments)},produce:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=c.default[t];if(!o)throw new Error("Target platform: ".concat(t," is not supported!"));var s=/Surge|SurgeMac|Shadowrocket/i.test(t);if(e=(e=e.filter((function(e){return!(e.supported&&!1===e.supported[t])}))).map((function(e){return e._resolved=e.resolved,(0,_$utils_130.isNotBlank)(e.name)||(e.name="".concat(e.type," ").concat(e.server,":").concat(e.port)),e["disable-sni"]&&(s?e.sni="off":["tuic"].includes(e.type)||(p.default.error("Target platform ".concat(t," does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.")),e.sni="",e["skip-cert-verify"]=!0,delete e["tls-fingerprint"])),e.ports&&(e.ports=String(e.ports),["ClashMeta"].includes(t)||(e.ports=e.ports.replace(/\//g,",")),e.port||(e.port=(0,_$utils_130.getRandomPort)(e.ports))),e})),p.default.log("Producing proxies for target: ".concat(t)),void 0===o.type||"SINGLE"===o.type){var i,a,u,l,f,h=e.map((function(e){try{return o.produce(e,r,n)}catch(t){return p.default.error("Cannot produce proxy: ".concat(JSON.stringify(e,null,2),"\nReason: ").concat(t)),""}})).filter((function(e){return e.length>0}));return h="internal"===r?h:h.join("\n"),t.startsWith("Surge")&&e.length>0&&e.every((function(e){return"wireguard"===e.type}))&&(h="#!name=".concat(null===(i=e[0])||void 0===i?void 0:i._subName,"\n#!desc=").concat(null!==(a=null===(u=e[0])||void 0===u?void 0:u._desc)&&void 0!==a?a:"","\n#!category=").concat(null!==(l=null===(f=e[0])||void 0===f?void 0:f._category)&&void 0!==l?l:"","\n").concat(h)),h}if("ALL"===o.type)return o.produce(e,r,n)},ipAddress:_$utils_130.ipAddress,getRandomPort:_$utils_130.getRandomPort,isIPv4:_$utils_130.isIPv4,isIPv6:_$utils_130.isIPv6,isIP:C,yaml:s.default,getFlag:_$geo_127.getFlag,removeFlag:_$geo_127.removeFlag,getISO:_$geo_127.getISO,MMDB:_$geo_127.MMDB,Gist:h.default,download:i.default};function x(e,t){if(!function(e,t){try{return e.test(t)}catch(r){return!1}}(e,t))return[null,new Error("Parser mismatch")];try{return[e.parse(t),null]}catch(r){return[null,r]}}function A(e){if("string"==typeof e||"number"==typeof e){if(""===(e=String(e).trim()))return"/";if(!e.startsWith("/"))return"/"+e}return e}function S(e){var t,r,s;"number"==typeof e.password&&(e.password=(0,_$utils_130.numberToString)(e.password)),e.interface&&(e["interface-name"]=e.interface,delete e.interface),(0,_$utils_130.isValidPortNumber)(e.port)&&(e.port=parseInt(e.port,10)),e.server&&(e.server="".concat(e.server).trim().replace(/^\[/,"").replace(/\]$/,"")),"ws"===e.network&&(e["ws-opts"]||!e["ws-path"]&&!e["ws-headers"]||(e["ws-opts"]={},e["ws-path"]&&(e["ws-opts"].path=e["ws-path"]),e["ws-headers"]&&(e["ws-opts"].headers=e["ws-headers"])),delete e["ws-path"],delete e["ws-headers"]);var i,a,u,c,l=null===(t=e["".concat(e.network,"-opts")])||void 0===t?void 0:t.path;if(Array.isArray(l)?e["".concat(e.network,"-opts")].path=l.map((function(e){return A(e)})):null!=l&&(e["".concat(e.network,"-opts")].path=A(l)),"trojan"===e.type&&"tcp"===e.network&&delete e.network,["vless"].includes(e.type)&&(e.network||(e.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity"].includes(e.type)&&(e.tls=!0),e.network){var f,h,d,_,g=null===(f=e["".concat(e.network,"-opts")])||void 0===f||null===(h=f.headers)||void 0===h?void 0:h.Host,y=null===(d=e["".concat(e.network,"-opts")])||void 0===d||null===(_=d.headers)||void 0===_?void 0:_.host;"h2"===e.network?!y&&g&&(e["".concat(e.network,"-opts")].headers.host=g,delete e["".concat(e.network,"-opts")].headers.Host):y&&!g&&(e["".concat(e.network,"-opts")].headers.Host=y,delete e["".concat(e.network,"-opts")].headers.host)}if("h2"===e.network){var v,m,b,w=null===(v=e["h2-opts"])||void 0===v||null===(m=v.headers)||void 0===m?void 0:m.host,E=null===(b=e["h2-opts"])||void 0===b?void 0:b.path;w&&!Array.isArray(w)&&(e["h2-opts"].headers.host=[w]),Array.isArray(E)&&(e["h2-opts"].path=E[0])}if(e.tls||!["ws","http"].includes(e.network)||null!==(r=e["".concat(e.network,"-opts")])&&void 0!==r&&null!==(s=r.headers)&&void 0!==s&&s.Host||C(e.server)||(e["".concat(e.network,"-opts")]=e["".concat(e.network,"-opts")]||{},e["".concat(e.network,"-opts")].headers=e["".concat(e.network,"-opts")].headers||{},e["".concat(e.network,"-opts")].headers.Host=["vmess","vless"].includes(e.type)&&"http"===e.network?[e.server]:e.server),["vmess","vless"].includes(e.type)&&"http"===e.network){var x,S,P,I=null===(x=e["".concat(e.network,"-opts")])||void 0===x?void 0:x.path,F=null===(S=e["".concat(e.network,"-opts")])||void 0===S||null===(P=S.headers)||void 0===P?void 0:P.Host;F&&!Array.isArray(F)&&(e["".concat(e.network,"-opts")].headers.Host=[F]),I&&!Array.isArray(I)&&(e["".concat(e.network,"-opts")].path=[I])}if(e.tls&&!e.sni&&(C(e.server)||(e.sni=e.server),!e.sni&&e.network)){var k,R,$=null===(k=e["".concat(e.network,"-opts")])||void 0===k||null===(R=k.headers)||void 0===R?void 0:R.Host;($=Array.isArray($)?$[0]:$)&&(e.sni=$)}if(e.ports?e.ports=String(e.ports).replace(/\//g,","):delete e.ports,["hysteria2"].includes(e.type)&&e.obfs&&!["salamander"].includes(e.obfs)&&!e["obfs-password"]&&(e["obfs-password"]=e.obfs,e.obfs="salamander"),["vless"].includes(e.type)&&(e["reality-opts"]&&0===Object.keys(e["reality-opts"]).length&&delete e["reality-opts"],e["grpc-opts"]&&0===Object.keys(e["grpc-opts"]).length&&delete e["grpc-opts"],e["reality-opts"]||e.flow||delete e.flow,["http"].includes(e.network)&&((null===(i=e["".concat(e.network,"-opts")])||void 0===i?void 0:i.path)||(e["".concat(e.network,"-opts")]||(e["".concat(e.network,"-opts")]={}),e["".concat(e.network,"-opts")].path=["/"]))),"string"!=typeof e.name)if(/^\d+$/.test(e.name))e.name="".concat(e.name);else try{var O;null!==(O=e.name)&&void 0!==O&&O.data?e.name=n.Buffer.from(e.name.data).toString("utf8"):e.name=n.Buffer.from(e.name).toString("utf8")}catch(D){p.default.error("proxy.name decode failed\nReason: ".concat(D)),e.name="".concat(e.type," ").concat(e.server,":").concat(e.port)}["ws","http","h2"].includes(e.network)&&(!["ws","h2"].includes(e.network)||null!==(a=e["".concat(e.network,"-opts")])&&void 0!==a&&a.path?"http"===e.network&&(!Array.isArray(null===(u=e["".concat(e.network,"-opts")])||void 0===u?void 0:u.path)||null!==(c=e["".concat(e.network,"-opts")])&&void 0!==c&&c.path.every((function(e){return!e})))&&(e["".concat(e.network,"-opts")]=e["".concat(e.network,"-opts")]||{},e["".concat(e.network,"-opts")].path=["/"]):(e["".concat(e.network,"-opts")]=e["".concat(e.network,"-opts")]||{},e["".concat(e.network,"-opts")].path="/")),["","off"].includes(e.sni)&&(e["disable-sni"]=!0);var T=e.ca_str;e["ca-str"]?T=e["ca-str"]:T&&(delete e.ca_str,e["ca-str"]=T);try{p.default.env.isNode&&!T&&e._ca&&(T=p.default.node.fs.readFileSync(e._ca,{encoding:"utf8"}))}catch(D){p.default.error("Read ca file failed\nReason: ".concat(D))}return!e["tls-fingerprint"]&&T&&(e["tls-fingerprint"]=o.default.generateFingerprint(T)),e}function C(e){return(0,_$utils_130.isIPv4)(e)||(0,_$utils_130.isIPv6)(e)}t.ProxyUtils=E})),_$processors_95=createModuleFactory((function(module,exports){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ApplyProcessor=ApplyProcessor,exports.default=void 0;var _resourceCache=_interopRequireDefault(_$resourceCache_133),_scriptResourceCache=_interopRequireDefault(_$scriptResourceCache_135),_lodash=_interopRequireDefault(_$lodash_53),_app=_interopRequireDefault(_$app_87),_2=_$proxyUtils_88({}),_sync=_$sync_121({}),_env=_interopRequireDefault(_$env_125);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==_typeof(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){asyncGeneratorStep(s,n,o,i,a,"next",e)}function a(e){asyncGeneratorStep(s,n,o,i,a,"throw",e)}i(void 0)}))}}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ConditionalFilter(e){var t=e.rule;return{name:"Conditional Filter",func:function(e){return e.map((function(e){return isMatch(t,e)}))}}}function isMatch(e,t){if(!e.operator)switch(e.proposition){case"IN":return-1!==e.value.indexOf(t[e.attr]);case"CONTAINS":return"string"==typeof t[e.attr]&&-1!==t[e.attr].indexOf(e.value);case"EQUALS":return t[e.attr]===e.value;case"EXISTS":return null!==t[e.attr]||void 0!==t[e.attr];default:throw new Error("Unknown proposition: ".concat(e.proposition))}switch(e.operator){case"AND":return e.child.every((function(e){return isMatch(e,t)}));case"OR":return e.child.some((function(e){return isMatch(e,t)}));case"NOT":return!isMatch(e.child,t);default:throw new Error("Unknown operator: ".concat(e.operator))}}function QuickSettingOperator(e){return{name:"Quick Setting Operator",func:function(r){if(t(e.useless)){var n=UselessFilter().func(r);r=r.filter((function(e,t){return n[t]&&e.port>0&&e.port<=65535}))}return r.map((function(r){return r.udp=t(e.udp,r.udp),r.tfo=t(e.tfo,r.tfo),r["fast-open"]=t(e.tfo,r["fast-open"]),r["skip-cert-verify"]=t(e.scert,r["skip-cert-verify"]),"vmess"===r.type&&(r.aead=t(e["vmess aead"],r.aead)),r}))}};function t(e,t){switch(e){case"ENABLED":return!0;case"DISABLED":return!1;default:return t}}}function FlagOperator(e){var t=e.mode,r=e.tw;return{name:"Flag Operator",func:function(e){return e.map((function(e){if("remove"===t)e.name=(0,_$geo_127.removeFlag)(e.name);else{var n=(0,_$geo_127.getFlag)(e.name);e.name=(0,_$geo_127.removeFlag)(e.name),e.name=n+" "+e.name,"ws"==r?e.name=e.name.replace(/\ud83c\uddf9\ud83c\uddfc/g,"\ud83c\uddfc\ud83c\uddf8"):"tw"==r||(e.name=e.name.replace(/\ud83c\uddf9\ud83c\uddfc/g,"\ud83c\udde8\ud83c\uddf3"))}return e}))}}}function HandleDuplicateOperator(e){var t=_objectSpread(_objectSpread({},{action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back"}),e),r=t.action,n=t.template,o=t.link,s=t.position;return{name:"Handle Duplicate Operator",func:function(e){if("delete"===r){var t={};return e.filter((function(e){return!t[e.name]&&(t[e.name]=!0,!0)}))}if("rename"===r){var i=n.split(" "),a={},u=0;e.forEach((function(e){void 0===a[e.name]?a[e.name]=1:a[e.name]++,u=Math.max(a[e.name].toString().length,u)}));var c={};return e.map((function(e){if(a[e.name]>1){void 0===c[e.name]&&(c[e.name]=1);for(var t="",r=c[e.name]++,n=0;r>0;)t=i[r%10]+t,r=parseInt(r/10),n++;for(;n++<u;)t=i[0]+t;"front"===s?e.name=t+o+e.name:"back"===s&&(e.name=e.name+o+t)}return e}))}}}}function SortOperator(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc";return{name:"Sort Operator",func:function(t){switch(e){case"asc":case"desc":return t.sort((function(t,r){return(t.name>r.name?1:-1)*("desc"===e?-1:1)}));case"random":return shuffle(t);default:throw new Error("Unknown sort option: "+e)}}}}function RegexSortOperator(e){return{name:"Regex Sort Operator",func:function(t){return e=e.map((function(e){return buildRegex(e)})),t.sort((function(t,r){var n=getRegexOrder(e,t.name),o=getRegexOrder(e,r.name);return n&&!o?-1:o&&!n?1:n&&o?n<o?-1:1:!n&&!o||n&&o&&n===o?t.name<r.name?-1:1:void 0}))}}}function getRegexOrder(e,t){for(var r=null,n=0;n<e.length;n++)if(e[n].test(t)){r=n+1;break}return r}function RegexRenameOperator(e){return{name:"Regex Rename Operator",func:function(t){return t.map((function(t){var r,n=_createForOfIteratorHelper(e);try{for(n.s();!(r=n.n()).done;){var o=r.value,s=o.expr,i=o.now;t.name=t.name.replace(buildRegex(s,"g"),i).trim()}}catch(a){n.e(a)}finally{n.f()}return t}))}}}function RegexDeleteOperator(e){return{name:"Regex Delete Operator",func:RegexRenameOperator(e.map((function(e){return{expr:e,now:""}}))).func}}function ScriptOperator(e,t,r,n,o){return{name:"Script Operator",func:(i=_asyncToGenerator(_regeneratorRuntime().mark((function s(i){var a;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=i,s.next=3,_asyncToGenerator(_regeneratorRuntime().mark((function s(){var u;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=createDynamicFunction("operator",e,r,o),a=u(i,t,_objectSpread({source:n},_env.default));case 2:case"end":return s.stop()}}),s)})))();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)}))),function(e){return i.apply(this,arguments)}),nodeFunc:(s=_asyncToGenerator(_regeneratorRuntime().mark((function s(i){var a;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=i,s.next=3,_asyncToGenerator(_regeneratorRuntime().mark((function s(){var u;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=createDynamicFunction("operator","async function operator(input = []) {\n                        if (input && (input.$files || input.$content)) {\n                            let { $content, $files, $options } = input\n                            ".concat(e,"\n                            return { $content, $files, $options }\n                        } else {\n                            let proxies = input\n                            let list = []\n                            for await (let $server of proxies) {\n                                ").concat(e,"\n                                list.push($server)\n                            }\n                            return list\n                        }\n                      }"),r,o),a=u(i,t,_objectSpread({source:n},_env.default));case 2:case"end":return s.stop()}}),s)})))();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)}))),function(e){return s.apply(this,arguments)})};var s,i}function parseIP4P(e){var t,r;try{var n=e.split(":");r=parseInt(n[2],16);var o=parseInt(n[3],16),s=parseInt(n[4],16),i=255&o,a=s>>8,u=255&s;if(t="".concat(o>>8,".").concat(i,".").concat(a,".").concat(u),r<=0||r>65535)throw new Error("Invalid port number: ".concat(r));if(!(0,_$utils_130.isIPv4)(t))throw new Error("Invalid IP address: ".concat(t))}catch(c){_app.default.error("IP4P \u89e3\u6790\u5931\u8d25: ".concat(c))}return{server:t,port:r}}var DOMAIN_RESOLVERS={Custom:(_Custom=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r,n,o,s,i){var a,u,c,l,p,f;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,_$md5_139.hex_md5)("CUSTOM:".concat(i,":").concat(t,":").concat(r)),u=_resourceCache.default.get(a),n||!u){e.next=4;break}return e.abrupt("return",u);case 4:return c="IPv6"===r?"AAAA":"A",e.next=7,(0,_$dns_123.doh)({url:i,domain:t,type:c,timeout:o,edns:s});case 7:if(l=e.sent,p=l.answers,Array.isArray(p)&&0!==p.length){e.next=11;break}throw new Error("No answers");case 11:if(0!==(f=p.filter((function(e){return(null==e?void 0:e.type)===c})).map((function(e){return null==e?void 0:e.data})).filter((function(e){return e}))).length){e.next=14;break}throw new Error("No answers");case 14:return _resourceCache.default.set(a,f),e.abrupt("return",f);case 16:case"end":return e.stop()}}),e)}))),function(e,t,r,n,o,s){return _Custom.apply(this,arguments)}),Google:(_Google=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r,n,o,s){var i,a,u,c,l,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_$md5_139.hex_md5)("GOOGLE:".concat(t,":").concat(r)),a=_resourceCache.default.get(i),n||!a){e.next=4;break}return e.abrupt("return",a);case 4:return u="IPv6"===r?"AAAA":"A",e.next=7,(0,_$dns_123.doh)({url:"https://8.8.4.4/dns-query",domain:t,type:u,timeout:o,edns:s});case 7:if(c=e.sent,l=c.answers,Array.isArray(l)&&0!==l.length){e.next=11;break}throw new Error("No answers");case 11:if(0!==(p=l.filter((function(e){return(null==e?void 0:e.type)===u})).map((function(e){return null==e?void 0:e.data})).filter((function(e){return e}))).length){e.next=14;break}throw new Error("No answers");case 14:return _resourceCache.default.set(i,p),e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)}))),function(e,t,r,n,o){return _Google.apply(this,arguments)}),"IP-API":(_IPAPI=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r,n,o){var s,i,a,u,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!["IPv6"].includes(r)){e.next=2;break}throw new Error("\u57df\u540d\u89e3\u6790\u670d\u52a1\u63d0\u4f9b\u65b9 IP-API \u4e0d\u652f\u6301 ".concat(r));case 2:if(s=(0,_$md5_139.hex_md5)("IP-API:".concat(t)),i=_resourceCache.default.get(s),n||!i){e.next=6;break}return e.abrupt("return",i);case 6:return e.next=8,_app.default.http.get({url:"http://ip-api.com/json/".concat(encodeURIComponent(t),"?lang=zh-CN"),timeout:o});case 8:if(a=e.sent,"success"===(u=JSON.parse(a.body)).status){e.next=12;break}throw new Error("Status is ".concat(u.status));case 12:if(u.query&&0!==u.query){e.next=14;break}throw new Error("No answers");case 14:if(0!==(c=[u.query]).length){e.next=17;break}throw new Error("No answers");case 17:return _resourceCache.default.set(s,c),e.abrupt("return",c);case 19:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return _IPAPI.apply(this,arguments)}),Cloudflare:(_Cloudflare=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r,n,o,s){var i,a,u,c,l,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_$md5_139.hex_md5)("CLOUDFLARE:".concat(t,":").concat(r)),a=_resourceCache.default.get(i),n||!a){e.next=4;break}return e.abrupt("return",a);case 4:return u="IPv6"===r?"AAAA":"A",e.next=7,(0,_$dns_123.doh)({url:"https://1.0.0.1/dns-query",domain:t,type:u,timeout:o,edns:s});case 7:if(c=e.sent,l=c.answers,Array.isArray(l)&&0!==l.length){e.next=11;break}throw new Error("No answers");case 11:if(0!==(p=l.filter((function(e){return(null==e?void 0:e.type)===u})).map((function(e){return null==e?void 0:e.data})).filter((function(e){return e}))).length){e.next=14;break}throw new Error("No answers");case 14:return _resourceCache.default.set(i,p),e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)}))),function(e,t,r,n,o){return _Cloudflare.apply(this,arguments)}),Ali:(_Ali=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r,n,o,s){var i,a,u,c,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_$md5_139.hex_md5)("ALI:".concat(t,":").concat(r)),a=_resourceCache.default.get(i),n||!a){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,_app.default.http.get({url:"http://223.6.6.6/resolve?edns_client_subnet=".concat(s,"/24&name=").concat(encodeURIComponent(t),"&type=").concat("IPv6"===r?"AAAA":"A","&short=1"),headers:{accept:"application/dns-json"},timeout:o});case 6:if(u=e.sent,c=JSON.parse(u.body),Array.isArray(c)&&0!==c.length){e.next=10;break}throw new Error("No answers");case 10:if(0!==(l=c).length){e.next=13;break}throw new Error("No answers");case 13:return _resourceCache.default.set(i,l),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)}))),function(e,t,r,n,o){return _Ali.apply(this,arguments)}),Tencent:(_Tencent=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r,n,o,s){var i,a,u,c,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,_$md5_139.hex_md5)("TENCENT:".concat(t,":").concat(r)),a=_resourceCache.default.get(i),n||!a){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,_app.default.http.get({url:"http://119.28.28.28/d?ip=".concat(s,"&type=").concat("IPv6"===r?"AAAA":"A","&dn=").concat(encodeURIComponent(t)),headers:{accept:"application/dns-json"},timeout:o});case 6:if(u=e.sent,0!==(c=u.body.split(";").map((function(e){return e.split(",")[0]}))).length&&"0"!==String(c)){e.next=10;break}throw new Error("No answers");case 10:if(0!==(l=c).length){e.next=13;break}throw new Error("No answers");case 13:return _resourceCache.default.set(i,l),e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)}))),function(e,t,r,n,o){return _Tencent.apply(this,arguments)})},_Tencent,_Ali,_Cloudflare,_IPAPI,_Google,_Custom;function ResolveDomainOperator(e){var t=e.provider,r=e.type,n=e.filter,o=e.cache,s=e.url,i=e.timeout,a=e.edns;if(["IPv6","IP4P"].includes(r)&&["IP-API"].includes(t))throw new Error("\u57df\u540d\u89e3\u6790\u670d\u52a1\u63d0\u4f9b\u65b9 ".concat(t," \u4e0d\u652f\u6301 ").concat(r));var u=_app.default.read(_$constants_86.SETTINGS_KEY).defaultTimeout,c=i||u,l=["IPv6","IP4P"].includes(r)?"IPv6":"IPv4",p=DOMAIN_RESOLVERS[t];if(!p)throw new Error("\u627e\u4e0d\u5230\u57df\u540d\u89e3\u6790\u670d\u52a1\u63d0\u4f9b\u65b9: ".concat(t));var f,h=a||"223.6.6.6";if(!isIP(h))throw new Error("\u57df\u540d\u89e3\u6790 EDNS \u5e94\u4e3a IP");return _app.default.info("Domain Resolver: [".concat(r,"] ").concat(t," ").concat(h||""," ").concat(s||"")),{name:"Resolve Domain Operator",func:(f=_asyncToGenerator(_regeneratorRuntime().mark((function e(r){var i,a,u,f,d,_,g,y,v;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.forEach((function(e,t){!e["_no-resolve"]&&e["no-resolve"]&&(r[t]["_no-resolve"]=e["no-resolve"])})),i={},a=15,u=_toConsumableArray(new Set(r.filter((function(e){return!isIP(e.server)&&!e["_no-resolve"]})).map((function(e){return e.server})))),f=Math.ceil(u.length/a),d=0;case 6:if(!(d<f)){e.next=15;break}_=[],g=_createForOfIteratorHelper(u.splice(0,a));try{for(v=function(){var e=y.value;_.push(p(e,l,"disabled"===o,c,h,s).then((function(t){i[e]=t,_app.default.info("Successfully resolved domain: ".concat(e," \u279f ").concat(t))})).catch((function(r){_app.default.error("Failed to resolve domain: ".concat(e," with resolver [").concat(t,"]: ").concat(r))})))},g.s();!(y=g.n()).done;)v()}catch(m){g.e(m)}finally{g.f()}return e.next=12,Promise.all(_);case 12:d++,e.next=6;break;case 15:return r.forEach((function(e){if(!e["_no-resolve"])if(i[e.server]){e._resolved_ips=i[e.server];var t=Array.isArray(i[e.server])?i[e.server][Math.floor(Math.random()*i[e.server].length)]:i[e.server];if("IPv6"===l&&(0,_$utils_130.isIPv6)(t)){try{t=new _$utils_130.ipAddress.Address6(t).correctForm()}catch(s){_app.default.error("Failed to parse IPv6 address: ".concat(t,": ").concat(s))}if(/^2001::[^:]+:[^:]+:[^:]+$/.test(t)){e._IP4P=t;var r=parseIP4P(t),n=r.server,o=r.port;n&&o?(e._domain=e.server,e.server=n,e.port=o,e.resolved=!0,e._IPv4=e.server,isIP(e._IP)||(e._IP=e.server)):e.resolved||(e.resolved=!1)}else e._domain=e.server,e.server=t,e.resolved=!0,e["_".concat(l)]=e.server,isIP(e._IP)||(e._IP=e.server)}else e._domain=e.server,e.server=t,e.resolved=!0,e["_".concat(l)]=e.server,isIP(e._IP)||(e._IP=e.server)}else e.resolved||(e.resolved=!1)})),e.abrupt("return",r.filter((function(e){return"removeFailed"===n?isIP(e.server)||e["_no-resolve"]||e.resolved:"IPOnly"===n?isIP(e.server):"IPv4Only"===n?(0,_$utils_130.isIPv4)(e.server):"IPv6Only"!==n||(0,_$utils_130.isIPv6)(e.server)})));case 17:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})}}function isIP(e){return(0,_$utils_130.isIPv4)(e)||(0,_$utils_130.isIPv6)(e)}function UselessFilter(){return{name:"Useless Filter",func:RegexFilter({regex:["\u7f51\u5740","\u6d41\u91cf","\u65f6\u95f4","\u5e94\u6025","\u8fc7\u671f","Bandwidth","expire"],keep:!1}).func}}function RegionFilter(e){var t={HK:"\ud83c\udded\ud83c\uddf0",TW:"\ud83c\uddf9\ud83c\uddfc",US:"\ud83c\uddfa\ud83c\uddf8",SG:"\ud83c\uddf8\ud83c\uddec",JP:"\ud83c\uddef\ud83c\uddf5",UK:"\ud83c\uddec\ud83c\udde7",DE:"\ud83c\udde9\ud83c\uddea",KR:"\ud83c\uddf0\ud83c\uddf7"};return{name:"Region Filter",func:function(r){return r.map((function(r){var n=(0,_$geo_127.getFlag)(r.name);return e.some((function(e){return t[e]===n}))}))}}}function RegexFilter(e){var t=e.regex,r=void 0===t?[]:t,n=e.keep,o=void 0===n||n;return{name:"Regex Filter",func:function(e){return e.map((function(e){var t=r.some((function(t){return buildRegex(t).test(e.name)}));return o?t:!t}))}}}function buildRegex(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r=r.join(""),e.startsWith("(?i)")?(e=e.substring(4),new RegExp(e,"i"+r)):new RegExp(e,r)}function TypeFilter(e){return{name:"Type Filter",func:function(t){return t.map((function(t){return e.some((function(e){return t.type===e}))}))}}}function ScriptFilter(e,t,r,n,o){return{name:"Script Filter",func:(i=_asyncToGenerator(_regeneratorRuntime().mark((function s(i){var a;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=(0,_$logical_131.FULL)(i.length,!0),s.next=3,_asyncToGenerator(_regeneratorRuntime().mark((function s(){var u;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=createDynamicFunction("filter",e,r,o),a=u(i,t,_objectSpread({source:n},_env.default));case 2:case"end":return s.stop()}}),s)})))();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)}))),function(e){return i.apply(this,arguments)}),nodeFunc:(s=_asyncToGenerator(_regeneratorRuntime().mark((function s(i){var a;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=(0,_$logical_131.FULL)(i.length,!0),s.next=3,_asyncToGenerator(_regeneratorRuntime().mark((function s(){var u;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:u=createDynamicFunction("filter","async function filter(input = []) {\n                        let proxies = input\n                        let list = []\n                        const fn = async ($server) => {\n                            ".concat(e,"\n                        }\n                        for await (let $server of proxies) {\n                            list.push(await fn($server))\n                        }\n                        return list\n                      }"),r,o),a=u(i,t,_objectSpread({source:n},_env.default));case 2:case"end":return s.stop()}}),s)})))();case 3:return s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)}))),function(e){return s.apply(this,arguments)})};var s,i}ResolveDomainOperator.resolver=DOMAIN_RESOLVERS;var _default={"Useless Filter":UselessFilter,"Region Filter":RegionFilter,"Regex Filter":RegexFilter,"Type Filter":TypeFilter,"Script Filter":ScriptFilter,"Conditional Filter":ConditionalFilter,"Quick Setting Operator":QuickSettingOperator,"Flag Operator":FlagOperator,"Sort Operator":SortOperator,"Regex Sort Operator":RegexSortOperator,"Regex Rename Operator":RegexRenameOperator,"Regex Delete Operator":RegexDeleteOperator,"Script Operator":ScriptOperator,"Handle Duplicate Operator":HandleDuplicateOperator,"Resolve Domain Operator":ResolveDomainOperator};function ApplyFilter(e,t){return _ApplyFilter.apply(this,arguments)}function _ApplyFilter(){return(_ApplyFilter=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r){var n,o,s,i,a,u,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_$logical_131.FULL)(r.length,!0),e.prev=1,e.next=4,t.func(r);case 4:n=e.sent,e.next=25;break;case 7:return e.prev=7,e.t0=e.catch(1),s="",(i="".concat(null!==(o=e.t0.message)&&void 0!==o?o:e.t0)).includes("$server is not defined")?s="":(_app.default.error("Cannot apply filter ".concat(t.name,"(function filter)! Reason: ").concat(e.t0)),s="\u6267\u884c function filter \u5931\u8d25 ".concat(i,"; ")),e.prev=12,e.next=15,t.nodeFunc(r);case 15:n=e.sent,e.next=25;break;case 18:throw e.prev=18,e.t1=e.catch(12),_app.default.error("Cannot apply filter ".concat(t.name,"(shortcut script)! Reason: ").concat(e.t1)),u="",c="".concat(null!==(a=e.t1.message)&&void 0!==a?a:e.t1),s&&c===i?(u="",s="\u6267\u884c\u5931\u8d25 ".concat(i)):u="\u6267\u884c\u5feb\u6377\u8fc7\u6ee4\u811a\u672c \u5931\u8d25 ".concat(c),new Error("\u811a\u672c\u8fc7\u6ee4 ".concat(s).concat(u));case 25:return e.abrupt("return",r.filter((function(e,t){return n[t]})));case 26:case"end":return e.stop()}}),e,null,[[1,7],[12,18]])})))).apply(this,arguments)}function ApplyOperator(e,t){return _ApplyOperator.apply(this,arguments)}function _ApplyOperator(){return(_ApplyOperator=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r){var n,o,s,i,a,u,c,l,p,f,h;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=clone(r),e.prev=1,e.next=4,t.func(n);case 4:(o=e.sent)&&(n=o),e.next=27;break;case 8:return e.prev=8,e.t0=e.catch(1),u="",(c="".concat(null!==(s=e.t0.message)&&void 0!==s?s:e.t0)).includes("$server is not defined")||c.includes("$content is not defined")||c.includes("$files is not defined")||null!==(i=n)&&void 0!==i&&i.$files||null!==(a=n)&&void 0!==a&&a.$content?u="":(_app.default.error("Cannot apply operator ".concat(t.name,"(function operator)! Reason: ").concat(e.t0)),u="\u6267\u884c function operator \u5931\u8d25 ".concat(c,"; ")),e.prev=13,e.next=16,t.nodeFunc(n);case 16:(l=e.sent)&&(n=l),e.next=27;break;case 20:throw e.prev=20,e.t1=e.catch(13),_app.default.error("Cannot apply operator ".concat(t.name,"(shortcut script)! Reason: ").concat(e.t1)),f="",h="".concat(null!==(p=e.t1.message)&&void 0!==p?p:e.t1),u&&h===c?(f="",u="\u6267\u884c\u5931\u8d25 ".concat(c)):f="\u6267\u884c\u5feb\u6377\u811a\u672c \u5931\u8d25 ".concat(h),new Error("\u811a\u672c\u64cd\u4f5c ".concat(u).concat(f));case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])})))).apply(this,arguments)}function ApplyProcessor(e,t){return _ApplyProcessor.apply(this,arguments)}function _ApplyProcessor(){return(_ApplyProcessor=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===t.name.indexOf("Filter")){e.next=4;break}return e.abrupt("return",ApplyFilter(t,r));case 4:if(-1===t.name.indexOf("Operator")){e.next=6;break}return e.abrupt("return",ApplyOperator(t,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function shuffle(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e}function clone(e){return JSON.parse(JSON.stringify(e))}function createDynamicFunction(name,script,$arguments,$options){var flowUtils={getFlowField:_$flow_126.getFlowField,getFlowHeaders:_$flow_126.getFlowHeaders,parseFlowHeaders:_$flow_126.parseFlowHeaders,flowTransfer:_$flow_126.flowTransfer,validCheck:_$flow_126.validCheck,getRmainingDays:_$flow_126.getRmainingDays};return _app.default.env.isLoon?new Function("$arguments","$options","$substore","lodash","$persistentStore","$httpClient","$notification","ProxyUtils","scriptResourceCache","flowUtils","produceArtifact","require","".concat(script,"\n return ").concat(name))($arguments,$options,_app.default,_lodash.default,$persistentStore,$httpClient,$notification,_2.ProxyUtils,_scriptResourceCache.default,flowUtils,_sync.produceArtifact,eval('typeof require !== "undefined"')?require:void 0):new Function("$arguments","$options","$substore","lodash","ProxyUtils","scriptResourceCache","flowUtils","produceArtifact","require","".concat(script,"\n return ").concat(name))($arguments,$options,_app.default,_lodash.default,_2.ProxyUtils,_scriptResourceCache.default,flowUtils,_sync.produceArtifact,eval('typeof require !== "undefined"')?require:void 0)}exports.default=_default})),_$sync_121=createModuleFactory((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){r.default.read(_$constants_86.ARTIFACTS_KEY)||r.default.write({},_$constants_86.ARTIFACTS_KEY),e.get("/api/sync/artifacts",m),e.get("/api/sync/artifact/:name",w)},t.produceArtifact=_,t.syncArtifacts=y;var r=s(_$app_87),n=s(_$download_124),o=_$proxyUtils_88({});function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,s=Object.create(o.prototype),i=new S(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=E(i,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var p={};function h(){}function d(){}function _(){}var g={};u(g,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(C([])));v&&v!==t&&r.call(v,o)&&(g=v);var m=_.prototype=h.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(o,s){function a(){return new t((function(n,a){!function n(o,s,a,u){var c=l(e[o],e,s);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==i(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){p.value=e,a(p)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(o,s,n,a)}))}return n=n?n.then(a,a):a()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=_,u(m,"constructor",_),u(_,"constructor",d),d.displayName=u(_,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new w(c(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=C,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function h(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){h(s,n,o,i,a,"next",e)}function a(e){h(s,n,o,i,a,"throw",e)}i(void 0)}))}}function _(e){return g.apply(this,arguments)}function g(){return(g=d(f().mark((function e(t){var s,i,c,l,h,_,g,y,v,m,b,w,E,x,A,S,C,P,I,F,k,R,$,O,T,D,B,j,N,L,U,H,M,q,V,K,G,z,Y,W,X,J,Z,Q,ee,te,re,ne,oe,se,ie,ae,ue,ce,le,pe,fe,he,de,_e,ge;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.type,i=t.name,c=t.platform,l=t.url,h=t.ua,_=t.content,g=t.mergeSources,y=t.ignoreFailedRemoteSub,v=t.ignoreFailedRemoteFile,m=t.produceType,b=t.produceOpts,w=void 0===b?{}:b,E=t.subscription,x=t.awaitCustomCache,A=t.$options,S=t.proxy,c=c||"JSON","subscription"!==s){e.next=74;break}if(!i){e.next=10;break}if(P=r.default.read(_$constants_86.SUBS_KEY),C=(0,_$database_122.findByName)(P,i)){e.next=8;break}throw new Error("\u627e\u4e0d\u5230\u8ba2\u9605 ".concat(i));case 8:e.next=15;break;case 10:if(!E){e.next=14;break}C=E,e.next=15;break;case 14:throw new Error("\u672a\u63d0\u4f9b\u8ba2\u9605\u540d\u79f0\u6216\u8ba2\u9605\u6570\u636e");case 15:if(!_||["localFirst","remoteFirst"].includes(g)){e.next=19;break}I=_,e.next=44;break;case 19:if(!l){e.next=31;break}return F={},e.next=23,Promise.all(l.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,h||C.ua,void 0,S||C.proxy,void 0,x);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),F[t]=e.t0,r.default.error("\u8ba2\u9605 ".concat(C.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 23:if(I=e.sent,k=C.ignoreFailedRemoteSub,null!=y&&""!==y&&(k=y),k||!(Object.keys(F).length>0)){e.next=28;break}throw new Error("\u8ba2\u9605 ".concat(C.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(F).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 28:"localFirst"===g?I.unshift(_):"remoteFirst"===g&&I.push(_),e.next=44;break;case 31:if("local"!==C.source||["localFirst","remoteFirst"].includes(C.mergeSources)){e.next=35;break}I=C.content,e.next=44;break;case 35:return R={},e.next=38,Promise.all(C.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,h||C.ua,void 0,S||C.proxy,void 0,x);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),R[t]=e.t0,r.default.error("\u8ba2\u9605 ".concat(C.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 38:if(I=e.sent,$=C.ignoreFailedRemoteSub,null!=y&&""!==y&&($=y),$||!(Object.keys(R).length>0)){e.next=43;break}throw new Error("\u8ba2\u9605 ".concat(C.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(R).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 43:"localFirst"===C.mergeSources?I.unshift(C.content):"remoteFirst"===C.mergeSources&&I.push(C.content);case 44:return(O=(Array.isArray(I)?I:[I]).map((function(e){return o.ProxyUtils.parse(e)})).flat()).forEach((function(e){e._subName=C.name,e._subDisplayName=C.displayName})),e.next=48,o.ProxyUtils.process(O,C.process||[],c,p({},C.name,C),A);case 48:if(0!==(O=e.sent).length){e.next=51;break}throw new Error("\u8ba2\u9605 ".concat(i," \u4e2d\u4e0d\u542b\u6709\u6548\u8282\u70b9"));case 51:T={},D=u(O),e.prev=53,D.s();case 55:if((B=D.n()).done){e.next=63;break}if(j=B.value,!T[j.name]){e.next=60;break}return r.default.notify("\ud83c\udf0d Sub-Store","\u26a0\ufe0f \u8ba2\u9605 ".concat(i," \u5305\u542b\u91cd\u590d\u8282\u70b9 ").concat(j.name,"\uff01"),"\u8bf7\u4ed4\u7ec6\u68c0\u6d4b\u914d\u7f6e\uff01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"}),e.abrupt("break",63);case 60:T[j.name]=!0;case 61:e.next=55;break;case 63:e.next=68;break;case 65:e.prev=65,e.t0=e.catch(53),D.e(e.t0);case 68:return e.prev=68,D.f(),e.finish(68);case 71:return e.abrupt("return",o.ProxyUtils.produce(O,c,m,w));case 74:if("collection"!==s){e.next=122;break}if(N=r.default.read(_$constants_86.SUBS_KEY),L=r.default.read(_$constants_86.COLLECTIONS_KEY),U=(0,_$database_122.findByName)(L,i)){e.next=80;break}throw new Error("\u627e\u4e0d\u5230\u7ec4\u5408\u8ba2\u9605 ".concat(i));case 80:return H=a(U.subscriptions),M=U.subscriptionTags,Array.isArray(M)&&M.length>0&&N.forEach((function(e){Array.isArray(e.tag)&&e.tag.length>0&&!H.includes(e.name)&&e.tag.some((function(e){return M.includes(e)}))&&H.push(e.name)})),q={},V={},K=0,e.next=88,Promise.all(H.map(function(){var e=d(f().mark((function e(t){var s,i,a,u,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,_$database_122.findByName)(N,t),e.prev=1,r.default.info("\u6b63\u5728\u5904\u7406\u5b50\u8ba2\u9605\uff1a".concat(s.name,"...")),"local"!==s.source||["localFirst","remoteFirst"].includes(s.mergeSources)){e.next=7;break}a=s.content,e.next=16;break;case 7:return u={},e.next=10,Promise.all(s.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,s.ua,void 0,S||s.proxy||U.proxy);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),u[t]=e.t0,r.default.error("\u8ba2\u9605 ".concat(s.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 10:return e.next=12,e.sent;case 12:if(a=e.sent,s.ignoreFailedRemoteSub||!(Object.keys(u).length>0)){e.next=15;break}throw new Error("\u8ba2\u9605 ".concat(s.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(u).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 15:"localFirst"===s.mergeSources?a.unshift(s.content):"remoteFirst"===s.mergeSources&&a.push(s.content);case 16:return(l=(Array.isArray(a)?a:[a]).map((function(e){return o.ProxyUtils.parse(e)})).flat()).forEach((function(e){e._subName=s.name,e._subDisplayName=s.displayName,e._collectionName=U.name,e._collectionDisplayName=U.displayName})),e.next=20,o.ProxyUtils.process(l,s.process||[],c,(p(i={},s.name,s),p(i,"_collection",U),p(i,"$options",A),i));case 20:l=e.sent,q[t]=l,K++,r.default.info("\u2705 \u5b50\u8ba2\u9605\uff1a".concat(s.name,"\u52a0\u8f7d\u6210\u529f\uff0c\u8fdb\u5ea6--").concat(100*(K/H.length).toFixed(1),"% ")),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(1),K++,V[t]=e.t0,r.default.error("\u274c \u5904\u7406\u7ec4\u5408\u8ba2\u9605\u4e2d\u7684\u5b50\u8ba2\u9605: ".concat(s.name,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(e.t0,"\uff01\u8fdb\u5ea6--").concat(100*(K/H.length).toFixed(1),"%"));case 31:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}()));case 88:if(G=U.ignoreFailedRemoteSub,null!=y&&""!==y&&(G=y),G||!(Object.keys(V).length>0)){e.next=92;break}throw new Error("\u7ec4\u5408\u8ba2\u9605 ".concat(i," \u4e2d\u7684\u5b50\u8ba2\u9605 ").concat(Object.keys(V).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 92:return(z=Array.prototype.concat.apply([],H.map((function(e){return q[e]||[]})))).forEach((function(e){e._collectionName=U.name,e._collectionDisplayName=U.displayName})),e.next=96,o.ProxyUtils.process(z,U.process||[],c,{_collection:U},A);case 96:if(0!==(z=e.sent).length){e.next=99;break}throw new Error("\u7ec4\u5408\u8ba2\u9605 ".concat(i," \u4e2d\u4e0d\u542b\u6709\u6548\u8282\u70b9"));case 99:Y={},W=u(z),e.prev=101,W.s();case 103:if((X=W.n()).done){e.next=111;break}if(J=X.value,!Y[J.name]){e.next=108;break}return r.default.notify("\ud83c\udf0d Sub-Store","\u26a0\ufe0f \u7ec4\u5408\u8ba2\u9605 ".concat(i," \u5305\u542b\u91cd\u590d\u8282\u70b9 ").concat(J.name,"\uff01"),"\u8bf7\u4ed4\u7ec6\u68c0\u6d4b\u914d\u7f6e\uff01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"}),e.abrupt("break",111);case 108:Y[J.name]=!0;case 109:e.next=103;break;case 111:e.next=116;break;case 113:e.prev=113,e.t1=e.catch(101),W.e(e.t1);case 116:return e.prev=116,W.f(),e.finish(116);case 119:return e.abrupt("return",o.ProxyUtils.produce(z,c,m,w));case 122:if("rule"!==s){e.next=153;break}if(Z=r.default.read(_$constants_86.RULES_KEY),Q=(0,_$database_122.findByName)(Z,i)){e.next=127;break}throw new Error("\u627e\u4e0d\u5230\u89c4\u5219 ".concat(i));case 127:ee=[],te=0;case 129:if(!(te<Q.urls.length)){e.next=147;break}return re=Q.urls[te],r.default.info("\u6b63\u5728\u5904\u7406URL\uff1a".concat(re,"\uff0c\u8fdb\u5ea6--").concat(100*((te+1)/Q.urls.length).toFixed(1),"% ")),e.prev=132,e.next=135,(0,n.default)(re);case 135:ne=e.sent,oe=ne.body,se=_$ruleUtils_110.RuleUtils.parse(oe),ee=ee.concat(se),e.next=144;break;case 141:e.prev=141,e.t2=e.catch(132),r.default.error("\u5904\u7406\u5206\u6d41\u8ba2\u9605\u4e2d\u7684URL: ".concat(re,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(e.t2,"! \u8be5\u8ba2\u9605\u5df2\u88ab\u8df3\u8fc7\u3002"));case 144:te++,e.next=129;break;case 147:return e.next=149,_$ruleUtils_110.RuleUtils.process(ee,[{type:"Remove Duplicate Filter"}]);case 149:return ee=e.sent,e.abrupt("return",_$ruleUtils_110.RuleUtils.produce(ee,c));case 153:if("file"!==s){e.next=198;break}if(ae=r.default.read(_$constants_86.FILES_KEY),ue=(0,_$database_122.findByName)(ae,i)){e.next=158;break}throw new Error("\u627e\u4e0d\u5230\u6587\u4ef6 ".concat(i));case 158:if(!_||["localFirst","remoteFirst"].includes(g)){e.next=162;break}ce=_,e.next=187;break;case 162:if(!l){e.next=174;break}return le={},e.next=166,Promise.all(l.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,h||ue.ua,void 0,ue.proxy||S);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),le[t]=e.t0,r.default.error("\u6587\u4ef6 ".concat(ue.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 166:if(ce=e.sent,pe=ue.ignoreFailedRemoteFile,null!=v&&""!==v&&(pe=v),pe||!(Object.keys(le).length>0)){e.next=171;break}throw new Error("\u6587\u4ef6 ".concat(ue.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(Object.keys(le).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 171:"localFirst"===g?ce.unshift(_):"remoteFirst"===g&&ce.push(_),e.next=187;break;case 174:if("local"!==ue.source||["localFirst","remoteFirst"].includes(ue.mergeSources)){e.next=178;break}ce=ue.content,e.next=187;break;case 178:return fe={},e.next=181,Promise.all(ue.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.default)(t,h||ue.ua,void 0,ue.proxy||S);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),fe[t]=e.t0,r.default.error("\u6587\u4ef6 ".concat(ue.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 181:if(ce=e.sent,he=ue.ignoreFailedRemoteFile,null!=v&&""!==v&&(he=v),he||!(Object.keys(fe).length>0)){e.next=186;break}throw new Error("\u6587\u4ef6 ".concat(ue.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(Object.keys(fe).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 186:"localFirst"===ue.mergeSources?ce.unshift(ue.content):"remoteFirst"===ue.mergeSources&&ce.push(ue.content);case 187:if(de=(Array.isArray(ce)?ce:[ce]).flat(),_e=de.filter((function(e){return null!=e&&""!==e})).join("\n"),!(Array.isArray(ue.process)&&ue.process.length>0)){e.next=195;break}return e.next=192,o.ProxyUtils.process({$files:de,$content:_e,$options:A},ue.process);case 192:e.t3=e.sent,e.next=196;break;case 195:e.t3={$content:_e,$files:de,$options:A};case 196:return ge=e.t3,e.abrupt("return",null!==(ie=null==ge?void 0:ge.$content)&&void 0!==ie?ie:"");case 198:case"end":return e.stop()}}),e,null,[[53,65,68,71],[101,113,116,119],[132,141]])})))).apply(this,arguments)}function y(){return v.apply(this,arguments)}function v(){return(v=d(f().mark((function e(){var t,n,o,s,i,a,c,l,p,h,g,y,v,m,b,w,E;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.default.info("\u5f00\u59cb\u540c\u6b65\u6240\u6709\u8fdc\u7a0b\u914d\u7f6e..."),t=r.default.read(_$constants_86.ARTIFACTS_KEY),n={},e.prev=3,o=[],s=r.default.read(_$constants_86.SUBS_KEY),i=r.default.read(_$constants_86.COLLECTIONS_KEY),a=[],t.map((function(e){if(e.sync&&e.source)if("subscription"===e.type){var t=e.source,r=(0,_$database_122.findByName)(s,t);r&&r.url&&!a.includes(t)&&a.push(t)}else if("collection"===e.type){var n=(0,_$database_122.findByName)(i,e.source);n&&Array.isArray(n.subscriptions)&&n.subscriptions.map((function(e){var t=(0,_$database_122.findByName)(s,e);t&&t.url&&!a.includes(e)&&a.push(e)}))}})),!(a.length>0)){e.next=12;break}return e.next=12,Promise.all(a.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({type:"subscription",name:t,awaitCustomCache:!0});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.next=14,Promise.all(t.map(function(){var e=d(f().mark((function e(t){var s,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.sync||!t.source){e.next=9;break}return r.default.info("\u6b63\u5728\u540c\u6b65\u4e91\u914d\u7f6e\uff1a".concat(t.name,"...")),(s="SurgeMac"===t.platform)&&r.default.info("\u624b\u52a8\u6307\u5b9a\u4e86 target \u4e3a SurgeMac, \u5c06\u4f7f\u7528 Mihomo External"),e.next=7,_({type:t.type,name:t.source,platform:t.platform,produceOpts:{"include-unsupported-proxy":t.includeUnsupportedProxy,useMihomoExternal:s}});case 7:i=e.sent,n[encodeURIComponent(t.name)]={content:i};case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r.default.error("\u540c\u6b65\u914d\u7f6e ".concat(t.name," \u53d1\u751f\u9519\u8bef: ").concat(null!==(a=e.t0.message)&&void 0!==a?a:e.t0)),o.push(t.name);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()));case 14:if(!(o.length>0)){e.next=16;break}throw new Error("\u540c\u6b65\u914d\u7f6e ".concat(o.join(", ")," \u53d1\u751f\u9519\u8bef \u8be6\u60c5\u8bf7\u67e5\u770b\u65e5\u5fd7"));case 16:return e.next=18,(0,_$artifacts_115.syncToGist)(n);case 18:c=e.sent,l=JSON.parse(c.body),p=u(t);try{for(p.s();!(h=p.n()).done;)(g=h.value).sync&&(g.updated=(new Date).getTime(),v=l.files,m=void 0,Array.isArray(v)&&(m=!0,v=Object.fromEntries(v.map((function(e){return[e.path,e]})))),b=null===(y=v[encodeURIComponent(g.name)])||void 0===y?void 0:y.raw_url,w=m?b:null==b?void 0:b.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1"),r.default.info("\u4e0a\u4f20\u914d\u7f6e\u5b8c\u6210\n\u6587\u4ef6\u5217\u8868: ".concat(Object.keys(v).join(", "),"\n\u5f53\u524d\u6587\u4ef6: ").concat(encodeURIComponent(g.name),"\n\u54cd\u5e94\u8fd4\u56de\u7684\u539f\u59cb\u94fe\u63a5: ").concat(b,"\n\u5904\u7406\u5b8c\u7684\u65b0\u94fe\u63a5: ").concat(w)),g.url=w)}catch(x){p.e(x)}finally{p.f()}r.default.write(t,_$constants_86.ARTIFACTS_KEY),r.default.info("\u5168\u90e8\u8ba2\u9605\u540c\u6b65\u6210\u529f\uff01"),e.next=30;break;case 26:throw e.prev=26,e.t0=e.catch(3),r.default.error("\u540c\u6b65\u8ba2\u9605\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(null!==(E=e.t0.message)&&void 0!==E?E:e.t0)),e.t0;case 30:case"end":return e.stop()}}),e,null,[[3,26]])})))).apply(this,arguments)}function m(e,t){return b.apply(this,arguments)}function b(){return(b=d(f().mark((function e(t,n){var o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.info("\u5f00\u59cb\u540c\u6b65\u6240\u6709\u8fdc\u7a0b\u914d\u7f6e..."),e.prev=1,e.next=4,y();case 4:(0,_$response_120.success)(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),r.default.error("\u540c\u6b65\u8ba2\u9605\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(null!==(o=e.t0.message)&&void 0!==o?o:e.t0)),(0,_$response_120.failed)(n,new _$errors_117.InternalServerError("FAILED_TO_SYNC_ARTIFACTS","Failed to sync all artifacts","Reason: ".concat(null!==(s=e.t0.message)&&void 0!==s?s:e.t0)));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function w(e,t){return E.apply(this,arguments)}function E(){return(E=d(f().mark((function e(t,n){var o,s,i,a,u,c,l,h,d,g,y,v,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.params.name,o=decodeURIComponent(o),r.default.info("\u5f00\u59cb\u540c\u6b65\u8fdc\u7a0b\u914d\u7f6e ".concat(o,"...")),s=r.default.read(_$constants_86.ARTIFACTS_KEY),i=(0,_$database_122.findByName)(s,o)){e.next=9;break}return r.default.error("\u627e\u4e0d\u5230\u8fdc\u7a0b\u914d\u7f6e ".concat(o)),(0,_$response_120.failed)(n,new _$errors_117.ResourceNotFoundError("RESOURCE_NOT_FOUND","\u627e\u4e0d\u5230\u8fdc\u7a0b\u914d\u7f6e ".concat(o)),404),e.abrupt("return");case 9:if(i.source){e.next=13;break}return r.default.error("\u8fdc\u7a0b\u914d\u7f6e ".concat(o," \u672a\u8bbe\u7f6e\u6765\u6e90")),(0,_$response_120.failed)(n,new _$errors_117.ResourceNotFoundError("RESOURCE_HAS_NO_SOURCE","\u8fdc\u7a0b\u914d\u7f6e ".concat(o," \u672a\u8bbe\u7f6e\u6765\u6e90")),404),e.abrupt("return");case 13:return e.prev=13,(u="SurgeMac"===i.platform)&&r.default.info("\u624b\u52a8\u6307\u5b9a\u4e86 target \u4e3a SurgeMac, \u5c06\u4f7f\u7528 Mihomo External"),e.next=18,_({type:i.type,name:i.source,platform:i.platform,produceOpts:{"include-unsupported-proxy":i.includeUnsupportedProxy,useMihomoExternal:u}});case 18:return c=e.sent,r.default.info("\u6b63\u5728\u4e0a\u4f20\u914d\u7f6e\uff1a".concat(i.name,"\n>>>").concat(JSON.stringify(i,null,2))),e.next=22,(0,_$artifacts_115.syncToGist)(p({},encodeURIComponent(i.name),{content:c}));case 22:l=e.sent,i.updated=(new Date).getTime(),h=JSON.parse(l.body),d=h.files,Array.isArray(d)&&(g=!0,d=Object.fromEntries(d.map((function(e){return[e.path,e]})))),y=null===(a=d[encodeURIComponent(i.name)])||void 0===a?void 0:a.raw_url,v=g?y:null==y?void 0:y.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1"),r.default.info("\u4e0a\u4f20\u914d\u7f6e\u5b8c\u6210\n\u6587\u4ef6\u5217\u8868: ".concat(Object.keys(d).join(", "),"\n\u5f53\u524d\u6587\u4ef6: ").concat(encodeURIComponent(i.name),"\n\u54cd\u5e94\u8fd4\u56de\u7684\u539f\u59cb\u94fe\u63a5: ").concat(y,"\n\u5904\u7406\u5b8c\u7684\u65b0\u94fe\u63a5: ").concat(v)),i.url=v,r.default.write(s,_$constants_86.ARTIFACTS_KEY),(0,_$response_120.success)(n,i),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(13),r.default.error("\u8fdc\u7a0b\u914d\u7f6e ".concat(i.name," \u53d1\u751f\u9519\u8bef: ").concat(null!==(m=e.t0.message)&&void 0!==m?m:e.t0)),(0,_$response_120.failed)(n,new _$errors_117.InternalServerError("FAILED_TO_SYNC_ARTIFACT","Failed to sync artifact ".concat(o),"Reason: ".concat(e.t0)));case 39:case"end":return e.stop()}}),e,null,[[13,35]])})))).apply(this,arguments)}})),_$buffer_3=createModuleFactory((function(e,t){(function(e){(function(){"use strict";t.Buffer=r,t.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},t.INSPECT_MAX_BYTES=50;function e(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return n(e,t,r)}function n(t,n,o){if("string"==typeof t)return function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o=0|u(t,n),s=e(o),i=s.write(t,n);return i!==o&&(s=s.slice(0,i)),s}(t,n);if(ArrayBuffer.isView(t))return i(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(T(t,ArrayBuffer)||t&&T(t.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return(o=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=r.prototype,o}(t,n,o);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return r.from(s,n,o);var c=function(t){if(r.isBuffer(t)){var n=0|a(t.length),o=e(n);return 0===o.length||t.copy(o,0,0,n),o}return void 0!==t.length?"number"!=typeof t.length||D(t.length)?e(0):i(t):"Buffer"===t.type&&Array.isArray(t.data)?i(t.data):void 0}(t);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return r.from(t[Symbol.toPrimitive]("string"),n,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(t){return o(t),e(t<0?0:0|a(t))}function i(t){for(var r=t.length<0?0:0|a(t.length),n=e(r),o=0;o<r;o+=1)n[o]=255&t[o];return n}function a(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function u(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(s)return o?-1:R(e).length;t=(""+t).toLowerCase(),s=!0}}function c(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function l(e,t,n,o,s){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),D(n=+n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof t&&(t=r.from(t,o)),r.isBuffer(t))return 0===t.length?-1:p(e,t,n,o,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):p(e,[t],n,o,s);throw new TypeError("val must be string, number or Buffer")}function p(e,t,r,n,o){var s,i=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,a/=2,u/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*i}else-1!==l&&(s-=s-l),l=-1}else for(r+u>a&&(r=a-u),s=r;s>=0;s--){for(var p=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){p=!1;break}if(p)return s}return-1}function f(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var s=t.length;n>s/2&&(n=s/2);for(var i=0;i<n;++i){var a=parseInt(t.substr(2*i,2),16);if(D(a))return i;e[r+i]=a}return i}function h(e,t,r,n){return O(R(t,e.length-r),e,r,n)}function d(e,t,r,n){return O(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return d(e,t,r,n)}function g(e,t,r,n){return O($(t),e,r,n)}function y(e,t,r,n){return O(function(e,t){for(var r,n,o,s=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,s.push(o),s.push(n);return s}(t,e.length-r),e,r,n)}function v(e,t,r){return 0===t&&r===e.length?_$base64Js_2.fromByteArray(e):_$base64Js_2.fromByteArray(e.slice(t,r))}function m(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var s,i,a,u,c=e[o],l=null,p=c>239?4:c>223?3:c>191?2:1;if(o+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(s=e[o+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[o+1],i=e[o+2],128==(192&s)&&128==(192&i)&&(u=(15&c)<<12|(63&s)<<6|63&i)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(u=(15&c)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=b));return r}(n)}t.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,r){return n(e,t,r)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(t,r,n){return function(t,r,n){return o(t),t<=0?e(t):void 0!==r?"string"==typeof n?e(t).fill(r,n):e(t).fill(r):e(t)}(t,r,n)},r.allocUnsafe=function(e){return s(e)},r.allocUnsafeSlow=function(e){return s(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(T(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,o=t.length,s=0,i=Math.min(n,o);s<i;++s)if(e[s]!==t[s]){n=e[s],o=t[s];break}return n<o?-1:o<n?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=r.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var i=e[n];if(T(i,Uint8Array)&&(i=r.from(i)),!r.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(o,s),s+=i.length}return o},r.byteLength=u,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?m(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,r);case"utf8":case"utf-8":return m(this,t,r);case"ascii":return w(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return v(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,o,s){if(T(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===s&&(s=this.length),t<0||n>e.length||o<0||s>this.length)throw new RangeError("out of range index");if(o>=s&&t>=n)return 0;if(o>=s)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(s>>>=0)-(o>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(i,a),c=this.slice(o,s),l=e.slice(t,n),p=0;p<u;++p)if(c[p]!==l[p]){i=c[p],a=l[p];break}return i<a?-1:a<i?1:0},r.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},r.prototype.indexOf=function(e,t,r){return l(this,e,t,r,!0)},r.prototype.lastIndexOf=function(e,t,r){return l(this,e,t,r,!1)},r.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return f(this,e,t,r);case"utf8":case"utf-8":return h(this,e,t,r);case"ascii":return d(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return g(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function E(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function x(e,t,r){var n,o=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>o)&&(r=o);for(var s="",i=t;i<r;++i)s+=(n=e[i])<16?"0"+n.toString(16):n.toString(16);return s}function A(e,t,r){for(var n=e.slice(t,r),o="",s=0;s<n.length;s+=2)o+=String.fromCharCode(n[s]+256*n[s+1]);return o}function S(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,o,s,i){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,o,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,4),_$ieee754_10.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,8),_$ieee754_10.write(e,t,r,n,52,8),r+8}r.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var o=this.subarray(e,t);return o.__proto__=r.prototype,o},r.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n},r.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},r.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},r.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},r.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),_$ieee754_10.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),_$ieee754_10.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),_$ieee754_10.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),_$ieee754_10.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},r.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},r.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);C(this,e,t,r,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},r.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);C(this,e,t,r,o-1,-o)}var s=r-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},r.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},r.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},r.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},r.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},r.prototype.copy=function(e,t,n,o){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var s=o-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,o);else if(this===e&&n<t&&t<o)for(var i=s-1;i>=0;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,o),t);return s},r.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!r.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var s=e.charCodeAt(0);("utf8"===o&&s<128||"latin1"===o)&&(e=s)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=r.isBuffer(e)?e:r.from(e,o),u=a.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%u]}return this};var k=/[^+/0-9A-Za-z-_]/g;function R(e,t){var r;t=t||1/0;for(var n=e.length,o=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function $(e){return _$base64Js_2.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}}).call(this)}).call(this,_$buffer_3({}).Buffer)})),_$package_85={name:"sub-store",version:"2.14.401",description:"Advanced Subscription Manager for QX, Loon, Surge, Stash and ShadowRocket.",main:"src/main.js",scripts:{preinstall:"npx only-allow pnpm",test:"gulp peggy && npx cross-env BABEL_ENV=test mocha src/test/**/*.spec.js --require @babel/register --recursive",serve:"node sub-store.min.js",start:"nodemon -w src -w package.json --exec babel-node src/main.js","dev:esbuild":"nodemon -w src -w package.json dev-esbuild.js","dev:run":"nodemon -w sub-store.min.js sub-store.min.js",build:"gulp",bundle:"node bundle.js",changelog:"conventional-changelog -p cli -i CHANGELOG.md -s"},author:"Peng-YM",license:"GPL-3.0",dependencies:{"@maxmind/geoip2-node":"^5.0.0",automerge:"1.0.1-preview.7","body-parser":"^1.19.0",buffer:"^6.0.3","connect-history-api-fallback":"^2.0.0",cron:"^3.1.6","dns-packet":"^5.6.1",express:"^4.17.1","http-proxy-middleware":"^2.0.6","ip-address":"^9.0.5","js-base64":"^3.7.2",jsrsasign:"^11.1.0",lodash:"^4.17.21",request:"^2.88.2",requests:"^0.3.0",semver:"^7.3.7","static-js-yaml":"^1.0.0",uuid:"^8.3.2"},devDependencies:{"@babel/core":"^7.18.0","@babel/node":"^7.17.10","@babel/preset-env":"^7.18.0","@babel/register":"^7.17.7","@types/gulp":"^4.0.9",axios:"^0.21.2","babel-plugin-relative-path-import":"^2.0.1",babelify:"^10.0.0","browser-pack-flat":"^3.4.2",browserify:"^17.0.0",chai:"^4.3.6",esbuild:"^0.19.8",eslint:"^8.16.0",gulp:"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint-new":"^1.4.4","gulp-file":"^0.4.0","gulp-header":"^2.0.9","gulp-prettier":"^4.0.0","gulp-tap":"^2.0.0",mocha:"^10.0.0",nodemon:"^2.0.16",peggy:"^2.0.1",prettier:"2.6.2","prettier-plugin-sort-imports":"^1.6.1",tinyify:"^3.0.0"}},_$constants_86={};Object.defineProperty(_$constants_86,"__esModule",{value:!0}),_$constants_86.SUBS_KEY=_$constants_86.SETTINGS_KEY=_$constants_86.SCRIPT_RESOURCE_CACHE_KEY=_$constants_86.SCHEMA_VERSION_KEY=_$constants_86.RULES_KEY=_$constants_86.RESOURCE_CACHE_KEY=_$constants_86.MODULES_KEY=_$constants_86.HEADERS_RESOURCE_CACHE_KEY=_$constants_86.GIST_BACKUP_KEY=_$constants_86.GIST_BACKUP_FILE_NAME=_$constants_86.FILES_KEY=_$constants_86.CSR_EXPIRATION_TIME_KEY=_$constants_86.COLLECTIONS_KEY=_$constants_86.CHR_EXPIRATION_TIME_KEY=_$constants_86.CACHE_EXPIRATION_TIME_MS=_$constants_86.ARTIFACT_REPOSITORY_KEY=_$constants_86.ARTIFACTS_KEY=void 0,_$constants_86.SCHEMA_VERSION_KEY="schemaVersion",_$constants_86.SETTINGS_KEY="settings",_$constants_86.SUBS_KEY="subs",_$constants_86.COLLECTIONS_KEY="collections",_$constants_86.FILES_KEY="files",_$constants_86.MODULES_KEY="modules",_$constants_86.ARTIFACTS_KEY="artifacts",_$constants_86.RULES_KEY="rules",_$constants_86.GIST_BACKUP_KEY="Auto Generated Sub-Store Backup",_$constants_86.GIST_BACKUP_FILE_NAME="Sub-Store",_$constants_86.ARTIFACT_REPOSITORY_KEY="Sub-Store Artifacts Repository",_$constants_86.RESOURCE_CACHE_KEY="#sub-store-cached-resource",_$constants_86.HEADERS_RESOURCE_CACHE_KEY="#sub-store-cached-headers-resource",_$constants_86.CHR_EXPIRATION_TIME_KEY="#sub-store-chr-expiration-time",_$constants_86.CACHE_EXPIRATION_TIME_MS=36e5,_$constants_86.SCRIPT_RESOURCE_CACHE_KEY="#sub-store-cached-script-resource",_$constants_86.CSR_EXPIRATION_TIME_KEY="#sub-store-csr-expiration-time";var _$openApi_140={};function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==_typeof(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function asyncGeneratorStep(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){asyncGeneratorStep(s,n,o,i,a,"next",e)}function a(e){asyncGeneratorStep(s,n,o,i,a,"throw",e)}i(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$openApi_140,"__esModule",{value:!0}),_$openApi_140.ENV=ENV,_$openApi_140.HTTP=HTTP,_$openApi_140.OpenAPI=void 0;var isQX="undefined"!=typeof $task,isLoon="undefined"!=typeof $loon,isSurge="undefined"!=typeof $httpClient&&!isLoon,isNode=eval('typeof process !== "undefined"'),isStash="undefined"!=typeof $environment&&$environment["stash-version"],isShadowRocket="undefined"!=typeof $rocket,isEgern="object"==("undefined"==typeof egern?"undefined":_typeof(egern)),isLanceX="undefined"!=typeof $native,isGUIforCores="undefined"!=typeof $Plugins,OpenAPI=function(){function OpenAPI(){var name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"untitled",debug=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,OpenAPI),this.name=name,this.debug=debug,this.http=HTTP(),this.env=ENV(),this.node=function(){if(isNode){var fs=eval("require('fs')");return{fs:fs}}return null}(),this.initCache();var delay=function(e,t){return new Promise((function(r){setTimeout(r.bind(null,t),e)}))},_ref;Promise.prototype.delay=(_ref=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this;case 2:return r=e.sent,e.next=5,delay(t,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return _ref.apply(this,arguments)})}return _createClass(OpenAPI,[{key:"initCache",value:function initCache(){if(isQX&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(isLoon||isSurge)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),isGUIforCores&&(this.cache=JSON.parse($Plugins.SubStoreCache.get(this.name)||"{}")),isNode){var basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".",rootPath="".concat(basePath,"/root.json");this.log("Root path: ".concat(rootPath)),this.node.fs.existsSync(rootPath)?this.root=JSON.parse(this.node.fs.readFileSync("".concat(rootPath))):(this.node.fs.writeFileSync(rootPath,JSON.stringify({}),{flag:"wx"}),this.root={});var fpath="".concat(basePath,"/").concat(this.name,".json");this.log("Data path: ".concat(fpath)),this.node.fs.existsSync(fpath)?this.cache=JSON.parse(this.node.fs.readFileSync("".concat(fpath))):(this.node.fs.writeFileSync(fpath,JSON.stringify({}),{flag:"wx"}),this.cache={})}}},{key:"persistCache",value:function persistCache(){var data=JSON.stringify(this.cache,null,2);if(isQX&&$prefs.setValueForKey(data,this.name),(isLoon||isSurge)&&$persistentStore.write(data,this.name),isGUIforCores&&$Plugins.SubStoreCache.set(this.name,data),isNode){var basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".";this.node.fs.writeFileSync("".concat(basePath,"/").concat(this.name,".json"),data,{flag:"w"},(function(e){return console.log(e)})),this.node.fs.writeFileSync("".concat(basePath,"/root.json"),JSON.stringify(this.root,null,2),{flag:"w"},(function(e){return console.log(e)}))}}},{key:"write",value:function(e,t){if(this.log("SET ".concat(t)),-1!==t.indexOf("#")){if(t=t.substr(1),isSurge||isLoon)return $persistentStore.write(e,t);if(isQX)return $prefs.setValueForKey(e,t);if(isNode&&(this.root[t]=e),isGUIforCores)return $Plugins.SubStoreCache.set(t,e)}else this.cache[t]=e;this.persistCache()}},{key:"read",value:function(e){return this.log("READ ".concat(e)),-1===e.indexOf("#")?this.cache[e]:(e=e.substr(1),isSurge||isLoon?$persistentStore.read(e):isQX?$prefs.valueForKey(e):isNode?this.root[e]:isGUIforCores?$Plugins.SubStoreCache.get(e):void 0)}},{key:"delete",value:function(e){if(this.log("DELETE ".concat(e)),-1!==e.indexOf("#")){if(e=e.substr(1),isSurge||isLoon)return $persistentStore.write(null,e);if(isQX)return $prefs.removeValueForKey(e);if(isNode&&delete this.root[e],isGUIforCores)return $Plugins.SubStoreCache.remove(e)}else delete this.cache[e];this.persistCache()}},{key:"notify",value:function notify(title){var subtitle=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",content=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},openURL=options["open-url"],mediaURL=options["media-url"];if(isQX&&$notify(title,subtitle,content,options),isSurge&&$notification.post(title,subtitle,content+"".concat(mediaURL?"\n\u591a\u5a92\u4f53:"+mediaURL:""),{url:openURL}),isLoon){var opts={};openURL&&(opts.openUrl=openURL),mediaURL&&(opts.mediaUrl=mediaURL),"{}"===JSON.stringify(opts)?$notification.post(title,subtitle,content):$notification.post(title,subtitle,content,opts)}if(isNode){var content_=content+(openURL?"\n\u70b9\u51fb\u8df3\u8f6c: ".concat(openURL):"")+(mediaURL?"\n\u591a\u5a92\u4f53: ".concat(mediaURL):"");console.log("".concat(title,"\n").concat(subtitle,"\n").concat(content_,"\n\n"));var push=eval("process.env.SUB_STORE_PUSH_SERVICE");if(push){var url=push.replace("[\u63a8\u9001\u6807\u9898]",encodeURIComponent(title||"Sub-Store")).replace("[\u63a8\u9001\u5185\u5bb9]",encodeURIComponent([subtitle,content_].map((function(e){return e})).join("\n"))),$http=HTTP();$http.get({url:url}).then((function(e){console.log("[Push Service] URL: ".concat(url,"\nRES: ").concat(e.statusCode," ").concat(e.body))})).catch((function(e){console.log("[Push Service] URL: ".concat(url,"\nERROR: ").concat(e))}))}}isGUIforCores&&$Plugins.Notify(title,subtitle+"\n"+content)}},{key:"log",value:function(e){this.debug&&console.log("[".concat(this.name,"] LOG: ").concat(e))}},{key:"info",value:function(e){console.log("[".concat(this.name,"] INFO: ").concat(e))}},{key:"error",value:function(e){console.log("[".concat(this.name,"] ERROR: ").concat(e))}},{key:"wait",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"done",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};isQX||isLoon||isSurge||isGUIforCores?$done(e):isNode&&"undefined"!=typeof $context&&($context.headers=e.headers,$context.statusCode=e.statusCode,$context.body=e.body)}}]),OpenAPI}();function ENV(){return{isQX:isQX,isLoon:isLoon,isSurge:isSurge,isNode:isNode,isStash:isStash,isShadowRocket:isShadowRocket,isEgern:isEgern,isLanceX:isLanceX,isGUIforCores:isGUIforCores}}function HTTP(){var defaultOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{baseURL:""},_ENV=ENV(),isQX=_ENV.isQX,isLoon=_ENV.isLoon,isSurge=_ENV.isSurge,isNode=_ENV.isNode,isGUIforCores=_ENV.isGUIforCores,methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options="string"==typeof options?{url:options}:options;var baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options=_objectSpread(_objectSpread({},defaultOptions),options);var timeout=options.timeout,events=_objectSpread(_objectSpread({},{onRequest:function(){},onResponse:function(e){return e},onTimeout:function(){}}),options.events),worker,timeoutid,_ref2;if(events.onRequest(method,options),options.node&&isSurge){var build=$environment["surge-build"];build&&parseInt(build)>=2407&&(options["policy-descriptor"]=options.node,delete options.node)}isQX?worker=$task.fetch({method:method,url:options.url,headers:options.headers,body:options.body,opts:options.opts}):isLoon||isSurge||isNode?worker=new Promise((function(resolve,reject){var request=isNode?eval("require('request')"):$httpClient,body=options.body,opts=JSON.parse(JSON.stringify(options));if(opts.body=body,!isNode&&opts.timeout){opts.timeout++;var unit="ms";(isSurge||isStash||isShadowRocket)&&(opts.timeout=Math.ceil(opts.timeout/1e3),unit="s")}request[method.toLowerCase()](opts,(function(e,t,r){e?reject(e):resolve({statusCode:t.status||t.statusCode,headers:t.headers,body:r})}))})):isGUIforCores&&(worker=new Promise((_ref2=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,r){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$Plugins.Requests({method:method,url:options.url,headers:options.headers,body:options.body,options:{Proxy:options.proxy,Timeout:options.timeout?options.timeout/1e3:15}});case 3:n=e.sent,t({statusCode:n.status,headers:n.headers,body:n.body}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return _ref2.apply(this,arguments)})));var timer=timeout?new Promise((function(e,t){timeoutid=setTimeout((function(){return events.onTimeout(),t("".concat(method," URL: ").concat(options.url," exceeds the timeout ").concat(timeout," ms"))}),timeout)})):null;return(timer?Promise.race([timer,worker]).then((function(e){return"undefined"!=typeof clearTimeout&&clearTimeout(timeoutid),e})):worker).then((function(e){return events.onResponse(e)}))}var http={};return methods.forEach((function(e){return http[e.toLowerCase()]=function(t){return send(e,t)}})),http}_$openApi_140.OpenAPI=OpenAPI;var _$app_87={};Object.defineProperty(_$app_87,"__esModule",{value:!0}),_$app_87.default=void 0;var _default=new _$openApi_140.OpenAPI("sub-store");_$app_87.default=_default;var _$migration_132={};Object.defineProperty(_$migration_132,"__esModule",{value:!0}),_$migration_132.default=function(){var e;(e=_app.default.read(_$constants_86.SCHEMA_VERSION_KEY))||function(){_app.default.info("Start migrating...");var e=_app.default.read(_$constants_86.SUBS_KEY)||{},t=Object.values(e).map((function(e){return e.source=e.source||"remote",u(e),c(e),e}));_app.default.write(t,_$constants_86.SUBS_KEY);var r=_app.default.read(_$constants_86.COLLECTIONS_KEY)||{},n=Object.values(r).map((function(e){return delete e.ua,u(e),c(e),e}));_app.default.write(n,_$constants_86.COLLECTIONS_KEY);var o=_app.default.read(_$constants_86.ARTIFACTS_KEY)||{},s=Object.values(o);_app.default.write(s,_$constants_86.ARTIFACTS_KEY);var i=_app.default.read(_$constants_86.RULES_KEY)||{},a=Object.values(i);function u(e){var t=e["display-name"];t&&(e.displayName=t,delete e["display-name"])}function c(e){var t=e.process;if(t&&0!==t.length){var r,n=[],o={type:"Quick Setting Operator",args:{udp:"DEFAULT",tfo:"DEFAULT",scert:"DEFAULT","vmess aead":"DEFAULT",useless:"DEFAULT"}},s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,void 0):void 0}}(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}(t);try{for(s.s();!(r=s.n()).done;){var i=r.value;if(i.type)if("Useless Filter"===i.type)o.args.useless="ENABLED";else if("Set Property Operator"===i.type){var a=i.args,u=a.key,c=a.value;switch(u){case"udp":o.args.udp=c?"ENABLED":"DISABLED";break;case"tfo":o.args.tfo=c?"ENABLED":"DISABLED";break;case"skip-cert-verify":o.args.scert=c?"ENABLED":"DISABLED";break;case"aead":o.args["vmess aead"]=c?"ENABLED":"DISABLED"}}else if(-1!==i.type.indexOf("Keyword"));else if("Flag Operator"===i.type){var l=void 0===i.args||i.args;i.args={mode:l?"add":"remove"},n.push(i)}else n.push(i)}}catch(p){s.e(p)}finally{s.f()}n.unshift(o),e.process=n}}_app.default.write(a,_$constants_86.RULES_KEY),delete _app.default.cache.builtin,_app.default.info("Migration complete!")}(),"2.0"!==e&&_app.default.write("2.0",_$constants_86.SCHEMA_VERSION_KEY)};var obj,_app=(obj=_$app_87)&&obj.__esModule?obj:{default:obj};function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _$express_138={};function ___classCallCheck_138(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ___defineProperties_138(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ___createClass_138(e,t,r){return t&&___defineProperties_138(e.prototype,t),r&&___defineProperties_138(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function express(_ref){var $=_ref.substore,port=_ref.port,host=_ref.host,_ENV=(0,_$openApi_140.ENV)(),isNode=_ENV.isNode,DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"};if(isNode){var express_=eval('require("express")'),bodyParser=eval('require("body-parser")'),_app=express_();return _app.use(bodyParser.json({verify:rawBodySaver,limit:"1mb"})),_app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),_app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),_app.use((function(e,t,r){t.set(DEFAULT_HEADERS),r()})),_app.start=function(){var e=_app.listen(port,host,(function(){var t=e.address(),r=t.address,n=t.port;$.info("[BACKEND] ".concat(r,":").concat(n))}))},_app}var handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.method,o=t.url,s=t.headers,i=t.body;s=formatHeaders(s),/json/i.test(s["content-type"])&&(i=JSON.parse(i)),n=n.toUpperCase();var a,u=extractURL(o),c=u.path,l=u.query,p=null,f=0;for(a=r;a<handlers.length;a++)if("ALL"===handlers[a].method||n===handlers[a].method){var h=handlers[a].pattern;patternMatched(h,c)&&h.split("/").length>f&&(p=handlers[a],f=h.split("/").length)}if(p){var d=function(){e(n,o,a)},_={method:n,url:o,path:c,query:l,params:extractPathParams(p.pattern,c),headers:s,body:i},g=Response(),y=p.callback,v=function(e){g.status(500).json({status:"failed",message:"Internal Server Error: ".concat(e)})};if("AsyncFunction"===y.constructor.name)y(_,g,d).catch(v);else try{y(_,g,d)}catch(m){v(m)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach((function(e){app[e.toLowerCase()]=function(t,r){handlers.push({method:e,pattern:t,callback:r})}})),app.route=function(e){var t={};return METHODS_NAMES.forEach((function(r){t[r.toLowerCase()]=function(n){return handlers.push({method:r,pattern:e,callback:n}),t}})),t},app.start=function(){dispatch($request)},app;function rawBodySaver(e,t,r,n){r&&r.length&&(e.rawBody=r.toString(n||"utf8"))}function Response(){var e=200,t=(0,_$openApi_140.ENV)(),r=t.isQX,n=t.isLoon,o=t.isSurge,s=t.isGUIforCores,i=DEFAULT_HEADERS,a={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new(function(){function t(){___classCallCheck_138(this,t)}return ___createClass_138(t,[{key:"status",value:function(t){return e=t,this}},{key:"send",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u={status:r?a[e]:e,body:t,headers:i};r||s?$done(u):(n||o)&&$done({response:u})}},{key:"end",value:function(){this.send()}},{key:"html",value:function(e){this.set("Content-Type","text/html;charset=UTF-8"),this.send(e)}},{key:"json",value:function(e){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(e))}},{key:"set",value:function(e,t){return i[e]=t,this}}]),t}())}}function formatHeaders(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];t[o.toLowerCase()]=e[o]}return t}function patternMatched(e,t){if(e instanceof RegExp&&e.test(t))return!0;if("/"===e)return!0;if(-1===e.indexOf(":")){for(var r=t.split("/"),n=e.split("/"),o=0;o<n.length;o++)if(r[o]!==n[o])return!1;return!0}return!!extractPathParams(e,t)}function extractURL(e){var t=(e.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",r={};if(-1!==e.indexOf("?"))for(var n=e.slice(e.indexOf("?")+1).split("&"),o=0;o<n.length;o++){var s=n[o].split("=");r[s[0]]=s[1]}return{path:t,query:r}}function extractPathParams(e,t){if(-1===e.indexOf(":"))return null;for(var r={},n=0,o=0;n<e.length;n++,o++)if(":"===e[n]){for(var s=[],i=[];"/"!==e[++n]&&n<e.length;)s.push(e[n]);for(;"/"!==t[o]&&o<t.length;)i.push(t[o++]);r[s.join("")]=i.join("")}else if(e[n]!==t[o])return null;return r}Object.defineProperty(_$express_138,"__esModule",{value:!0}),_$express_138.default=express;var _$userAgent_136={};function getUserAgentFromHeaders(e){for(var t="",r="",n=0,o=Object.keys(e);n<o.length;n++){var s=o[n];if(/USER-AGENT/i.test(s)){r=(t=e[s]).toLowerCase();break}}return{UA:t,ua:r}}function getPlatformFromUserAgent(e){var t=e.ua,r=e.UA;return-1!==r.indexOf("Quantumult%20X")?"QX":-1!==r.indexOf("Surfboard")?"Surfboard":-1!==r.indexOf("Surge Mac")?"SurgeMac":-1!==r.indexOf("Surge")?"Surge":-1!==r.indexOf("Decar")||-1!==r.indexOf("Loon")?"Loon":-1!==r.indexOf("Shadowrocket")?"Shadowrocket":-1!==r.indexOf("Stash")?"Stash":"meta"===t||-1!==t.indexOf("clash")&&-1!==t.indexOf("meta")||-1!==t.indexOf("clash-verge")||-1!==t.indexOf("flclash")?"ClashMeta":-1!==t.indexOf("clash")?"Clash":-1!==t.indexOf("v2ray")?"V2Ray":-1!==t.indexOf("sing-box")?"sing-box":"JSON"}Object.defineProperty(_$userAgent_136,"__esModule",{value:!0}),_$userAgent_136.getPlatformFromHeaders=function(e){var t=getUserAgentFromHeaders(e),r=t.UA;return getPlatformFromUserAgent({ua:t.ua,UA:r})},_$userAgent_136.getPlatformFromUserAgent=getPlatformFromUserAgent,_$userAgent_136.getUserAgentFromHeaders=getUserAgentFromHeaders;for(var _$base64Js_2={byteLength:function(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n},toByteArray:function(e){var t,r,n=getLens(e),o=n[0],s=n[1],i=new Arr(function(e,t,r){return 3*(t+r)/4-r}(0,o,s)),a=0,u=s>0?o-4:o;for(r=0;r<u;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=255&t;return 2===s&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,i[a++]=255&t),1===s&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,i[a++]=t>>8&255,i[a++]=255&t),i},fromByteArray:function(e){for(var t,r=e.length,n=r%3,o=[],s=0,i=r-n;s<i;s+=16383)o.push(encodeChunk(e,s,s+16383>i?i:s+16383));return 1===n?(t=e[r-1],o.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),o.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function encodeChunk(e,t,r){for(var n,o,s=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(lookup[(o=n)>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]);return s.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_10={read:function(e,t,r,n,o){var s,i,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,p=r?o-1:0,f=r?-1:1,h=e[t+p];for(p+=f,s=h&(1<<-l)-1,h>>=-l,l+=a;l>0;s=256*s+e[t+p],p+=f,l-=8);for(i=s&(1<<-l)-1,s>>=-l,l+=n;l>0;i=256*i+e[t+p],p+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,n),s-=c}return(h?-1:1)*i*Math.pow(2,s-n)},write:function(e,t,r,n,o,s){var i,a,u,c=8*s-o-1,l=(1<<c)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,d=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+p>=1?f/u:f*Math.pow(2,1-p))*u>=2&&(i++,u/=2),i+p>=l?(a=0,i=l):i+p>=1?(a=(t*u-1)*Math.pow(2,o),i+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),i=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(i=i<<o|a,c+=o;c>0;e[r+h]=255&i,h+=d,i/=256,c-=8);e[r+h-d]|=128*_}},_$jsrsasign_52={};(function(e){(function(){var t,r,n,o,s,i,a,u,c,l,p,f={userAgent:!1},h={},d=d||(t=Math,n=(r={}).lib={},o=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<o;s++){var i=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=i<<24-(n+s)%4*8}else for(s=0;s<o;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var r=[],n=0;n<e;n+=4)r.push(4294967296*t.random()|0);return new s.init(r,e)}}),i=r.enc={},a=i.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var s=t[o>>>2]>>>24-o%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},u=i.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var s=t[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},c=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,a=o/(4*i),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*i,c=t.min(4*u,o);if(u){for(var l=0;l<u;l+=i)this._doProcessBlock(n,l);var p=n.splice(0,u);r.sigBytes-=c}return new s.init(p,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),n.Hasher=l.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),p=r.algo={},r);!function(e){var t,r=(t=d).lib,n=r.Base,o=r.WordArray;(t=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var s=e[n];r.push(s.high),r.push(s.low)}return o.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,o=0;o<r;o++)t[o]=t[o].clone();return e}})}(),d.lib.Cipher||function(e){var t=(h=d).lib,r=t.Base,n=t.WordArray,o=t.BufferedBlockAlgorithm,s=h.enc.Base64,i=h.algo.EvpKDF,a=t.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?_:f).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?_:f).decrypt(e,t,r,n)}}}});t.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=h.mode={},c=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var o=0;o<r;o++)e[t+o]^=n[o]},l=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;c.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),l.Decryptor=l.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=e.slice(t,t+n);r.decryptBlock(e,t),c.call(this,e,t,n),this._prevBlock=o}}),u=u.CBC=l,l=(h.pad={}).Pkcs7={pad:function(e,t){for(var r,o=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,s=[],i=0;i<r;i+=4)s.push(o);r=n.create(s,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:l}),reset:function(){a.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(u=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var o=e.createEncryptor(r,n);return t=o.finalize(t),o=o.cfg,p.create({ciphertext:t,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),h=(h.kdf={}).OpenSSL={execute:function(e,t,r,o){return o||(o=n.random(8)),e=i.create({keySize:t+r}).compute(e,o),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,p.create({key:e,iv:r,salt:o})}},_=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:h}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=f.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,f.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=d,t=e.lib.BlockCipher,r=e.algo,n=[],o=[],s=[],i=[],a=[],u=[],c=[],l=[],p=[],f=[],h=[],_=0;256>_;_++)h[_]=128>_?_<<1:_<<1^283;var g=0,y=0;for(_=0;256>_;_++){var v=(v=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&v^99;n[g]=v,o[v]=g;var m=h[g],b=h[m],w=h[b],E=257*h[v]^16843008*v;s[g]=E<<24|E>>>8,i[g]=E<<16|E>>>16,a[g]=E<<8|E>>>24,u[g]=E,E=16843009*w^65537*b^257*m^16843008*g,c[v]=E<<24|E>>>8,l[v]=E<<16|E>>>16,p[v]=E<<8|E>>>24,f[v]=E,g?(g=m^h[h[h[w^m]]],y^=h[h[y]]):g=y=1}var x=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),o=this._keySchedule=[],s=0;s<r;s++)if(s<t)o[s]=e[s];else{var i=o[s-1];s%t?6<t&&4==s%t&&(i=n[i>>>24]<<24|n[i>>>16&255]<<16|n[i>>>8&255]<<8|n[255&i]):(i=n[(i=i<<8|i>>>24)>>>24]<<24|n[i>>>16&255]<<16|n[i>>>8&255]<<8|n[255&i],i^=x[s/t|0]<<24),o[s]=o[s-t]^i}for(e=this._invKeySchedule=[],t=0;t<r;t++)s=r-t,i=t%4?o[s]:o[s-4],e[t]=4>t||4>=s?i:c[n[i>>>24]]^l[n[i>>>16&255]]^p[n[i>>>8&255]]^f[n[255&i]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,i,a,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,c,l,p,f,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,s,i,a){for(var u=this._nRounds,c=e[t]^r[0],l=e[t+1]^r[1],p=e[t+2]^r[2],f=e[t+3]^r[3],h=4,d=1;d<u;d++){var _=n[c>>>24]^o[l>>>16&255]^s[p>>>8&255]^i[255&f]^r[h++],g=n[l>>>24]^o[p>>>16&255]^s[f>>>8&255]^i[255&c]^r[h++],y=n[p>>>24]^o[f>>>16&255]^s[c>>>8&255]^i[255&l]^r[h++];f=n[f>>>24]^o[c>>>16&255]^s[l>>>8&255]^i[255&p]^r[h++],c=_,l=g,p=y}_=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&f])^r[h++],g=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^r[h++],y=(a[p>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^r[h++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^r[h++],e[t]=_,e[t+1]=g,e[t+2]=y,e[t+3]=f},keySize:8}),e.AES=t._createHelper(r)}(),function(){function e(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function t(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var r=d,n=(o=r.lib).WordArray,o=o.BlockCipher,s=r.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;56>r;r++){var n=i[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(e=this._subKeys=[],n=0;16>n;n++){var o=e[n]=[],s=u[n];for(r=0;24>r;r++)o[r/6|0]|=t[(a[r]-1+s)%28]<<31-r%6,o[4+(r/6|0)]|=t[28+(a[r+24]-1+s)%28]<<31-r%6;for(o[0]=o[0]<<1|o[0]>>>31,r=1;7>r;r++)o[r]>>>=4*(r-1)+3;o[7]=o[7]<<5|o[7]>>>27}for(t=this._invSubKeys=[],r=0;16>r;r++)t[r]=e[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(r,n,o){this._lBlock=r[n],this._rBlock=r[n+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var s=0;16>s;s++){for(var i=o[s],a=this._lBlock,u=this._rBlock,p=0,f=0;8>f;f++)p|=c[f][((u^i[f])&l[f])>>>0];this._lBlock=u,this._rBlock=a^p}o=this._lBlock,this._lBlock=this._rBlock,this._rBlock=o,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),r[n]=this._lBlock,r[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=o._createHelper(p),s=s.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=p.createEncryptor(n.create(e.slice(0,2))),this._des2=p.createEncryptor(n.create(e.slice(2,4))),this._des3=p.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=o._createHelper(s)}(),function(){var e=d,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var o=0;o<r;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,i=0;4>i&&o+.75*i<r;i++)e.push(n.charAt(s>>>6*(3-i)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,n=this._map;(o=n.charAt(64))&&-1!=(o=e.indexOf(o))&&(r=o);for(var o=[],s=0,i=0;i<r;i++)if(i%4){var a=n.indexOf(e.charAt(i-1))<<i%4*2,u=n.indexOf(e.charAt(i))>>>6-i%4*2;o[s>>>2]|=(a|u)<<24-s%4*8,s++}return t.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,r,n,o,s,i){return((e=e+(t&r|~t&n)+o+i)<<s|e>>>32-s)+t}function r(e,t,r,n,o,s,i){return((e=e+(t&n|r&~n)+o+i)<<s|e>>>32-s)+t}function n(e,t,r,n,o,s,i){return((e=e+(t^r^n)+o+i)<<s|e>>>32-s)+t}function o(e,t,r,n,o,s,i){return((e=e+(r^(t|~n))+o+i)<<s|e>>>32-s)+t}for(var s=d,i=(u=s.lib).WordArray,a=u.Hasher,u=s.algo,c=[],l=0;64>l;l++)c[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var i=0;16>i;i++){var a=e[u=s+i];e[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}i=this._hash.words;var u=e[s+0],l=(a=e[s+1],e[s+2]),p=e[s+3],f=e[s+4],h=e[s+5],d=e[s+6],_=e[s+7],g=e[s+8],y=e[s+9],v=e[s+10],m=e[s+11],b=e[s+12],w=e[s+13],E=e[s+14],x=e[s+15],A=t(A=i[0],P=i[1],C=i[2],S=i[3],u,7,c[0]),S=t(S,A,P,C,a,12,c[1]),C=t(C,S,A,P,l,17,c[2]),P=t(P,C,S,A,p,22,c[3]);A=t(A,P,C,S,f,7,c[4]),S=t(S,A,P,C,h,12,c[5]),C=t(C,S,A,P,d,17,c[6]),P=t(P,C,S,A,_,22,c[7]),A=t(A,P,C,S,g,7,c[8]),S=t(S,A,P,C,y,12,c[9]),C=t(C,S,A,P,v,17,c[10]),P=t(P,C,S,A,m,22,c[11]),A=t(A,P,C,S,b,7,c[12]),S=t(S,A,P,C,w,12,c[13]),C=t(C,S,A,P,E,17,c[14]),A=r(A,P=t(P,C,S,A,x,22,c[15]),C,S,a,5,c[16]),S=r(S,A,P,C,d,9,c[17]),C=r(C,S,A,P,m,14,c[18]),P=r(P,C,S,A,u,20,c[19]),A=r(A,P,C,S,h,5,c[20]),S=r(S,A,P,C,v,9,c[21]),C=r(C,S,A,P,x,14,c[22]),P=r(P,C,S,A,f,20,c[23]),A=r(A,P,C,S,y,5,c[24]),S=r(S,A,P,C,E,9,c[25]),C=r(C,S,A,P,p,14,c[26]),P=r(P,C,S,A,g,20,c[27]),A=r(A,P,C,S,w,5,c[28]),S=r(S,A,P,C,l,9,c[29]),C=r(C,S,A,P,_,14,c[30]),A=n(A,P=r(P,C,S,A,b,20,c[31]),C,S,h,4,c[32]),S=n(S,A,P,C,g,11,c[33]),C=n(C,S,A,P,m,16,c[34]),P=n(P,C,S,A,E,23,c[35]),A=n(A,P,C,S,a,4,c[36]),S=n(S,A,P,C,f,11,c[37]),C=n(C,S,A,P,_,16,c[38]),P=n(P,C,S,A,v,23,c[39]),A=n(A,P,C,S,w,4,c[40]),S=n(S,A,P,C,u,11,c[41]),C=n(C,S,A,P,p,16,c[42]),P=n(P,C,S,A,d,23,c[43]),A=n(A,P,C,S,y,4,c[44]),S=n(S,A,P,C,b,11,c[45]),C=n(C,S,A,P,x,16,c[46]),A=o(A,P=n(P,C,S,A,l,23,c[47]),C,S,u,6,c[48]),S=o(S,A,P,C,_,10,c[49]),C=o(C,S,A,P,E,15,c[50]),P=o(P,C,S,A,h,21,c[51]),A=o(A,P,C,S,b,6,c[52]),S=o(S,A,P,C,p,10,c[53]),C=o(C,S,A,P,v,15,c[54]),P=o(P,C,S,A,a,21,c[55]),A=o(A,P,C,S,g,6,c[56]),S=o(S,A,P,C,x,10,c[57]),C=o(C,S,A,P,d,15,c[58]),P=o(P,C,S,A,w,21,c[59]),A=o(A,P,C,S,f,6,c[60]),S=o(S,A,P,C,m,10,c[61]),C=o(C,S,A,P,l,15,c[62]),P=o(P,C,S,A,y,21,c[63]),i[0]=i[0]+A|0,i[1]=i[1]+P|0,i[2]=i[2]+C|0,i[3]=i[3]+S|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32;var s=e.floor(n/4294967296);for(r[15+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,n=0;4>n;n++)o=r[n],r[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=a._createHelper(u),s.HmacMD5=a._createHmacHelper(u)}(Math),function(){var e=d,t=(o=e.lib).WordArray,r=o.Hasher,n=[],o=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],s=r[1],i=r[2],a=r[3],u=r[4],c=0;80>c;c++){if(16>c)n[c]=0|e[t+c];else{var l=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=l<<1|l>>>31}l=(o<<5|o>>>27)+u+n[c],l=20>c?l+(1518500249+(s&i|~s&a)):40>c?l+(1859775393+(s^i^a)):60>c?l+((s&i|s&a|i&a)-1894007588):l+((s^i^a)-899497514),u=a,a=i,i=s<<30|s>>>2,s=o,o=l}r[0]=r[0]+o|0,r[1]=r[1]+s|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(o),e.HmacSHA1=r._createHmacHelper(o)}(),function(e){for(var t=d,r=(o=t.lib).WordArray,n=o.Hasher,o=t.algo,s=[],i=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var l;e:{l=u;for(var p=e.sqrt(l),f=2;f<=p;f++)if(!(l%f)){l=!1;break e}l=!0}l&&(8>c&&(s[c]=a(e.pow(u,.5))),i[c]=a(e.pow(u,1/3)),c++),u++}var h=[];o=o.SHA256=n.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5],l=r[6],p=r[7],f=0;64>f;f++){if(16>f)h[f]=0|e[t+f];else{var d=h[f-15],_=h[f-2];h[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+h[f-7]+((_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10)+h[f-16]}d=p+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+i[f]+h[f],_=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&o^n&s^o&s),p=l,l=c,c=u,u=a+d|0,a=s,s=o,o=n,n=d+_|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+p|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return r[o>>>5]|=128<<24-o%32,r[14+(o+64>>>9<<4)]=e.floor(n/4294967296),r[15+(o+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=n._createHelper(o),t.HmacSHA256=n._createHmacHelper(o)}(Math),function(){var e=d,t=e.lib.WordArray,r=(n=e.algo).SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)}(),function(){function e(){return n.create.apply(n,arguments)}for(var t=d,r=t.lib.Hasher,n=(s=t.x64).Word,o=s.WordArray,s=t.algo,i=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=e();s=s.SHA512=r.extend({_doReset:function(){this._hash=new o.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=(p=this._hash.words)[0],n=p[1],o=p[2],s=p[3],u=p[4],c=p[5],l=p[6],p=p[7],f=r.high,h=r.low,d=n.high,_=n.low,g=o.high,y=o.low,v=s.high,m=s.low,b=u.high,w=u.low,E=c.high,x=c.low,A=l.high,S=l.low,C=p.high,P=p.low,I=f,F=h,k=d,R=_,$=g,O=y,T=v,D=m,B=b,j=w,N=E,L=x,U=A,H=S,M=C,q=P,V=0;80>V;V++){var K=a[V];if(16>V)var G=K.high=0|e[t+2*V],z=K.low=0|e[t+2*V+1];else{G=((z=(G=a[V-15]).high)>>>1|(Y=G.low)<<31)^(z>>>8|Y<<24)^z>>>7;var Y=(Y>>>1|z<<31)^(Y>>>8|z<<24)^(Y>>>7|z<<25),W=((z=(W=a[V-2]).high)>>>19|(X=W.low)<<13)^(z<<3|X>>>29)^z>>>6,X=(X>>>19|z<<13)^(X<<3|z>>>29)^(X>>>6|z<<26),J=(z=a[V-7]).high,Z=(Q=a[V-16]).high,Q=Q.low;G=(G=(G=G+J+((z=Y+z.low)>>>0<Y>>>0?1:0))+W+((z+=X)>>>0<X>>>0?1:0))+Z+((z+=Q)>>>0<Q>>>0?1:0),K.high=G,K.low=z}J=B&N^~B&U,Q=j&L^~j&H,K=I&k^I&$^k&$;var ee=F&R^F&O^R&O,te=(Y=(I>>>28|F<<4)^(I<<30|F>>>2)^(I<<25|F>>>7),W=(F>>>28|I<<4)^(F<<30|I>>>2)^(F<<25|I>>>7),(X=i[V]).high),re=X.low;Z=M+((B>>>14|j<<18)^(B>>>18|j<<14)^(B<<23|j>>>9))+((X=q+((j>>>14|B<<18)^(j>>>18|B<<14)^(j<<23|B>>>9)))>>>0<q>>>0?1:0),M=U,q=H,U=N,H=L,N=B,L=j,B=T+(Z=(Z=(Z=Z+J+((X+=Q)>>>0<Q>>>0?1:0))+te+((X+=re)>>>0<re>>>0?1:0))+G+((X+=z)>>>0<z>>>0?1:0))+((j=D+X|0)>>>0<D>>>0?1:0)|0,T=$,D=O,$=k,O=R,k=I,R=F,I=Z+(K=Y+K+((z=W+ee)>>>0<W>>>0?1:0))+((F=X+z|0)>>>0<X>>>0?1:0)|0}h=r.low=h+F,r.high=f+I+(h>>>0<F>>>0?1:0),_=n.low=_+R,n.high=d+k+(_>>>0<R>>>0?1:0),y=o.low=y+O,o.high=g+$+(y>>>0<O>>>0?1:0),m=s.low=m+D,s.high=v+T+(m>>>0<D>>>0?1:0),w=u.low=w+j,u.high=b+B+(w>>>0<j>>>0?1:0),x=c.low=x+L,c.high=E+N+(x>>>0<L>>>0?1:0),S=l.low=S+H,l.high=A+U+(S>>>0<H>>>0?1:0),P=p.low=P+q,p.high=C+M+(P>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=r._createHelper(s),t.HmacSHA512=r._createHmacHelper(s)}(),function(){var e=d,t=(o=e.x64).Word,r=o.WordArray,n=(o=e.algo).SHA512,o=o.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=n._createHelper(o),e.HmacSHA384=n._createHmacHelper(o)}(),function(){var e=d,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,o=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),i=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=t.create([0,1518500249,1859775393,2400959708,2840853838]),c=t.create([1352829926,1548603684,1836072691,2053994217,0]);n=n.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;16>r;r++){var n=e[w=t+r];e[w]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var l,p,f,h,d,_,g,y,v,m,b,w=this._hash.words,E=(n=u.words,c.words),x=o.words,A=s.words,S=i.words,C=a.words;for(_=l=w[0],g=p=w[1],y=f=w[2],v=h=w[3],m=d=w[4],r=0;80>r;r+=1)b=l+e[t+x[r]]|0,b=16>r?b+((p^f^h)+n[0]):32>r?b+((p&f|~p&h)+n[1]):48>r?b+(((p|~f)^h)+n[2]):64>r?b+((p&h|f&~h)+n[3]):b+((p^(f|~h))+n[4]),b=(b=(b|=0)<<S[r]|b>>>32-S[r])+d|0,l=d,d=h,h=f<<10|f>>>22,f=p,p=b,b=_+e[t+A[r]]|0,b=16>r?b+((g^(y|~v))+E[0]):32>r?b+((g&v|y&~v)+E[1]):48>r?b+(((g|~y)^v)+E[2]):64>r?b+((g&y|~g&v)+E[3]):b+((g^y^v)+E[4]),b=(b=(b|=0)<<C[r]|b>>>32-C[r])+m|0,_=m,m=v,v=y<<10|y>>>22,y=g,g=b;b=w[1]+f+v|0,w[1]=w[2]+h+m|0,w[2]=w[3]+d+_|0,w[3]=w[4]+l+g|0,w[4]=w[0]+p+y|0,w[0]=b},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;for(t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,r=0;5>r;r++)n=t[r],t[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.RIPEMD160=r._createHelper(n),e.HmacRIPEMD160=r._createHmacHelper(n)}(Math),function(){var e=d,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,r){e=this._hasher=new e.init,"string"==typeof r&&(r=t.parse(r));var n=e.blockSize,o=4*n;r.sigBytes>o&&(r=e.finalize(r)),r.clamp();for(var s=this._oKey=r.clone(),i=this._iKey=r.clone(),a=s.words,u=i.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=i.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=d,r=(e=t.lib).Base,n=e.WordArray,o=(e=t.algo).HMAC,s=e.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var r=this.cfg,s=o.create(r.hasher,e),i=n.create(),a=n.create([1]),u=i.words,c=a.words,l=r.keySize;for(r=r.iterations;u.length<l;){var p=s.update(t).finalize(a);s.reset();for(var f=p.words,h=f.length,d=p,_=1;_<r;_++){d=s.finalize(d),s.reset();for(var g=d.words,y=0;y<h;y++)f[y]^=g[y]}i.concat(p),c[0]++}return i.sigBytes=4*l,i}});t.PBKDF2=function(e,t,r){return s.create(r).compute(e,t)}}();var _,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function y(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=g.charAt(r>>6)+g.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=g.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=g.charAt(r>>2)+g.charAt((3&r)<<4)),"=";(3&n.length)>0;)n+="=";return n}function v(e){var t,r,n,o="",s=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(n=g.indexOf(e.charAt(t)))<0||(0==s?(o+=S(n>>2),r=3&n,s=1):1==s?(o+=S(r<<2|n>>4),r=15&n,s=2):2==s?(o+=S(r),o+=S(n>>2),r=3&n,s=3):(o+=S(r<<2|n>>4),o+=S(15&n),s=0));return 1==s&&(o+=S(r<<2)),o}function m(e){var t,r=v(e),n=new Array;for(t=0;2*t<r.length;++t)n[t]=parseInt(r.substring(2*t,2*t+2),16);return n}function b(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function w(){return new b(null)}"Microsoft Internet Explorer"==f.appName?(b.prototype.am=function(e,t,r,n,o,s){for(var i=32767&t,a=t>>15;--s>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*i;o=((u=i*u+((32767&l)<<15)+r[n]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),r[n++]=1073741823&u}return o},_=30):"Netscape"!=f.appName?(b.prototype.am=function(e,t,r,n,o,s){for(;--s>=0;){var i=t*this[e++]+r[n]+o;o=Math.floor(i/67108864),r[n++]=67108863&i}return o},_=26):(b.prototype.am=function(e,t,r,n,o,s){for(var i=16383&t,a=t>>14;--s>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*i;o=((u=i*u+((16383&l)<<14)+r[n]+o)>>28)+(l>>14)+a*c,r[n++]=268435455&u}return o},_=28),b.prototype.DB=_,b.prototype.DM=(1<<_)-1,b.prototype.DV=1<<_,b.prototype.FV=Math.pow(2,52),b.prototype.F1=52-_,b.prototype.F2=2*_-52;var E,x,A=new Array;for(E="0".charCodeAt(0),x=0;x<=9;++x)A[E++]=x;for(E="a".charCodeAt(0),x=10;x<36;++x)A[E++]=x;for(E="A".charCodeAt(0),x=10;x<36;++x)A[E++]=x;function S(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function C(e,t){var r=A[e.charCodeAt(t)];return null==r?-1:r}function P(e){var t=w();return t.fromInt(e),t}function I(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function F(e){this.m=e}function k(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function R(e,t){return e&t}function $(e,t){return e|t}function O(e,t){return e^t}function T(e,t){return e&~t}function D(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function B(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function j(){}function N(e){return e}function L(e){this.r2=w(),this.q3=w(),b.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}F.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},F.prototype.revert=function(e){return e},F.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},F.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},F.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},k.prototype.convert=function(e){var t=w();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(b.ZERO)>0&&this.m.subTo(t,t),t},k.prototype.revert=function(e){var t=w();return e.copyTo(t),this.reduce(t),t},k.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},b.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},b.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,o=!1,s=0;--n>=0;){var i=8==r?255&e[n]:C(e,n);i<0?"-"==e.charAt(n)&&(o=!0):(o=!1,0==s?this[this.t++]=i:s+r>this.DB?(this[this.t-1]|=(i&(1<<this.DB-s)-1)<<s,this[this.t++]=i>>this.DB-s):this[this.t-1]|=i<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&b.ZERO.subTo(this,this)},b.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},b.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},b.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},b.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,o=this.DB-n,s=(1<<o)-1,i=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+i+1]=this[r]>>o|a,a=(this[r]&s)<<n;for(r=i-1;r>=0;--r)t[r]=0;t[i]=a,t.t=this.t+i+1,t.s=this.s,t.clamp()},b.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,o=this.DB-n,s=(1<<n)-1;t[0]=this[r]>>n;for(var i=r+1;i<this.t;++i)t[i-r-1]|=(this[i]&s)<<o,t[i-r]=this[i]>>n;n>0&&(t[this.t-r-1]|=(this.s&s)<<o),t.t=this.t-r,t.clamp()}},b.prototype.subTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},b.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),o=r.t;for(t.t=o+n.t;--o>=0;)t[o]=0;for(o=0;o<n.t;++o)t[o+r.t]=r.am(0,n[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&b.ZERO.subTo(t,t)},b.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},b.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=w());var s=w(),i=this.s,a=e.s,u=this.DB-I(n[n.t-1]);u>0?(n.lShiftTo(u,s),o.lShiftTo(u,r)):(n.copyTo(s),o.copyTo(r));var c=s.t,l=s[c-1];if(0!=l){var p=l*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),f=this.FV/p,h=(1<<this.F1)/p,d=1<<this.F2,_=r.t,g=_-c,y=null==t?w():t;for(s.dlShiftTo(g,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),b.ONE.dlShiftTo(c,y),y.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--g>=0;){var v=r[--_]==l?this.DM:Math.floor(r[_]*f+(r[_-1]+d)*h);if((r[_]+=s.am(0,v,r,g,0,c))<v)for(s.dlShiftTo(g,y),r.subTo(y,r);r[_]<--v;)r.subTo(y,r)}null!=t&&(r.drShiftTo(c,t),i!=a&&b.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),i<0&&b.ZERO.subTo(r,r)}}},b.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},b.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},b.prototype.exp=function(e,t){if(e>4294967295||e<1)return b.ONE;var r=w(),n=w(),o=t.convert(this),s=I(e)-1;for(o.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,o,r);else{var i=r;r=n,n=i}return t.revert(r)},b.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,o=!1,s="",i=this.t,a=this.DB-i*this.DB%t;if(i-- >0)for(a<this.DB&&(r=this[i]>>a)>0&&(o=!0,s=S(r));i>=0;)a<t?(r=(this[i]&(1<<a)-1)<<t-a,r|=this[--i]>>(a+=this.DB-t)):(r=this[i]>>(a-=t)&n,a<=0&&(a+=this.DB,--i)),r>0&&(o=!0),o&&(s+=S(r));return o?s:"0"},b.prototype.negate=function(){var e=w();return b.ZERO.subTo(this,e),e},b.prototype.abs=function(){return this.s<0?this.negate():this},b.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},b.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+I(this[this.t-1]^this.s&this.DM)},b.prototype.mod=function(e){var t=w();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(b.ZERO)>0&&e.subTo(t,t),t},b.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new F(t):new k(t),this.exp(e,r)},b.ZERO=P(0),b.ONE=P(1),j.prototype.convert=N,j.prototype.revert=N,j.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},j.prototype.sqrTo=function(e,t){e.squareTo(t)},L.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=w();return e.copyTo(t),this.reduce(t),t},L.prototype.revert=function(e){return e},L.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},L.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},L.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var U=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],H=(1<<26)/U[U.length-1];function M(){this.i=0,this.j=0,this.S=new Array}b.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},b.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=P(r),o=w(),s=w(),i="";for(this.divRemTo(n,o,s);o.signum()>0;)i=(r+s.intValue()).toString(e).substr(1)+i,o.divRemTo(n,o,s);return s.intValue().toString(e)+i},b.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),o=!1,s=0,i=0,a=0;a<e.length;++a){var u=C(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(o=!0):(i=t*i+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(i,0),s=0,i=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(i,0)),o&&b.ZERO.subTo(this,this)},b.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(b.ONE.shiftLeft(e-1),$,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(b.ONE.shiftLeft(e-1),this);else{var n=new Array,o=7&e;n.length=1+(e>>3),t.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},b.prototype.bitwiseTo=function(e,t,r){var n,o,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(o=e.s&this.DM,n=s;n<this.t;++n)r[n]=t(this[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=s;n<e.t;++n)r[n]=t(o,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},b.prototype.changeBit=function(e,t){var r=b.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},b.prototype.addTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},b.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},b.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},b.prototype.multiplyLowerTo=function(e,t,r){var n,o=Math.min(this.t+e.t,t);for(r.s=0,r.t=o;o>0;)r[--o]=0;for(n=r.t-this.t;o<n;++o)r[o+this.t]=this.am(0,e[o],r,o,0,this.t);for(n=Math.min(e.t,t);o<n;++o)this.am(0,e[o],r,o,0,t-o);r.clamp()},b.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},b.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},b.prototype.millerRabin=function(e){var t=this.subtract(b.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>U.length&&(e=U.length);for(var o=w(),s=0;s<e;++s){o.fromInt(U[Math.floor(Math.random()*U.length)]);var i=o.modPow(n,this);if(0!=i.compareTo(b.ONE)&&0!=i.compareTo(t)){for(var a=1;a++<r&&0!=i.compareTo(t);)if(0==(i=i.modPowInt(2,this)).compareTo(b.ONE))return!1;if(0!=i.compareTo(t))return!1}}return!0},b.prototype.clone=function(){var e=w();return this.copyTo(e),e},b.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},b.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},b.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},b.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},b.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,o=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[o++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(t[o++]=r);return t},b.prototype.equals=function(e){return 0==this.compareTo(e)},b.prototype.min=function(e){return this.compareTo(e)<0?this:e},b.prototype.max=function(e){return this.compareTo(e)>0?this:e},b.prototype.and=function(e){var t=w();return this.bitwiseTo(e,R,t),t},b.prototype.or=function(e){var t=w();return this.bitwiseTo(e,$,t),t},b.prototype.xor=function(e){var t=w();return this.bitwiseTo(e,O,t),t},b.prototype.andNot=function(e){var t=w();return this.bitwiseTo(e,T,t),t},b.prototype.not=function(){for(var e=w(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},b.prototype.shiftLeft=function(e){var t=w();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},b.prototype.shiftRight=function(e){var t=w();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},b.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+D(this[e]);return this.s<0?this.t*this.DB:-1},b.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=B(this[r]^t);return e},b.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},b.prototype.setBit=function(e){return this.changeBit(e,$)},b.prototype.clearBit=function(e){return this.changeBit(e,T)},b.prototype.flipBit=function(e){return this.changeBit(e,O)},b.prototype.add=function(e){var t=w();return this.addTo(e,t),t},b.prototype.subtract=function(e){var t=w();return this.subTo(e,t),t},b.prototype.multiply=function(e){var t=w();return this.multiplyTo(e,t),t},b.prototype.divide=function(e){var t=w();return this.divRemTo(e,t,null),t},b.prototype.remainder=function(e){var t=w();return this.divRemTo(e,null,t),t},b.prototype.divideAndRemainder=function(e){var t=w(),r=w();return this.divRemTo(e,t,r),new Array(t,r)},b.prototype.modPow=function(e,t){var r,n,o=e.bitLength(),s=P(1);if(o<=0)return s;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new F(t):t.isEven()?new L(t):new k(t);var i=new Array,a=3,u=r-1,c=(1<<r)-1;if(i[1]=n.convert(this),r>1){var l=w();for(n.sqrTo(i[1],l);a<=c;)i[a]=w(),n.mulTo(l,i[a-2],i[a]),a+=2}var p,f,h=e.t-1,d=!0,_=w();for(o=I(e[h])-1;h>=0;){for(o>=u?p=e[h]>>o-u&c:(p=(e[h]&(1<<o+1)-1)<<u-o,h>0&&(p|=e[h-1]>>this.DB+o-u)),a=r;0==(1&p);)p>>=1,--a;if((o-=a)<0&&(o+=this.DB,--h),d)i[p].copyTo(s),d=!1;else{for(;a>1;)n.sqrTo(s,_),n.sqrTo(_,s),a-=2;a>0?n.sqrTo(s,_):(f=s,s=_,_=f),n.mulTo(_,i[p],s)}for(;h>=0&&0==(e[h]&1<<o);)n.sqrTo(s,_),f=s,s=_,_=f,--o<0&&(o=this.DB-1,--h)}return n.revert(s)},b.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return b.ZERO;for(var r=e.clone(),n=this.clone(),o=P(1),s=P(0),i=P(0),a=P(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&o.subTo(i,o),s.subTo(a,s)):(n.subTo(r,n),t&&i.subTo(o,i),a.subTo(s,a))}return 0!=n.compareTo(b.ONE)?b.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},b.prototype.pow=function(e){return this.exp(e,new j)},b.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var o=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(o<s&&(s=o),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},b.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=U[U.length-1]){for(t=0;t<U.length;++t)if(r[0]==U[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<U.length;){for(var n=U[t],o=t+1;o<U.length&&n<H;)n*=U[o++];for(n=r.modInt(n);t<o;)if(n%U[t++]==0)return!1}return r.millerRabin(e)},b.prototype.square=function(){var e=w();return this.squareTo(e),e},M.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},M.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var q,V,K;function G(){var e;e=(new Date).getTime(),V[K++]^=255&e,V[K++]^=e>>8&255,V[K++]^=e>>16&255,V[K++]^=e>>24&255,K>=256&&(K-=256)}if(null==V){var z;if(V=new Array,K=0,void 0!==h&&(void 0!==h.crypto||void 0!==h.msCrypto)){var Y=h.crypto||h.msCrypto;if(Y.getRandomValues){var W=new Uint8Array(32);for(Y.getRandomValues(W),z=0;z<32;++z)V[K++]=W[z]}else if("Netscape"==f.appName&&f.appVersion<"5"){var X=h.crypto.random(32);for(z=0;z<X.length;++z)V[K++]=255&X.charCodeAt(z)}}for(;K<256;)z=Math.floor(65536*Math.random()),V[K++]=z>>>8,V[K++]=255&z;K=0,G()}function J(){if(null==q){for(G(),(q=new M).init(V),K=0;K<V.length;++K)V[K]=0;K=0}return q.next()}function Z(){}function Q(e,t){return new b(e,t)}function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function te(e,t){this.x=t,this.q=e}function re(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=null==n?b.ONE:n,this.zinv=null}function ne(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new re(this,null,null)}Z.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=J()},ee.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ee.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=Q(e,16),this.e=parseInt(t,16)}},ee.prototype.type="RSA",ee.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},ee.prototype.setPrivate=function(e,t,r){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=r;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=Q(e,16),this.e=parseInt(t,16),this.d=Q(r,16)}},ee.prototype.setPrivateEx=function(e,t,r,n,o,s,i,a){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=Q(e,16),this.e=parseInt(t,16),this.d=Q(r,16),this.p=Q(n,16),this.q=Q(o,16),this.dmp1=Q(s,16),this.dmq1=Q(i,16),this.coeff=Q(a,16)},ee.prototype.generate=function(e,t){var r=new Z,n=e>>1;this.e=parseInt(t,16);for(var o=new b(t,16),s=e/2-100,i=b.ONE.shiftLeft(s);;){for(;this.p=new b(e-n,1,r),0!=this.p.subtract(b.ONE).gcd(o).compareTo(b.ONE)||!this.p.isProbablePrime(10););for(;this.q=new b(n,1,r),0!=this.q.subtract(b.ONE).gcd(o).compareTo(b.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var u=this.q.subtract(this.p).abs();if(!(u.bitLength()<s||u.compareTo(i)<=0)){var c=this.p.subtract(b.ONE),l=this.q.subtract(b.ONE),p=c.multiply(l);if(0==p.gcd(o).compareTo(b.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=o.modInverse(p),this.dmp1=this.d.mod(c),this.dmq1=this.d.mod(l),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},te.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},te.prototype.toBigInteger=function(){return this.x},te.prototype.negate=function(){return new te(this.q,this.x.negate().mod(this.q))},te.prototype.add=function(e){return new te(this.q,this.x.add(e.toBigInteger()).mod(this.q))},te.prototype.subtract=function(e){return new te(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},te.prototype.multiply=function(e){return new te(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},te.prototype.square=function(){return new te(this.q,this.x.square().mod(this.q))},te.prototype.divide=function(e){return new te(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},te.prototype.sqrt=function(){return new te(this.q,this.x.sqrt().mod(this.q))},re.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},re.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},re.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(b.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(b.ZERO))},re.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(b.ZERO)&&!this.y.toBigInteger().equals(b.ZERO)},re.prototype.negate=function(){return new re(this.curve,this.x,this.y.negate(),this.z)},re.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(b.ZERO.equals(r))return b.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new b("3"),o=this.x.toBigInteger(),s=this.y.toBigInteger(),i=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),a=i.multiply(r),u=o.multiply(i),c=t.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(a).multiply(r).mod(this.curve.q),p=u.multiply(n).multiply(t).subtract(s.multiply(a)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new re(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(p),f)},re.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new b("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),o=n.multiply(r).mod(this.curve.q),s=this.curve.a.toBigInteger(),i=t.square().multiply(e);b.ZERO.equals(s)||(i=i.add(this.z.square().multiply(s)));var a=(i=i.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(o)).shiftLeft(1).multiply(n).mod(this.curve.q),u=i.multiply(e).multiply(t).subtract(o.shiftLeft(1)).shiftLeft(2).multiply(o).subtract(i.square().multiply(i)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new re(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},re.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new b("3")),o=this.negate(),s=this,i=this.curve.q.subtract(e),a=i.multiply(new b("3")),u=new re(this.curve,this.x,this.y),c=u.negate();for(t=n.bitLength()-2;t>0;--t){s=s.twice();var l=n.testBit(t);l!=r.testBit(t)&&(s=s.add(l?this:o))}for(t=a.bitLength()-2;t>0;--t){u=u.twice();var p=a.testBit(t);p!=i.testBit(t)&&(u=u.add(p?u:c))}return s},re.prototype.multiplyTwo=function(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var o=this.curve.getInfinity(),s=this.add(t);n>=0;)o=o.twice(),e.testBit(n)?o=r.testBit(n)?o.add(s):o.add(this):r.testBit(n)&&(o=o.add(t)),--n;return o},ne.prototype.getQ=function(){return this.q},ne.prototype.getA=function(){return this.a},ne.prototype.getB=function(){return this.b},ne.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ne.prototype.getInfinity=function(){return this.infinity},ne.prototype.fromBigInteger=function(e){return new te(this.q,e)},ne.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2),r=(e.substr(2),this.fromBigInteger(new b(a,16))),n=this.getA(),o=this.getB(),s=r.square().add(n).multiply(r).add(o).sqrt();return"03"==t&&(s=s.negate()),new re(this,r,s);case 4:case 6:case 7:var i=(e.length-2)/2,a=e.substr(2,i),u=e.substr(i+2,i);return new re(this,this.fromBigInteger(new b(a,16)),this.fromBigInteger(new b(u,16)));default:return null}},te.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},re.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),o=t(r,32);return e?n.isEven()?o.unshift(2):o.unshift(3):(o.unshift(4),o=o.concat(t(n,32))),o},re.decodeFrom=function(e,t){t[0];var r=t.length-1,n=t.slice(1,1+r/2),o=t.slice(1+r/2,1+r);n.unshift(0),o.unshift(0);var s=new b(n),i=new b(o);return new re(e,e.fromBigInteger(s),e.fromBigInteger(i))},re.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,n=t.substr(2,r/2),o=t.substr(2+r/2,r/2),s=new b(n,16),i=new b(o,16);return new re(e,e.fromBigInteger(s),e.fromBigInteger(i))},re.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),n=r.square().subtract(this.x).subtract(e.x),o=r.multiply(this.x.subtract(n)).subtract(this.y);return new re(this.curve,n,o)},re.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(b.valueOf(2)),t=this.curve.fromBigInteger(b.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),o=r.multiply(this.x.subtract(n)).subtract(this.y);return new re(this.curve,n,o)},re.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new b("3")),o=this.negate(),s=this;for(t=n.bitLength()-2;t>0;--t){s=s.twice();var i=n.testBit(t);i!=r.testBit(t)&&(s=s.add2D(i?this:o))}return s},re.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),o=this.curve.getQ(),s=t.multiply(t).mod(o),i=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(o);return s.equals(i)},re.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},re.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(b.ONE)<0||t.compareTo(e.subtract(b.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(b.ONE)<0||r.compareTo(e.subtract(b.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var oe=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(e,t,n){return t?r[t]:String.fromCharCode(parseInt(n,16))}var o=new String(""),s=Object.hasOwnProperty;return function(r,i){var a,u,c=r.match(e),l=c[0],p=!1;"{"===l?a={}:"["===l?a=[]:(a=[],p=!0);for(var f=[a],h=1-p,d=c.length;h<d;++h){var _;switch((l=c[h]).charCodeAt(0)){default:(_=f[0])[u||_.length]=+l,u=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(t,n)),_=f[0],!u){if(!(_ instanceof Array)){u=l||o;break}u=_.length}_[u]=l,u=void 0;break;case 91:_=f[0],f.unshift(_[u||_.length]=[]),u=void 0;break;case 93:f.shift();break;case 102:(_=f[0])[u||_.length]=!1,u=void 0;break;case 110:(_=f[0])[u||_.length]=null,u=void 0;break;case 116:(_=f[0])[u||_.length]=!0,u=void 0;break;case 123:_=f[0],f.unshift(_[u||_.length]={}),u=void 0;break;case 125:f.shift()}}if(p){if(1!==f.length)throw new Error;a=a[0]}else if(f.length)throw new Error;if(i){var g=function(e,t){var r=e[t];if(r&&"object"==typeof r){var n=null;for(var o in r)if(s.call(r,o)&&r!==e){var a=g(r,o);void 0!==a?r[o]=a:(n||(n=[]),n.push(o))}if(n)for(var u=n.length;--u>=0;)delete r[n[u]]}return i.call(e,t,r)};a=g({"":a},"")}return a}}();void 0!==se&&se||(se={}),void 0!==se.asn1&&se.asn1||(se.asn1={}),se.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){return Ge(e)},this.getPEMStringFromHex=function(e,t){return Se(e,t)},this.newObject=function(e){var t=se.asn1,r=t.ASN1Object,n=t.DERBoolean,o=t.DERInteger,s=t.DERBitString,i=t.DEROctetString,a=t.DERNull,u=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,p=t.DERNumericString,f=t.DERPrintableString,h=t.DERTeletexString,d=t.DERIA5String,_=t.DERUTCTime,g=t.DERGeneralizedTime,y=t.DERVisibleString,v=t.DERBMPString,m=t.DERSequence,b=t.DERSet,w=t.DERTaggedObject,E=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var x=Object.keys(e);if(1!=x.length)throw new Error("key of param shall be only one.");var A=x[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+A+":"))throw new Error("undefined key: "+A);if("bool"==A)return new n(e[A]);if("int"==A)return new o(e[A]);if("bitstr"==A)return new s(e[A]);if("octstr"==A)return new i(e[A]);if("null"==A)return new a(e[A]);if("oid"==A)return new u(e[A]);if("enum"==A)return new c(e[A]);if("utf8str"==A)return new l(e[A]);if("numstr"==A)return new p(e[A]);if("prnstr"==A)return new f(e[A]);if("telstr"==A)return new h(e[A]);if("ia5str"==A)return new d(e[A]);if("utctime"==A)return new _(e[A]);if("gentime"==A)return new g(e[A]);if("visstr"==A)return new y(e[A]);if("bmpstr"==A)return new v(e[A]);if("asn1"==A)return new r(e[A]);if("seq"==A){for(var S=e[A],C=[],P=0;P<S.length;P++){var I=E(S[P]);C.push(I)}return new m({array:C})}if("set"==A){for(S=e[A],C=[],P=0;P<S.length;P++)I=E(S[P]),C.push(I);return new b({array:C})}if("tag"==A){var F=e[A];if("[object Array]"===Object.prototype.toString.call(F)&&3==F.length){var k=E(F[2]);return new w({tag:F[0],explicit:F[1],obj:k})}return new w(F)}},this.jsonToASN1HEX=function(e){return this.newObject(e).tohex()}},se.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),o=2;o<e.length;o+=2){var s=("00000000"+parseInt(e.substr(o,2),16).toString(2)).slice(-8);n+=s.substr(1,7),"0"==s.substr(0,1)&&(t=t+"."+new b(n,2).toString(10),n="")}return t},se.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=new b(e,10).toString(2),o=7-n.length%7;7==o&&(o=0);for(var s="",i=0;i<o;i++)s+="0";for(n=s+n,i=0;i<n.length-1;i+=7){var a=n.substr(i,7);i!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",o=e.split("."),s=40*parseInt(o[0])+parseInt(o[1]);n+=t(s),o.splice(0,2);for(var i=0;i<o.length;i++)n+=r(o[i]);return n},se.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+e.toString(16));return(128+r).toString(16)+t},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},se.asn1.DERAbstractString=function(e){se.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ye(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},Qe(se.asn1.DERAbstractString,se.asn1.ASN1Object),se.asn1.DERAbstractTime=function(e){se.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,r){var n=this.zeroPadding,o=this.localDateToUTC(e),s=String(o.getFullYear());"utc"==t&&(s=s.substr(2,2));var i=s+n(String(o.getMonth()+1),2)+n(String(o.getDate()),2)+n(String(o.getHours()),2)+n(String(o.getMinutes()),2)+n(String(o.getSeconds()),2);if(!0===r){var a=o.getMilliseconds();if(0!=a){var u=n(String(a),3);i=i+"."+(u=u.replace(/[0]+$/,""))}}return i+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.setByParam=function(e){this.hV=null,this.hTLV=null,this.params=e},this.getString=function(){},this.setString=function(e){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=e},this.setByDate=function(e){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=e},this.setByDateValue=function(e,t,r,n,o,s){var i=new Date(Date.UTC(e,t-1,r,n,o,s,0));this.setByDate(i)},this.getFreshValueHex=function(){return this.hV}},Qe(se.asn1.DERAbstractTime,se.asn1.ASN1Object),se.asn1.DERAbstractStructured=function(e){se.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},Qe(se.asn1.DERAbstractStructured,se.asn1.ASN1Object),se.asn1.DERBoolean=function(e){se.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},Qe(se.asn1.DERBoolean,se.asn1.ASN1Object),se.asn1.DERInteger=function(e){se.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var t=Ge;this.setByBigInteger=function(e){this.isModified=!0,this.params={bigint:e}},this.setByInteger=function(e){this.isModified=!0,this.params=e},this.setValueHex=function(e){this.isModified=!0,this.params={hex:e}},this.getFreshValueHex=function(){var e=this.params,r=null;if(null==e)throw new Error("value not set");if("object"==typeof e&&null!=e.hex)return this.hV=e.hex,this.hV;if("number"==typeof e)r=new b(String(e),10);else if(null!=e.int)r=new b(String(e.int),10);else{if(null==e.bigint)throw new Error("wrong parameter");r=e.bigint}return this.hV=t(r),this.hV},null!=e&&(this.params=e)},Qe(se.asn1.DERInteger,se.asn1.ASN1Object),se.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=se.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}se.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0),e+="0000000".substr(0,t);for(var r="",n=0;n<e.length-1;n+=8){var o=e.substr(n,8),s=parseInt(o,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},Qe(se.asn1.DERBitString,se.asn1.ASN1Object),se.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=se.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}se.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},Qe(se.asn1.DEROctetString,se.asn1.DERAbstractString),se.asn1.DERNull=function(){se.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Qe(se.asn1.DERNull,se.asn1.ASN1Object),se.asn1.DERObjectIdentifier=function(e){se.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=qe(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=se.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},Qe(se.asn1.DERObjectIdentifier,se.asn1.ASN1Object),se.asn1.DEREnumerated=function(e){se.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=Ge(e)},this.setByInteger=function(e){var t=new b(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},Qe(se.asn1.DEREnumerated,se.asn1.ASN1Object),se.asn1.DERUTF8String=function(e){se.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},Qe(se.asn1.DERUTF8String,se.asn1.DERAbstractString),se.asn1.DERNumericString=function(e){se.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},Qe(se.asn1.DERNumericString,se.asn1.DERAbstractString),se.asn1.DERPrintableString=function(e){se.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},Qe(se.asn1.DERPrintableString,se.asn1.DERAbstractString),se.asn1.DERTeletexString=function(e){se.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},Qe(se.asn1.DERTeletexString,se.asn1.DERAbstractString),se.asn1.DERIA5String=function(e){se.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},Qe(se.asn1.DERIA5String,se.asn1.DERAbstractString),se.asn1.DERVisibleString=function(e){se.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},Qe(se.asn1.DERVisibleString,se.asn1.DERAbstractString),se.asn1.DERBMPString=function(e){se.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},Qe(se.asn1.DERBMPString,se.asn1.DERAbstractString),se.asn1.DERUTCTime=function(e){se.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(null==this.params&&(e={date:new Date}),"string"==typeof e){if(!e.match(/^[0-9]{12}Z$/)&&!e.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+e);this.hV=fe(e)}else if(null!=e.str)this.hV=fe(e.str);else if(null==e.date&&1==e.millis){var t=new Date;this.hV=fe(this.formatDate(t,"utc",!0))}else if(null!=e.date&&e.date instanceof Date){var r=!0===e.millis;this.hV=fe(this.formatDate(e.date,"utc",r))}else e instanceof Date&&(this.hV=fe(this.formatDate(e,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=e&&this.setByParam(e)},Qe(se.asn1.DERUTCTime,se.asn1.DERAbstractTime),se.asn1.DERGeneralizedTime=function(e){se.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var e=this.params;if(null==this.params&&(e={date:new Date}),"string"==typeof e){if(!e.match(/^[0-9]{14}Z$/)&&!e.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+e);this.hV=fe(e)}else if(null!=e.str)this.hV=fe(e.str);else if(null==e.date&&1==e.millis){var t=new Date;this.hV=fe(this.formatDate(t,"gen",!0))}else if(null!=e.date&&e.date instanceof Date){var r=!0===e.millis;this.hV=fe(this.formatDate(e.date,"gen",r))}else e instanceof Date&&(this.hV=fe(this.formatDate(e,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=e&&this.setByParam(e)},Qe(se.asn1.DERGeneralizedTime,se.asn1.DERAbstractTime),se.asn1.DERSequence=function(e){se.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].tohex();return this.hV=e,this.hV}},Qe(se.asn1.DERSequence,se.asn1.DERAbstractStructured),se.asn1.DERSet=function(e){se.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.tohex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},Qe(se.asn1.DERSet,se.asn1.DERAbstractStructured),se.asn1.DERTaggedObject=function(e){se.asn1.DERTaggedObject.superclass.constructor.call(this);var t=se.asn1,r=ue,n=r.getV,o=(r.isASN1HEX,t.ASN1Util.newObject);this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(e,t,r){this.params={tag:t,explicit:e,obj:r}},this.getFreshValueHex=function(){var e=this.params;if(null==e.explicit&&(e.explicit=!0),null!=e.tage&&(e.tag=e.tage,e.explicit=!0),null!=e.tagi&&(e.tag=e.tagi,e.explicit=!1),null!=e.str)this.hV=ye(e.str);else if(null!=e.hex)this.hV=e.hex;else{if(null==e.obj)throw new Error("str, hex nor obj not specified");var r;e.obj instanceof t.ASN1Object?r=e.obj.tohex():"object"==typeof e.obj&&(r=o(e.obj).tohex()),e.explicit?this.hV=r:this.hV=n(r,0)}return null==e.tag&&(e.tag="a0"),this.hT=e.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Qe(se.asn1.DERTaggedObject,se.asn1.ASN1Object);var se,ie,ae,ue=new function(){};function ce(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function le(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function pe(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function fe(e){return pe(ce(e))}function he(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function de(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function _e(e){return e.length%2==1&&(e="0"+e),he(y(e))}function ge(e){return v(de(e))}function ye(e){return ke(Le(e)).toLowerCase()}function ve(e){try{return decodeURIComponent(Re(e))}catch(r){return null}}function me(e){return ve(function(e){for(var t=e.match(/.{1,2}/g),r=[],n=0;n<t.length;n++){var o=parseInt(t[n],16);161<=o&&o<=191?(r.push("c2"),r.push(t[n])):192<=o&&o<=255?(r.push("c3"),r.push((o-64).toString(16))):r.push(t[n])}return r.join("")}(e))}function be(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function we(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function Ee(e){return y(e)}function xe(e,t){return(e=e.replace(new RegExp("(.{"+t+"})","g"),"$1\r\n")).replace(/\s+$/,"")}function Ae(e){return v(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Se(e,t){return"-----BEGIN "+t+"-----\r\n"+xe(Ee(e),64)+"\r\n-----END "+t+"-----\r\n"}function Ce(e,t){if(-1==e.indexOf("-----BEGIN "))throw new Error("can't find PEM header");return Ae(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Pe(e){var t,r,n,o,s,i,a,u,c,l;if(l=(e=Fe(e)).match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return t=parseInt(l[1]),r=parseInt(l[2])-1,n=parseInt(l[3]),o=parseInt(l[4]),s=parseInt(l[5]),i=parseInt(l[6]),a=0,""!==(u=l[7])&&(c=(u.substr(1)+"00").substr(0,3),a=parseInt(c)),Date.UTC(t,r,n,o,s,i,a);throw new Error("unsupported zulu format: "+e)}function Ie(e){return Math.round(Pe(e)/1e3)}function Fe(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function ke(e){return e.replace(/%/g,"")}function Re(e){return e.replace(/(..)/g,"%$1")}function $e(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2),o=(e=e.replace("::",n)).split(":");if(8!=o.length)throw t;for(var s=0;s<8;s++)o[s]=("0000"+o[s]).slice(-4);return o.join("")}function Oe(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=(e=":"+(t=(t=t.map((function(e){return e.replace(/^0+/,"")}))).map((function(e){return""==e?"0":e}))).join(":")+":").match(/:(0:){2,}/g);if(null==r)return e.slice(1,-1);var n=r.sort().slice(-1)[0];return"::"!=(e=e.replace(n.substr(0,n.length-1),":")).substr(0,2)&&(e=e.substr(1)),"::"!=e.substr(-2,2)&&(e=e.substr(0,e.length-1)),e}function Te(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8==e.length)try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(r){throw t}else{if(16!=e.length){if(32==e.length)return Oe(e);if(64==e.length){try{return Oe(e.substr(0,32))+"/"+De(e.substr(32))}catch(r){throw t}return}return e}try{return Te(e.substr(0,8))+"/"+De(e.substr(8))}catch(r){throw t}}}function De(e){var t,r=new Error("malformed mask");try{t=new b(e,16).toString(2)}catch(n){throw r}if(!t.match(/^1*0*$/))throw r;return t.replace(/0+$/,"").length}function Be(e){var r=new Error("malformed IP address");if(!(e=e.toLowerCase(e)).match(/^[0-9a-f.:/]+$/))throw r;if(!e.match(/^[0-9.]+$/)){var n;if(e.match(/^[0-9.]+\/[0-9]+$/))return Be((n=e.split("/"))[0])+je(parseInt(n[1]),32);if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return $e(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==e.indexOf(":"))return $e((n=e.split("/"))[0])+je(parseInt(n[1]),128);throw r}var o=e.split(".");if(4!==o.length)throw r;var s="";try{for(var i=0;i<4;i++)s+=("0"+parseInt(o[i]).toString(16)).slice(-2);return s}catch(t){throw r}}function je(e,t){return 32==t&&0==e?"00000000":128==t&&0==e?"00000000000000000000000000000000":new b(Array(e+1).join("1")+Array(t-e+1).join("0"),2).toString(16)}function Ne(e){return e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var n=128|63&r;return ve((192|(7&t)<<3|(192&r)>>6).toString(16)+n.toString(16))}n=128|(15&t)<<2|(192&r)>>6;var o=128|63&r;return ve((224|(240&t)>>4).toString(16)+n.toString(16)+o.toString(16))})).join("")}function Le(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+fe(t[n]);return r}function Ue(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function He(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}function Me(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function qe(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=parseInt(e,10).toString(2),o=7-n.length%7;7==o&&(o=0);for(var s="",i=0;i<o;i++)s+="0";for(n=s+n,i=0;i<n.length-1;i+=7){var a=n.substr(i,7);i!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r};try{if(!e.match(/^[0-9.]+$/))return null;var n="",o=e.split("."),s=40*parseInt(o[0],10)+parseInt(o[1],10);n+=t(s),o.splice(0,2);for(var i=0;i<o.length;i++)n+=r(o[i]);return n}catch(c){return null}}function Ve(e){if(!Ue(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var s=e.substr(2),i=[],a=0;a<s.length/2;a++)i.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<i.length;a++)128&i[a]?c+=ze((127&i[a]).toString(2),7):(c+=ze((127&i[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=t.join(".");return u.length>0&&(l=l+"."+u.join(".")),l}catch(o){return null}}function Ke(e){return Ge(new b(String(e),10))}function Ge(e){var t=e.toString(16);if("-"!=t.substr(0,1))return t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t),t;var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",o=0;o<r;o++)n+="f";return new b(n,16).xor(e).add(b.ONE).toString(16).replace(/^-/,"")}ue.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},ue.getL=function(e,t){var r=ue.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},ue.getVblen=function(e,t){var r;return""==(r=ue.getL(e,t))?-1:("8"===r.substr(0,1)?new b(r.substr(2),16):new b(r,16)).intValue()},ue.getVidx=function(e,t){var r=ue.getLblen(e,t);return r<0?r:t+2*(r+1)},ue.getV=function(e,t){var r=ue.getVidx(e,t),n=ue.getVblen(e,t);return e.substr(r,2*n)},ue.getTLV=function(e,t){return e.substr(t,2)+ue.getL(e,t)+ue.getV(e,t)},ue.getTLVblen=function(e,t){return 2+2*ue.getLblen(e,t)+2*ue.getVblen(e,t)},ue.getNextSiblingIdx=function(e,t){return ue.getVidx(e,t)+2*ue.getVblen(e,t)},ue.getChildIdx=function(e,t){var r,n,o,s=ue,i=[];r=s.getVidx(e,t),n=2*s.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,n-=2),o=0;for(var a=r;o<=n;){var u=s.getTLVblen(e,a);if((o+=u)<=n&&i.push(a),a+=u,o>=n)break}return i},ue.getNthChildIdx=function(e,t,r){return ue.getChildIdx(e,t)[r]},ue.getIdxbyList=function(e,t,r,n){var o,s,i=ue;return 0==r.length?void 0!==n&&e.substr(t,2)!==n?-1:t:(o=r.shift())>=(s=i.getChildIdx(e,t)).length?-1:i.getIdxbyList(e,s[o],r,n)},ue.getIdxbyListEx=function(e,t,r,n){var o,s,i=ue;if(0==r.length)return void 0!==n&&e.substr(t,2)!==n?-1:t;o=r.shift(),s=i.getChildIdx(e,t);for(var a=0,u=0;u<s.length;u++){var c=e.substr(s[u],2);if("number"==typeof o&&!i.isContextTag(c)&&a==o||"string"==typeof o&&i.isContextTag(c,o))return i.getIdxbyListEx(e,s[u],r,n);i.isContextTag(c)||a++}return-1},ue.getTLVbyList=function(e,t,r,n){var o=ue,s=o.getIdxbyList(e,t,r,n);return-1==s||s>=e.length?null:o.getTLV(e,s)},ue.getTLVbyListEx=function(e,t,r,n){var o=ue,s=o.getIdxbyListEx(e,t,r,n);return-1==s?null:o.getTLV(e,s)},ue.getVbyList=function(e,t,r,n,o){var s,i,a=ue;return-1==(s=a.getIdxbyList(e,t,r,n))||s>=e.length?null:(i=a.getV(e,s),!0===o&&(i=i.substr(2)),i)},ue.getVbyListEx=function(e,t,r,n,o){var s,i,a=ue;return-1==(s=a.getIdxbyListEx(e,t,r,n))?null:(i=a.getV(e,s),"03"==e.substr(s,2)&&!1!==o&&(i=i.substr(2)),i)},ue.getInt=function(e,t,r){null==r&&(r=-1);try{var n=e.substr(t,2);if("02"!=n&&"03"!=n)return r;var o=ue.getV(e,t);return"02"==n?parseInt(o,16):Ye(o)}catch(u){return r}},ue.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:Ve(ue.getV(e,t))}catch(n){return r}},ue.getOIDName=function(e,t,r){null==r&&(r=null);try{var n=ue.getOID(e,t,r);if(n==r)return r;var o=se.asn1.x509.OID.oid2name(n);return""==o?n:o}catch(c){return r}},ue.getString=function(e,t,r){null==r&&(r=null);try{return be(ue.getV(e,t))}catch(c){return r}},ue.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},r=[],n=e.substr(0,2),o=parseInt(n,16);r[0]=new String(Math.floor(o/40)),r[1]=new String(o%40);for(var s=e.substr(2),i=[],a=0;a<s.length/2;a++)i.push(parseInt(s.substr(2*a,2),16));var u=[],c="";for(a=0;a<i.length;a++)128&i[a]?c+=t((127&i[a]).toString(2),7):(c+=t((127&i[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=r.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},ue.dump=function(e,t,r,n){var o=ue,s=o.getV,i=o.dump,a=o.getChildIdx,u=e;e instanceof se.asn1.ASN1Object&&(u=e.tohex());var c=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var l,p=t.ommit_long_octet;if("01"==(l=u.substr(r,2)))return"00"==(f=s(u,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==l)return n+"INTEGER "+c(f=s(u,r),p)+"\n";if("03"==l){var f=s(u,r);return o.isASN1HEX(f.substr(2))?(w=n+"BITSTRING, encapsulates\n")+i(f.substr(2),t,0,n+"  "):n+"BITSTRING "+c(f,p)+"\n"}if("04"==l)return f=s(u,r),o.isASN1HEX(f)?(w=n+"OCTETSTRING, encapsulates\n")+i(f,t,0,n+"  "):n+"OCTETSTRING "+c(f,p)+"\n";if("05"==l)return n+"NULL\n";if("06"==l){var h=s(u,r),d=se.asn1.ASN1Util.oidHexToInt(h),_=se.asn1.x509.OID.oid2name(d),g=d.replace(/\./g," ");return""!=_?n+"ObjectIdentifier "+_+" ("+g+")\n":n+"ObjectIdentifier ("+g+")\n"}if("0a"==l)return n+"ENUMERATED "+parseInt(s(u,r))+"\n";if("0c"==l)return n+"UTF8String '"+ve(s(u,r))+"'\n";if("13"==l)return n+"PrintableString '"+ve(s(u,r))+"'\n";if("14"==l)return n+"TeletexString '"+ve(s(u,r))+"'\n";if("16"==l)return n+"IA5String '"+ve(s(u,r))+"'\n";if("17"==l)return n+"UTCTime "+ve(s(u,r))+"\n";if("18"==l)return n+"GeneralizedTime "+ve(s(u,r))+"\n";if("1a"==l)return n+"VisualString '"+ve(s(u,r))+"'\n";if("1e"==l)return n+"BMPString '"+Ne(s(u,r))+"'\n";if("30"==l){if("3000"==u.substr(r,4))return n+"SEQUENCE {}\n";w=n+"SEQUENCE\n";var y=t;if((2==(b=a(u,r)).length||3==b.length)&&"06"==u.substr(b[0],2)&&"04"==u.substr(b[b.length-1],2)){_=o.oidname(s(u,b[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=_,y=v}for(var m=0;m<b.length;m++)w+=i(u,y,b[m],n+"  ");return w}if("31"==l){w=n+"SET\n";var b=a(u,r);for(m=0;m<b.length;m++)w+=i(u,t,b[m],n+"  ");return w}if(0!=(128&(l=parseInt(l,16)))){var w,E=31&l;if(0!=(32&l)){for(w=n+"["+E+"]\n",b=a(u,r),m=0;m<b.length;m++)w+=i(u,t,b[m],n+"  ");return w}return f=s(u,r),ue.isASN1HEX(f)?(w=n+"["+E+"]\n")+i(f,t,0,n+"  "):(("68747470"==f.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==E)&&(f=ve(f)),n+"["+E+"] "+f+"\n")}return n+"UNKNOWN("+l+") "+s(u,r)+"\n"},ue.parse=function(e){var t=ue,r=t.parse,n=t.isASN1HEX,o=t.getV,s=t.getTLV,i=t.getChildIdx,a=se.asn1,u=a.ASN1Util.oidHexToInt,c=a.x509.OID.oid2name,l=ve,p=Ne,f=me,h={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},d=e.substr(0,2),_={},g=o(e,0);if("01"==d)return"0101ff"==e?{bool:!0}:{bool:!1};if("02"==d)return{int:{hex:g}};if("03"==d)try{if("00"!=g.substr(0,2))throw"not encap";var y=g.substr(2);if(!n(y))throw"not encap";return{bitstr:{obj:r(y)}}}catch(X){var v=null;return g.length<=10&&(v=Xe(g)),null==v?{bitstr:{hex:g}}:{bitstr:{bin:v}}}else if("04"==d)try{if(!n(g))throw"not encap";return{octstr:{obj:r(g)}}}catch(X){return{octstr:{hex:g}}}else{if("05"==d)return{null:""};if("06"==d){var m=u(g),b=c(m);return""==b?{oid:m}:{oid:b}}if("0a"==d)return g.length>4?{enum:{hex:g}}:{enum:parseInt(g,16)};if("30"==d||"31"==d)return _[h[d]]=function(e){for(var t=[],n=i(e,0),o=0;o<n.length;o++){var a=n[o],u=s(e,a),c=r(u);t.push(c)}return t}(e),_;if("14"==d){var w=f(g);return _[h[d]]={str:w},_}if("1e"==d)return w=p(g),_[h[d]]={str:w},_;if(-1!=":0c:12:13:16:17:18:1a:".indexOf(d))return w=l(g),_[h[d]]={str:w},_;if(d.match(/^8[0-9]$/))return null==(w=l(g))|""==w||null!=w.match(/[\x00-\x1F\x7F-\x9F]/)||null!=w.match(/[\u0000-\u001F\u0080\u2013\u009F]/)?{tag:{tag:d,explicit:!1,hex:g}}:{tag:{tag:d,explicit:!1,str:w}};if(!d.match(/^a[0-9]$/)){var E=new se.asn1.ASN1Object;return E.hV=g,{asn1:{tlv:d+E.getLengthHexFromValue()+g}}}try{if(!n(g))throw new Error("not encap");return{tag:{tag:d,explicit:!0,obj:r(g)}}}catch(X){return{tag:{tag:d,explicit:!0,hex:g}}}}},ue.isContextTag=function(e,t){var r,n;e=e.toLowerCase();try{r=parseInt(e,16)}catch(u){return-1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((n=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&r)&&(31&r)==n}catch(u){return!1}},ue.isASN1HEX=function(e){var t=ue;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),o=t.getL(e,0);return e.length-n.length-o.length==2*r},ue.checkStrictDER=function(e,t,r,n,o){var s=ue;if(void 0===r){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!se.lang.String.isHex(e))throw new Error("not hex string");r=e.length,o=(n=e.length/2)<128?1:Math.ceil(n.toString(16))+1}if(s.getL(e,t).length>2*o)throw new Error("L of TLV too long: idx="+t);var i=s.getVblen(e,t);if(i>n)throw new Error("value of L too long than hex: idx="+t);var a=s.getTLV(e,t),u=a.length-2-s.getL(e,t).length;if(u!==2*i)throw new Error("V string length and L's value not the same:"+u+"/"+2*i);if(0===t&&e.length!=a.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+a.length);var c=e.substr(t,2);if("02"===c){var l=s.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var p=s.getVblen(e,t),f=0,h=s.getChildIdx(e,t),d=0;d<h.length;d++)f+=s.getTLV(e,h[d]).length,s.checkStrictDER(e,h[d],r,n,o);if(2*p!=f)throw new Error("sum of children's TLV length and L unmatch: "+2*p+"!="+f)}},ue.oidname=function(e){var t=se.asn1;se.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==se&&se||(se={}),void 0!==se.asn1&&se.asn1||(se.asn1={}),void 0!==se.asn1.x509&&se.asn1.x509||(se.asn1.x509={}),se.asn1.x509.Certificate=function(e){se.asn1.x509.Certificate.superclass.constructor.call(this);var t=se.asn1,r=t.DERBitString,n=t.DERSequence,o=t.x509,s=o.TBSCertificate,i=o.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.sigalg;null!=e.sigalg.name&&(t=e.sigalg.name);var r=e.tbsobj.tohex(),n=new se.crypto.Signature({alg:t});n.init(e.cakey),n.updateHex(r),e.sighex=n.sign()},this.getPEM=function(){return Se(this.tohex(),"CERTIFICATE")},this.tohex=function(){var e=this.params;if(null!=e.tbsobj&&null!=e.tbsobj||(e.tbsobj=new s(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new i({name:e.sigalg})),t.push(new r({hex:"00"+e.sighex})),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&(this.params=e)},Qe(se.asn1.x509.Certificate,se.asn1.ASN1Object),se.asn1.x509.TBSCertificate=function(e){se.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=se.asn1,r=t.x509,n=t.DERTaggedObject,o=t.DERInteger,s=t.DERSequence,i=r.AlgorithmIdentifier,a=r.Time,u=r.X500Name,c=r.Extensions,l=r.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=[],t=this.params;if(null!=t.version||1!=t.version){var r=2;null!=t.version&&(r=t.version-1);var p=new n({obj:new o({int:r})});e.push(p)}return e.push(new o(t.serial)),e.push(new i({name:t.sigalg})),e.push(new u(t.issuer)),e.push(new s({array:[new a(t.notbefore),new a(t.notafter)]})),e.push(new u(t.subject)),e.push(new l(et.getKey(t.sbjpubkey))),void 0!==t.ext&&t.ext.length>0&&e.push(new n({tag:"a3",obj:new c(t.ext)})),new se.asn1.DERSequence({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.TBSCertificate,se.asn1.ASN1Object),se.asn1.x509.Extensions=function(e){se.asn1.x509.Extensions.superclass.constructor.call(this);var t=se.asn1,r=t.DERSequence,n=t.x509;this.aParam=[],this.setByParam=function(e){this.aParam=e},this.tohex=function(){for(var e=[],t=0;t<this.aParam.length;t++){var o=this.aParam[t],s=o.extname,i=null;if(null!=o.extn)i=new n.PrivateExtension(o);else if("subjectKeyIdentifier"==s)i=new n.SubjectKeyIdentifier(o);else if("keyUsage"==s)i=new n.KeyUsage(o);else if("subjectAltName"==s)i=new n.SubjectAltName(o);else if("issuerAltName"==s)i=new n.IssuerAltName(o);else if("basicConstraints"==s)i=new n.BasicConstraints(o);else if("nameConstraints"==s)i=new n.NameConstraints(o);else if("cRLDistributionPoints"==s)i=new n.CRLDistributionPoints(o);else if("certificatePolicies"==s)i=new n.CertificatePolicies(o);else if("policyMappings"==s)i=new n.PolicyMappings(o);else if("policyConstraints"==s)i=new n.PolicyConstraints(o);else if("inhibitAnyPolicy"==s)i=new n.InhibitAnyPolicy(o);else if("authorityKeyIdentifier"==s)i=new n.AuthorityKeyIdentifier(o);else if("extKeyUsage"==s)i=new n.ExtKeyUsage(o);else if("authorityInfoAccess"==s)i=new n.AuthorityInfoAccess(o);else if("cRLNumber"==s)i=new n.CRLNumber(o);else if("cRLReason"==s)i=new n.CRLReason(o);else if("ocspNonce"==s)i=new n.OCSPNonce(o);else if("ocspNoCheck"==s)i=new n.OCSPNoCheck(o);else if("adobeTimeStamp"==s)i=new n.AdobeTimeStamp(o);else{if("subjectDirectoryAttributes"!=s)throw new Error("extension not supported:"+JSON.stringify(o));i=new n.SubjectDirectoryAttributes(o)}null!=i&&e.push(i)}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.x509.Extensions,se.asn1.ASN1Object),se.asn1.x509.Extension=function(e){se.asn1.x509.Extension.superclass.constructor.call(this);var t=se.asn1,r=t.DERObjectIdentifier,n=t.DEROctetString,o=(t.DERBitString,t.DERBoolean),s=t.DERSequence;this.tohex=function(){var e=new r({oid:this.oid}),t=new n({hex:this.getExtnValueHex()}),i=new Array;return i.push(e),this.critical&&i.push(new o),i.push(t),new s({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},Qe(se.asn1.x509.Extension,se.asn1.ASN1Object),se.asn1.x509.KeyUsage=function(e){se.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,r={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var e=this.getBinValue();return this.asn1ExtnValue=new se.asn1.DERBitString({bin:e}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var e=this.params;if("object"!=typeof e||"object"!=typeof e.names&&"string"!=typeof e.bin)throw new t("parameter not yet set");if(null!=e.names)return Je(e.names,r);if(null!=e.bin)return e.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.KeyUsage,se.asn1.x509.Extension),se.asn1.x509.BasicConstraints=function(e){se.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=se.asn1,r=t.DERBoolean,n=t.DERInteger,o=t.DERSequence;this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new r),this.pathLen>-1&&e.push(new n({int:this.pathLen}));var t=new o({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},Qe(se.asn1.x509.BasicConstraints,se.asn1.x509.Extension),se.asn1.x509.CRLDistributionPoints=function(e){se.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=se.asn1,r=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(e){for(var n=[],o=0;o<e.length;o++)if(e[o]instanceof se.asn1.ASN1Object)n.push(e[o]);else{var s=new r.DistributionPoint(e[o]);n.push(s)}this.asn1ExtnValue=new t.DERSequence({array:n})},this.setByOneURI=function(e){var t=new r.DistributionPoint({fulluri:e});this.setByDPArray([t])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},Qe(se.asn1.x509.CRLDistributionPoints,se.asn1.x509.Extension),se.asn1.x509.DistributionPoint=function(e){se.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=se.asn1,r=t.x509.DistributionPointName;this.tohex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var r=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(r)}return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.dpobj?this.asn1DP=e.dpobj:void 0!==e.dpname?this.asn1DP=new r(e.dpname):void 0!==e.fulluri&&(this.asn1DP=new r({full:[{uri:e.fulluri}]})))},Qe(se.asn1.x509.DistributionPoint,se.asn1.ASN1Object),se.asn1.x509.DistributionPointName=function(e){se.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=se.asn1,r=t.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e)if(t.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else{if(void 0===e.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new t.x509.GeneralNames(e.full)}},Qe(se.asn1.x509.DistributionPointName,se.asn1.ASN1Object),se.asn1.x509.CertificatePolicies=function(e){se.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=se.asn1,r=t.x509,n=t.DERSequence,o=r.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++)e.push(new o(this.params.array[t]));var r=new n({array:e});return this.asn1ExtnValue=r,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.CertificatePolicies,se.asn1.x509.Extension),se.asn1.x509.PolicyInformation=function(e){se.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=se.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,o=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var e=[new n(this.params.policyoid)];if(void 0!==this.params.array){for(var t=[],s=0;s<this.params.array.length;s++)t.push(new o(this.params.array[s]));t.length>0&&e.push(new r({array:t}))}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Qe(se.asn1.x509.PolicyInformation,se.asn1.ASN1Object),se.asn1.x509.PolicyQualifierInfo=function(e){se.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=se.asn1,r=t.DERSequence,n=t.DERIA5String,o=t.DERObjectIdentifier,s=t.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new r({array:[new o({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]}).tohex():null!=this.params.unotice?new r({array:[new o({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Qe(se.asn1.x509.PolicyQualifierInfo,se.asn1.ASN1Object),se.asn1.x509.UserNotice=function(e){se.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=se.asn1.DERSequence,r=(se.asn1.DERInteger,se.asn1.x509.DisplayText),n=se.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var e=[];return void 0!==this.params.noticeref&&e.push(new n(this.params.noticeref)),void 0!==this.params.exptext&&e.push(new r(this.params.exptext)),new t({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Qe(se.asn1.x509.UserNotice,se.asn1.ASN1Object),se.asn1.x509.NoticeReference=function(e){se.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=se.asn1.DERSequence,r=se.asn1.DERInteger,n=se.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var e=[];if(void 0!==this.params.org&&e.push(new n(this.params.org)),void 0!==this.params.noticenum){for(var o=[],s=this.params.noticenum,i=0;i<s.length;i++)o.push(new r(s[i]));e.push(new t({array:o}))}if(0==e.length)throw new Error("parameter is empty");return new t({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Qe(se.asn1.x509.NoticeReference,se.asn1.ASN1Object),se.asn1.x509.DisplayText=function(e){se.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},Qe(se.asn1.x509.DisplayText,se.asn1.DERAbstractString),se.asn1.x509.PolicyMappings=function(e){se.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var t=se.asn1,r=(t.x509,t.ASN1Util.newObject);this.params=null,this.getExtnValueHex=function(){for(var e=this.params,t=[],n=0;n<e.array.length;n++){var o=e.array[n];t.push({seq:[{oid:o[0]},{oid:o[1]}]})}return this.asn1ExtnValue=r({seq:t}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.PolicyMappings,se.asn1.x509.Extension),se.asn1.x509.PolicyConstraints=function(e){se.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var t=se.asn1,r=(t.x509,t.ASN1Util.newObject);this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[];return null!=e.reqexp&&t.push({tag:{tagi:"80",obj:{int:e.reqexp}}}),null!=e.inhibit&&t.push({tag:{tagi:"81",obj:{int:e.inhibit}}}),this.asn1ExtnValue=r({seq:t}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.PolicyConstraints,se.asn1.x509.Extension),se.asn1.x509.InhibitAnyPolicy=function(e){se.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var t=se.asn1,r=(t.x509,t.ASN1Util.newObject);this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=r({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.InhibitAnyPolicy,se.asn1.x509.Extension),se.asn1.x509.NameConstraints=function(e){se.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=se.asn1,r=t.x509,n=t.ASN1Util.newObject,o=r.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[];if(null!=e.permit&&null!=e.permit.length){for(var r=[],s=0;s<e.permit.length;s++)r.push(new o(e.permit[s]));t.push({tag:{tagi:"a0",obj:{seq:r}}})}if(null!=e.exclude&&null!=e.exclude.length){var i=[];for(s=0;s<e.exclude.length;s++)i.push(new o(e.exclude[s]));t.push({tag:{tagi:"a1",obj:{seq:i}}})}return this.asn1ExtnValue=n({seq:t}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.NameConstraints,se.asn1.x509.Extension),se.asn1.x509.GeneralSubtree=function(e){se.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=se.asn1,r=t.x509.GeneralName,n=t.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params,t=[new r(e)];return null!=e.min&&t.push({tag:{tagi:"80",obj:{int:e.min}}}),null!=e.max&&t.push({tag:{tagi:"81",obj:{int:e.max}}}),n({seq:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.GeneralSubtree,se.asn1.ASN1Object),se.asn1.x509.ExtKeyUsage=function(e){se.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=se.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var r=0;r<e.length;r++){var n=new t.DERObjectIdentifier(e[r]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},Qe(se.asn1.x509.ExtKeyUsage,se.asn1.x509.Extension),se.asn1.x509.AuthorityKeyIdentifier=function(e){se.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=se,r=t.asn1,n=r.DERTaggedObject,o=r.x509.GeneralNames;t.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:new o([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new r.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new se.asn1.DEROctetString(e);else if("object"==typeof e&&se.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN ")){var t=e;"string"==typeof e&&(t=et.getKey(e));var r=et.getKeyID(t);this.asn1KID=new se.asn1.DEROctetString({hex:r})}},this.setCertIssuerByParam=function(e){void 0!==e.str||void 0!==e.ldapstr||void 0!==e.hex||void 0!==e.certsubject||void 0!==e.certissuer?this.asn1CertIssuer=new se.asn1.x509.X500Name(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&-1!=e.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new se.asn1.x509.X500Name({certissuer:e}))},this.setCertSNByParam=function(e){if(void 0!==e.str||void 0!==e.bigint||void 0!==e.hex)this.asn1CertSN=new se.asn1.DERInteger(e);else if("string"==typeof e&&-1!=e.indexOf("BEGIN ")&&e.indexOf("CERTIFICATE")){var t=new ot;t.readCertPEM(e);var r=t.getSerialNumberHex();this.asn1CertSN=new se.asn1.DERInteger({hex:r})}},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},Qe(se.asn1.x509.AuthorityKeyIdentifier,se.asn1.x509.Extension),se.asn1.x509.SubjectKeyIdentifier=function(e){se.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=se.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new t(e);else if("object"==typeof e&&se.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN")){var r=e;"string"==typeof e&&(r=et.getKey(e));var n=et.getKeyID(r);this.asn1KID=new se.asn1.DEROctetString({hex:n})}},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},Qe(se.asn1.x509.SubjectKeyIdentifier,se.asn1.x509.Extension),se.asn1.x509.AuthorityInfoAccess=function(e){se.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,r=se.asn1,n=r.DERSequence,o=r.DERObjectIdentifier,s=r.x509.GeneralName,i=0;i<e.length;i++){var a,u=e[i];if(void 0!==u.ocsp)a=new n({array:[new o({oid:"1.3.6.1.5.5.7.48.1"}),new s({uri:u.ocsp})]});else{if(void 0===u.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(u));a=new n({array:[new o({oid:"1.3.6.1.5.5.7.48.2"}),new s({uri:u.caissuer})]})}t.push(a)}this.asn1ExtnValue=new n({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},Qe(se.asn1.x509.AuthorityInfoAccess,se.asn1.x509.Extension),se.asn1.x509.SubjectAltName=function(e){se.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new se.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},Qe(se.asn1.x509.SubjectAltName,se.asn1.x509.Extension),se.asn1.x509.IssuerAltName=function(e){se.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new se.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},Qe(se.asn1.x509.IssuerAltName,se.asn1.x509.Extension),se.asn1.x509.SubjectDirectoryAttributes=function(e){se.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=se.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,o=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++){var s=this.params.array[t];if(null==s.attr||null==s.array){var i={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==s.attr)i.seq[0].oid=o(s.attr),i.seq[1].set[0]={gentime:s.str};else if("placeOfBirth"==s.attr)i.seq[0].oid=o(s.attr),i.seq[1].set[0]={utf8str:s.str};else if("gender"==s.attr)i.seq[0].oid=o(s.attr),i.seq[1].set[0]={prnstr:s.str};else if("countryOfCitizenship"==s.attr)i.seq[0].oid=o(s.attr),i.seq[1].set[0]={prnstr:s.str};else{if("countryOfResidence"!=s.attr)throw new Error("unsupported attribute: "+s.attr);i.seq[0].oid=o(s.attr),i.seq[1].set[0]={prnstr:s.str}}e.push(new n(i))}else{var a={seq:[{oid:s.attr},{set:s.array}]};e.push(n(a))}}var u=new r({array:e});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==e&&(this.params=e)},Qe(se.asn1.x509.SubjectDirectoryAttributes,se.asn1.x509.Extension),se.asn1.x509.PrivateExtension=function(e){se.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=se,r=t.lang.String.isHex,n=t.asn1,o=n.x509.OID.name2oid,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.oid=o(e.extname),this.params=e},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var e=this.params.extn;if("string"==typeof e&&r(e))return e;if("object"==typeof e)try{return s(e).tohex()}catch(t){}throw new Error("unsupported extn value")},null!=e&&this.setByParam(e)},Qe(se.asn1.x509.PrivateExtension,se.asn1.x509.Extension),se.asn1.x509.CRL=function(e){se.asn1.x509.CRL.superclass.constructor.call(this);var t=se.asn1,r=t.DERSequence,n=t.DERBitString,o=t.x509,s=o.AlgorithmIdentifier,i=o.TBSCertList;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=new i(this.params).tohex(),t=new se.crypto.Signature({alg:this.params.sigalg});t.init(this.params.cakey),t.updateHex(e);var r=t.sign();this.params.sighex=r},this.getPEM=function(){return Se(this.tohex(),"X509 CRL")},this.tohex=function(){var e=this.params;if(null==e.tbsobj&&(e.tbsobj=new i(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new s({name:e.sigalg})),t.push(new n({hex:"00"+e.sighex})),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&(this.params=e)},Qe(se.asn1.x509.CRL,se.asn1.ASN1Object),se.asn1.x509.TBSCertList=function(e){se.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=se.asn1,r=t.DERInteger,n=t.DERSequence,o=t.DERTaggedObject,s=(t.DERObjectIdentifier,t.x509),i=s.AlgorithmIdentifier,a=s.Time,u=s.Extensions,c=s.X500Name;this.params=null,this.setByParam=function(e){this.params=e},this.getRevCertSequence=function(){for(var e=[],t=this.params.revcert,o=0;o<t.length;o++){var s=[new r(t[o].sn),new a(t[o].date)];null!=t[o].ext&&s.push(new u(t[o].ext)),e.push(new n({array:s}))}return new n({array:e})},this.tohex=function(){var e=[],t=this.params;if(null!=t.version){var s=t.version-1,l=new r({int:s});e.push(l)}if(e.push(new i({name:t.sigalg})),e.push(new c(t.issuer)),e.push(new a(t.thisupdate)),null!=t.nextupdate&&e.push(new a(t.nextupdate)),null!=t.revcert&&e.push(this.getRevCertSequence()),null!=t.ext){var p=new u(t.ext);e.push(new o({tag:"a0",explicit:!0,obj:p}))}return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.TBSCertList,se.asn1.ASN1Object),se.asn1.x509.CRLEntry=function(e){se.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=se.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.tohex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},Qe(se.asn1.x509.CRLEntry,se.asn1.ASN1Object),se.asn1.x509.CRLNumber=function(e){se.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new se.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=e&&(this.params=e)},Qe(se.asn1.x509.CRLNumber,se.asn1.x509.Extension),se.asn1.x509.CRLReason=function(e){se.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new se.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=e&&(this.params=e)},Qe(se.asn1.x509.CRLReason,se.asn1.x509.Extension),se.asn1.x509.OCSPNonce=function(e){se.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new se.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=e&&(this.params=e)},Qe(se.asn1.x509.OCSPNonce,se.asn1.x509.Extension),se.asn1.x509.OCSPNoCheck=function(e){se.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new se.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=e&&(this.params=e)},Qe(se.asn1.x509.OCSPNoCheck,se.asn1.x509.Extension),se.asn1.x509.AdobeTimeStamp=function(e){se.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=se.asn1,r=t.DERInteger,n=t.DERBoolean,o=t.DERSequence,s=t.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[new r(1)];return t.push(new s({uri:e.uri})),null!=e.reqauth&&t.push(new n(e.reqauth)),this.asn1ExtnValue=new o({array:t}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.AdobeTimeStamp,se.asn1.x509.Extension),se.asn1.x509.X500Name=function(e){se.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=se.asn1,r=t.x509,n=r.RDN;this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var r=e.split("/");r.shift();for(var o=[],s=0;s<r.length;s++)if(r[s].match(/^[^=]+=.+$/))o.push(r[s]);else{var i=o.length-1;o[i]=o[i]+"/"+r[s]}for(s=0;s<o.length;s++)this.asn1Array.push(new n({str:o[s],rule:this.sRule}))},this.setByLdapString=function(e,t){void 0!==t&&(this.sRule=t);var n=r.X500Name.ldapToCompat(e);this.setByString(n,t)},this.setByObject=function(e,t){for(var r in void 0!==t&&(this.sRule=t),e)if(e.hasOwnProperty(r)){var o=new n({str:r+"="+e[r],rule:this.sRule});this.asn1Array?this.asn1Array.push(o):this.asn1Array=[o]}},this.setByParam=function(e){var t;void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.array?this.paramArray=e.array:void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):void 0!==e.hex?this.hTLV=e.hex:void 0!==e.certissuer?((t=new ot).readCertPEM(e.certissuer),this.hTLV=t.getIssuerHex()):void 0!==e.certsubject?((t=new ot).readCertPEM(e.certsubject),this.hTLV=t.getSubjectHex()):"object"==typeof e&&void 0===e.certsubject&&void 0===e.certissuer&&this.setByObject(e)},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var r={array:this.paramArray[e]};"utf8"!=this.sRule&&(r.rule=this.sRule);var o=new n(r);this.asn1Array.push(o)}var s=new t.DERSequence({array:this.asn1Array});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.X500Name,se.asn1.ASN1Object),se.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map((function(e){return e.replace(/,/,"\\,")}))).join(",")},se.asn1.x509.X500Name.onelineToLDAP=function(e){return se.asn1.x509.X500Name.compatToLDAP(e)},se.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],o=0;t.length>0;o++){var s=t.shift();if(!0===r){var i=(n.pop()+","+s).replace(/\\,/g,",");n.push(i),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}return(n=n.map((function(e){return e.replace("/","\\/")}))).reverse(),"/"+n.join("/")},se.asn1.x509.X500Name.ldapToOneline=function(e){return se.asn1.x509.X500Name.ldapToCompat(e)},se.asn1.x509.RDN=function(e){se.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=se.asn1.x509.AttributeTypeAndValue;this.setByParam=function(e){void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.str&&this.addByMultiValuedString(e.str),void 0!==e.array&&(this.paramArray=e.array)},this.addByString=function(e){this.asn1Array.push(new se.asn1.x509.AttributeTypeAndValue({str:e,rule:this.sRule}))},this.addByMultiValuedString=function(e){for(var t=se.asn1.x509.RDN.parseString(e),r=0;r<t.length;r++)this.addByString(t[r])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var r=this.paramArray[e];void 0!==r.rule&&"utf8"!=this.sRule&&(r.rule=this.sRule);var n=new t(r);this.asn1Array.push(n)}var o=new se.asn1.DERSet({array:this.asn1Array});return this.TLV=o.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.RDN,se.asn1.ASN1Object),se.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],o=0;t.length>0;o++){var s=t.shift();if(!0===r){var i=(n.pop()+"+"+s).replace(/\\\+/g,"+");n.push(i),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}var a=!1,u=[];for(o=0;n.length>0;o++){if(s=n.shift(),!0===a){var c=u.pop();s.match(/"$/)?(i=(c+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2"),u.push(i),a=!1):u.push(c+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(a=!0)}return u},se.asn1.x509.AttributeTypeAndValue=function(e){se.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=se,r=t.asn1,n=r.DERSequence,o=r.DERUTF8String,s=r.DERPrintableString,i=r.DERTeletexString,a=r.DERIA5String,u=r.DERVisibleString,c=r.DERBMPString,l=t.lang.String.isMail,p=t.lang.String.isPrintable;this.setByParam=function(e){if(void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.ds&&(this.dsType=e.ds),void 0===e.value&&void 0!==e.str){var t=e.str.match(/^([^=]+)=(.+)$/);if(!t)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=t[1],this.sValue=t[2]}else this.sType=e.type,this.sValue=e.value},this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var r=e.match(/^([^=]+)=(.+)$/);if(!r)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(r[1],r[2])},this._getDsType=function(){var e=this.sType,t=this.sValue,r=this.sRule;return"prn"===r?"CN"==e&&l(t)?"ia5":p(t)?"prn":"utf8":"utf8"===r?"CN"==e&&l(t)?"ia5":"C"==e?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(e,t,r){void 0!==r&&(this.sRule=r),this.sType=e,this.sValue=t},this.getValueObj=function(e,t){if("utf8"==e)return new o({str:t});if("prn"==e)return new s({str:t});if("tel"==e)return new i({str:t});if("ia5"==e)return new a({str:t});if("vis"==e)return new u({str:t});if("bmp"==e)return new c({str:t});throw new Error("unsupported directory string type: type="+e+" value="+t)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var e=se.asn1.x509.OID.atype2obj(this.sType),t=this.getValueObj(this.dsType,this.sValue),r=new n({array:[e,t]});return this.TLV=r.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.AttributeTypeAndValue,se.asn1.ASN1Object),se.asn1.x509.SubjectPublicKeyInfo=function(e){se.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=se,r=t.asn1,n=r.DERInteger,o=r.DERBitString,s=r.DERObjectIdentifier,i=r.DERSequence,a=r.ASN1Util.newObject,u=r.x509.AlgorithmIdentifier,c=t.crypto;c.ECDSA,c.DSA,this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new i({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var e=this.getASN1Object();return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(e){try{if(e instanceof ee){var t=a({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).tohex();this.asn1AlgId=new u({name:"rsaEncryption"}),this.asn1SubjPKey=new o({hex:"00"+t})}}catch(c){}try{if(e instanceof se.crypto.ECDSA){var r=new s({name:e.curveName});this.asn1AlgId=new u({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new o({hex:"00"+e.pubKeyHex})}}catch(c){}try{if(e instanceof se.crypto.DSA){r=new a({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new u({name:"dsa",asn1params:r});var i=new n({bigint:e.y});this.asn1SubjPKey=new o({hex:"00"+i.tohex()})}}catch(c){}},void 0!==e&&this.setPubKey(e)},Qe(se.asn1.x509.SubjectPublicKeyInfo,se.asn1.ASN1Object),se.asn1.x509.Time=function(e){se.asn1.x509.Time.superclass.constructor.call(this);var t=se.asn1,r=t.DERUTCTime,n=t.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(e){this.timeParams=e},this.setByParam=function(e){this.params=e},this.getType=function(e){return e.match(/^[0-9]{12}Z$/)?"utc":e.match(/^[0-9]{14}Z$/)?"gen":e.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":e.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var e=this.params,t=null;if("string"==typeof e&&(e={str:e}),null==e||!e.str||null!=e.type&&null!=e.type||(e.type=this.getType(e.str)),null!=e&&e.str?("utc"==e.type&&(t=new r(e.str)),"gen"==e.type&&(t=new n(e.str))):t="gen"==this.type?new n:new r,null==t)throw new Error("wrong setting for Time");return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},se.asn1.x509.Time_bak=function(e){se.asn1.x509.Time_bak.superclass.constructor.call(this);var t=se.asn1,r=t.DERUTCTime,n=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.tohex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new r(this.timeParams):new n(this.timeParams):"utc"==this.type?new r:new n,this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},Qe(se.asn1.x509.Time,se.asn1.ASN1Object),se.asn1.x509.AlgorithmIdentifier=function(e){se.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=se.asn1,r=t.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var e=null;for(var n in r)n===this.nameAlg&&(e=r[n]);if(null!==e)return this.hTLV=e,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var o=[this.asn1Alg];null!==this.asn1Params&&o.push(this.asn1Params);var s=new t.DERSequence({array:o});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},Qe(se.asn1.x509.AlgorithmIdentifier,se.asn1.ASN1Object),se.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},se.asn1.x509.GeneralName=function(e){se.asn1.x509.GeneralName.superclass.constructor.call(this);var t=se.asn1,r=t.x509,n=r.X500Name,o=r.OtherName,s=t.DERIA5String,i=(t.DERPrintableString,t.DEROctetString),a=t.DERTaggedObject,u=t.ASN1Object,c=Error;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e,t,r=this.params,l=!1;if(void 0!==r.other)e="a0",t=new o(r.other);else if(void 0!==r.rfc822)e="81",t=new s({str:r.rfc822});else if(void 0!==r.dns)e="82",t=new s({str:r.dns});else if(void 0!==r.dn)e="a4",l=!0,t="string"==typeof r.dn?new n({str:r.dn}):r.dn instanceof se.asn1.x509.X500Name?r.dn:new n(r.dn);else if(void 0!==r.ldapdn)e="a4",l=!0,t=new n({ldapstr:r.ldapdn});else if(void 0!==r.certissuer||void 0!==r.certsubj){var p,f;e="a4",l=!0;var h=null;if(void 0!==r.certsubj?(p=!1,f=r.certsubj):(p=!0,f=r.certissuer),f.match(/^[0-9A-Fa-f]+$/),-1!=f.indexOf("-----BEGIN ")&&(h=Ce(f)),null==h)throw new Error("certsubj/certissuer not cert");var d,_=new ot;_.hex=h,d=p?_.getIssuerHex():_.getSubjectHex(),(t=new u).hTLV=d}else if(void 0!==r.uri)e="86",t=new s({str:r.uri});else{if(void 0===r.ip)throw new c("improper params");var g;e="87";var y=r.ip;try{if(y.match(/^[0-9a-f]+$/)){var v=y.length;if(8!=v&&16!=v&&32!=v&&64!=v)throw"err";g=y}else g=Be(y)}catch(m){throw new c("malformed IP address: "+r.ip+":"+m.message)}t=new i({hex:g})}return new a({tag:e,explicit:l,obj:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.GeneralName,se.asn1.ASN1Object),se.asn1.x509.GeneralNames=function(e){se.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=se.asn1;this.setByParamArray=function(e){for(var r=0;r<e.length;r++){var n=new t.x509.GeneralName(e[r]);this.asn1Array.push(n)}},this.tohex=function(){return new t.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},Qe(se.asn1.x509.GeneralNames,se.asn1.ASN1Object),se.asn1.x509.OtherName=function(e){se.asn1.x509.OtherName.superclass.constructor.call(this);var t=se.asn1,r=t.DERObjectIdentifier,n=t.DERSequence,o=t.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if(null==e.oid||null==e.value)throw new Error("oid or value not specified");var t=new r({oid:e.oid}),s=o({tag:{tag:"a0",explicit:!0,obj:e.value}});return new n({array:[t,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.x509.OtherName,se.asn1.ASN1Object),se.asn1.x509.OID=new function(){var e=se.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var r=this.name2oidList[t],n=new e({oid:r});return this.objCache[t]=n,n},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];var r;if(t.match(/^\d+\.\d+\.[0-9.]+$/))r=t;else if(void 0!==this.atype2oidList[t])r=this.atype2oidList[t];else{if(void 0===this.name2oidList[t])throw new Error("AttributeType name undefined: "+t);r=this.name2oidList[t]}var n=new e({oid:r});return this.objCache[t]=n,n},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var t in e)this.name2oidList[t]=e[t]},this.checkOIDs=function(e){try{var t=Object.keys(e);return 0!=t.length&&(t.map((function(e,t,r){if(!this[e].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")}),e),!0)}catch(c){return!1}}},se.asn1.x509.OID.oid2name=function(e){var t=se.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""},se.asn1.x509.OID.oid2atype=function(e){var t=se.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e},se.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=se.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},se.asn1.x509.X509Util={},se.asn1.x509.X509Util.newCertPEM=function(e){var t=se.asn1.x509;return t.TBSCertificate,new(0,t.Certificate)(e).getPEM()},void 0!==se&&se||(se={}),void 0!==se.asn1&&se.asn1||(se.asn1={}),void 0!==se.asn1.cms&&se.asn1.cms||(se.asn1.cms={}),se.asn1.cms.Attribute=function(e){var t=Error,r=se.asn1,n=r.DERSequence,o=r.DERSet,s=r.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(e){this.params=e},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var e=new s({oid:this.typeOid}),t=new o({array:this.getValueArray()});return new n({array:[e,t]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},Qe(se.asn1.cms.Attribute,se.asn1.ASN1Object),se.asn1.cms.ContentType=function(e){var t=se.asn1;t.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new t.DERObjectIdentifier(this.params.type)]},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.ContentType,se.asn1.cms.Attribute),se.asn1.cms.MessageDigest=function(e){var t=se.asn1,r=t.DEROctetString;t.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new r(this.params)]},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.MessageDigest,se.asn1.cms.Attribute),se.asn1.cms.SigningTime=function(e){var t=se.asn1;t.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new t.x509.Time(this.params)]},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SigningTime,se.asn1.cms.Attribute),se.asn1.cms.SigningCertificate=function(e){var t=Error,r=se,n=r.asn1,o=n.DERSequence,s=n.cms,i=s.ESSCertID;r.crypto,s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new t("parameter 'array' not specified");for(var r=this.params.array,n=[],s=0;s<r.length;s++){var a=r[s];0!=e.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!ue.isASN1HEX(a)||(a={cert:a}),0!=a.hasis&&0==e.hasis&&(a.hasis=!1),n.push(new i(a))}var u=new o({array:n});return[new o({array:[u]})]},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SigningCertificate,se.asn1.cms.Attribute),se.asn1.cms.ESSCertID=function(e){se.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,r=se,n=r.asn1,o=n.DEROctetString,s=n.DERSequence,i=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(e,n){if(null!=e.hash)return e.hash;if("string"==typeof e&&-1==e.indexOf("-----BEGIN")&&!ue.isASN1HEX(e))return e;var o,s,i;if("string"==typeof e)o=e;else{if(null==e.cert)throw new t("hash nor cert unspecified");o=e.cert}if(s=-1!=o.indexOf("-----BEGIN")?Ce(o):o,"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?s=Ce(e):ue.isASN1HEX(e)&&(s=e)),null!=e.alg)i=e.alg;else{if(null==n)throw new t("hash alg unspecified");i=n}return r.crypto.Util.hashHex(s,i)},this.tohex=function(){var e=this.params,t=this.getCertHash(e,"sha1"),r=[];return r.push(new o({hex:t})),("string"==typeof e&&-1!=e.indexOf("-----BEGIN")||null!=e.cert&&0!=e.hasis||null!=e.issuer&&null!=e.serial)&&r.push(new i(e)),new s({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.ESSCertID,se.asn1.ASN1Object),se.asn1.cms.SigningCertificateV2=function(e){var t=Error,r=se,n=r.asn1,o=n.DERSequence,s=(n.x509,n.cms),i=s.ESSCertIDv2;r.crypto,s.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new t("parameter 'array' not specified");for(var r=this.params.array,n=[],s=0;s<r.length;s++){var a=r[s];null==e.alg&&0!=e.hasis||"string"!=typeof a||-1==a.indexOf("-----BEGIN")&&!ue.isASN1HEX(a)||(a={cert:a}),null==a.alg&&null!=e.alg&&(a.alg=e.alg),0!=a.hasis&&0==e.hasis&&(a.hasis=!1),n.push(new i(a))}var u=new o({array:n});return[new o({array:[u]})]},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SigningCertificateV2,se.asn1.cms.Attribute),se.asn1.cms.ESSCertIDv2=function(e){se.asn1.cms.ESSCertIDv2.superclass.constructor.call(this),Error;var t=se.asn1,r=t.DEROctetString,n=t.DERSequence,o=t.cms.IssuerSerial,s=t.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var e=this.params,t=this.getCertHash(e,"sha256"),i=[];return null!=e.alg&&"sha256"!=e.alg&&i.push(new s({name:e.alg})),i.push(new r({hex:t})),("string"==typeof e&&-1!=e.indexOf("-----BEGIN")||null!=e.cert&&0!=e.hasis||null!=e.issuer&&null!=e.serial)&&i.push(new o(e)),new n({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.ESSCertIDv2,se.asn1.cms.ESSCertID),se.asn1.cms.IssuerSerial=function(e){var t=Error,r=se.asn1,n=r.DERInteger,o=r.DERSequence,s=r.cms,i=r.x509.GeneralNames,a=ot;s.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(e){this.params=e},this.tohex=function(){var e,r,s=this.params;if("string"==typeof s&&-1!=s.indexOf("-----BEGIN")||null!=s.cert){var u;u=null!=s.cert?s.cert:s;var c=new a;c.readCertPEM(u),e=c.getIssuer(),r={hex:c.getSerialNumberHex()}}else{if(null==s.issuer||!s.serial)throw new t("cert or issuer and serial parameter not specified");e=s.issuer,r=s.serial}var l=new i([{dn:e}]),p=new n(r);return new o({array:[l,p]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.IssuerSerial,se.asn1.ASN1Object),se.asn1.cms.SignerIdentifier=function(e){var t=se.asn1,r=(t.DERInteger,t.DERSequence,t.cms),n=r.IssuerAndSerialNumber,o=r.SubjectKeyIdentifier;t.x509.X500Name,Error,r.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if("isssn"==e.type)return new n(e).tohex();if("skid"==e.type)return new o(e).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SignerIdentifier,se.asn1.ASN1Object),se.asn1.cms.IssuerAndSerialNumber=function(e){var t=se.asn1,r=t.DERInteger,n=t.DERSequence,o=t.cms,s=t.x509.X500Name,i=ot,a=Error;o.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e,t,o=this.params;if("string"==typeof o&&-1!=o.indexOf("-----BEGIN")||null!=o.cert){var u;u=null!=o.cert?o.cert:o;var c=new i;c.readCertPEM(u),e=c.getIssuer(),t={hex:c.getSerialNumberHex()}}else{if(null==o.issuer||!o.serial)throw new a("cert or issuer and serial parameter not specified");e=o.issuer,t=o.serial}var l=new s(e),p=new r(t);return new n({array:[l,p]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.IssuerAndSerialNumber,se.asn1.ASN1Object),se.asn1.cms.SubjectKeyIdentifier=function(e){var t=se.asn1,r=(t.DERInteger,t.DERSequence,t.ASN1Util.newObject),n=t.cms,o=(n.IssuerAndSerialName,n.SubjectKeyIdentifier,t.x509.X500Name,ot),s=Error;n.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var e,t=this.params;if(null==t.cert&&null==t.skid)throw new s("property cert nor skid undefined");return null!=t.cert?e=new o(t.cert).getExtSubjectKeyIdentifier().kid.hex:null!=t.skid&&(e=t.skid),r({tag:{tage:"a0",obj:{octstr:{hex:e}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SubjectKeyIdentifier,se.asn1.ASN1Object),se.asn1.cms.AttributeList=function(e){var t=Error,r=se.asn1,n=r.DERSet,o=r.cms;o.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if(null!=this.hTLV)return this.hTLV;var r=!0;null!=e.sortflag&&(r=e.sortflag);for(var s=e.array,i=[],a=0;a<s.length;a++){var u=s[a],c=u.attr;if("contentType"==c)i.push(new o.ContentType(u));else if("messageDigest"==c)i.push(new o.MessageDigest(u));else if("signingTime"==c)i.push(new o.SigningTime(u));else if("signingCertificate"==c)i.push(new o.SigningCertificate(u));else if("signingCertificateV2"==c)i.push(new o.SigningCertificateV2(u));else if("signaturePolicyIdentifier"==c)i.push(new se.asn1.cades.SignaturePolicyIdentifier(u));else{if("signatureTimeStamp"!=c&&"timeStampToken"!=c)throw new t("unknown attr: "+c);i.push(new se.asn1.cades.SignatureTimeStamp(u))}}var l=new n({array:i,sortflag:r});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.AttributeList,se.asn1.ASN1Object),se.asn1.cms.SignerInfo=function(e){var t=Error,r=se,n=r.asn1,o=n.DERInteger,s=n.DEROctetString,i=n.DERSequence,a=n.DERTaggedObject,u=n.cms,c=u.SignerIdentifier,l=u.AttributeList,p=(u.ContentType,u.EncapsulatedContentInfo,u.MessageDigest,u.SignedData,n.x509.AlgorithmIdentifier),f=r.crypto,h=et;u.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var e=this.params,t=e.sigalg,r=new l(e.sattrs).tohex(),n=h.getKey(e.signkey),o=new f.Signature({alg:t});o.init(n),o.updateHex(r);var s=o.sign();e.sighex=s},this.tohex=function(){var e=this.params,r=[];if(r.push(new o({int:e.version})),r.push(new c(e.id)),r.push(new p({name:e.hashalg})),null!=e.sattrs){var n=new l(e.sattrs);try{r.push(new a({tag:"a0",explicit:!1,obj:n}))}catch(u){throw new t("si sattr error: "+u)}}if(null!=e.sigalgfield?r.push(new p({name:e.sigalgfield})):r.push(new p({name:e.sigalg})),null==e.sighex&&null!=e.signkey&&this.sign(),r.push(new s({hex:e.sighex})),null!=e.uattrs){n=new l(e.uattrs);try{r.push(new a({tag:"a1",explicit:!1,obj:n}))}catch(u){throw new t("si uattr error: "+u)}}return new i({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SignerInfo,se.asn1.ASN1Object),se.asn1.cms.EncapsulatedContentInfo=function(e){var t=se.asn1,r=t.DERTaggedObject,n=t.DERSequence,o=t.DERObjectIdentifier,s=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];if(t.push(new o(e.type)),null!=e.content&&(null!=e.content.hex||null!=e.content.str)&&1!=e.isDetached){var i=new s(e.content),a=new r({tag:"a0",explicit:!0,obj:i});t.push(a)}return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.EncapsulatedContentInfo,se.asn1.ASN1Object),se.asn1.cms.ContentInfo=function(e){var t=se.asn1,r=t.DERTaggedObject,n=t.DERSequence,o=t.DERObjectIdentifier;t.x509.OID.name2obj,se.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];t.push(new o(e.type));var s=new r({tag:"a0",explicit:!0,obj:e.obj});return t.push(s),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.ContentInfo,se.asn1.ASN1Object),se.asn1.cms.SignedData=function(e){Error;var t=se.asn1,r=(t.ASN1Object,t.DERInteger),n=t.DERSet,o=t.DERSequence,s=(t.DERTaggedObject,t.cms),i=s.EncapsulatedContentInfo,a=s.SignerInfo,u=s.ContentInfo,c=s.CertificateSet,l=s.RevocationInfoChoices,p=t.x509.AlgorithmIdentifier;se.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var e=this.params;this._setDigestAlgs(e),this._setContentTypeByEContent(e),this._setMessageDigestByEContent(e),this._setSignerInfoVersion(e),this._setSignedDataVersion(e)},this._setDigestAlgs=function(e){for(var t={},r=e.sinfos,n=0;n<r.length;n++)t[r[n].hashalg]=1;e.hashalgs=Object.keys(t).sort()},this._setContentTypeByEContent=function(e){for(var t=e.econtent.type,r=e.sinfos,n=0;n<r.length;n++){var o=r[n];this._getAttrParamByName(o,"contentType").type=t}},this._setMessageDigestByEContent=function(e){var t=e.econtent,r=(e.econtent.type,t.content.hex);null==r&&"data"==t.type&&null!=t.content.str&&(r=we(t.content.str));for(var n=e.sinfos,o=0;o<n.length;o++){var s=n[o],i=s.hashalg,a=this._getAttrParamByName(s,"messageDigest"),u=se.crypto.Util.hashHex(r,i);a.hex=u}},this._getAttrParamByName=function(e,t){for(var r=e.sattrs.array,n=0;n<r.length;n++)if(r[n].attr==t)return r[n]},this._setSignerInfoVersion=function(e){for(var t=e.sinfos,r=0;r<t.length;r++){var n=t[r],o=1;"skid"==n.id.type&&(o=3),n.version=o}},this._setSignedDataVersion=function(e){var t=this._getSignedDataVersion(e);e.version=t},this._getSignedDataVersion=function(e){if(null!=e.revinfos)for(var t=e.revinfos,r=0;r<t.length;r++)if(null!=t[r].ocsp)return 5;var n=e.sinfos;for(r=0;r<n.length;r++)if(3==e.sinfos[r].version)return 3;return"data"!=e.econtent.type?3:1},this.tohex=function(){var e=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=e.fixed&&this.checkAndFixParam();var t=[];t.push(new r({int:e.version}));for(var s=[],u=0;u<e.hashalgs.length;u++){var f=e.hashalgs[u];s.push(new p({name:f}))}t.push(new n({array:s})),t.push(new i(e.econtent)),null!=e.certs&&t.push(new c(e.certs)),null!=e.revinfos&&t.push(new l(e.revinfos));var h=[];for(u=0;u<e.sinfos.length;u++){var d=e.sinfos[u];h.push(new a(d))}return t.push(new n({array:h})),new o({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new u({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.SignedData,se.asn1.ASN1Object),se.asn1.cms.CertificateSet=function(e){se.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,r=se.asn1,n=r.DERTaggedObject,o=r.DERSet,s=r.ASN1Object;this.params=null,this.tohex=function(){var e,r=this.params,i=[];if(r instanceof Array)e=r;else{if(null==r.array)throw new t("cert array not specified");e=r.array}for(var a=0;a<e.length;a++){var u=Ce(e[a]),c=new s;c.hTLV=u,i.push(c)}var l={array:i};0==r.sortflag&&(l.sortflag=!1);var p=new o(l);return new n({tag:"a0",explicit:!1,obj:p}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.CertificateSet,se.asn1.ASN1Object),se.asn1.cms.RevocationInfoChoices=function(e){se.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var t=[],r=0;r<e.length;r++)t.push(new se.asn1.cms.RevocationInfoChoice(e[r]));return se.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:t}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.RevocationInfoChoices,se.asn1.ASN1Object),se.asn1.cms.RevocationInfoChoice=function(e){se.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(null!=e.crl&&"string"==typeof e.crl){var t=e.crl;return-1!=e.crl.indexOf("-----BEGIN")&&(t=Ce(e.crl)),t}if(null!=e.ocsp)return se.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new se.asn1.cms.OtherRevocationFormat(e)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.RevocationInfoChoice,se.asn1.ASN1Object),se.asn1.cms.OtherRevocationFormat=function(e){se.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,r=se,n=r.asn1.ASN1Util.newObject,o=r.lang.String.isHex;this.params=null,this.tohex=function(){var e=this.params;if(null==e.ocsp)throw new t("property ocsp not specified");if(!o(e.ocsp)||!ue.isASN1HEX(e.ocsp))throw new t("ocsp value not ASN.1 hex string");return n({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:e.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cms.OtherRevocationFormat,se.asn1.ASN1Object),se.asn1.cms.CMSUtil=new function(){},se.asn1.cms.CMSUtil.newSignedData=function(e){return new se.asn1.cms.SignedData(e)},se.asn1.cms.CMSUtil.verifySignedData=function(e){var t=se,r=t.asn1,n=r.cms,o=(n.SignerInfo,n.SignedData,n.SigningTime,n.SigningCertificate,n.SigningCertificateV2,r.cades.SignaturePolicyIdentifier,t.lang.String.isHex),s=ue,i=s.getVbyList,a=s.getTLVbyList,u=s.getIdxbyList,c=s.getChildIdx,l=s.getTLV,p=s.oidname,f=t.crypto.Util.hashHex;void 0===e.cms&&o(e.cms);var h=e.cms,d=function(e,t){var r=t.idx;t.signerid_issuer1=a(e,r,[1,0],"30"),t.signerid_serial1=i(e,r,[1,1],"02"),t.hashalg=p(i(e,r,[2,0],"06"));var n=u(e,r,[3],"a0");t.idxSignedAttrs=n,_(e,t,n);var o=c(e,r).length;if(o<6)throw"malformed SignerInfo";t.sigalg=p(i(e,r,[o-2,0],"06")),t.sigval=i(e,r,[o-1],"04")},_=function(e,t,r){var n=c(e,r);t.signedAttrIdxList=n;for(var o=0;o<n.length;o++){var s,a=n[o],u=i(e,a,[0],"06");"2a864886f70d010905"===u?(s=ve(i(e,a,[1,0])),t.saSigningTime=s):"2a864886f70d010904"===u&&(s=i(e,a,[1,0],"04"),t.saMessageDigest=s)}},g=function(e,t,r,n){r.verifyDetail={};var o=r.verifyDetail,s=t.parse.econtent,i=r.hashalg,a=r.saMessageDigest;o.validMessageDigest=!1,f(s,i)===a&&(o.validMessageDigest=!0),function(e,t,r,n){var o,s=t.parse.certsIdx;if(void 0===t.certs){o=[],t.certkeys=[];for(var i=c(e,s),a=0;a<i.length;a++){var u=l(e,i[a]),p=new ot;p.readCertHex(u),o[a]=p,t.certkeys[a]=p.getPublicKey()}t.certs=o}else o=t.certs;for(t.cccc=o.length,t.cccci=i.length,a=0;a<o.length;a++){var f=p.getIssuerHex(),h=p.getSerialNumberHex();r.signerid_issuer1===f&&r.signerid_serial1===h&&(r.certkey_idx=a)}}(e,t,r),o.validSignatureValue=!1;var u=r.sigalg,p="31"+l(e,r.idxSignedAttrs).substr(2);r.signedattrshex=p;var h=t.certs[r.certkey_idx].getPublicKey(),d=new se.crypto.Signature({alg:u});d.init(h),d.updateHex(p);var _=d.verify(r.sigval);o.validSignatureValue_isValid=_,!0===_&&(o.validSignatureValue=!0),r.isValid=!1,o.validMessageDigest&&o.validSignatureValue&&(r.isValid=!0)},y={isValid:!1,parse:{}};return function(e,t){if("2a864886f70d010702"!==i(e,0,[0],"06"))return t;t.cmsType="signedData",t.econtent=i(e,0,[1,0,2,1,0]),function(e,t){for(var r,n=3;n<6;n++)if(void 0!==(r=u(e,0,[1,0,n]))){var o=e.substr(r,2);"a0"===o&&(t.certsIdx=r),"a1"===o&&(t.revinfosIdx=r),"31"===o&&(t.signerinfosIdx=r)}}(e,t),t.signerInfos=[],function(e,t){var r=t.signerinfosIdx;if(void 0!==r){var n=c(e,r);t.signerInfoIdxList=n;for(var o=0;o<n.length;o++){var s={idx:n[o]};d(e,s),t.signerInfos.push(s)}}}(e,t)}(h,y.parse),function(e,t){for(var r=t.parse.signerInfos,n=r.length,o=!0,s=0;s<n;s++){var i=r[s];g(e,t,i),i.isValid||(o=!1)}t.isValid=o}(h,y),y},se.asn1.cms.CMSParser=function(){var e=Error,t=ot,r=new t,n=ue,o=n.getV,s=n.getTLV,i=(n.getIdxbyList,n.getTLVbyList),a=n.getTLVbyListEx,u=n.getVbyList,c=n.getVbyListEx,l=n.getChildIdx;this.getCMSSignedData=function(e){var t=i(e,0,[1,0]);return this.getSignedData(t)},this.getSignedData=function(e){var t=l(e,0),r={},n=o(e,t[0]),i=parseInt(n,16);r.version=i;var u=s(e,t[1]);r.hashalgs=this.getHashAlgArray(u);var c=s(e,t[2]);r.econtent=this.getEContent(c);var p=a(e,0,["[0]"]);null!=p&&(r.certs=this.getCertificateSet(p)),a(e,0,["[1]"]);var f=a(e,0,[3]);return r.sinfos=this.getSignerInfos(f),r},this.getHashAlgArray=function(e){for(var r=l(e,0),n=new t,o=[],i=0;i<r.length;i++){var a=s(e,r[i]),u=n.getAlgorithmIdentifierName(a);o.push(u)}return o},this.getEContent=function(e){var t={},r=u(e,0,[0]),n=u(e,0,[1,0]);return t.type=se.asn1.x509.OID.oid2name(ue.hextooidstr(r)),t.content={hex:n},t},this.getSignerInfos=function(e){for(var t=[],r=l(e,0),n=0;n<r.length;n++){var o=s(e,r[n]),i=this.getSignerInfo(o);t.push(i)}return t},this.getSignerInfo=function(e){var t={},o=l(e,0),i=n.getInt(e,o[0],-1);-1!=i&&(t.version=i);var u=s(e,o[1]),p=this.getIssuerAndSerialNumber(u);t.id=p;var f=s(e,o[2]),h=r.getAlgorithmIdentifierName(f);t.hashalg=h;var d=a(e,0,["[0]"]);if(null!=d){var _=this.getAttributeList(d);t.sattrs=_}var g=a(e,0,[3]),y=r.getAlgorithmIdentifierName(g);t.sigalg=y;var v=c(e,0,[4]);t.sighex=v;var m=a(e,0,["[1]"]);if(null!=m){var b=this.getAttributeList(m);t.uattrs=b}return t},this.getSignerIdentifier=function(e){if("30"==e.substr(0,2))return this.getIssuerAndSerialNumber(e);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(e){var t={type:"isssn"},n=l(e,0),i=s(e,n[0]);t.issuer=r.getX500Name(i);var a=o(e,n[1]);return t.serial={hex:a},t},this.getAttributeList=function(e){for(var t=[],r=l(e,0),n=0;n<r.length;n++){var o=s(e,r[n]),i=this.getAttribute(o);t.push(i)}return{array:t}},this.getAttribute=function(e){var t={},r=l(e,0),o=n.getOID(e,r[0]),i=se.asn1.x509.OID.oid2name(o);t.attr=i;var a=s(e,r[1]),u=l(a,0);if(1==u.length)t.valhex=s(a,u[0]);else{for(var c=[],p=0;p<u.length;p++)c.push(s(a,u[p]));t.valhex=c}return"contentType"==i?this.setContentType(t):"messageDigest"==i?this.setMessageDigest(t):"signingTime"==i?this.setSigningTime(t):"signingCertificate"==i?this.setSigningCertificate(t):"signingCertificateV2"==i?this.setSigningCertificateV2(t):"signaturePolicyIdentifier"==i&&this.setSignaturePolicyIdentifier(t),t},this.setContentType=function(e){var t=n.getOIDName(e.valhex,0,null);null!=t&&(e.type=t,delete e.valhex)},this.setSigningTime=function(e){var t=ve(o(e.valhex,0));e.str=t,delete e.valhex},this.setMessageDigest=function(e){var t=o(e.valhex,0);e.hex=t,delete e.valhex},this.setSigningCertificate=function(e){var t=l(e.valhex,0);if(t.length>0){for(var r=s(e.valhex,t[0]),n=l(r,0),o=[],i=0;i<n.length;i++){var a=s(r,n[i]),u=this.getESSCertID(a);o.push(u)}e.array=o}if(t.length>1){var c=s(e.valhex,t[1]);e.polhex=c}delete e.valhex},this.setSignaturePolicyIdentifier=function(e){var r=l(e.valhex,0);if(r.length>0){var i=n.getOID(e.valhex,r[0]);e.oid=i}if(r.length>1){var a=new t,u=l(e.valhex,r[1]),c=s(e.valhex,u[0]),p=a.getAlgorithmIdentifierName(c);e.alg=p;var f=o(e.valhex,u[1]);e.hash=f}delete e.valhex},this.setSigningCertificateV2=function(e){var t=l(e.valhex,0);if(t.length>0){for(var r=s(e.valhex,t[0]),n=l(r,0),o=[],i=0;i<n.length;i++){var a=s(r,n[i]),u=this.getESSCertIDv2(a);o.push(u)}e.array=o}if(t.length>1){var c=s(e.valhex,t[1]);e.polhex=c}delete e.valhex},this.getESSCertID=function(e){var t={},r=l(e,0);if(r.length>0){var n=o(e,r[0]);t.hash=n}if(r.length>1){var i=s(e,r[1]),a=this.getIssuerSerial(i);null!=a.serial&&(t.serial=a.serial),null!=a.issuer&&(t.issuer=a.issuer)}return t},this.getESSCertIDv2=function(t){var n={},i=l(t,0);if(i.length<1||3<i.length)throw new e("wrong number of elements");var a=0;if("30"==t.substr(i[0],2)){var u=s(t,i[0]);n.alg=r.getAlgorithmIdentifierName(u),a++}else n.alg="sha256";var c=o(t,i[a]);if(n.hash=c,i.length>a+1){var p=s(t,i[a+1]),f=this.getIssuerSerial(p);n.issuer=f.issuer,n.serial=f.serial}return n},this.getIssuerSerial=function(e){var t={},n=l(e,0),i=s(e,n[0]),a=r.getGeneralNames(i)[0].dn;t.issuer=a;var u=o(e,n[1]);return t.serial={hex:u},t},this.getCertificateSet=function(e){for(var t=l(e,0),r=[],n=0;n<t.length;n++){var o=s(e,t[n]);if("30"==o.substr(0,2)){var i=Se(o,"CERTIFICATE");r.push(i)}}return{array:r,sortflag:!1}}},void 0!==se&&se||(se={}),void 0!==se.asn1&&se.asn1||(se.asn1={}),void 0!==se.asn1.tsp&&se.asn1.tsp||(se.asn1.tsp={}),se.asn1.tsp.TimeStampToken=function(e){var t=se.asn1.tsp;t.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var e=new t.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=e.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.TimeStampToken,se.asn1.cms.SignedData),se.asn1.tsp.TSTInfo=function(e){Error;var t=se.asn1,r=t.DERSequence,n=t.DERInteger,o=t.DERBoolean,s=t.DERGeneralizedTime,i=t.DERObjectIdentifier,a=t.DERTaggedObject,u=t.tsp,c=u.MessageImprint,l=u.Accuracy,p=(t.x509.X500Name,t.x509.GeneralName);if(u.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(e.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(e.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(e.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new r({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new i({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new c(e.messageImprint)),void 0!==e.serial&&(this.dSerial=new n(e.serial)),void 0!==e.genTime&&(this.dGenTime=new s(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new l(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new o),void 0!==e.nonce&&(this.dNonce=new n(e.nonce)),void 0!==e.tsa&&(this.dTsa=new a({tag:"a0",explicit:!0,obj:new p({dn:e.tsa})}))}},Qe(se.asn1.tsp.TSTInfo,se.asn1.ASN1Object),se.asn1.tsp.Accuracy=function(e){var t=se.asn1,r=t.ASN1Util.newObject;t.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return null!=e.seconds&&"number"==typeof e.seconds&&t.push({int:e.seconds}),null!=e.millis&&"number"==typeof e.millis&&t.push({tag:{tagi:"80",obj:{int:e.millis}}}),null!=e.micros&&"number"==typeof e.micros&&t.push({tag:{tagi:"81",obj:{int:e.micros}}}),r({seq:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.Accuracy,se.asn1.ASN1Object),se.asn1.tsp.MessageImprint=function(e){var t=se.asn1,r=t.DERSequence,n=t.DEROctetString,o=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=new o({name:e.alg}),s=new n({hex:e.hash});return new r({array:[t,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.tsp.MessageImprint,se.asn1.ASN1Object),se.asn1.tsp.TimeStampReq=function(e){var t=se.asn1,r=t.DERSequence,n=t.DERInteger,o=t.DERBoolean,s=(t.ASN1Object,t.DERObjectIdentifier),i=t.tsp,a=i.MessageImprint;i.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return t.push(new n({int:1})),e.messageImprint instanceof se.asn1.ASN1Object?t.push(e.messageImprint):t.push(new a(e.messageImprint)),null!=e.policy&&t.push(new s(e.policy)),null!=e.nonce&&t.push(new n(e.nonce)),1==e.certreq&&t.push(new o),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.TimeStampReq,se.asn1.ASN1Object),se.asn1.tsp.TimeStampResp=function(e){var t=se.asn1,r=t.DERSequence,n=(t.ASN1Object,t.tsp),o=n.PKIStatusInfo;n.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,s=[];if(null!=e.econtent||null!=e.tst)if(null!=e.statusinfo?s.push(new o(e.statusinfo)):s.push(new o("granted")),null!=e.econtent)s.push(new n.TimeStampToken(e).getContentInfo());else{if(!(e.tst instanceof t.ASN1Object))throw new Error("improper member tst value");s.push(e.tst)}else{if(null==e.statusinfo)throw new Error("parameter for token nor statusinfo not specified");s.push(new o(e.statusinfo))}return new r({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.TimeStampResp,se.asn1.ASN1Object),se.asn1.tsp.PKIStatusInfo=function(e){var t=Error,r=se.asn1,n=r.DERSequence,o=r.tsp,s=o.PKIStatus,i=o.PKIFreeText,a=o.PKIFailureInfo;o.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,r=[];if("string"==typeof e)r.push(new s(e));else{if(null==e.status)throw new t("property 'status' unspecified");r.push(new s(e.status)),null!=e.statusstr&&r.push(new i(e.statusstr)),null!=e.failinfo&&r.push(new a(e.failinfo))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.PKIStatusInfo,se.asn1.ASN1Object),se.asn1.tsp.PKIStatus=function(e){var t=Error,r=se.asn1,n=r.DERInteger;r.tsp.PKIStatus.superclass.constructor.call(this);var o={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var e,r=this.params;if("string"==typeof r)try{e=o[r]}catch(l){throw new t("undefined name: "+r)}else{if("number"!=typeof r)throw new t("unsupported params");e=r}return new n({int:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.PKIStatus,se.asn1.ASN1Object),se.asn1.tsp.PKIFreeText=function(e){var t=Error,r=se.asn1,n=r.DERSequence,o=r.DERUTF8String;r.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new t("wrong params: not array");for(var r=[],s=0;s<e.length;s++)r.push(new o({str:e[s]}));return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.PKIFreeText,se.asn1.ASN1Object),se.asn1.tsp.PKIFailureInfo=function(e){var t=Error,r=se.asn1,n=r.DERBitString,o=r.tsp.PKIFailureInfo,s={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};o.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var e=this.params,r=0;if("number"==typeof e&&0<=e&&e<=25){for(var n=(r|=1<<e).toString(2),o="",i=n.length-1;i>=0;i--)o+=n[i];return o}if("string"==typeof e&&null!=s[e])return Je([e],s);if("object"==typeof e&&null!=e.length)return Je(e,s);throw new t("wrong params")},this.tohex=function(){this.params;var e=this.getBinValue();return new n({bin:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.tsp.PKIFailureInfo,se.asn1.ASN1Object),se.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},se.asn1.tsp.SimpleTSAAdapter=function(e){var t=se,r=t.asn1.tsp,n=t.crypto.Util.hashHex;r.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,t){var o=n(e,t);this.params.econtent.content.messageImprint={alg:t,hash:o},this.params.econtent.content.serial={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:s},new r.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},Qe(se.asn1.tsp.SimpleTSAAdapter,se.asn1.tsp.AbstractTSAAdapter),se.asn1.tsp.FixedTSAAdapter=function(e){var t=se,r=t.asn1.tsp,n=t.crypto.Util.hashHex;r.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,t){var o=n(e,t);return this.params.econtent.content.messageImprint={alg:t,hash:o},new r.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},Qe(se.asn1.tsp.FixedTSAAdapter,se.asn1.tsp.AbstractTSAAdapter),se.asn1.tsp.TSPUtil=new function(){},se.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new se.asn1.tsp.TimeStampToken(e)},se.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){return(new se.asn1.tsp.TSPParser).getTimeStampReq(e)},se.asn1.tsp.TSPUtil.parseMessageImprint=function(e){return(new se.asn1.tsp.TSPParser).getMessageImprint(e)},se.asn1.tsp.TSPParser=function(){Error;var e=new ot,t=ue,r=t.getV,n=t.getTLV,o=t.getIdxbyList,s=(t.getTLVbyListEx,t.getChildIdx),i=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],a={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(e){var t=s(e,0);if(1==t.length)return this.getPKIStatusInfo(n(e,t[0]));if(t.length>1){var r=this.getPKIStatusInfo(n(e,t[0])),o=n(e,t[1]),i=this.getToken(o);return i.statusinfo=r,i}},this.getToken=function(e){var t=(new se.asn1.cms.CMSParser).getCMSSignedData(e);return this.setTSTInfo(t),t},this.setTSTInfo=function(e){var t=e.econtent;if("tstinfo"==t.type){var r=t.content.hex,n=this.getTSTInfo(r);t.content=n}},this.getTSTInfo=function(t){var o={},i=s(t,0),a=r(t,i[1]);o.policy=Ve(a);var u=n(t,i[2]);o.messageImprint=this.getMessageImprint(u);var c=r(t,i[3]);o.serial={hex:c};var l=r(t,i[4]);o.genTime={str:ve(l)};var p=0;if(i.length>5&&"30"==t.substr(i[5],2)){var f=n(t,i[5]);o.accuracy=this.getAccuracy(f),p++}if(i.length>5+p&&"01"==t.substr(i[5+p],2)&&("ff"==r(t,i[5+p])&&(o.ordering=!0),p++),i.length>5+p&&"02"==t.substr(i[5+p],2)){var h=r(t,i[5+p]);o.nonce={hex:h},p++}if(i.length>5+p&&"a0"==t.substr(i[5+p],2)){var d=n(t,i[5+p]);d="30"+d.substr(2),pGeneralNames=e.getGeneralNames(d);var _=pGeneralNames[0].dn;o.tsa=_,p++}if(i.length>5+p&&"a1"==t.substr(i[5+p],2)){var g=n(t,i[5+p]);g="30"+g.substr(2);var y=e.getExtParamArray(g);o.ext=y,p++}return o},this.getAccuracy=function(e){for(var t={},n=s(e,0),o=0;o<n.length;o++){var i=e.substr(n[o],2),a=r(e,n[o]),u=parseInt(a,16);"02"==i?t.seconds=u:"80"==i?t.millis=u:"81"==i&&(t.micros=u)}return t},this.getMessageImprint=function(e){if("30"!=e.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var n={},i=(s(e,0),o(e,0,[0,0])),a=r(e,i),u=t.hextooidstr(a),c=se.asn1.x509.OID.oid2name(u);if(""==c)throw new Error("hashAlg name undefined: "+u);var l=c,p=o(e,0,[1]);return n.alg=l,n.hash=r(e,p),n},this.getPKIStatusInfo=function(e){var t={},o=s(e,0),a=0;try{var u=r(e,o[0]),c=parseInt(u,16);t.status=i[c]}catch(f){}if(o.length>1&&"30"==e.substr(o[1],2)){var l=n(e,o[1]);t.statusstr=this.getPKIFreeText(l),a++}if(o.length>a&&"03"==e.substr(o[1+a],2)){var p=n(e,o[1+a]);t.failinfo=this.getPKIFailureInfo(p)}return t},this.getPKIFreeText=function(e){for(var r=[],n=s(e,0),o=0;o<n.length;o++)r.push(t.getString(e,n[o]));return r},this.getPKIFailureInfo=function(e){var r=t.getInt(e,0);return null!=a[r]?a[r]:r},this.getTimeStampReq=function(e){var o={certreq:!1},i=s(e,0);if(i.length<2)throw new Error("TimeStampReq must have at least 2 items");var a=n(e,i[1]);o.messageImprint=se.asn1.tsp.TSPUtil.parseMessageImprint(a);for(var u=2;u<i.length;u++){var c=i[u],l=e.substr(c,2);if("06"==l){var p=r(e,c);o.policy=t.hextooidstr(p)}"02"==l&&(o.nonce=r(e,c)),"01"==l&&(o.certreq=!0)}return o}},void 0!==se&&se||(se={}),void 0!==se.asn1&&se.asn1||(se.asn1={}),void 0!==se.asn1.cades&&se.asn1.cades||(se.asn1.cades={}),se.asn1.cades.SignaturePolicyIdentifier=function(e){var t=se.asn1.cades,r=t.SignaturePolicyId;t.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new r(this.params)]},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.SignaturePolicyIdentifier,se.asn1.cms.Attribute),se.asn1.cades.SignaturePolicyId=function(e){var t=se.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,o=(t.x509.AlgorithmIdentifier,t.cades),s=o.SignaturePolicyId,i=o.OtherHashAlgAndValue;s.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return t.push(new n(e.oid)),t.push(new i(e)),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.SignaturePolicyId,se.asn1.ASN1Object),se.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,r=se.asn1,n=r.DERSequence,o=r.DEROctetString,s=r.x509.AlgorithmIdentifier;r.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(null==e.alg)throw new t("property 'alg' not specified");if(null==e.hash&&null==e.cert)throw new t("property 'hash' nor 'cert' not specified");var r=null;if(null!=e.hash)r=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var i=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(i=Ce(e.cert)),r=se.crypto.Util.hashHex(i,e.alg)}var a=[];return a.push(new s({name:e.alg})),a.push(new o({hex:r})),new n({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.OtherHashAlgAndValue,se.asn1.ASN1Object),se.asn1.cades.OtherHashValue=function(e){se.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,r=se,n=(r.lang.String.isHex,r.asn1.DEROctetString);r.crypto.Util.hashHex,this.params=null,this.tohex=function(){var e=this.params;if(null==e.hash&&null==e.cert)throw new t("hash or cert not specified");var r=null;if(null!=e.hash)r=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var o=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(o=Ce(e.cert)),r=se.crypto.Util.hashHex(o,"sha1")}return new n({hex:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.OtherHashValue,se.asn1.ASN1Object),se.asn1.cades.SignatureTimeStamp=function(e){var t=Error,r=se,n=r.lang.String.isHex,o=r.asn1,s=o.ASN1Object;o.x509,o.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var e=this.params;if(null!=e.tst){if(n(e.tst))return(r=new s).hTLV=e.tst,[r];if(e.tst instanceof s)return[e.tst];throw new t("params.tst has wrong value")}if(null!=e.res){var r,o=e.res;if(o instanceof s&&(o=o.tohex()),"string"!=typeof o||!n(o))throw new t("params.res has wrong value");return ue.getTLVbyList(o,0,[1]),(r=new s).hTLV=e.tst,[r]}},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.SignatureTimeStamp,se.asn1.cms.Attribute),se.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,r=se,n=r.asn1,o=n.DERSequence,s=n.cades,i=s.OtherCertID,a=r.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var e=this.params,r=[],n=0;n<e.array.length;n++){var s=e.array[n];if("string"==typeof s)if(-1!=s.indexOf("-----BEGIN"))s={cert:s};else{if(!a(s))throw new t("unsupported value: "+s);s={hash:s}}null!=e.alg&&null==s.alg&&(s.alg=e.alg),null!=e.hasis&&null==s.hasis&&(s.hasis=e.hasis);var u=new i(s);r.push(u)}return[new o({array:r})]},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.CompleteCertificateRefs,se.asn1.cms.Attribute),se.asn1.cades.OtherCertID=function(e){var t=se.asn1,r=t.DERSequence,n=t.cms.IssuerSerial,o=t.cades,s=o.OtherHashValue,i=o.OtherHashAlgAndValue;o.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var e=this.params;"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?e={cert:e}:_isHex(e)&&(e={hash:e}));var t,o=[];if(t=null!=e.alg?new i(e):new s(e),o.push(t),null!=e.cert&&1==e.hasis||null!=e.issuer&&null!=e.serial){var a=new n(e);o.push(a)}return new r({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.OtherCertID,se.asn1.ASN1Object),se.asn1.cades.OtherHash=function(e){Error;var t=se,r=t.asn1,n=(r.cms,r.cades),o=n.OtherHashAlgAndValue,s=n.OtherHashValue,i=(t.crypto.Util.hashHex,t.lang.String.isHex);n.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;return"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?e={cert:e}:i(e)&&(e={hash:e})),(null!=e.alg?new o(e):new s(e)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.cades.OtherHash,se.asn1.ASN1Object),se.asn1.cades.CAdESUtil=new function(){},se.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){return(new se.asn1.cms.CMSParser).getCMSSignedData(e)},se.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=ue,o=n.getChildIdx,s=n.getTLV,i=n.getV,a=se.asn1,u=a.ASN1Object,c=a.cms,l=c.AttributeList,p=c.SignerInfo,f={},h=o(e,t);if(6!=h.length)throw"not supported items for SignerInfo (!=6)";var d=h.shift();f.version=s(e,d);var _=h.shift();f.si=s(e,_);var g=h.shift();f.digalg=s(e,g);var y=h.shift();f.sattrs=s(e,y);var v=h.shift();f.sigalg=s(e,v);var m=h.shift();f.sig=s(e,m),f.sigval=i(e,m);var b=null;return f.obj=new p,(b=new u).hTLV=f.version,f.obj.dCMSVersion=b,(b=new u).hTLV=f.si,f.obj.dSignerIdentifier=b,(b=new u).hTLV=f.digalg,f.obj.dDigestAlgorithm=b,(b=new u).hTLV=f.sattrs,f.obj.dSignedAttrs=b,(b=new u).hTLV=f.sigalg,f.obj.dSigAlg=b,(b=new u).hTLV=f.sig,f.obj.dSig=b,f.obj.dUnsignedAttrs=new l,f},void 0!==se.asn1.csr&&se.asn1.csr||(se.asn1.csr={}),se.asn1.csr.CertificationRequest=function(e){var t=se.asn1,r=t.DERBitString,n=t.DERSequence,o=t.csr,s=(t.x509,o.CertificationRequestInfo);o.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(e){this.params=e},this.sign=function(){var e=new s(this.params).tohex(),t=new se.crypto.Signature({alg:this.params.sigalg});t.init(this.params.sbjprvkey),t.updateHex(e);var r=t.sign();this.params.sighex=r},this.getPEM=function(){return Se(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var e=this.params,t=new se.asn1.csr.CertificationRequestInfo(this.params),o=new se.asn1.x509.AlgorithmIdentifier({name:e.sigalg});if(null==e.sighex&&null!=e.sbjprvkey&&this.sign(),null==e.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var s=new r({hex:"00"+e.sighex});return new n({array:[t,o,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.csr.CertificationRequest,se.asn1.ASN1Object),se.asn1.csr.CertificationRequestInfo=function(e){var t=se.asn1,r=(t.DERBitString,t.DERSequence),n=t.DERInteger,o=t.DERUTF8String,s=t.DERTaggedObject,i=t.ASN1Util.newObject,a=t.csr,u=t.x509,c=u.X500Name,l=u.Extensions,p=u.SubjectPublicKeyInfo;a.AttributeList,a.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(e){null!=e&&(this.params=e)},this.tohex=function(){var e=this.params,t=[];if(t.push(new n({int:0})),t.push(new c(e.subject)),t.push(new p(et.getKey(e.sbjpubkey))),null!=e.attrs){var a=function(e){for(var t=Error,r=se.asn1.x509.Extensions,n=[],o=0;o<e.length;o++){var s=e[o],i=s.attr;if("extensionRequest"==i){var a={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[new r(s.ext)]}]};n.push(a)}else if("unstructuredName"==i){a={seq:[{oid:"1.2.840.113549.1.9.2"},{set:s.names}]};n.push(a)}else{if("challengePassword"!=i)throw new t("unknown CSR attribute");a={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:s.password}]}]};n.push(a)}}return{set:n}}(e.attrs),u=i({tag:{tage:"a0",obj:a}});t.push(u)}else if(null!=e.extreq){var f=new l(e.extreq);u=i({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[f]}]}}}),t.push(u)}else t.push(new s({tag:"a0",explicit:!1,obj:new o({str:""})}));return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Qe(se.asn1.csr.CertificationRequestInfo,se.asn1.ASN1Object),se.asn1.csr.AttributeList=function(e){},Qe(se.asn1.csr.AttributeList,se.asn1.ASN1Object),se.asn1.csr.CSRUtil=new function(){},se.asn1.csr.CSRUtil.newCSRPEM=function(e){return new se.asn1.csr.CertificationRequest(e).getPEM()},se.asn1.csr.CSRUtil.getParam=function(e,t){var r=ue,n=r.getV,o=r.getIdxbyList,s=r.getTLVbyList,i=r.getTLVbyListEx,a=r.getVbyListEx,u={};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var c=Ce(e,"CERTIFICATE REQUEST");t&&(u.tbs=s(c,0,[0]));try{var l=i(c,0,[0,1]);if("3000"==l)u.subject={};else{var p=new ot;u.subject=p.getX500Name(l)}}catch(m){}var f=i(c,0,[0,2]),h=et.getKey(f,null,"pkcs8pub");u.sbjpubkey=et.getPEM(h,"PKCS8PUB");var d,_,g=(_=o(d=c,0,[0,3,0,0],"06"),"2a864886f70d01090e"!=n(d,_)?null:s(d,0,[0,3,0,1,0],"30"));p=new ot,null!=g&&(u.extreq=p.getExtParamArray(g));try{var y=i(c,0,[1],"30");p=new ot,u.sigalg=p.getAlgorithmIdentifierName(y)}catch(m){}try{var v=a(c,0,[2]);u.sighex=v}catch(m){}return u},se.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if("string"==typeof e&&-1!=e.indexOf("-----BEGIN CERTIFICATE REQUEST")?t=se.asn1.csr.CSRUtil.getParam(e,!0):"object"==typeof e&&null!=e.sbjpubkey&&null!=e.sigalg&&null!=e.sighex&&null!=e.tbs&&(t=e),null==t)return!1;var n=new se.crypto.Signature({alg:t.sigalg});return n.init(t.sbjpubkey),n.updateHex(t.tbs),n.verify(t.sighex)}catch(r){return alert(r),!1}},void 0!==se&&se||(se={}),void 0!==se.asn1&&se.asn1||(se.asn1={}),void 0!==se.asn1.ocsp&&se.asn1.ocsp||(se.asn1.ocsp={}),se.asn1.ocsp.DEFAULT_HASH="sha1",se.asn1.ocsp.OCSPResponse=function(e){se.asn1.ocsp.OCSPResponse.superclass.constructor.call(this),se.asn1.DEREnumerated;var t=se.asn1.ASN1Util.newObject,r=se.asn1.ocsp.ResponseBytes,n=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var e=this.params.resstatus;return"number"==typeof e?e:"string"!=typeof e?-1:n.indexOf(e)},this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params,n=this._getStatusCode();if(-1==n)throw new Error("responseStatus not supported: "+e.resstatus);if(0!=n)return t({seq:[{enum:{int:n}}]}).tohex();var o=new r(e);return t({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:o}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.OCSPResponse,se.asn1.ASN1Object),se.asn1.ocsp.ResponseBytes=function(e){se.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=se.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,o=t.DEROctetString,s=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if("ocspBasic"!=e.restype)throw new Error("not supported responseType: "+e.restype);var t=new s(e),i=[];return i.push(new n({name:"ocspBasic"})),i.push(new o({hex:t.tohex()})),new r({array:i}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.ResponseBytes,se.asn1.ASN1Object),se.asn1.ocsp.BasicOCSPResponse=function(e){se.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,r=se.asn1,n=r.ASN1Object,o=r.DERSequence,s=(r.DERGeneralizedTime,r.DERTaggedObject),i=r.DERBitString,a=(r.x509.Extensions,r.x509.AlgorithmIdentifier),u=r.ocsp;u.ResponderID,_SingleResponseList=u.SingleResponseList,_ResponseData=u.ResponseData,this.params=null,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.tbsresp.tohex(),r=new se.crypto.Signature({alg:e.sigalg});r.init(e.reskey),r.updateHex(t),e.sighex=r.sign()},this.tohex=function(){var e=this.params;null==e.tbsresp&&(e.tbsresp=new _ResponseData(e)),null==e.sighex&&null!=e.reskey&&this.sign();var r=[];if(r.push(e.tbsresp),r.push(new a({name:e.sigalg})),r.push(new i({hex:"00"+e.sighex})),null!=e.certs&&null!=e.certs.length){for(var u=[],c=0;c<e.certs.length;c++){var l=e.certs[c],p=null;if(ue.isASN1HEX(l))p=l;else{if(!l.match(/-----BEGIN/))throw new t("certs["+c+"] not hex or PEM");p=Ce(l)}u.push(new n({tlv:p}))}var f=new o({array:u});r.push(new s({tag:"a0",explicit:!0,obj:f}))}return new o({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.BasicOCSPResponse,se.asn1.ASN1Object),se.asn1.ocsp.ResponseData=function(e){se.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=Error,r=se.asn1,n=r.DERSequence,o=r.DERGeneralizedTime,s=r.DERTaggedObject,i=r.x509.Extensions,a=r.ocsp,u=a.ResponderID;_SingleResponseList=a.SingleResponseList,this.params=null,this.tohex=function(){var e=this.params;null!=e.respid&&new t("respid not specified"),null!=e.prodat&&new t("prodat not specified"),null!=e.array&&new t("array not specified");var r=[];if(r.push(new u(e.respid)),r.push(new o(e.prodat)),r.push(new _SingleResponseList(e.array)),null!=e.ext){var a=new i(e.ext);r.push(new s({tag:"a1",explicit:!0,obj:a}))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.ResponseData,se.asn1.ASN1Object),se.asn1.ocsp.ResponderID=function(e){se.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=se,r=t.asn1,n=r.ASN1Util.newObject,o=r.x509.X500Name,s=t.lang.String.isHex,i=Error;this.params=null,this.tohex=function(){var e=this.params;if(null!=e.key){var t,r=null;if("string"==typeof e.key?(s(e.key)&&(r=e.key),e.key.match(/-----BEGIN CERTIFICATE/)&&null!=(t=new ot(e.key).getExtSubjectKeyIdentifier())&&(r=t.kid.hex)):e.key instanceof ot&&null!=(t=e.key.getExtSubjectKeyIdentifier())&&(r=t.kid.hex),null==r)throw new i("wrong key member value");return n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:r}}}}).tohex()}if(null!=e.name){var a=null;if("string"==typeof e.name&&e.name.match(/-----BEGIN CERTIFICATE/)?a=new ot(e.name).getSubject():e.name instanceof ot?a=e.name.getSubject():"object"!=typeof e.name||null==e.name.array&&null==e.name.str||(a=e.name),null==a)throw new i("wrong name member value");return n({tag:{tag:"a1",explicit:!0,obj:new o(a)}}).tohex()}throw new i("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.ResponderID,se.asn1.ASN1Object),se.asn1.ocsp.SingleResponseList=function(e){se.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=se.asn1,r=t.DERSequence,n=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var e=this.params;if("object"!=typeof e||null==e.length)throw new Error("params not specified properly");for(var t=[],o=0;o<e.length;o++)t.push(new n(e[o]));return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.SingleResponseList,se.asn1.ASN1Object),se.asn1.ocsp.SingleResponse=function(e){var t=Error,r=se.asn1,n=r.DERSequence,o=r.DERGeneralizedTime,s=r.DERTaggedObject,i=r.ocsp,a=i.CertID,u=i.CertStatus,c=r.x509.Extensions;i.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,r=[];if(null==e.certid)throw new t("certid unspecified");if(null==e.status)throw new t("status unspecified");if(null==e.thisupdate)throw new t("thisupdate unspecified");if(r.push(new a(e.certid)),r.push(new u(e.status)),r.push(new o(e.thisupdate)),null!=e.nextupdate){var i=new o(e.nextupdate);r.push(new s({tag:"a0",explicit:!0,obj:i}))}if(null!=e.ext){var l=new c(e.ext);r.push(new s({tag:"a1",explicit:!0,obj:l}))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.SingleResponse,se.asn1.ASN1Object),se.asn1.ocsp.CertID=function(e){var t=se,r=t.asn1,n=r.DEROctetString,o=r.DERInteger,s=r.DERSequence,i=r.x509.AlgorithmIdentifier,a=r.ocsp,u=(a.DEFAULT_HASH,t.crypto.Util.hashHex),c=ot,l=ue.getVbyList;a.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(e,t,r,n){null==n&&(n=this.DEFAULT_HASH),this.params={alg:n,issname:e,isskey:t,sbjsn:r}},this.setByCert=function(e,t,r){null==r&&(r=this.DEFAULT_HASH),this.params={alg:r,issuerCert:e,subjectCert:t}},this.getParamByCerts=function(e,t,r){null==r&&(r=this.DEFAULT_HASH);var n=new c(e),o=new c(t),s=u(n.getSubjectHex(),r),i=n.getPublicKeyHex();return{alg:r,issname:s,isskey:u(l(i,0,[1],"03",!0),r),sbjsn:o.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var e,t,r,a,u=this.params;if(a=null==u.alg?this.DEFAULT_HASH:u.alg,null!=u.issuerCert&&null!=u.subjectCert){var c=this.getParamByCerts(u.issuerCert,u.subjectCert,a);e=c.issname,t=c.isskey,r=c.sbjsn}else{if(null==u.issname||null==u.isskey||null==u.sbjsn)throw new Error("required param members not defined");e=u.issname,t=u.isskey,r=u.sbjsn}var l=new i({name:a}),p=new n({hex:e}),f=new n({hex:t}),h=new o({hex:r}),d=new s({array:[l,p,f,h]});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.CertID,se.asn1.ASN1Object),se.asn1.ocsp.CertStatus=function(e){se.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if("good"==e.status)return"8000";if("unknown"==e.status)return"8200";if("revoked"==e.status){var t=[{gentime:{str:e.time}}];null!=e.reason&&t.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var r={tag:"a1",explicit:!1,obj:{seq:t}};return se.asn1.ASN1Util.newObject({tag:r}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Qe(se.asn1.ocsp.CertStatus,se.asn1.ASN1Object),se.asn1.ocsp.Request=function(e){var t=se.asn1,r=t.DERSequence,n=t.ocsp;if(n.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new r({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e){var o=new n.CertID(e);this.dReqCert=o}},Qe(se.asn1.ocsp.Request,se.asn1.ASN1Object),se.asn1.ocsp.TBSRequest=function(e){var t=se.asn1,r=t.DERSequence,n=t.ocsp;n.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],r=0;r<e.length;r++){var o=new n.Request(e[0]);t.push(o)}this.dRequestList=t},this.tohex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new r({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var n=new r({array:e});return this.hTLV=n.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},Qe(se.asn1.ocsp.TBSRequest,se.asn1.ASN1Object),se.asn1.ocsp.OCSPRequest=function(e){var t=se.asn1,r=t.DERSequence,n=t.ocsp;if(n.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new r({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&void 0!==e.reqList){var o=new n.TBSRequest(e);this.dTbsRequest=o}},Qe(se.asn1.ocsp.OCSPRequest,se.asn1.ASN1Object),se.asn1.ocsp.OCSPUtil={},se.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=se.asn1.ocsp;void 0===r&&(r=n.DEFAULT_HASH);var o={alg:r,issuerCert:e,subjectCert:t};return new n.OCSPRequest({reqList:[o]}).tohex()},se.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=ue,r=t.getVbyList,n=t.getVbyListEx,o=t.getIdxbyList,s=(t.getIdxbyListEx,t.getV),i={};try{var a=n(e,0,[0],"0a");i.responseStatus=parseInt(a,16)}catch(p){}if(0!==i.responseStatus)return i;try{var u=o(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(u,2)?i.certStatus="good":"a1"===e.substr(u,2)?(i.certStatus="revoked",i.revocationTime=ve(r(e,u,[0]))):"82"===e.substr(u,2)&&(i.certStatus="unknown")}catch(p){}try{var c=o(e,0,[1,0,1,0,0,2,0,2]);i.thisUpdate=ve(s(e,c))}catch(p){}try{var l=o(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(l,2)&&(i.nextUpdate=ve(r(e,l,[0])))}catch(p){}return i},se.asn1.ocsp.OCSPParser=function(){var e=Error,t=ot,r=new t,n=ue,o=n.getV,s=n.getTLV,i=n.getIdxbyList,a=n.getVbyList,u=n.getTLVbyList,c=n.getVbyListEx,l=n.getTLVbyListEx,p=n.getChildIdx;this.getOCSPRequest=function(t){var r=p(t,0);if(1!=r.length&&2!=r.length)throw new e("wrong number elements: "+r.length);return this.getTBSRequest(s(t,r[0]))},this.getTBSRequest=function(e){var t={},n=l(e,0,[0],"30");t.array=this.getRequestList(n);var o=l(e,0,["[2]",0],"30");return null!=o&&(t.ext=r.getExtParamArray(o)),t},this.getRequestList=function(e){for(var t=[],r=p(e,0),n=0;n<r.length;n++)e=s(e,r[n]),t.push(this.getRequest(e));return t},this.getRequest=function(t){var n=p(t,0);if(1!=n.length&&2!=n.length)throw new e("wrong number elements: "+n.length);var o=this.getCertID(s(t,n[0]));if(2==n.length){var a=i(t,0,[1,0]);o.ext=r.getExtParamArray(s(t,a))}return o},this.getCertID=function(r){var n=p(r,0);if(4!=n.length)throw new e("wrong number elements: "+n.length);var i=new t,a={};return a.alg=i.getAlgorithmIdentifierName(s(r,n[0])),a.issname=o(r,n[1]),a.isskey=o(r,n[2]),a.sbjsn=o(r,n[3]),a},this.getOCSPResponse=function(e){var t,r=p(e,0),n=o(e,r[0]),s=parseInt(n);if(1==r.length)return{resstatus:s};var i=u(e,0,[1,0]);return(t=this.getResponseBytes(i)).resstatus=s,t},this.getResponseBytes=function(e){var t,r=p(e,0),n=u(e,0,[1,0]);t=this.getBasicOCSPResponse(n);var s=o(e,r[0]);return t.restype=se.asn1.x509.OID.oid2name(Ve(s)),t},this.getBasicOCSPResponse=function(e){var t,r=p(e,0);t=this.getResponseData(s(e,r[0]));var n=new ot;t.alg=n.getAlgorithmIdentifierName(s(e,r[1]));var i=o(e,r[2]);t.sighex=i.substr(2);var a=c(e,0,["[0]"]);if(null!=a){for(var u=p(a,0),l=[],f=0;f<u.length;f++){var h=s(a,u[f]);l.push(h)}t.certs=l}return t},this.getResponseData=function(e){var t=p(e,0),r=t.length,n={},i=0;"a0"==e.substr(t[0],2)&&i++,n.respid=this.getResponderID(s(e,t[i++]));var a=o(e,t[i++]);if(n.prodat=ve(a),n.array=this.getSingleResponseList(s(e,t[i++])),"a1"==e.substr(t[r-1],2)){var c=u(e,t[r-1],[0]),l=new ot;n.ext=l.getExtParamArray(c)}return n},this.getResponderID=function(e){var t={};if("a2"==e.substr(0,2)){var r=a(e,0,[0]);t.key=r}if("a1"==e.substr(0,2)){var n=u(e,0,[0]),o=new ot;t.name=o.getX500Name(n)}return t},this.getSingleResponseList=function(e){for(var t=p(e,0),r=[],n=0;n<t.length;n++){var o=this.getSingleResponse(s(e,t[n]));r.push(o)}return r},this.getSingleResponse=function(e){var t=p(e,0),r={},n=this.getCertID(s(e,t[0]));r.certid=n;var i=this.getCertStatus(s(e,t[1]));if(r.status=i,"18"==e.substr(t[2],2)){var c=o(e,t[2]);r.thisupdate=ve(c)}for(var l=3;l<t.length;l++){if("a0"==e.substr(t[l],2)){var f=a(e,t[l],[0],"18");r.nextupdate=ve(f)}if("a1"==e.substr(t[l],2)){var h=new ot,d=u(e,0,[l,0]);r.ext=h.getExtParamArray(d)}}return r},this.getCertStatus=function(e){var t={};if("8000"==e)return{status:"good"};if("8200"==e)return{status:"unknown"};if("a1"==e.substr(0,2)){t.status="revoked";var r=ve(a(e,0,[0]));t.time=r}return t}},void 0!==se&&se||(se={}),void 0!==se.lang&&se.lang||(se.lang={}),se.lang.String=function(){},"function"==typeof e?(ie=function(t){return he(e.from(t,"utf8").toString("base64"))},ae=function(t){return e.from(de(t),"base64").toString("utf8")}):(ie=function(e){return _e(ke(Le(e)))},ae=function(e){return decodeURIComponent(Re(ge(e)))}),se.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},se.lang.String.isHex=function(e){return Ue(e)},se.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},se.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=de(e),se.lang.String.isBase64(e))},se.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},se.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},se.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},se.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var ze=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function Ye(e){if(e.length%2!=0)return-1;if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16);if(r>7)return-1;var n=e.substr(2),o=parseInt(n,16).toString(2);"0"==o&&(o="00000000"),o=o.slice(0,0-r);var s=parseInt(o,2);return NaN==s?-1:s}catch(c){return-1}}function We(e){if("number"!=typeof e)return null;if(e<0)return null;var t=Number(e).toString(2),r=8-t.length%8;8==r&&(r=0),t+=ze("",r,"0");var n=parseInt(t,2).toString(16);return n.length%2==1&&(n="0"+n),"0"+r+n}function Xe(e){if("string"!=typeof e)return null;if(e.length%2!=0)return null;if(!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var r=e.substr(2),n="",o=0;o<r.length;o+=2){var s=r.substr(o,2),i=parseInt(s,16).toString(2);n+=i=("0000000"+i).slice(-8)}return n.substr(0,n.length-t)}catch(u){return null}}function Je(e,t){for(var r=0,n=0;n<e.length;n++)r|=1<<t[e[n]];var o=r.toString(2),s="";for(n=o.length-1;n>=0;n--)s+=o[n];return s}function Ze(e,t,r){if("object"==typeof e){t=String(t).split(".");for(var n=0;n<t.length&&e;n++){var o=t[n];o.match(/^[0-9]+$/)&&(o=parseInt(o)),e=e[o]}return e||!1===e?e:r}}function Qe(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==se&&se||(se={}),void 0!==se.crypto&&se.crypto||(se.crypto={}),se.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:d.algo.MD5,sha1:d.algo.SHA1,sha224:d.algo.SHA224,sha256:d.algo.SHA256,sha384:d.algo.SHA384,sha512:d.algo.SHA512,ripemd160:d.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),o=r/4;if(n.length+22>o)throw"key is too short for SigAlg: keylen="+r+","+t;for(var s="0001",i="00"+n,a="",u=o-s.length-i.length,c=0;c<u;c+=2)a+="ff";return s+a+i},this.hashString=function(e,t){return new se.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new se.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ee||e instanceof se.crypto.DSA||e instanceof se.crypto.ECDSA}},se.crypto.Util.md5=function(e){return new se.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},se.crypto.Util.ripemd160=function(e){return new se.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},se.crypto.Util.SECURERANDOMGEN=new Z,se.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return se.crypto.Util.SECURERANDOMGEN.nextBytes(t),pe(t)},se.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new b(se.crypto.Util.getRandomHexOfNbytes(e),16)},se.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=new Array((e-t)/8+1);return se.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],pe(r)},se.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new b(se.crypto.Util.getRandomHexOfNbits(e),16)},se.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=se.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},se.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var n=t.subtract(e);return se.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},se.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,r){if(null!==(e=se.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===r&&(r=se.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==r){try{this.md=se.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=d.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(d.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==r){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=se.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},se.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},se.crypto.MessageDigest.getHashLength=function(e){var t=se.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},se.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},se.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=se.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=se.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=d.algo.HMAC.create(n,this.pass)}catch(a){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+a}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=d.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(d.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=we(e)),void(this.pass=d.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=ye(e.utf8)),void 0!==e.rstr&&(t=we(e.rstr)),void 0!==e.b64&&(t=v(e.b64)),void 0!==e.b64u&&(t=ge(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=d.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=se.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},se.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",n=t/4-e.length,o=0;o<n;o++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new se.crypto.MessageDigest({alg:this.mdAlgName})}catch(r){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+r)}this.init=function(e,t){var r=null;try{r=void 0===t?et.getKey(e):et.getKey(e,t)}catch(n){throw"init failed:"+n}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==se.crypto.ECDSA&&(this.prvKey=new se.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ee&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ee&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof se.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof se.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==se.crypto.ECDSA&&(this.pubKey=new se.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ee&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ee&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==se.crypto.ECDSA&&this.pubKey instanceof se.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==se.crypto.DSA&&this.pubKey instanceof se.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=se.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=et.getKey(e.prvkeypem),this.init(t)}catch(i){throw"fatal error to load pem private key: "+i}}},se.crypto.Cipher=function(e){},se.crypto.Cipher.encrypt=function(e,t,r,n){if(null!=Ze(n,"enclag")&&(r=n.encalg),"string"==typeof r&&"-CBC"==r.substr(-4)){var o=t,s=e;null!=Ze(n,"key")&&(o=n.key),null!=Ze(n,"enc")&&(hEnc=n.enc);var i,a=d.enc.Hex.parse(o),u=d.enc.Hex.parse(s),c=d.enc.Hex.parse(n.iv);if("des-EDE3-CBC"==r)i=d.TripleDES.encrypt(u,a,{iv:c});else{if("aes128-CBC"!=r&&"aes256-CBC"!=r)throw new Error("unsupported algorithm: "+r);i=d.AES.encrypt(u,a,{iv:c})}return i+""}throw new Error("Cipher.encrypt: unsupported key or algorithm")},se.crypto.Cipher.decrypt=function(e,t,r,n){if(null!=Ze(n,"enclag")&&(r=n.encalg),"string"==typeof r&&"-CBC"==r.substr(-4)){var o=t,s=e;null!=Ze(n,"key")&&(o=n.key),null!=Ze(n,"enc")&&(s=n.enc);var i,a=d.enc.Hex.parse(o),u=d.enc.Hex.parse(s),c=d.enc.Hex.parse(n.iv);if("des-EDE3-CBC"==r)i=d.TripleDES.decrypt({ciphertext:u},a,{iv:c});else{if("aes128-CBC"!=r&&"aes256-CBC"!=r)throw new Error("unsupported algorithm: "+r);i=d.AES.decrypt({ciphertext:u},a,{iv:c})}return d.enc.Hex.stringify(i)}throw new Error("Cipher.decrypt: unsupported key or algorithm")},se.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==se&&se||(se={}),void 0!==se.crypto&&se.crypto||(se.crypto={}),se.crypto.ECDSA=function(e){var t=Error,r=b,n=re,o=se.crypto.ECDSA,s=se.crypto.ECParameterDB,i=o.getName,a=ue,u=a.getVbyListEx,c=a.isASN1HEX,l=new Z;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new r(e.bitLength(),l).mod(e.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(e){this.ecparams=s.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keycharlen;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":"secp521r1"===e||"NIST P-521"===e||"P-521"===e?"P-521":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.keycharlen,n=("0000000000"+t.toString(16)).slice(-r);return this.setPrivateKeyHex(n),{ecprvhex:n,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var e=new r(this.prvKeyHex,16),t=this.ecparams.G.multiply(e),n=t.getX().toBigInteger(),o=t.getY().toBigInteger(),s=this.ecparams.keycharlen,i="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+o.toString(16)).slice(-s);return this.setPublicKeyHex(i),i},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new r(t,16),s=this.ecparams.n,i=new r(e.substring(0,this.ecparams.keycharlen),16);do{var a=this.getBigRandom(s),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(s)}while(u.compareTo(r.ZERO)<=0);var c=a.modInverse(s).multiply(i.add(n.multiply(u))).mod(s);return o.biRSSigToASN1Sig(u,c)},this.sign=function(e,t){var n=t,o=this.ecparams.n,s=r.fromByteArrayUnsigned(e);do{var i=this.getBigRandom(o),a=this.ecparams.G.multiply(i).getX().toBigInteger().mod(o)}while(a.compareTo(b.ZERO)<=0);var u=i.modInverse(o).multiply(s.add(n.multiply(a))).mod(o);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,s){try{var i,a,u=o.parseSigHex(t);i=u.r,a=u.s;var c=n.decodeFromHex(this.ecparams.curve,s),l=new r(e.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(l,i,a,c)}catch(p){return!1}},this.verify=function(e,t,o){var s,i,a;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);s=u.r,i=u.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";s=t.r,i=t.s}if(o instanceof re)a=o;else{if(!Bitcoin.Util.isArray(o))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=n.decodeFrom(this.ecparams.curve,o)}var c=r.fromByteArrayUnsigned(e);return this.verifyRaw(c,s,i,a)},this.verifyRaw=function(e,t,n,o){var s=this.ecparams.n,i=this.ecparams.G;if(t.compareTo(r.ONE)<0||t.compareTo(s)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(s)>=0)return!1;var a=n.modInverse(s),u=e.multiply(a).mod(s),c=t.multiply(a).mod(s);return i.multiply(u).add(o.multiply(c)).getX().toBigInteger().mod(s).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),n=t.toByteArraySigned(),o=[];return o.push(2),o.push(r.length),(o=o.concat(r)).push(2),o.push(n.length),(o=o.concat(n)).unshift(o.length),o.unshift(48),o},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var o=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(o)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===c(e))throw new Error("not ASN.1 hex string");var t,r,n;try{t=u(e,0,["[0]",0],"06"),r=u(e,0,[1],"04");try{n=u(e,0,["[1]",0],"03")}catch(o){}}catch(o){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=i(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===c(e))throw new t("not ASN.1 hex string");var r,n,o;try{u(e,0,[1,0],"06"),r=u(e,0,[1,1],"06"),n=u(e,0,[2,0,1],"04");try{o=u(e,0,[2,0,"[1]",0],"03")}catch(s){}}catch(s){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=i(r),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(o),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===c(e))throw new t("not ASN.1 hex string");var r,n;try{u(e,0,[0,0],"06"),r=u(e,0,[0,1],"06"),n=u(e,0,[1],"03")}catch(o){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=i(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,r){if(!1===c(e))throw new t("not ASN.1 hex string");var n,o;try{n=u(e,0,[0,5,0,1],"06"),o=u(e,0,[0,5,1],"03")}catch(s){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=i(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(o)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},se.crypto.ECDSA.parseSigHex=function(e){var t=se.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new b(t.r,16),s:new b(t.s,16)}},se.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=ue,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var o=r(e,0);if(2!=o.length)throw new Error("signature shall have two elements");var s=o[0],i=o[1];if("02"!=e.substr(s,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(i,2))throw new Error("2nd item not ASN.1 integer");return{r:n(e,s),s:n(e,i)}},se.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=se.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==r.substr(0,2)&&(r=r.substr(2)),"00"==n.substr(0,2)&&(n=n.substr(2));var o=Math.max(r.length,n.length);return(r=("000000"+r).slice(-o))+("000000"+n).slice(-o)}if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+n},se.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return se.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},se.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new b(e,16),n=new b(t,16);return se.crypto.ECDSA.biRSSigToASN1Sig(r,n)},se.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=se.asn1,n=new r.DERInteger({bigint:e}),o=new r.DERInteger({bigint:t});return new r.DERSequence({array:[n,o]}).tohex()},se.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":"2b81040023"===e?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(e)?"secp521r1":null},void 0!==se&&se||(se={}),void 0!==se.crypto&&se.crypto||(se.crypto={}),se.crypto.ECParameterDB=new function(){var e={},t={};function r(e){return new b(e,16)}this.getByName=function(r){var n=r;if(void 0!==t[n]&&(n=t[r]),void 0!==e[n])return e[n];throw"unregistered EC curve name: "+n},this.regist=function(n,o,s,i,a,u,c,l,p,f,h,d){e[n]={};var _=r(s),g=r(i),y=r(a),v=r(u),m=r(c),b=new ne(_,g,y),w=b.decodePointHex("04"+l+p);e[n].name=n,e[n].keylen=o,e[n].keycharlen=2*Math.ceil(o/8),e[n].curve=b,e[n].G=w,e[n].n=v,e[n].h=m,e[n].oid=h,e[n].info=d;for(var E=0;E<f.length;E++)t[f[E]]=n}},se.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),se.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),se.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),se.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),se.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),se.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),se.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),se.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),se.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),se.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==se&&se||(se={}),void 0!==se.crypto&&se.crypto||(se.crypto={}),se.crypto.DSA=function(){var e=ue,t=(e.getVbyList,e.getVbyListEx),r=e.isASN1HEX,n=b;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,r,n,o){this.isPrivate=!0,this.p=e,this.q=t,this.g=r,this.y=n,this.x=o},this.setPrivateHex=function(e,t,r,n,o){var s,i,a,u,c;s=new b(e,16),i=new b(t,16),a=new b(r,16),u="string"==typeof n&&n.length>1?new b(n,16):null,c=new b(o,16),this.setPrivate(s,i,a,u,c)},this.setPublic=function(e,t,r,n){this.isPublic=!0,this.p=e,this.q=t,this.g=r,this.y=n,this.x=null},this.setPublicHex=function(e,t,r,n){var o,s,i,a;o=new b(e,16),s=new b(t,16),i=new b(r,16),a=new b(n,16),this.setPublic(o,s,i,a)},this.signWithMessageHash=function(e){var t=this.p,r=this.q,n=this.g,o=(this.y,this.x),s=se.crypto.Util.getRandomBigIntegerMinToMax(b.ONE.add(b.ONE),r.subtract(b.ONE)),i=new b(e.substr(0,r.bitLength()/4),16),a=n.modPow(s,t).mod(r),u=s.modInverse(r).multiply(i.add(o.multiply(a))).mod(r);return se.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:a}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(e,t){var r=this.p,n=this.q,o=this.g,s=this.y,i=this.parseASN1Signature(t),a=i[0],u=i[1],c=new b(e.substr(0,n.bitLength()/4),16);if(b.ZERO.compareTo(a)>0||a.compareTo(n)>0)throw"invalid DSA signature";if(b.ZERO.compareTo(u)>=0||u.compareTo(n)>0)throw"invalid DSA signature";var l=u.modInverse(n),p=c.multiply(l).mod(n),f=a.multiply(l).mod(n);return 0==o.modPow(p,r).multiply(s.modPow(f,r)).mod(r).mod(n).compareTo(a)},this.parseASN1Signature=function(e){try{return[new n(t(e,0,[0],"02"),16),new n(t(e,0,[1],"02"),16)]}catch(r){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(e){var n,o,s,i,a;if(!1===r(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[1],"02"),o=t(e,0,[2],"02"),s=t(e,0,[3],"02"),i=t(e,0,[4],"02"),a=t(e,0,[5],"02")}catch(u){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(n,o,s,i,a)},this.readPKCS8PrvKeyHex=function(e){var n,o,s,i;if(!1===r(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[1,1,0],"02"),o=t(e,0,[1,1,1],"02"),s=t(e,0,[1,1,2],"02"),i=t(e,0,[2,0],"02")}catch(a){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(n,o,s,null,i)},this.readPKCS8PubKeyHex=function(e){var n,o,s,i;if(!1===r(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[0,1,0],"02"),o=t(e,0,[0,1,1],"02"),s=t(e,0,[0,1,2],"02"),i=t(e,0,[1,0],"02")}catch(a){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(n,o,s,i)},this.readCertPubKeyHex=function(e,n){var o,s,i,a;if(!1===r(e))throw new Error("not ASN.1 hex string");try{o=t(e,0,[0,5,0,1,0],"02"),s=t(e,0,[0,5,0,1,1],"02"),i=t(e,0,[0,5,0,1,2],"02"),a=t(e,0,[0,5,1,0],"02")}catch(u){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(o,s,i,a)}};var et=function(){var e=function(e,r,n){return t(d.AES,e,r,n)},t=function(e,t,r,n){var o=d.enc.Hex.parse(t),s=d.enc.Hex.parse(r),i=d.enc.Hex.parse(n),a={};a.key=s,a.iv=i,a.ciphertext=o;var u=e.decrypt(a,s,{iv:i});return d.enc.Hex.stringify(u)},r=function(e,t,r){return n(d.AES,e,t,r)},n=function(e,t,r,n){var o=d.enc.Hex.parse(t),s=d.enc.Hex.parse(r),i=d.enc.Hex.parse(n),a=e.encrypt(o,s,{iv:i}),u=d.enc.Hex.parse(a.toString());return d.enc.Base64.stringify(u)},o={"AES-256-CBC":{proc:e,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,r,n){return t(d.TripleDES,e,r,n)},eproc:function(e,t,r){return n(d.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,r,n){return t(d.DES,e,r,n)},eproc:function(e,t,r){return n(d.DES,e,t,r)},keylen:8,ivlen:8}},s=function(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var o=-1,s=0;-1!=e.indexOf("\r\n\r\n")&&(o=e.indexOf("\r\n\r\n"),s=2),-1!=e.indexOf("\n\n")&&(o=e.indexOf("\n\n"),s=1);var i=e.indexOf("-----END");if(-1!=o&&-1!=i){var a=e.substring(o+2*s,i-s);a=a.replace(/\s+/g,""),t.data=a}return t},i=function(e,t,r){for(var n=r.substring(0,16),s=d.enc.Hex.parse(n),i=d.enc.Utf8.parse(t),a=o[e].keylen+o[e].ivlen,u="",c=null;;){var l=d.algo.MD5.create();if(null!=c&&l.update(c),l.update(i),l.update(s),c=l.finalize(),(u+=d.enc.Hex.stringify(c)).length>=2*a)break}var p={};return p.keyhex=u.substr(0,2*o[e].keylen),p.ivhex=u.substr(2*o[e].keylen,2*o[e].ivlen),p},a=function(e,t,r,n){var s=d.enc.Base64.parse(e),i=d.enc.Hex.stringify(s);return(0,o[t].proc)(i,r,n)};return{version:"1.0.0",parsePKCS5PEM:function(e){return s(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return i(e,t,r)},decryptKeyB64:function(e,t,r,n){return a(e,t,r,n)},getDecryptedKeyHex:function(e,t){var r=s(e),n=(r.type,r.cipher),o=r.ivsalt,u=r.data,c=i(n,t,o).keyhex;return a(u,n,c,o)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,n,s){var a="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===o[n])throw new Error("KEYUTIL unsupported algorithm: "+n);void 0!==s&&null!=s||(s=function(e){var t=d.lib.WordArray.random(e);return d.enc.Hex.stringify(t)}(o[n].ivlen).toUpperCase());var u=function(e,t,r,n){return(0,o[t].eproc)(e,r,n)}(t,n,i(n,r,s).keyhex,s);return a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+n+","+s+"\r\n",a+="\r\n",(a+=u.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},getEncryptedPKCS8PEM:function(e,t,r){return Se(this.getEncryptedPKCS8Hex(e,t,r),"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(e,t,r){var n;(n=null==r||null==r?{}:JSON.parse(JSON.stringify(r))).plain=e,this.initPBES2Param(n),this.encryptPBES2Param(n,t);var o=this.generatePBES2ASN1Param(n);return se.asn1.ASN1Util.newObject(o).tohex()},initPBES2Param:function(e){var t;null==Ze(e,"encalg")&&(e.encalg="aes256-CBC"),null==Ze(e,"iter")&&(e.iter=2048),null==Ze(e,"prf")&&(e.prf="hmacWithSHA256"),null==Ze(e,"salt")&&(e.salt=d.enc.Hex.stringify(d.lib.WordArray.random(8))),null==Ze(e,"enciv")&&("des-EDE3-CBC"==e.encalg&&(t=8),"aes128-CBC"==e.encalg&&(t=16),"aes256-CBC"==e.encalg&&(t=16),e.enciv=d.enc.Hex.stringify(d.lib.WordArray.random(t)))},encryptPBES2Param:function(e,t){var r=et.getDKFromPBES2Param(e,t);try{var n=se.crypto.Cipher.encrypt(e.plain,r,e.encalg,{iv:e.enciv})}catch(o){throw new Error("encrypt error: "+e.plain+" "+r+" "+e.encalg+" "+e.enciv)}e.enc=n},generatePBES2ASN1Param:function(e){var t={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:e.salt}},{int:{hex:Ke(e.iter)}}]}]},{seq:[{oid:e.encalg},{octstr:{hex:e.enciv}}]}]}]},{octstr:{hex:e.enc}}]};return"hmacWithSHA1"!=e.prf&&t.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:e.prf},{null:""}]}),t},parseHexOfEncryptedPKCS8:function(e){var t=ue,r=t.getChildIdx,n=t.getV,o={},s=r(e,0);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+s.length);o.ciphertext=n(e,s[1]);var i=r(e,s[0]);if(2!=i.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+i.length);if("2a864886f70d01050d"!=n(e,i[0]))throw new Error("this only supports pkcs5PBES2");var a=r(e,i[1]);if(2!=i.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+a.length);var u=r(e,a[1]);if(2!=u.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length);if("2a864886f70d0307"!=n(e,u[0]))throw"this only supports TripleDES";o.encryptionSchemeAlg="TripleDES",o.encryptionSchemeIV=n(e,u[1]);var c=r(e,a[0]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+c.length);if("2a864886f70d01050c"!=n(e,c[0]))throw new Error("this only supports pkcs5PBKDF2");var l=r(e,c[1]);if(l.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length);o.pbkdf2Salt=n(e,l[0]);var p=n(e,l[1]);try{o.pbkdf2Iter=parseInt(p,16)}catch(f){throw new Error("malformed format pbkdf2Iter: "+p)}return o},getPBKDF2KeyHexFromParam:function(e,t){var r=d.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,o=d.PBKDF2(t,r,{keySize:6,iterations:n});return d.enc.Hex.stringify(o)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=Ce(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),o=et.getPBKDF2KeyHexFromParam(n,t),s={};s.ciphertext=d.enc.Hex.parse(n.ciphertext);var i=d.enc.Hex.parse(o),a=d.enc.Hex.parse(n.encryptionSchemeIV),u=d.TripleDES.decrypt(s,i,{iv:a});return d.enc.Hex.stringify(u)},parsePBES2:function(e){var t=ue.parse(e);if("pkcs5PBES2"!=Ze(t,"seq.0.seq.0.oid")||"pkcs5PBKDF2"!=Ze(t,"seq.0.seq.1.seq.0.seq.0.oid"))throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var r=Ze(t,"seq.0.seq.1.seq.0.seq.1.seq");if(null==r)throw new Error("PBKDF2 parameter not found");var n=Ze(r,"0.octstr.hex"),o=Ze(r,"1.int.hex"),s=Ze(r,"2.seq.0.oid","hmacWithSHA1"),i=-1;try{i=parseInt(o,16)}catch(l){throw new Error("iter not proper value")}var a=Ze(t,"seq.0.seq.1.seq.1.seq.0.oid"),u=Ze(t,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),c=Ze(t,"seq.1.octstr.hex");if(null==a||null==u||null==c)throw new Error("encalg, enciv or enc is undefined");return{salt:n,iter:i,prf:s,encalg:a,enciv:u,enc:c}},getDKFromPBES2Param:function(e,t){var r={hmacWithSHA1:d.algo.SHA1,hmacWithSHA224:d.algo.SHA224,hmacWithSHA256:d.algo.SHA256,hmacWithSHA384:d.algo.SHA384,hmacWithSHA512:d.algo.SHA512}[e.prf];if(null==r)throw new Error("unsupported prf");var n={"des-EDE3-CBC":6,"aes128-CBC":4,"aes256-CBC":8}[e.encalg];if(null==n)throw new Error("unsupported encalg");var o=d.enc.Hex.parse(e.salt),s=e.iter;try{var i=d.PBKDF2(t,o,{keySize:n,iterations:s,hasher:r});return d.enc.Hex.stringify(i)}catch(z){throw new Error("PBKDF2 error: "+z+" "+JSON.stringify(e)+" "+t)}},getPlainHexFromEncryptedPKCS8PEM:function(e,t){if(-1==e.indexOf("BEGIN ENCRYPTED PRIVATE KEY"))throw new Error("not Encrypted PKCS#8 PEM string");var r,n=Ce(e);try{r=et.parsePBES2(n)}catch(s){throw new Error("malformed PBES2 format: "+s.message)}var o=et.getDKFromPBES2Param(r,t);return se.crypto.Cipher.decrypt(r.enc,o,r.encalg,{iv:r.enciv})},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this.getPlainHexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=ue,r=t.getChildIdx,n=t.getV,o={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var s=r(e,0);if(s.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(s[1],2))throw new Error("malformed PKCS8 private key(code:003)");var i=r(e,s[1]);if(2!=i.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(i[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(o.algoid=n(e,i[0]),"06"==e.substr(i[1],2)&&(o.algparam=n(e,i[1])),"04"!=e.substr(s[2],2))throw new Error("malformed PKCS8 private key(code:006)");return o.keyidx=t.getVidx(e,s[2]),o},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Ce(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new ee;else if("2a8648ce380401"==r.algoid)t=new se.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw new Error("unsupported private key algorithm");t=new se.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=ue.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new ee;else if("2a8648ce380401"===r)t=new se.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw new Error("unsupported PKCS#8 public key hex");t=new se.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=ue,r=t.getChildIdx,n=t.getV,o={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var s=r(e,0);if(2!=s.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(s[0],2))throw new Error("malformed RSA key(code:003)");if(o.n=n(e,s[0]),"02"!=e.substr(s[1],2))throw new Error("malformed RSA key(code:004)");return o.e=n(e,s[1]),o},parsePublicPKCS8Hex:function(e){var t=ue,r=t.getChildIdx,n=t.getV,o={algparam:null},s=r(e,0);if(2!=s.length)throw new Error("outer DERSequence shall have 2 elements: "+s.length);var i=s[0];if("30"!=e.substr(i,2))throw new Error("malformed PKCS8 public key(code:001)");var a=r(e,i);if(2!=a.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(o.algoid=n(e,a[0]),"06"==e.substr(a[1],2)?o.algparam=n(e,a[1]):"30"==e.substr(a[1],2)&&(o.algparam={},o.algparam.p=t.getVbyList(e,a[1],[0],"02"),o.algparam.q=t.getVbyList(e,a[1],[1],"02"),o.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(s[1],2))throw new Error("malformed PKCS8 public key(code:004)");return o.key=n(e,s[1]).substr(2),o}}}();function tt(e,t){for(var r="",n=t/4-e.length,o=0;o<n;o++)r+="0";return r+e}function rt(e,t,r){for(var n="",o=0;n.length<t;)n+=be(r(we(e+String.fromCharCode.apply(String,[(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o])))),o+=1;return n}function nt(e){for(var t in se.crypto.Util.DIGESTINFOHEAD){var r=se.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r)return[t,e.substring(n)]}return[]}function ot(e){var t,r=ue,n=r.getChildIdx,o=r.getV,s=(r.dump,r.parse),i=r.getTLV,a=r.getVbyList,u=r.getVbyListEx,c=r.getTLVbyList,l=r.getTLVbyListEx,p=r.getIdxbyList,f=r.getIdxbyListEx,h=r.getVidx,d=r.getInt,_=r.oidname,g=r.hextooidstr,y=Ce,v=Error;try{t=se.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(z){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=c(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=c(e,0,[0]),r=d(t,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return u(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=l(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return _(u(e,0,[0],"06"))},this.getIssuer=function(e,t){return this.getX500Name(this.getIssuerHex(),e,t)},this.getIssuerHex=function(){return c(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(e,t){return this.getX500Name(this.getSubjectHex(),e,t)},this.getSubjectHex=function(){return c(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=a(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=a(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return c(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var e=this.getSPKI();return null==e?null:a(e,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return p(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return p(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return et.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=c(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=c(this.hex,0,[0],"30"),o=new se.crypto.Signature({alg:t});return o.init(e),o.updateHex(n),o.verify(r)},this.parseExt=function(e){var t,s,i;if(void 0===e){if(i=this.hex,3!==this.version)return-1;t=p(i,0,[0,7,0],"30"),s=n(i,t)}else{i=Ce(e);var u=p(i,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=o(i,u))return void(this.aExtInfo=new Array);t=p(i,0,[0,3,0,1,0],"30"),s=n(i,t),this.hex=i}this.aExtInfo=new Array;for(var c=0;c<s.length;c++){var l={critical:!1},f=0;3===n(i,s[c]).length&&(l.critical=!0,f=1),l.oid=r.hextooidstr(a(i,s[c],[0],"06"));var d=p(i,s[c],[1+f]);l.vidx=h(i,d),this.aExtInfo.push(l)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=se.asn1.x509.OID.name2oid(e)),""!==r)for(var n=0;n<t.length;n++)if(t[n].oid===r)return t[n]},this.getCriticalExtV=function(e,t,r){if(null!=t)return[t,r];var n=this.getExtInfo(e);return null==n?[null,null]:[i(this.hex,n.vidx),n.critical]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"basicConstraints"};if(t&&(n.critical=!0),"3000"===e)return n;if("30030101ff"===e)return n.cA=!0,n;if("30060101ff02"===e.substr(0,12)){var s=o(e,10),a=parseInt(s,16);return n.cA=!0,n.pathLen=a,n}throw new Error("hExtV parse error: "+e)},this.getExtNameConstraints=function(e,t){var r=this.getCriticalExtV("nameConstraints",e,t);if(e=r[0],t=r[1],null!=e){var o={extname:"nameConstraints"};t&&(o.critical=!0);for(var s=n(e,0),a=0;a<s.length;a++){for(var u=[],c=n(e,s[a]),l=0;l<c.length;l++){var p=i(e,c[l]),f=this.getGeneralSubtree(p);u.push(f)}var h=e.substr(s[a],2);"a0"==h?o.permit=u:"a1"==h&&(o.exclude=u)}return o}},this.getGeneralSubtree=function(e){var t=n(e,0),r=t.length;if(r<1||2<r)throw new Error("wrong num elements");for(var s=this.getGeneralName(i(e,t[0])),a=1;a<r;a++){var u=e.substr(t[a],2),c=o(e,t[a]),l=parseInt(c,16);"80"==u&&(s.min=l),"81"==u&&(s.max=l)}return s},this.getExtKeyUsage=function(e,t){var r=this.getCriticalExtV("keyUsage",e,t);if(e=r[0],t=r[1],null!=e){var n={extname:"keyUsage"};return t&&(n.critical=!0),n.names=this.getExtKeyUsageString(e).split(","),n}},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=i(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&r.push(ot.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"subjectKeyIdentifier"};t&&(n.critical=!0);var s=o(e,0);return n.kid={hex:s},n},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=n(e,0),u=0;u<a.length;u++){var c=e.substr(a[u],2);if("80"===c&&(s.kid={hex:o(e,a[u])}),"a1"===c){var l=i(e,a[u]),p=this.getGeneralNames(l);s.issuer=p[0].dn}"82"===c&&(s.sn={hex:o(e,a[u])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=n(e,0),u=0;u<a.length;u++)s.array.push(_(o(e,a[u])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,r=i(this.hex,e.vidx);if(""===r)return t;for(var s=n(r,0),a=0;a<s.length;a++)t.push(_(o(r,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"subjectAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"issuerAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getGeneralNames=function(e){for(var t=n(e,0),r=[],o=0;o<t.length;o++){var s=this.getGeneralName(i(e,t[o]));void 0!==s&&r.push(s)}return r},this.getGeneralName=function(e){var t=e.substr(0,2),r=o(e,0),n=be(r);return"81"==t?{rfc822:n}:"82"==t?{dns:n}:"86"==t?{uri:n}:"87"==t?{ip:Te(r)}:"a4"==t?{dn:this.getX500Name(r)}:"a0"==t?{other:this.getOtherName(e)}:void 0},this.getExtSubjectAltName2=function(){var e,t,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=i(this.hex,s.vidx),c=n(u,0),l=0;l<c.length;l++)r=u.substr(c[l],2),e=o(u,c[l]),"81"===r&&(t=ve(e),a.push(["MAIL",t])),"82"===r&&(t=ve(e),a.push(["DNS",t])),"84"===r&&(t=ot.hex2dn(e,0),a.push(["DN",t])),"86"===r&&(t=ve(e),a.push(["URI",t])),"87"===r&&(t=Te(e),a.push(["IP",t]));return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var o={extname:"cRLDistributionPoints",array:[]};t&&(o.critical=!0);for(var s=n(e,0),a=0;a<s.length;a++){var u=i(e,s[a]);o.array.push(this.getDistributionPoint(u))}return o},this.getDistributionPoint=function(e){for(var t={},r=n(e,0),o=0;o<r.length;o++){var s=e.substr(r[o],2),a=i(e,r[o]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},r=n(e,0),o=0;o<r.length;o++){var s=e.substr(r[o],2),a=i(e,r[o]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtCRLDistributionPoints();if(null==e)return e;for(var t=e.array,r=[],n=0;n<t.length;n++)try{null!=t[n].dpname.full[0].uri&&r.push(t[n].dpname.full[0].uri)}catch(o){}return r},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=n(this.hex,e.vidx),o=0;o<r.length;o++){var s=a(this.hex,r[o],[0],"06"),i=a(this.hex,r[o],[1],"86");"2b06010505073001"===s&&t.ocsp.push(ve(i)),"2b06010505073002"===s&&t.caissuer.push(ve(i))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var o={extname:"authorityInfoAccess",array:[]};t&&(o.critical=!0);for(var s=n(e,0),c=0;c<s.length;c++){var l=u(e,s[c],[0],"06"),p=ve(a(e,s[c],[1],"86"));if("2b06010505073001"==l)o.array.push({ocsp:p});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);o.array.push({caissuer:p})}}return o},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var o={extname:"certificatePolicies",array:[]};t&&(o.critical=!0);for(var s=n(e,0),a=0;a<s.length;a++){var u=i(e,s[a]),c=this.getPolicyInformation(u);o.array.push(c)}return o},this.getPolicyInformation=function(e){var t={},r=a(e,0,[0],"06");t.policyoid=_(r);var o=f(e,0,[1],"30");if(-1!=o){t.array=[];for(var s=n(e,o),u=0;u<s.length;u++){var c=i(e,s[u]),l=this.getPolicyQualifierInfo(c);t.array.push(l)}}return t},this.getOtherName=function(e){var t={},r=n(e,0),o=a(e,r[0],[],"06"),i=a(e,r[1],[]);return t.oid=_(o),t.value=s(i),t},this.getPolicyQualifierInfo=function(e){var t={},r=a(e,0,[0],"06");if("2b06010505070201"===r){var n=u(e,0,[1],"16");t.cps=be(n)}else if("2b06010505070202"===r){var o=c(e,0,[1],"30");t.unotice=this.getUserNotice(o)}return t},this.getUserNotice=function(e){var t=null;try{return t=r.parse(e),this._asn1ToUnotice(t)}catch(n){return}},this._asn1ToUnotice=function(e){try{for(var t={},r=Ze(e,"seq"),n=0;n<r.length;n++){var o=this._asn1ToNoticeRef(r[n]);null!=o&&(t.noticeref=o);var s=this.asn1ToDisplayText(r[n]);null!=s&&(t.exptext=s)}return Object.keys(t).length>0?t:void 0}catch(i){return}},this._asn1ToNoticeRef=function(e){try{for(var t={},r=Ze(e,"seq"),n=0;n<r.length;n++){var o=this._asn1ToNoticeNum(r[n]);null!=o&&(t.noticenum=o);var s=this.asn1ToDisplayText(r[n]);null!=s&&(t.org=s)}return Object.keys(t).length>0?t:void 0}catch(i){return}},this._asn1ToNoticeNum=function(e){try{for(var t=Ze(e,"seq"),r=[],n=0;n<t.length;n++){var o=t[n];r.push(parseInt(Ze(o,"int.hex"),16))}return r}catch(s){return}},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=be(o(e,0)),t},this.asn1ToDisplayText=function(e){return null!=e.utf8str?{type:"utf8",str:e.utf8str.str}:null!=e.ia5str?{type:"ia5",str:e.ia5str.str}:null!=e.visstr?{type:"vis",str:e.visstr.str}:null!=e.bmpstr?{type:"bmp",str:e.bmpstr.str}:null!=e.prnstr?{type:"prn",str:e.prnstr.str}:void 0},this.getExtPolicyMappings=function(e,t){var r=this.getCriticalExtV("policyMappings",e,t);if(e=r[0],t=r[1],null!=e){var n={extname:"policyMappings"};t&&(n.critical=!0);try{for(var o=s(e).seq,i=[],a=0;a<o.length;a++){var u=o[a].seq;i.push([u[0].oid,u[1].oid])}n.array=i}catch(c){throw new v("malformed policyMappings")}return n}},this.getExtPolicyConstraints=function(e,t){var r=this.getCriticalExtV("policyConstraints",e,t);if(e=r[0],t=r[1],null!=e){var n={extname:"policyConstraints"};t&&(n.critical=!0);var o=s(e);try{for(var i=o.seq,a=0;a<i.length;a++){var u=i[a].tag;0==u.explicit&&("80"==u.tag&&(n.reqexp=parseInt(u.hex,16)),"81"==u.tag&&(n.inhibit=parseInt(u.hex,16)))}}catch(c){return new v("malformed policyConstraints value")}return n}},this.getExtInhibitAnyPolicy=function(e,t){var r=this.getCriticalExtV("inhibitAnyPolicy",e,t);if(e=r[0],t=r[1],null!=e){var n={extname:"inhibitAnyPolicy"};t&&(n.critical=!0);var o=d(e,0);return-1==o?new v("wrong value"):(n.skip=o,n)}},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:o(e,0)},r;throw new v("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(o(e,0),16),r;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};t&&(r.critical=!0);var n=o(e,0);return r.hex=n,r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var o={extname:"adobeTimeStamp"};t&&(o.critical=!0);var s=n(e,0);if(s.length>1){var a=i(e,s[1]),u=this.getGeneralName(a);null!=u.uri&&(o.uri=u.uri)}if(s.length>2){var c=i(e,s[2]);"0101ff"==c&&(o.reqauth=!0),"010100"==c&&(o.reqauth=!1)}return o},this.getExtSubjectDirectoryAttributes=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectDirectoryAttributes");if(void 0===r)return;e=i(this.hex,r.vidx),t=r.critical}var n={extname:"subjectDirectoryAttributes"};t&&(n.critical=!0);try{for(var o=s(e),a=[],u=0;u<o.seq.length;u++){var c=o.seq[u],l=Ze(c,"seq.0.oid"),p=Ze(c,"seq.1.set");if(null==l||null==p)throw"error";a.push({attr:l,array:p})}return n.array=a,n}catch(f){throw new Error("malformed subjectDirectoryAttributes extension value")}};var m=function(e){var t={};try{var r=e.seq[0].oid,n=se.asn1.x509.OID.name2oid(r);t.type=se.asn1.x509.OID.oid2atype(n);var o=e.seq[1];if(null!=o.utf8str)t.ds="utf8",t.value=o.utf8str.str;else if(null!=o.numstr)t.ds="num",t.value=o.numstr.str;else if(null!=o.telstr)t.ds="tel",t.value=o.telstr.str;else if(null!=o.prnstr)t.ds="prn",t.value=o.prnstr.str;else if(null!=o.ia5str)t.ds="ia5",t.value=o.ia5str.str;else if(null!=o.visstr)t.ds="vis",t.value=o.visstr.str;else{if(null==o.bmpstr)throw"error";t.ds="bmp",t.value=o.bmpstr.str}return t}catch(s){throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},b=function(e){try{return e.set.map((function(e){return m(e)}))}catch(X){throw new Error("improper ASN.1 parsed RDN: "+X)}};this.getX500NameRule=function(e){for(var t=null,r=[],n=0;n<e.length;n++)for(var o=e[n],s=0;s<o.length;s++)r.push(o[s]);for(n=0;n<r.length;n++){var i=r[n],a=i.ds,u=i.value,c=i.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=c)return"mixed";if(se.lang.String.isMail(u))continue;return"mixed"}if("C"==c){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getAttrTypeAndValue=function(e){var t=s(e);return m(t)},this.getRDN=function(e){var t=s(e);return b(t)},this.getX500NameArray=function(e){return function(t){try{return t.seq.map((function(e){return b(e)}))}catch(e){throw new Error("improper ASN.1 parsed X500Name: "+e)}}(s(e))},this.getX500Name=function(e,t,r){var n=this.getX500NameArray(e),o={str:this.dnarraytostr(n)};return o.array=n,1==r&&(o.hex=e),1==t&&(o.canon=this.c14nRDNArray(n)),o},this.readCertPEM=function(e){this.readCertHex(y(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{p(this.hex,0,[0,7],"a3"),this.parseExt()}catch(t){}},this.getParam=function(e){var t={};return null==e&&(e={}),t.version=this.getVersion(),t.serial={hex:this.getSerialNumberHex()},t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(e.dncanon,e.dnhex),t.notbefore=this.getNotBefore(),t.notafter=this.getNotAfter(),t.subject=this.getSubject(e.dncanon,e.dnhex),t.sbjpubkey=Se(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(t.ext=this.getExtParamArray()),t.sighex=this.getSignatureValueHex(),1==e.tbshex&&(t.tbshex=c(this.hex,0,[0])),1==e.nodnarray&&(delete t.issuer.array,delete t.subject.array),t},this.getExtParamArray=function(e){null==e&&-1!=f(this.hex,0,[0,"[3]"])&&(e=l(this.hex,0,[0,"[3]",0],"30"));for(var t=[],r=n(e,0),o=0;o<r.length;o++){var s=i(e,r[o]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=n(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var r=g(a(e,0,[0],"06")),o=!1;3==t&&"0101ff"==c(e,0,[1])&&(o=!0);var i=c(e,0,[t-1,0]),u=void 0;if("2.5.29.14"==r?u=this.getExtSubjectKeyIdentifier(i,o):"2.5.29.15"==r?u=this.getExtKeyUsage(i,o):"2.5.29.17"==r?u=this.getExtSubjectAltName(i,o):"2.5.29.18"==r?u=this.getExtIssuerAltName(i,o):"2.5.29.19"==r?u=this.getExtBasicConstraints(i,o):"2.5.29.30"==r?u=this.getExtNameConstraints(i,o):"2.5.29.31"==r?u=this.getExtCRLDistributionPoints(i,o):"2.5.29.32"==r?u=this.getExtCertificatePolicies(i,o):"2.5.29.33"==r?u=this.getExtPolicyMappings(i,o):"2.5.29.35"==r?u=this.getExtAuthorityKeyIdentifier(i,o):"2.5.29.36"==r?u=this.getExtPolicyConstraints(i,o):"2.5.29.37"==r?u=this.getExtExtKeyUsage(i,o):"2.5.29.54"==r?u=this.getExtInhibitAnyPolicy(i,o):"1.3.6.1.5.5.7.1.1"==r?u=this.getExtAuthorityInfoAccess(i,o):"2.5.29.20"==r?u=this.getExtCRLNumber(i,o):"2.5.29.21"==r?u=this.getExtCRLReason(i,o):"2.5.29.9"==r?u=this.getExtSubjectDirectoryAttributes(i,o):"1.3.6.1.5.5.7.48.1.2"==r?u=this.getExtOcspNonce(i,o):"1.3.6.1.5.5.7.48.1.5"==r?u=this.getExtOcspNoCheck(i,o):"1.2.840.113583.1.1.9.1"==r?u=this.getExtAdobeTimeStamp(i,o):null!=ot.EXT_PARSER[r]&&(u=ot.EXT_PARSER[r](r,o,i)),null!=u)return u;var l={extname:r,extn:i};try{l.extn=s(i)}catch(p){}return o&&(l.critical=!0),l},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,o=0;o<n.length;o++)if(null!=n[o].dpname&&null!=n[o].dpname.full)for(var s=n[o].dpname.full,i=0;i<s.length;i++){var a=s[o];null!=a.uri&&(a.uri=t)}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,o=0;o<n.length;o++)null!=n[o].ocsp&&(n[o].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,o=0;o<n.length;o++)null!=n[o].caissuer&&(n[o].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return(t=e,t.type+"="+t.value).replace(/\+/,"\\+");var t})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.setCanonicalizedDN=function(e){var t;if(null!=e.str&&null==e.array){var r=new se.asn1.x509.X500Name({str:e.str}).tohex();t=this.getX500NameArray(r)}else t=e.array;null==e.canon&&(e.canon=this.c14nRDNArray(t))},this.c14nRDNArray=function(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],o=[],s=0;s<n.length;s++){var i=n[s],a=i.value;a=(a=(a=(a=a.replace(/^\s*/,"")).replace(/\s*$/,"")).replace(/\s+/g," ")).toLowerCase(),o.push(i.type.toLowerCase()+"="+a)}t.push(o.join("+"))}return"/"+t.join("/")},this.getInfo=function(){var e,t,r,n=function(e){for(var t="",r="    ",n="\n",o=e.array,s=0;s<o.length;s++){var i=o[s];null!=i.dn&&(t+=r+"dn: "+i.dn.str+n),null!=i.ip&&(t+=r+"ip: "+i.ip+n),null!=i.rfc822&&(t+=r+"rfc822: "+i.rfc822+n),null!=i.dns&&(t+=r+"dns: "+i.dns+n),null!=i.uri&&(t+=r+"uri: "+i.uri+n),null!=i.other&&(t+=r+"other: "+i.other.oid+"="+JSON.stringify(i.other.value).replace(/\"/g,"")+n)}return t.replace(/\n$/,"")},o=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var o=r[n];if(t+="    policy oid: "+o.policyoid+"\n",void 0!==o.array)for(var s=0;s<o.array.length;s++){var i=o.array[s];void 0!==i.cps&&(t+="    cps: "+i.cps+"\n")}}return t},s=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var o=r[n];try{void 0!==o.dpname.full[0].uri&&(t+="    "+o.dpname.full[0].uri+"\n")}catch(s){}try{void 0!==o.dname.full[0].dn.hex&&(t+="    "+ot.hex2dn(o.dpname.full[0].dn.hex)+"\n")}catch(s){}}return t},i=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var o=r[n];void 0!==o.caissuer&&(t+="    caissuer: "+o.caissuer+"\n"),void 0!==o.ocsp&&(t+="    ocsp: "+o.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Me(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Me(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var a=0;a<r.length;a++){var u=r[a],c=se.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var l="";if(!0===u.critical&&(l="CRITICAL"),e+="  "+c+" "+l+":\n","basicConstraints"===c){var p=this.getExtBasicConstraints();void 0===p.cA?e+="    {}\n":(e+="    cA=true",void 0!==p.pathLen&&(e+=", pathLen="+p.pathLen),e+="\n")}else{var f;if("policyMappings"==c)e+="    "+this.getExtPolicyMappings().array.map((function(e){var t=e;return t[0]+":"+t[1]})).join(", ")+"\n";else if("policyConstraints"==c)e+="    ",null!=(f=this.getExtPolicyConstraints()).reqexp&&(e+=" reqexp="+f.reqexp),null!=f.inhibit&&(e+=" inhibit="+f.inhibit),e+="\n";else if("inhibitAnyPolicy"==c)e+="    skip="+(f=this.getExtInhibitAnyPolicy()).skip+"\n";else if("keyUsage"==c)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"==c)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"==c){var h=this.getExtAuthorityKeyIdentifier();void 0!==h.kid&&(e+="    kid="+h.kid.hex+"\n")}else"extKeyUsage"==c?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"==c?e+=n(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"==c?e+=s(this.getExtCRLDistributionPoints()):"authorityInfoAccess"==c?e+=i(this.getExtAuthorityInfoAccess()):"certificatePolicies"==c&&(e+=o(this.getExtCertificatePolicies()))}}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):se.lang.String.isHex(e)&&this.readCertHex(e))}et.getKey=function(e,t,r){var n,o=(y=ue).getChildIdx,s=(y.getV,y.getVbyList),i=se.crypto,a=i.ECDSA,u=i.DSA,c=ee,l=Ce,p=et;if(void 0!==c&&e instanceof c)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(F=new c).setPublic(e.n,e.e),F;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(F=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),F;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(F=new c).setPrivate(e.n,e.e,e.d),F;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(F=new u).setPublic(e.p,e.q,e.g,e.y),F;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(F=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),F;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(F=new c).setPublic(ge(e.n),ge(e.e)),F;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(F=new c).setPrivateEx(ge(e.n),ge(e.e),ge(e.d),ge(e.p),ge(e.q),ge(e.dp),ge(e.dq),ge(e.qi)),F;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(F=new c).setPrivate(ge(e.n),ge(e.e),ge(e.d)),F;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var f=(I=new a({curve:e.crv})).ecparams.keycharlen,h="04"+("0000000000"+ge(e.x)).slice(-f)+("0000000000"+ge(e.y)).slice(-f);return I.setPublicKeyHex(h),I}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){f=(I=new a({curve:e.crv})).ecparams.keycharlen,h="04"+("0000000000"+ge(e.x)).slice(-f)+("0000000000"+ge(e.y)).slice(-f);var d=("0000000000"+ge(e.d)).slice(-f);return I.setPublicKeyHex(h),I.setPrivateKeyHex(d),I}if("pkcs5prv"===r){var _,g=e,y=ue;if(9===(_=o(g,0)).length)(F=new c).readPKCS5PrvKeyHex(g);else if(6===_.length)(F=new u).readPKCS5PrvKeyHex(g);else{if(!(_.length>2&&"04"===g.substr(_[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(F=new a).readPKCS5PrvKeyHex(g)}return F}if("pkcs8prv"===r)return p.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return p._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return ot.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return ot.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var v=Ce(e,"PUBLIC KEY");return p._getKeyFromPublicPKCS8Hex(v)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var m=l(e,"RSA PRIVATE KEY");return p.getKey(m,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var w=s(n=l(e,"DSA PRIVATE KEY"),0,[1],"02"),E=s(n,0,[2],"02"),x=s(n,0,[3],"02"),A=s(n,0,[4],"02"),S=s(n,0,[5],"02");return(F=new u).setPrivate(new b(w,16),new b(E,16),new b(x,16),new b(A,16),new b(S,16)),F}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return m=l(e,"EC PRIVATE KEY"),p.getKey(m,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return p.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var C=p.getDecryptedKeyHex(e,t),P=new ee;return P.readPKCS5PrvKeyHex(C),P}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var I,F=s(n=p.getDecryptedKeyHex(e,t),0,[1],"04"),k=s(n,0,[2,0],"06"),R=s(n,0,[3,0],"03").substr(2);if(void 0===se.crypto.OID.oidhex2name[k])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+k);return(I=new a({curve:se.crypto.OID.oidhex2name[k]})).setPublicKeyHex(R),I.setPrivateKeyHex(F),I.isPublic=!1,I}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return w=s(n=p.getDecryptedKeyHex(e,t),0,[1],"02"),E=s(n,0,[2],"02"),x=s(n,0,[3],"02"),A=s(n,0,[4],"02"),S=s(n,0,[5],"02"),(F=new u).setPrivate(new b(w,16),new b(E,16),new b(x,16),new b(A,16),new b(S,16)),F;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return p.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},et.generateKeypair=function(e,t){if("RSA"==e){var r=t;(i=new ee).generate(r,"10001"),i.isPrivate=!0,i.isPublic=!0;var n=new ee,o=i.n.toString(16),s=i.e.toString(16);return n.setPublic(o,s),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=i,a.pubKeyObj=n,a}if("EC"==e){var i,a,u=t,c=new se.crypto.ECDSA({curve:u}).generateKeyPairHex();return(i=new se.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),i.setPrivateKeyHex(c.ecprvhex),i.isPrivate=!0,i.isPublic=!1,(n=new se.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=i,a.pubKeyObj=n,a}throw new Error("unknown algorithm: "+e)},et.getPEM=function(e,t,r,n,o,s){var i=se,a=i.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,l=a.ASN1Util.newObject,p=a.x509.SubjectPublicKeyInfo,f=i.crypto,h=f.DSA,d=f.ECDSA,_=ee;function g(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function y(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function v(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==_&&e instanceof _||void 0!==h&&e instanceof h||void 0!==d&&e instanceof d)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Se(E=new p(e).tohex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==_&&e instanceof _&&(void 0===r||null==r)&&1==e.isPrivate)return Se(E=g(e).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===r||null==r)&&1==e.isPrivate){var m=new u({name:e.curveName}).tohex(),b=y(e).tohex(),w="";return(w+=Se(m,"EC PARAMETERS"))+Se(b,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===r||null==r)&&1==e.isPrivate)return Se(E=v(e).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==_&&e instanceof _&&void 0!==r&&null!=r&&1==e.isPrivate){var E=g(e).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",E,r,n,s)}if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==r&&null!=r&&1==e.isPrivate)return E=y(e).tohex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",E,r,n,s);if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==r&&null!=r&&1==e.isPrivate)return E=v(e).tohex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",E,r,n,s);var x=function(e,t){if("string"==typeof t)return et.getEncryptedPKCS8PEM(e,t);if("object"==typeof t&&null!=Ze(t,"passcode")){var r=JSON.parse(JSON.stringify(t)),n=r.passcode;return delete r.passcode,et.getEncryptedPKCS8PEM(e,n,r)}};if("PKCS8PRV"==t&&null!=_&&e instanceof _&&1==e.isPrivate){var A=g(e).tohex();return E=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:A}}]}).tohex(),void 0===r||null==r?Se(E,"PRIVATE KEY"):x(E,r)}if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate){var S={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};return"string"==typeof e.pubKeyHex&&S.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}),A=new l(S).tohex(),E=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:A}}]}).tohex(),void 0===r||null==r?Se(E,"PRIVATE KEY"):x(E,r)}if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return A=new c({bigint:e.x}).tohex(),E=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:A}}]}).tohex(),void 0===r||null==r?Se(E,"PRIVATE KEY"):x(E,r);throw new Error("unsupported object nor format")},et.getKeyFromCSRPEM=function(e){var t=Ce(e,"CERTIFICATE REQUEST");return et.getKeyFromCSRHex(t)},et.getKeyFromCSRHex=function(e){var t=et.parseCSRHex(e);return et.getKey(t.p8pubkeyhex,null,"pkcs8pub")},et.parseCSRHex=function(e){var t=ue,r=t.getChildIdx,n=t.getTLV,o={},s=e;if("30"!=s.substr(0,2))throw new Error("malformed CSR(code:001)");var i=r(s,0);if(i.length<1)throw new Error("malformed CSR(code:002)");if("30"!=s.substr(i[0],2))throw new Error("malformed CSR(code:003)");var a=r(s,i[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return o.p8pubkeyhex=n(s,a[2]),o},et.getKeyID=function(e){var t=et,r=ue;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var n=Ce(t.getPEM(e)),o=r.getIdxbyList(n,0,[1]),s=r.getV(n,o).substring(2);return se.crypto.Util.hashHex(s,"sha1")},et.getJWK=function(e,t,r,n,o){var s,i,a={},u=se.crypto.Util.hashHex;if("string"==typeof e)s=et.getKey(e),-1!=e.indexOf("CERTIFICATE")&&(i=Ce(e));else{if("object"!=typeof e)throw new Error("unsupported keyinfo type");e instanceof ot?(s=e.getPublicKey(),i=e.hex):s=e}if(s instanceof ee&&s.isPrivate)a.kty="RSA",a.n=_e(s.n.toString(16)),a.e=_e(s.e.toString(16)),a.d=_e(s.d.toString(16)),a.p=_e(s.p.toString(16)),a.q=_e(s.q.toString(16)),a.dp=_e(s.dmp1.toString(16)),a.dq=_e(s.dmq1.toString(16)),a.qi=_e(s.coeff.toString(16));else if(s instanceof ee&&s.isPublic)a.kty="RSA",a.n=_e(s.n.toString(16)),a.e=_e(s.e.toString(16));else if(s instanceof se.crypto.ECDSA&&s.isPrivate){if("P-256"!==(l=s.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);var c=s.getPublicKeyXYHex();a.kty="EC",a.crv=l,a.x=_e(c.x),a.y=_e(c.y),a.d=_e(s.prvKeyHex)}else if(s instanceof se.crypto.ECDSA&&s.isPublic){var l;if("P-256"!==(l=s.getShortNISTPCurveName())&&"P-384"!==l&&"P-521"!==l)throw new Error("unsupported curve name for JWT: "+l);c=s.getPublicKeyXYHex(),a.kty="EC",a.crv=l,a.x=_e(c.x),a.y=_e(c.y)}if(null==a.kty)throw new Error("unsupported keyinfo");return s.isPrivate||1==t||(a.kid=se.jws.JWS.getJWKthumbprint(a)),null!=i&&1!=r&&(a.x5c=[y(i)]),null!=i&&1!=n&&(a.x5t=he(y(u(i,"sha1")))),null!=i&&1!=o&&(a["x5t#S256"]=he(y(u(i,"sha256")))),a},et.getJWKFromKey=function(e){return et.getJWK(e,!0,!0,!0,!0)},ee.getPosArrayOfChildrenFromHex=function(e){return ue.getChildIdx(e,0)},ee.getHexValueArrayOfChildrenFromHex=function(e){var t,r=ue.getV,n=r(e,(t=ee.getPosArrayOfChildrenFromHex(e))[0]),o=r(e,t[1]),s=r(e,t[2]),i=r(e,t[3]),a=r(e,t[4]),u=r(e,t[5]),c=r(e,t[6]),l=r(e,t[7]),p=r(e,t[8]);return(t=new Array).push(n,o,s,i,a,u,c,l,p),t},ee.prototype.readPrivateKeyFromPEMString=function(e){var t=Ce(e),r=ee.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},ee.prototype.readPKCS5PrvKeyHex=function(e){var t=ee.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ee.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,o,s,i,a,u,c=ue,l=c.getVbyListEx;if(!1===c.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),r=l(e,0,[2,0,2],"02"),n=l(e,0,[2,0,3],"02"),o=l(e,0,[2,0,4],"02"),s=l(e,0,[2,0,5],"02"),i=l(e,0,[2,0,6],"02"),a=l(e,0,[2,0,7],"02"),u=l(e,0,[2,0,8],"02")}catch(p){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,o,s,i,a,u)},ee.prototype.readPKCS5PubKeyHex=function(e){var t=ue,r=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(2!==n.length||"02"!==e.substr(n[0],2)||"02"!==e.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var o=r(e,n[0]),s=r(e,n[1]);this.setPublic(o,s)},ee.prototype.readPKCS8PubKeyHex=function(e){var t=ue;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},ee.prototype.readCertPubKeyHex=function(e,t){var r,n;(r=new ot).readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)},new RegExp("[^0-9a-f]","gi"),ee.prototype.sign=function(e,t){var r,n=(r=e,se.crypto.Util.hashString(r,t));return this.signWithMessageHash(n,t)},ee.prototype.signWithMessageHash=function(e,t){var r=Q(se.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return tt(this.doPrivate(r).toString(16),this.n.bitLength())},ee.prototype.signPSS=function(e,t,r){var n,o=(n=we(e),se.crypto.Util.hashHex(n,t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(o,t,r)},ee.prototype.signWithMessageHashPSS=function(e,t,r){var n,o=be(e),s=o.length,i=this.n.bitLength()-1,a=Math.ceil(i/8),u=function(e){return se.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=s;else if(-2===r)r=a-s-2;else if(r<-2)throw new Error("invalid salt length");if(a<s+r+2)throw new Error("data too long");var c="";r>0&&(c=new Array(r),(new Z).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=be(u(we("\0\0\0\0\0\0\0\0"+o+c))),p=[];for(n=0;n<a-r-s-2;n+=1)p[n]=0;var f=String.fromCharCode.apply(String,p)+"\x01"+c,h=rt(l,f.length,u),d=[];for(n=0;n<f.length;n+=1)d[n]=f.charCodeAt(n)^h.charCodeAt(n);var _=65280>>8*a-i&255;for(d[0]&=~_,n=0;n<s;n++)d.push(l.charCodeAt(n));return d.push(188),tt(this.doPrivate(new b(d)).toString(16),this.n.bitLength())},ee.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=Q(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var o=this.doPublic(r).toString(16);if(o.length+3!=n/4)return!1;var s=nt(o.replace(/^1f+00/,""));if(0==s.length)return!1;var i,a=s[0];return s[1]==(i=e,se.crypto.Util.hashString(i,a))},ee.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Q(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=nt(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=n.length&&(n[0],n[1]==e)},ee.prototype.verifyPSS=function(e,t,r,n){var o,s=(o=we(e),se.crypto.Util.hashHex(o,r));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(s,t,r,n)},ee.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var o,s=new b(t,16),i=function(e){return se.crypto.Util.hashHex(e,r)},a=be(e),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=l-u-2;else if(n<-2)throw new Error("invalid salt length");if(l<u+n+2)throw new Error("data too long");var p=this.doPublic(s).toByteArray();for(o=0;o<p.length;o+=1)p[o]&=255;for(;p.length<l;)p.unshift(0);if(188!==p[l-1])throw new Error("encoded message does not end in 0xbc");var f=(p=String.fromCharCode.apply(String,p)).substr(0,l-u-1),h=p.substr(f.length,u),d=65280>>8*l-c&255;if(0!=(f.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var _=rt(h,f.length,i),g=[];for(o=0;o<f.length;o+=1)g[o]=f.charCodeAt(o)^_.charCodeAt(o);g[0]&=~d;var y=l-u-n-2;for(o=0;o<y;o+=1)if(0!==g[o])throw new Error("leftmost octets not zero");if(1!==g[y])throw new Error("0x01 marker not found");return h===be(i(we("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,g.slice(-n)))))},ee.SALT_LEN_HLEN=-1,ee.SALT_LEN_MAX=-2,ee.SALT_LEN_RECOVER=-2,ot.EXT_PARSER={},ot.registExtParser=function(e,t){ot.EXT_PARSER[e]=t},ot.hex2dn=function(e,t){void 0===t&&(t=0);var r=new ot;return ue.getTLV(e,t),r.getX500Name(e).str},ot.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var r=new Array,n=ue.getChildIdx(e,t),o=0;o<n.length;o++)r.push(ot.hex2attrTypeValue(e,n[o]));return(r=r.map((function(e){return e.replace("+","\\+")}))).join("+")},ot.hex2attrTypeValue=function(e,t){var r=ue,n=r.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var o=r.getChildIdx(e,t);2!==o.length||e.substr(o[0],2);var s=n(e,o[0]),i=se.asn1.ASN1Util.oidHexToInt(s);return se.asn1.x509.OID.oid2atype(i)+"="+be(n(e,o[1]))},ot.getPublicKeyFromCertHex=function(e){var t=new ot;return t.readCertHex(e),t.getPublicKey()},ot.getPublicKeyFromCertPEM=function(e){var t=new ot;return t.readCertPEM(e),t.getPublicKey()},ot.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,n=ue.getVbyList,o={algparam:null};return(t=new ot).readCertPEM(e),r=t.getPublicKeyHex(),o.keyhex=n(r,0,[1],"03").substr(2),o.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===o.algoid&&(o.algparam=n(r,0,[0,1],"06")),o},ot.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==se&&se||(se={}),void 0!==se.jws&&se.jws||(se.jws={}),se.jws.JWS=function(){var e=se.jws.JWS.isSafeJSONString;this.parseJWS=function(t,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var o=n[1],s=n[2],i=n[3],a=o+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=o,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=i,this.parsedJWS.si=a,!r){var u=ge(i),c=Q(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=ae(o),p=ae(s);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=p,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},se.jws.JWS.sign=function(e,t,r,n,o){var s,i,a,u=se,c=u.jws.JWS,l=c.readSafeJSONString,p=c.isSafeJSONString,f=u.crypto,h=(f.ECDSA,f.Mac),d=f.Signature,_=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(i=t,s=_.stringify(i)),"string"==typeof t){if(!p(s=t))throw"JWS Head is not safe JSON string: "+s;i=l(s)}if(a=r,"object"==typeof r&&(a=_.stringify(r)),""!=e&&null!=e||void 0===i.alg||(e=i.alg),""!=e&&null!=e&&void 0===i.alg&&(i.alg=e,s=_.stringify(i)),e!==i.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+i.alg;var g=null;if(void 0===c.jwsalg2sigalg[e])throw"unsupported alg name: "+e;g=c.jwsalg2sigalg[e];var y=ie(s)+"."+ie(a),v="";if("Hmac"==g.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var m=new h({alg:g,prov:"cryptojs",pass:n});m.updateString(y),v=m.doFinal()}else if(-1!=g.indexOf("withECDSA")){(w=new d({alg:g})).init(n,o),w.updateString(y);var b=w.sign();v=se.crypto.ECDSA.asn1SigToConcatSig(b)}else{var w;"none"!=g&&((w=new d({alg:g})).init(n,o),w.updateString(y),v=w.sign())}return y+"."+_e(v)},se.jws.JWS.verify=function(e,t,r){var n,o=se,s=o.jws.JWS,i=s.readSafeJSONString,a=o.crypto,u=a.ECDSA,c=a.Mac,l=a.Signature;if(n=ee,!He(e))return!1;var p=e.split(".");if(3!==p.length)return!1;var f,h=p[0]+"."+p[1],d=ge(p[2]),_=i(ae(p[0])),g=null;if(void 0===_.alg)throw"algorithm not specified in header";if(f=(g=_.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=et.getKey(t)),!("RS"!=f&&"PS"!=f||t instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==f&&!(t instanceof u))throw"key shall be a ECDSA obj for ES* algs";var y=null;if(void 0===s.jwsalg2sigalg[_.alg])throw"unsupported alg name: "+g;if("none"==(y=s.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==y.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var v=new c({alg:y,pass:t});return v.updateString(h),d==v.doFinal()}if(-1!=y.indexOf("withECDSA")){var m,b=null;try{b=u.concatSigToASN1Sig(d)}catch(w){return!1}return(m=new l({alg:y})).init(t),m.updateString(h),m.verify(b)}return(m=new l({alg:y})).init(t),m.updateString(h),m.verify(d)},se.jws.JWS.parse=function(e){var t,r,n,o=e.split("."),s={};if(2!=o.length&&3!=o.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=o[0],r=o[1],3==o.length&&(n=o[2]),s.headerObj=se.jws.JWS.readSafeJSONString(ae(t)),s.payloadObj=se.jws.JWS.readSafeJSONString(ae(r)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=ae(r):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=ge(n)),s},se.jws.JWS.verifyJWT=function(e,t,r){var n=se.jws,o=n.JWS,s=o.readSafeJSONString,i=o.inArray,a=o.includedArray;if(!He(e))return!1;var u=e.split(".");if(3!=u.length)return!1;var c=u[0],l=u[1],p=(ge(u[2]),s(ae(c))),f=s(ae(l));if(void 0===p.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!i(p.alg,r.alg))return!1;if(void 0!==f.iss&&"object"==typeof r.iss&&!i(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"==typeof r.sub&&!i(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"==typeof r.aud)if("string"==typeof f.aud){if(!i(f.aud,r.aud))return!1}else if("object"==typeof f.aud&&!a(f.aud,r.aud))return!1;var h=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(h=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<h||void 0!==f.nbf&&"number"==typeof f.nbf&&h<f.nbf-r.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&h<f.iat-r.gracePeriod||void 0!==f.jti&&void 0!==r.jti&&f.jti!==r.jti||!o.verify(e,t,r.alg))},se.jws.JWS.includedArray=function(e,t){var r=se.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0},se.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},se.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},se.jws.JWS.isSafeJSONString=function(e,t,n){var o=null;try{return"object"!=typeof(o=oe(e))||o.constructor===Array?0:(t&&(t[n]=o),1)}catch(r){return 0}},se.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=oe(e))||t.constructor===Array?null:t}catch(r){return null}},se.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},se.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=we(t);return _e(se.crypto.Util.hashHex(r,"sha256"))},se.jws.IntDate={},se.jws.IntDate.get=function(e){var t=se.jws.IntDate,r=t.getNow,n=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},se.jws.IntDate.getZulu=function(e){return Ie(e)},se.jws.IntDate.getNow=function(){return~~(new Date/1e3)},se.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},se.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==se&&se||(se={}),void 0!==se.jws&&se.jws||(se.jws={}),se.jws.JWSJS=function(){var e=se.jws.JWS,r=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,r,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var o=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=se.jws.JWS.sign(e,t,this.sPayload,r,n).split(".");s[0],s[2],this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(l){throw this.aHeader.length>o&&this.aHeader.pop(),this.aSignature.length>o&&this.aSignature.pop(),"addSignature failed: "+l}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(2!==r.length)return!1;if(!1===this.verifyNth(t,r[0],r[1]))return!1}return!0},this.verifyNth=function(t,r,n){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var o=this.aHeader[t],s=this.aSignature[t],i=o+"."+this.sPayload+"."+s,a=!1;try{a=e.verify(i,r,n)}catch(l){return!1}return a},this.readJWSJS=function(e){if("string"==typeof e){var n=r(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignature=e.signatures}catch(t){throw"malformed JWS-JS JSON object: "+t}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},_$jsrsasign_52.SecureRandom=Z,_$jsrsasign_52.rng_seed_time=G,_$jsrsasign_52.BigInteger=b,_$jsrsasign_52.RSAKey=ee,_$jsrsasign_52.ECDSA=se.crypto.ECDSA,_$jsrsasign_52.DSA=se.crypto.DSA,_$jsrsasign_52.Signature=se.crypto.Signature,_$jsrsasign_52.MessageDigest=se.crypto.MessageDigest,_$jsrsasign_52.Mac=se.crypto.Mac,_$jsrsasign_52.KEYUTIL=et,_$jsrsasign_52.ASN1HEX=ue,_$jsrsasign_52.X509=ot,_$jsrsasign_52.X509CRL=function(e){var t=se.lang.String.isHex,r=ue,n=r.getV,o=r.getTLV,s=r.getVbyList,i=r.getTLVbyList,a=r.getTLVbyListEx,u=r.getIdxbyList,c=r.getIdxbyListEx,l=r.getChildIdx,p=new ot;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var e=u(this.hex,0,[0,0]),t=this.hex.substr(e,2);if("02"==t)this.posSigAlg=1;else{if("30"!=t)throw new Error("malformed 1st item of TBSCertList: "+t);this.posSigAlg=0}var r,n=u(this.hex,0,[0,this.posSigAlg+3]),o=this.hex.substr(n,2);if("17"==o||"18"==o)r=u(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,-1!=r&&"30"==this.hex.substr(r,2)&&(this.posRevCert=this.posSigAlg+4);else if("30"==o)this.posRevCert=this.posSigAlg+3;else{if("a0"!=o)throw new Error("malformed nextUpdate or revCert tag: "+o);this.posRevCert=null}},this.getVersion=function(){return 0==this.posSigAlg?null:parseInt(s(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var e=i(this.hex,0,[0,this.posSigAlg],"30");return p.getAlgorithmIdentifierName(e)},this.getIssuer=function(){return p.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return i(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var e=s(this.hex,0,[0,this.posSigAlg+2]);return result=be(e)},this.getNextUpdate=function(){var e=u(this.hex,0,[0,this.posSigAlg+3]),t=this.hex.substr(e,2);return"17"!=t&&"18"!=t?null:be(n(this.hex,e))},this.getRevCertArray=function(){if(null==this.posRevCert)return null;for(var e=[],t=u(this.hex,0,[0,this.posRevCert]),r=l(this.hex,t),n=0;n<r.length;n++){var s=o(this.hex,r[n]);e.push(this.getRevCert(s))}return e},this.getRevCert=function(e){var t={},r=l(e,0);return t.sn={hex:s(e,0,[0],"02")},t.date=be(s(e,0,[1])),3==r.length&&(t.ext=p.getExtParamArray(i(e,0,[2]))),t},this.findRevCert=function(e){var t=new ot(e).getSerialNumberHex();return this.findRevCertBySN(t)},this.findRevCertBySN=function(e){if(null==this.parsed&&this.getParam(),null==this.parsed.revcert)return null;for(var t=this.parsed.revcert,r=0;r<t.length;r++)if(e==t[r].sn.hex)return t[r];return null},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=i(this.hex,0,[0],"30"),o=new se.crypto.Signature({alg:t});return o.init(e),o.updateHex(n),o.verify(r)},this.getParam=function(e){var t={},r=this.getVersion();null!=r&&(t.version=r),t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.thisupdate=this.getThisUpdate();var n=this.getNextUpdate();null!=n&&(t.nextupdate=n);var o=this.getRevCertArray();if(null!=o&&(t.revcert=o),-1!=c(this.hex,0,[0,"[0]"])){var s=a(this.hex,0,[0,"[0]",0]);t.ext=p.getExtParamArray(s)}return t.sighex=this.getSignatureValueHex(),this.parsed=t,"object"==typeof e&&(1==e.tbshex&&(t.tbshex=i(this.hex,0,[0])),1==e.nodnarray&&delete t.issuer.array),t},"string"==typeof e&&(t(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=Ce(e)),this._setPos())},_$jsrsasign_52.CryptoJS=d,_$jsrsasign_52.b64tohex=v,_$jsrsasign_52.b64toBA=m,_$jsrsasign_52.ECFieldElementFp=te,_$jsrsasign_52.ECPointFp=re,_$jsrsasign_52.ECCurveFp=ne,_$jsrsasign_52.stoBA=ce,_$jsrsasign_52.BAtos=le,_$jsrsasign_52.BAtohex=pe,_$jsrsasign_52.stohex=fe,_$jsrsasign_52.stob64=function(e){return y(fe(e))},_$jsrsasign_52.stob64u=function(e){return he(y(fe(e)))},_$jsrsasign_52.b64utos=function(e){return le(m(de(e)))},_$jsrsasign_52.b64tob64u=he,_$jsrsasign_52.b64utob64=de,_$jsrsasign_52.hex2b64=y,_$jsrsasign_52.hextob64u=_e,_$jsrsasign_52.b64utohex=ge,_$jsrsasign_52.utf8tob64u=ie,_$jsrsasign_52.b64utoutf8=ae,_$jsrsasign_52.utf8tob64=function(e){return y(ke(Le(e)))},_$jsrsasign_52.b64toutf8=function(e){return decodeURIComponent(Re(v(e)))},_$jsrsasign_52.utf8tohex=ye,_$jsrsasign_52.hextoutf8=ve,_$jsrsasign_52.hextorstr=be,_$jsrsasign_52.rstrtohex=we,_$jsrsasign_52.hextob64=Ee,_$jsrsasign_52.hextob64nl=function(e){return xe(Ee(e),64)},_$jsrsasign_52.b64nltohex=Ae,_$jsrsasign_52.hextopem=Se,_$jsrsasign_52.pemtohex=Ce,_$jsrsasign_52.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(2*n,2),16));return t},_$jsrsasign_52.ArrayBuffertohex=function(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t},_$jsrsasign_52.zulutomsec=Pe,_$jsrsasign_52.msectozulu=function(e){var t=new Date(e),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),o=("00"+t.getUTCDate()).slice(-2),s=("00"+t.getUTCHours()).slice(-2),i=("00"+t.getUTCMinutes()).slice(-2),a=("00"+t.getUTCSeconds()).slice(-2),u=("000"+t.getUTCMilliseconds()).slice(-3);return r+n+o+s+i+a+(u=""!=(u=u.replace(/0+$/,""))?"."+u:u)+"Z"},_$jsrsasign_52.zulutosec=Ie,_$jsrsasign_52.zulutodate=function(e){return new Date(Pe(e))},_$jsrsasign_52.datetozulu=function(e,t,r){var n,o=e.getUTCFullYear();if(t){if(o<1950||2049<o)throw"not proper year for UTCTime: "+o;n=(""+o).slice(-2)}else n=("000"+o).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var s=e.getUTCMilliseconds();0!==s&&(n+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return n+"Z"},_$jsrsasign_52.uricmptohex=ke,_$jsrsasign_52.hextouricmp=Re,_$jsrsasign_52.ipv6tohex=$e,_$jsrsasign_52.hextoipv6=Oe,_$jsrsasign_52.hextoip=Te,_$jsrsasign_52.iptohex=Be,_$jsrsasign_52.ucs2hextoutf8=Ne,_$jsrsasign_52.encodeURIComponentAll=Le,_$jsrsasign_52.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},_$jsrsasign_52.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},_$jsrsasign_52.hextoposhex=Me,_$jsrsasign_52.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,r){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(r){throw"malformed integer array string: "+r}},_$jsrsasign_52.strdiffidx=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1},_$jsrsasign_52.oidtohex=qe,_$jsrsasign_52.hextooid=Ve,_$jsrsasign_52.strpad=ze,_$jsrsasign_52.bitstrtoint=Ye,_$jsrsasign_52.inttobitstr=We,_$jsrsasign_52.bitstrtobinstr=Xe,_$jsrsasign_52.binstrtobitstr=function(e){if("string"!=typeof e)return null;if(null==e.match(/^[01]+$/))return null;try{return We(parseInt(e,2))}catch(r){return null}},_$jsrsasign_52.isBase64URLDot=He,_$jsrsasign_52.namearraytobinstr=Je,_$jsrsasign_52.extendClass=Qe,_$jsrsasign_52.foldnl=xe,_$jsrsasign_52.b64topem=function(e,t){return"-----BEGIN "+t+"-----\r\n"+xe(e,64)+"\r\n-----END "+t+"-----\r\n"},_$jsrsasign_52.pemtob64=function(e){return-1==e.indexOf("-----BEGIN ")||-1==e.indexOf("-----END ")?null:(e=(e=(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,"")).replace(/-----END [\s\S]+$/m,"")).replace(/\s+/g,"")).match(/^[0-9a-zA-Z+/=]+$/)?e:null},_$jsrsasign_52.timeogen=Fe,_$jsrsasign_52.aryval=Ze,_$jsrsasign_52.inttohex=Ke,_$jsrsasign_52.twoscompl=Ge,_$jsrsasign_52.KJUR=se,_$jsrsasign_52.crypto=se.crypto,_$jsrsasign_52.asn1=se.asn1,_$jsrsasign_52.jws=se.jws,_$jsrsasign_52.lang=se.lang,_$jsrsasign_52.VERSION="11.1.0",_$jsrsasign_52.VERSION_FULL="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license"}).call(this)}).call(this,_$buffer_3({}).Buffer);var _$rs_134={};Object.defineProperty(_$rs_134,"__esModule",{value:!0}),_$rs_134.default=void 0,_$rs_134.generateFingerprint=generateFingerprint;var __obj_134,_jsrsasign=(__obj_134=_$jsrsasign_52)&&__obj_134.__esModule?__obj_134:{default:__obj_134};function generateFingerprint(e){var t=_jsrsasign.default.pemtohex(e);return _jsrsasign.default.KJUR.crypto.Util.hashHex(t,"sha256").match(/.{2}/g).join(":").toUpperCase()}var ___default_134={generateFingerprint:generateFingerprint};_$rs_134.default=___default_134;var _$common_23={};function isNothing(e){return null==e}_$common_23.isNothing=isNothing,_$common_23.isObject=function(e){return"object"==typeof e&&null!==e},_$common_23.toArray=function(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]},_$common_23.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},_$common_23.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},_$common_23.extend=function(e,t){var r,n,o,s;if(t)for(r=0,n=(s=Object.keys(t)).length;r<n;r+=1)e[o=s[r]]=t[o];return e};var _$exception_25={};function YAMLException(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}YAMLException.prototype=Object.create(Error.prototype),YAMLException.prototype.constructor=YAMLException,YAMLException.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},_$exception_25=YAMLException;var _$mark_27={};function Mark(e,t,r,n,o){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=o}Mark.prototype.getSnippet=function(e,t){var r,n,o,s,i;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",n=this.position;n>0&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(n-1));)if(n-=1,this.position-n>t/2-1){r=" ... ",n+=5;break}for(o="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){o=" ... ",s-=5;break}return i=this.buffer.slice(n,s),_$common_23.repeat(" ",e)+r+i+o+"\n"+_$common_23.repeat(" ",e+this.position-n+r.length)+"^"},Mark.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},_$mark_27=Mark;var TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"],_$type_34=function(e,t){var r,n;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===TYPE_CONSTRUCTOR_OPTIONS.indexOf(t))throw new _$exception_25('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,n={},null!==r&&Object.keys(r).forEach((function(e){r[e].forEach((function(t){n[String(t)]=e}))})),n),-1===YAML_NODE_KINDS.indexOf(this.kind))throw new _$exception_25('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')},_$schema_28={};function compileList(e,t,r){var n=[];return e.include.forEach((function(e){r=compileList(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function Schema(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new _$exception_25("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}Schema.DEFAULT=null,Schema.create=function(){var e,t;switch(arguments.length){case 1:e=Schema.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new _$exception_25("Wrong number of arguments for Schema.create function")}if(e=_$common_23.toArray(e),t=_$common_23.toArray(t),!e.every((function(e){return e instanceof Schema})))throw new _$exception_25("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof _$type_34})))throw new _$exception_25("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema({include:e,explicit:t})},_$schema_28=Schema;var _$str_49=new _$type_34("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),_$seq_47=new _$type_34("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),_$map_42=new _$type_34("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),_$failsafe_32=new _$schema_28({explicit:[_$str_49,_$seq_47,_$map_42]}),_$null_44=new _$type_34("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),_$bool_36=new _$type_34("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}var _$int_38=new _$type_34("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,o=0,s=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;s=!0}return s&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(r=e.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;s=!0}return s&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!isOctCode(e.charCodeAt(o)))return!1;s=!0}return s&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!isDecCode(e.charCodeAt(o)))return!1;s=!0}return!(!s||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,r,n=e,o=1,s=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(o=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(e){s.unshift(parseInt(e,10))})),n=0,r=1,s.forEach((function(e){n+=e*r,r*=60})),o*n):o*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!_$common_23.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/,_$float_37=new _$type_34("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!YAML_FLOAT_PATTERN.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,o;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){o.unshift(parseFloat(e,10))})),t=0,n=1,o.forEach((function(e){t+=e*n,n*=60})),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||_$common_23.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_$common_23.isNegativeZero(e))return"-0.0";return r=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"}),_$json_33=new _$schema_28({include:[_$failsafe_32],implicit:[_$null_44,_$bool_36,_$int_38,_$float_37]}),_$core_29=new _$schema_28({include:[_$json_33]}),YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),_$timestamp_50=new _$type_34("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==YAML_DATE_REGEXP.exec(e)||null!==YAML_TIMESTAMP_REGEXP.exec(e))},construct:function(e){var t,r,n,o,s,i,a,u,c=0,l=null;if(null===(t=YAML_DATE_REGEXP.exec(e))&&(t=YAML_TIMESTAMP_REGEXP.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(r,n,o));if(s=+t[4],i=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(l=-l)),u=new Date(Date.UTC(r,n,o,s,i,a,c)),l&&u.setTime(u.getTime()-l),u},instanceOf:Date,represent:function(e){return e.toISOString()}}),_$merge_43=new _$type_34("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),NodeBuffer;try{var _require=require;NodeBuffer=_require("buffer").Buffer}catch(__){}var BASE64_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",_$binary_35=new _$type_34("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,o=e.length,s=BASE64_MAP;for(r=0;r<o;r++)if(!((t=s.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,n=e.replace(/[\r\n=]/g,""),o=n.length,s=BASE64_MAP,i=0,a=[];for(t=0;t<o;t++)t%4==0&&t&&(a.push(i>>16&255),a.push(i>>8&255),a.push(255&i)),i=i<<6|s.indexOf(n.charAt(t));return 0==(r=o%4*6)?(a.push(i>>16&255),a.push(i>>8&255),a.push(255&i)):18===r?(a.push(i>>10&255),a.push(i>>2&255)):12===r&&a.push(i>>4&255),NodeBuffer?NodeBuffer.from?NodeBuffer.from(a):new NodeBuffer(a):a},predicate:function(e){return NodeBuffer&&NodeBuffer.isBuffer(e)},represent:function(e){var t,r,n="",o=0,s=e.length,i=BASE64_MAP;for(t=0;t<s;t++)t%3==0&&t&&(n+=i[o>>18&63],n+=i[o>>12&63],n+=i[o>>6&63],n+=i[63&o]),o=(o<<8)+e[t];return 0==(r=s%3)?(n+=i[o>>18&63],n+=i[o>>12&63],n+=i[o>>6&63],n+=i[63&o]):2===r?(n+=i[o>>10&63],n+=i[o>>4&63],n+=i[o<<2&63],n+=i[64]):1===r&&(n+=i[o>>2&63],n+=i[o<<4&63],n+=i[64],n+=i[64]),n}}),_hasOwnProperty=Object.prototype.hasOwnProperty,_toString=Object.prototype.toString,_$omap_45=new _$type_34("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,o,s,i=[],a=e;for(t=0,r=a.length;t<r;t+=1){if(n=a[t],s=!1,"[object Object]"!==_toString.call(n))return!1;for(o in n)if(_hasOwnProperty.call(n,o)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==i.indexOf(o))return!1;i.push(o)}return!0},construct:function(e){return null!==e?e:[]}}),___toString_46=Object.prototype.toString,_$pairs_46=new _$type_34("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,o,s,i=e;for(s=new Array(i.length),t=0,r=i.length;t<r;t+=1){if(n=i[t],"[object Object]"!==___toString_46.call(n))return!1;if(1!==(o=Object.keys(n)).length)return!1;s[t]=[o[0],n[o[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,o,s,i=e;for(s=new Array(i.length),t=0,r=i.length;t<r;t+=1)n=i[t],o=Object.keys(n),s[t]=[o[0],n[o[0]]];return s}}),___hasOwnProperty_48=Object.prototype.hasOwnProperty,_$set_48=new _$type_34("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(___hasOwnProperty_48.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),_$default_safe_31=new _$schema_28({include:[_$core_29],implicit:[_$timestamp_50,_$merge_43],explicit:[_$binary_35,_$omap_45,_$pairs_46,_$set_48]}),_$undefined_41=new _$type_34("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}}),_$regexp_40=new _$type_34("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}}),esprima;try{var ___require_39=require;esprima=___require_39("esprima")}catch(_){"undefined"!=typeof window&&(esprima=window.esprima)}var _$function_39=new _$type_34("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=esprima.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(n){return!1}},construct:function(e){var t,r="("+e+")",n=esprima.parse(r,{range:!0}),o=[];if("Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"ArrowFunctionExpression"!==n.body[0].expression.type&&"FunctionExpression"!==n.body[0].expression.type)throw new Error("Failed to resolve function");return n.body[0].expression.params.forEach((function(e){o.push(e.name)})),t=n.body[0].expression.body.range,"BlockStatement"===n.body[0].expression.body.type?new Function(o,r.slice(t[0]+1,t[1]-1)):new Function(o,"return "+r.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}}),_$default_full_30=_$schema_28.DEFAULT=new _$schema_28({include:[_$default_safe_31],explicit:[_$undefined_41,_$regexp_40,_$function_39]}),_$loader_26={},___hasOwnProperty_26=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(e){return Object.prototype.toString.call(e)}function is_EOL(e){return 10===e||13===e}function is_WHITE_SPACE(e){return 9===e||32===e}function is_WS_OR_EOL(e){return 9===e||32===e||10===e||13===e}function is_FLOW_INDICATOR(e){return 44===e||91===e||93===e||123===e||125===e}function fromHexCode(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function simpleEscapeSequence(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),__i_26=0;__i_26<256;__i_26++)simpleEscapeCheck[__i_26]=simpleEscapeSequence(__i_26)?1:0,simpleEscapeMap[__i_26]=simpleEscapeSequence(__i_26);function State(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||_$default_full_30,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(e,t){return new _$exception_25(t,new _$mark_27(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function throwError(e,t){throw generateError(e,t)}function throwWarning(e,t){e.onWarning&&e.onWarning.call(null,generateError(e,t))}var directiveHandlers={YAML:function(e,t,r){var n,o,s;null!==e.version&&throwError(e,"duplication of %YAML directive"),1!==r.length&&throwError(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&throwError(e,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),s=parseInt(n[2],10),1!==o&&throwError(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,1!==s&&2!==s&&throwWarning(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,o;2!==r.length&&throwError(e,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],PATTERN_TAG_HANDLE.test(n)||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),___hasOwnProperty_26.call(e.tagMap,n)&&throwError(e,'there is a previously declared suffix for "'+n+'" tag handle'),PATTERN_TAG_URI.test(o)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=o}};function captureSegment(e,t,r,n){var o,s,i,a;if(t<r){if(a=e.input.slice(t,r),n)for(o=0,s=a.length;o<s;o+=1)9===(i=a.charCodeAt(o))||32<=i&&i<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(a)&&throwError(e,"the stream contains non-printable characters");e.result+=a}}function mergeMappings(e,t,r,n){var o,s,i,a;for(_$common_23.isObject(r)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),i=0,a=(o=Object.keys(r)).length;i<a;i+=1)s=o[i],___hasOwnProperty_26.call(t,s)||(t[s]=r[s],n[s]=!0)}function storeMappingPair(e,t,r,n,o,s,i,a){var u,c;if(Array.isArray(o))for(u=0,c=(o=Array.prototype.slice.call(o)).length;u<c;u+=1)Array.isArray(o[u])&&throwError(e,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===_class(o[u])&&(o[u]="[object Object]");if("object"==typeof o&&"[object Object]"===_class(o)&&(o="[object Object]"),o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)mergeMappings(e,t,s[u],r);else mergeMappings(e,t,s,r);else e.json||___hasOwnProperty_26.call(r,o)||!___hasOwnProperty_26.call(t,o)||(e.line=i||e.line,e.position=a||e.position,throwError(e,"duplicated mapping key")),t[o]=s,delete r[o];return t}function readLineBreak(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function skipSeparationSpace(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);0!==o;){for(;is_WHITE_SPACE(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!is_EOL(o))break;for(readLineBreak(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&throwWarning(e,"deficient indentation"),n}function testDocumentSeparator(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!is_WS_OR_EOL(t)))}function writeFoldedLines(e,t){1===t?e.result+=" ":t>1&&(e.result+=_$common_23.repeat("\n",t-1))}function readBlockSequence(e,t){var r,n,o=e.tag,s=e.anchor,i=[],a=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),n=e.input.charCodeAt(e.position);0!==n&&45===n&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=t)i.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,composeNode(e,t,CONTEXT_BLOCK_IN,!1,!0),i.push(e.result),skipSeparationSpace(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=o,e.anchor=s,e.kind="sequence",e.result=i,!0)}function readTagProperty(e){var t,r,n,o,s=!1,i=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&throwError(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(s=!0,o=e.input.charCodeAt(++e.position)):33===o?(i=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,s){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!is_WS_OR_EOL(o);)33===o&&(i?throwError(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),PATTERN_FLOW_INDICATORS.test(n)&&throwError(e,"tag suffix cannot contain flow indicator characters")}return n&&!PATTERN_TAG_URI.test(n)&&throwError(e,"tag name cannot contain such characters: "+n),s?e.tag=n:___hasOwnProperty_26.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:throwError(e,'undeclared tag handle "'+r+'"'),!0}function readAnchorProperty(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&throwError(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!is_WS_OR_EOL(r)&&!is_FLOW_INDICATOR(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function composeNode(e,t,r,n,o){var s,i,a,u,c,l,p,f,h=1,d=!1,_=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=i=a=CONTEXT_BLOCK_OUT===r||CONTEXT_BLOCK_IN===r,n&&skipSeparationSpace(e,!0,-1)&&(d=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(d=!0,a=s,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):a=!1;if(a&&(a=d||o),1!==h&&CONTEXT_BLOCK_OUT!==r||(p=CONTEXT_FLOW_IN===r||CONTEXT_FLOW_OUT===r?t:t+1,f=e.position-e.lineStart,1===h?a&&(readBlockSequence(e,f)||function(e,t,r){var n,o,s,i,a,u=e.tag,c=e.anchor,l={},p={},f=null,h=null,d=null,_=!1,g=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=l),a=e.input.charCodeAt(e.position);0!==a;){if(n=e.input.charCodeAt(e.position+1),s=e.line,i=e.position,63!==a&&58!==a||!is_WS_OR_EOL(n)){if(!composeNode(e,r,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===s){for(a=e.input.charCodeAt(e.position);is_WHITE_SPACE(a);)a=e.input.charCodeAt(++e.position);if(58===a)is_WS_OR_EOL(a=e.input.charCodeAt(++e.position))||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(storeMappingPair(e,l,p,f,h,null),f=h=d=null),g=!0,_=!1,o=!1,f=e.tag,h=e.result;else{if(!g)return e.tag=u,e.anchor=c,!0;throwError(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!g)return e.tag=u,e.anchor=c,!0;throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(_&&(storeMappingPair(e,l,p,f,h,null),f=h=d=null),g=!0,_=!0,o=!0):_?(_=!1,o=!0):throwError(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,a=n;if((e.line===s||e.lineIndent>t)&&(composeNode(e,t,CONTEXT_BLOCK_OUT,!0,o)&&(_?h=e.result:d=e.result),_||(storeMappingPair(e,l,p,f,h,d,s,i),f=h=d=null),skipSeparationSpace(e,!0,-1),a=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==a)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return _&&storeMappingPair(e,l,p,f,h,null),g&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=l),g}(e,f,p))||function(e,t){var r,n,o,s,i,a,u,c,l,p,f=!0,h=e.tag,d=e.anchor,_={};if(91===(p=e.input.charCodeAt(e.position)))o=93,a=!1,n=[];else{if(123!==p)return!1;o=125,a=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),p=e.input.charCodeAt(++e.position);0!==p;){if(skipSeparationSpace(e,!0,t),(p=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=h,e.anchor=d,e.kind=a?"mapping":"sequence",e.result=n,!0;f||throwError(e,"missed comma between flow collection entries"),l=null,s=i=!1,63===p&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1))&&(s=i=!0,e.position++,skipSeparationSpace(e,!0,t)),r=e.line,composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),c=e.tag,u=e.result,skipSeparationSpace(e,!0,t),p=e.input.charCodeAt(e.position),!i&&e.line!==r||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,t),composeNode(e,t,CONTEXT_FLOW_IN,!1,!0),l=e.result),a?storeMappingPair(e,n,_,c,u,l):s?n.push(storeMappingPair(e,null,_,c,u,l)):n.push(u),skipSeparationSpace(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(f=!0,p=e.input.charCodeAt(++e.position)):f=!1}throwError(e,"unexpected end of the stream within a flow collection")}(e,p)?_=!0:(i&&function(e,t){var r,n,o,s,i,a=CHOMPING_CLIP,u=!1,c=!1,l=t,p=0,f=!1;if(124===(s=e.input.charCodeAt(e.position)))n=!1;else{if(62!==s)return!1;n=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)CHOMPING_CLIP===a?a=43===s?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else{if(!((o=48<=(i=s)&&i<=57?i-48:-1)>=0))break;0===o?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?throwError(e,"repeat of an indentation width identifier"):(l=t+o-1,c=!0)}if(is_WHITE_SPACE(s)){do{s=e.input.charCodeAt(++e.position)}while(is_WHITE_SPACE(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!is_EOL(s)&&0!==s)}for(;0!==s;){for(readLineBreak(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),is_EOL(s))p++;else{if(e.lineIndent<l){a===CHOMPING_KEEP?e.result+=_$common_23.repeat("\n",u?1+p:p):a===CHOMPING_CLIP&&u&&(e.result+="\n");break}for(n?is_WHITE_SPACE(s)?(f=!0,e.result+=_$common_23.repeat("\n",u?1+p:p)):f?(f=!1,e.result+=_$common_23.repeat("\n",p+1)):0===p?u&&(e.result+=" "):e.result+=_$common_23.repeat("\n",p):e.result+=_$common_23.repeat("\n",u?1+p:p),u=!0,c=!0,p=0,r=e.position;!is_EOL(s)&&0!==s;)s=e.input.charCodeAt(++e.position);captureSegment(e,r,e.position,!1)}}return!0}(e,p)||function(e,t){var r,n,o;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(captureSegment(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,o=e.position}else is_EOL(r)?(captureSegment(e,n,o,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),n=o=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}(e,p)||function(e,t){var r,n,o,s,i,a,u;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return captureSegment(e,r,e.position,!0),e.position++,!0;if(92===a){if(captureSegment(e,r,e.position,!0),is_EOL(a=e.input.charCodeAt(++e.position)))skipSeparationSpace(e,!1,t);else if(a<256&&simpleEscapeCheck[a])e.result+=simpleEscapeMap[a],e.position++;else if((i=120===(u=a)?2:117===u?4:85===u?8:0)>0){for(o=i,s=0;o>0;o--)(i=fromHexCode(a=e.input.charCodeAt(++e.position)))>=0?s=(s<<4)+i:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(s),e.position++}else throwError(e,"unknown escape sequence");r=n=e.position}else is_EOL(a)?(captureSegment(e,r,n,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,t)),r=n=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}(e,p)?_=!0:function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&throwError(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),___hasOwnProperty_26.call(e.anchorMap,r)||throwError(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],skipSeparationSpace(e,!0,-1),!0}(e)?(_=!0,null===e.tag&&null===e.anchor||throwError(e,"alias node should not have any properties")):function(e,t,r){var n,o,s,i,a,u,c,l,p=e.kind,f=e.result;if(is_WS_OR_EOL(l=e.input.charCodeAt(e.position))||is_FLOW_INDICATOR(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(is_WS_OR_EOL(n=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(n)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,i=!1;0!==l;){if(58===l){if(is_WS_OR_EOL(n=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(n))break}else if(35===l){if(is_WS_OR_EOL(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||r&&is_FLOW_INDICATOR(l))break;if(is_EOL(l)){if(a=e.line,u=e.lineStart,c=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=t){i=!0,l=e.input.charCodeAt(e.position);continue}e.position=s,e.line=a,e.lineStart=u,e.lineIndent=c;break}}i&&(captureSegment(e,o,s,!1),writeFoldedLines(e,e.line-a),o=s=e.position,i=!1),is_WHITE_SPACE(l)||(s=e.position+1),l=e.input.charCodeAt(++e.position)}return captureSegment(e,o,s,!1),!!e.result||(e.kind=p,e.result=f,!1)}(e,p,CONTEXT_FLOW_IN===r)&&(_=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(_=a&&readBlockSequence(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&throwError(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,c=e.implicitTypes.length;u<c;u+=1)if((l=e.implicitTypes[u]).resolve(e.result)){e.result=l.construct(e.result),e.tag=l.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else ___hasOwnProperty_26.call(e.typeMap[e.kind||"fallback"],e.tag)?(l=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&l.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+l.kind+'", not "'+e.kind+'"'),l.resolve(e.result)?(e.result=l.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):throwError(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||_}function readDocument(e){var t,r,n,o,s=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(skipSeparationSpace(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(i=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!is_WS_OR_EOL(o);)o=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&throwError(e,"directive name must not be less than one character in length");0!==o;){for(;is_WHITE_SPACE(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!is_EOL(o));break}if(is_EOL(o))break;for(t=e.position;0!==o&&!is_WS_OR_EOL(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==o&&readLineBreak(e),___hasOwnProperty_26.call(directiveHandlers,r)?directiveHandlers[r](e,r,n):throwWarning(e,'unknown document directive "'+r+'"')}skipSeparationSpace(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,skipSeparationSpace(e,!0,-1)):i&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(s,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,skipSeparationSpace(e,!0,-1)):e.position<e.length-1&&throwError(e,"end of the stream or a document separator is expected")}function loadDocuments(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new State(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,throwError(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)readDocument(r);return r.documents}function loadAll(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var n=loadDocuments(e,r);if("function"!=typeof t)return n;for(var o=0,s=n.length;o<s;o+=1)t(n[o])}function load(e,t){var r=loadDocuments(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new _$exception_25("expected a single document in the stream, but found more")}}_$loader_26.loadAll=loadAll,_$loader_26.load=load,_$loader_26.safeLoadAll=function(e,t,r){return"object"==typeof t&&null!==t&&void 0===r&&(r=t,t=null),loadAll(e,t,_$common_23.extend({schema:_$default_safe_31},r))},_$loader_26.safeLoad=function(e,t){return load(e,_$common_23.extend({schema:_$default_safe_31},t))};var _$dumper_24={},___toString_24=Object.prototype.toString,___hasOwnProperty_24=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function encodeHex(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new _$exception_25("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+_$common_23.repeat("0",n-t.length)+t}function __State_24(e){this.schema=e.schema||_$default_full_30,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=_$common_23.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,o,s,i,a,u;if(null===t)return{};for(r={},o=0,s=(n=Object.keys(t)).length;o<s;o+=1)i=n[o],a=String(t[i]),"!!"===i.slice(0,2)&&(i="tag:yaml.org,2002:"+i.slice(2)),(u=e.compiledTypeMap.fallback[i])&&___hasOwnProperty_24.call(u.styleAliases,a)&&(a=u.styleAliases[a]),r[i]=a;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,t){for(var r,n=_$common_23.repeat(" ",t),o=0,s=-1,i="",a=e.length;o<a;)-1===(s=e.indexOf("\n",o))?(r=e.slice(o),o=a):(r=e.slice(o,s+1),o=s+1),r.length&&"\n"!==r&&(i+=n),i+=r;return i}function generateNextLine(e,t){return"\n"+_$common_23.repeat(" ",e.indent*t)}function isWhitespace(e){return e===CHAR_SPACE||e===CHAR_TAB}function isPrintable(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function isPlainSafe(e,t){return isPrintable(e)&&65279!==e&&e!==CHAR_COMMA&&e!==CHAR_LEFT_SQUARE_BRACKET&&e!==CHAR_RIGHT_SQUARE_BRACKET&&e!==CHAR_LEFT_CURLY_BRACKET&&e!==CHAR_RIGHT_CURLY_BRACKET&&e!==CHAR_COLON&&(e!==CHAR_SHARP||t&&function(e){return isPrintable(e)&&!isWhitespace(e)&&65279!==e&&e!==CHAR_CARRIAGE_RETURN&&e!==CHAR_LINE_FEED}(t))}function needIndentIndicator(e){return/^\n* /.test(e)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(e,t,r,n,o){var s,i,a,u,c=!1,l=!1,p=-1!==n,f=-1,h=isPrintable(u=e.charCodeAt(0))&&65279!==u&&!isWhitespace(u)&&u!==CHAR_MINUS&&u!==CHAR_QUESTION&&u!==CHAR_COLON&&u!==CHAR_COMMA&&u!==CHAR_LEFT_SQUARE_BRACKET&&u!==CHAR_RIGHT_SQUARE_BRACKET&&u!==CHAR_LEFT_CURLY_BRACKET&&u!==CHAR_RIGHT_CURLY_BRACKET&&u!==CHAR_SHARP&&u!==CHAR_AMPERSAND&&u!==CHAR_ASTERISK&&u!==CHAR_EXCLAMATION&&u!==CHAR_VERTICAL_LINE&&u!==CHAR_EQUALS&&u!==CHAR_GREATER_THAN&&u!==CHAR_SINGLE_QUOTE&&u!==CHAR_DOUBLE_QUOTE&&u!==CHAR_PERCENT&&u!==CHAR_COMMERCIAL_AT&&u!==CHAR_GRAVE_ACCENT&&!isWhitespace(e.charCodeAt(e.length-1));if(t)for(s=0;s<e.length;s++){if(!isPrintable(i=e.charCodeAt(s)))return STYLE_DOUBLE;a=s>0?e.charCodeAt(s-1):null,h=h&&isPlainSafe(i,a)}else{for(s=0;s<e.length;s++){if((i=e.charCodeAt(s))===CHAR_LINE_FEED)c=!0,p&&(l=l||s-f-1>n&&" "!==e[f+1],f=s);else if(!isPrintable(i))return STYLE_DOUBLE;a=s>0?e.charCodeAt(s-1):null,h=h&&isPlainSafe(i,a)}l=l||p&&s-f-1>n&&" "!==e[f+1]}return c||l?r>9&&needIndentIndicator(e)?STYLE_DOUBLE:l?STYLE_FOLDED:STYLE_LITERAL:h&&!o(e)?STYLE_PLAIN:STYLE_SINGLE}function writeScalar(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==DEPRECATED_BOOLEANS_SYNTAX.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,r),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),i=n||e.flowLevel>-1&&r>=e.flowLevel;switch(chooseScalarStyle(t,i,e.indent,s,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}))){case STYLE_PLAIN:return t;case STYLE_SINGLE:return"'"+t.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(t,e.indent)+dropEndingNewline(indentString(t,o));case STYLE_FOLDED:return">"+blockHeader(t,e.indent)+dropEndingNewline(indentString(function(e,t){for(var r,n,o,s=/(\n+)([^\n]*)/g,i=(o=-1!==(o=e.indexOf("\n"))?o:e.length,s.lastIndex=o,foldLine(e.slice(0,o),t)),a="\n"===e[0]||" "===e[0];n=s.exec(e);){var u=n[1],c=n[2];r=" "===c[0],i+=u+(a||r||""===c?"":"\n")+foldLine(c,t),a=r}return i}(t,s),o));case STYLE_DOUBLE:return'"'+function(e){for(var t,r,n,o="",s=0;s<e.length;s++)(t=e.charCodeAt(s))>=55296&&t<=56319&&(r=e.charCodeAt(s+1))>=56320&&r<=57343?(o+=encodeHex(1024*(t-55296)+r-56320+65536),s++):o+=!(n=ESCAPE_SEQUENCES[t])&&isPrintable(t)?e[s]:n||encodeHex(t);return o}(t)+'"';default:throw new _$exception_25("impossible error: invalid scalar style")}}()}function blockHeader(e,t){var r=needIndentIndicator(e)?String(t):"",n="\n"===e[e.length-1];return r+(!n||"\n"!==e[e.length-2]&&"\n"!==e?n?"":"-":"+")+"\n"}function dropEndingNewline(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function foldLine(e,t){if(""===e||" "===e[0])return e;for(var r,n,o=/ [^ ]/g,s=0,i=0,a=0,u="";r=o.exec(e);)(a=r.index)-s>t&&(n=i>s?i:a,u+="\n"+e.slice(s,n),s=n+1),i=a;return u+="\n",e.length-s>t&&i>s?u+=e.slice(s,i)+"\n"+e.slice(i+1):u+=e.slice(s),u.slice(1)}function detectType(e,t,r){var n,o,s,i,a,u;for(s=0,i=(o=r?e.explicitTypes:e.implicitTypes).length;s<i;s+=1)if(((a=o[s]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(e.tag=r?a.tag:"?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===___toString_24.call(a.represent))n=a.represent(t,u);else{if(!___hasOwnProperty_24.call(a.represent,u))throw new _$exception_25("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');n=a.represent[u](t,u)}e.dump=n}return!0}return!1}function writeNode(e,t,r,n,o,s){e.tag=null,e.dump=r,detectType(e,r,!1)||detectType(e,r,!0);var i=___toString_24.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var a,u,c="[object Object]"===i||"[object Array]"===i;if(c&&(u=-1!==(a=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(o=!1),u&&e.usedDuplicates[a])e.dump="*ref_"+a;else{if(c&&u&&!e.usedDuplicates[a]&&(e.usedDuplicates[a]=!0),"[object Object]"===i)n&&0!==Object.keys(e.dump).length?(function(e,t,r,n){var o,s,i,a,u,c,l="",p=e.tag,f=Object.keys(r);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new _$exception_25("sortKeys must be a boolean or a function");for(o=0,s=f.length;o<s;o+=1)c="",n&&0===o||(c+=generateNextLine(e,t)),a=r[i=f[o]],writeNode(e,t+1,i,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,u&&(c+=generateNextLine(e,t)),writeNode(e,t+1,a,!0,u)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?c+=":":c+=": ",l+=c+=e.dump));e.tag=p,e.dump=l||"{}"}(e,t,e.dump,o),u&&(e.dump="&ref_"+a+e.dump)):(function(e,t,r){var n,o,s,i,a,u="",c=e.tag,l=Object.keys(r);for(n=0,o=l.length;n<o;n+=1)a="",0!==n&&(a+=", "),e.condenseFlow&&(a+='"'),i=r[s=l[n]],writeNode(e,t,s,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),writeNode(e,t,i,!1,!1)&&(u+=a+=e.dump));e.tag=c,e.dump="{"+u+"}"}(e,t,e.dump),u&&(e.dump="&ref_"+a+" "+e.dump));else if("[object Array]"===i){var l=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(function(e,t,r,n){var o,s,i="",a=e.tag;for(o=0,s=r.length;o<s;o+=1)writeNode(e,t+1,r[o],!0,!0)&&(n&&0===o||(i+=generateNextLine(e,t)),e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=a,e.dump=i||"[]"}(e,l,e.dump,o),u&&(e.dump="&ref_"+a+e.dump)):(function(e,t,r){var n,o,s="",i=e.tag;for(n=0,o=r.length;n<o;n+=1)writeNode(e,t,r[n],!1,!1)&&(0!==n&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=i,e.dump="["+s+"]"}(e,l,e.dump),u&&(e.dump="&ref_"+a+" "+e.dump))}else{if("[object String]"!==i){if(e.skipInvalid)return!1;throw new _$exception_25("unacceptable kind of an object to dump "+i)}"?"!==e.tag&&writeScalar(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function getDuplicateReferences(e,t){var r,n,o=[],s=[];for(function e(t,r,n){var o,s,i;if(null!==t&&"object"==typeof t)if(-1!==(s=r.indexOf(t)))-1===n.indexOf(s)&&n.push(s);else if(r.push(t),Array.isArray(t))for(s=0,i=t.length;s<i;s+=1)e(t[s],r,n);else for(s=0,i=(o=Object.keys(t)).length;s<i;s+=1)e(t[o[s]],r,n)}(e,o,s),r=0,n=s.length;r<n;r+=1)t.duplicates.push(o[s[r]]);t.usedDuplicates=new Array(n)}function dump(e,t){var r=new __State_24(t=t||{});return r.noRefs||getDuplicateReferences(e,r),writeNode(r,0,e,!0,!0)?r.dump+"\n":""}_$dumper_24.dump=dump,_$dumper_24.safeDump=function(e,t){return dump(e,_$common_23.extend({schema:_$default_safe_31},t))};var _$jsYaml_22={};function deprecated(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}_$jsYaml_22.Type=_$type_34,_$jsYaml_22.Schema=_$schema_28,_$jsYaml_22.FAILSAFE_SCHEMA=_$failsafe_32,_$jsYaml_22.JSON_SCHEMA=_$json_33,_$jsYaml_22.CORE_SCHEMA=_$core_29,_$jsYaml_22.DEFAULT_SAFE_SCHEMA=_$default_safe_31,_$jsYaml_22.DEFAULT_FULL_SCHEMA=_$default_full_30,_$jsYaml_22.load=_$loader_26.load,_$jsYaml_22.loadAll=_$loader_26.loadAll,_$jsYaml_22.safeLoad=_$loader_26.safeLoad,_$jsYaml_22.safeLoadAll=_$loader_26.safeLoadAll,_$jsYaml_22.dump=_$dumper_24.dump,_$jsYaml_22.safeDump=_$dumper_24.safeDump,_$jsYaml_22.YAMLException=_$exception_25,_$jsYaml_22.MINIMAL_SCHEMA=_$failsafe_32,_$jsYaml_22.SAFE_SCHEMA=_$default_safe_31,_$jsYaml_22.DEFAULT_SCHEMA=_$default_full_30,_$jsYaml_22.scan=deprecated("scan"),_$jsYaml_22.parse=deprecated("parse"),_$jsYaml_22.compose=deprecated("compose"),_$jsYaml_22.addConstructor=deprecated("addConstructor");var _$yaml_21=_$jsYaml_22,_$staticJsYaml_84={safeLoad:_$yaml_21.safeLoad,load:_$yaml_21.load,safeDump:_$yaml_21.safeDump,dump:_$yaml_21.dump},_$yaml_137={};Object.defineProperty(_$yaml_137,"__esModule",{value:!0}),_$yaml_137.default=void 0,_$yaml_137.dump=__dump_137,_$yaml_137.load=__load_137,_$yaml_137.safeDump=safeDump,_$yaml_137.safeLoad=safeLoad;var __obj_137,_staticJsYaml=(__obj_137=_$staticJsYaml_84)&&__obj_137.__esModule?__obj_137:{default:__obj_137};function retry(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];try{return e.apply(void 0,[t].concat(n))}catch(s){return e.apply(void 0,[__dump_137(e.apply(void 0,[t.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__")].concat(n))).replace(/__SubStoreJSYAMLString__/g,"")].concat(n))}}function safeLoad(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return retry.apply(void 0,[_staticJsYaml.default.safeLoad,JSON.parse(JSON.stringify(e))].concat(r))}function __load_137(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return retry.apply(void 0,[_staticJsYaml.default.load,JSON.parse(JSON.stringify(e))].concat(r))}function safeDump(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return _staticJsYaml.default.safeDump.apply(_staticJsYaml.default,[JSON.parse(JSON.stringify(e))].concat(r))}function __dump_137(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return _staticJsYaml.default.dump.apply(_staticJsYaml.default,[JSON.parse(JSON.stringify(e))].concat(r))}var ___default_137={safeLoad:safeLoad,load:__load_137,safeDump:safeDump,dump:__dump_137};_$yaml_137.default=___default_137;var _$md5_139={};Object.defineProperty(_$md5_139,"__esModule",{value:!0}),_$md5_139.any_hmac_md5=function(e,t,r){return rstr2any(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)),r)},_$md5_139.any_md5=function(e,t){return rstr2any(rstr_md5(str2rstr_utf8(e)),t)},_$md5_139.b64_hmac_md5=function(e,t){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))},_$md5_139.b64_md5=function(e){return rstr2b64(rstr_md5(str2rstr_utf8(e)))},_$md5_139.hex_hmac_md5=function(e,t){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))},_$md5_139.hex_md5=hex_md5;var hexcase=0,b64pad="";function hex_md5(e){return rstr2hex(rstr_md5(str2rstr_utf8(e)))}function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}function rstr_hmac_md5(e,t){var r=rstr2binl(e);r.length>16&&(r=binl_md5(r,8*e.length));for(var n=Array(16),o=Array(16),s=0;s<16;s++)n[s]=909522486^r[s],o[s]=1549556828^r[s];var i=binl_md5(n.concat(rstr2binl(t)),512+8*t.length);return binl2rstr(binl_md5(o.concat(i),640))}function rstr2hex(e){for(var t,r=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<e.length;o++)t=e.charCodeAt(o),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}function rstr2b64(e){for(var t="",r=e.length,n=0;n<r;n+=3)for(var o=e.charCodeAt(n)<<16|(n+1<r?e.charCodeAt(n+1)<<8:0)|(n+2<r?e.charCodeAt(n+2):0),s=0;s<4;s++)8*n+6*s>8*e.length?t+=b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-s)&63);return t}function rstr2any(e,t){var r,n,o,s,i,a=t.length,u=Array(Math.ceil(e.length/2));for(r=0;r<u.length;r++)u[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),l=Array(c);for(n=0;n<c;n++){for(i=Array(),s=0,r=0;r<u.length;r++)s=(s<<16)+u[r],s-=(o=Math.floor(s/a))*a,(i.length>0||o>0)&&(i[i.length]=o);l[n]=s,u=i}var p="";for(r=l.length-1;r>=0;r--)p+=t.charAt(l[r]);return p}function str2rstr_utf8(e){for(var t,r,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),r=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),o++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function rstr2binl(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function binl2rstr(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function binl_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,o=-1732584194,s=271733878,i=0;i<e.length;i+=16){var a=r,u=n,c=o,l=s;r=md5_ff(r,n,o,s,e[i+0],7,-680876936),s=md5_ff(s,r,n,o,e[i+1],12,-389564586),o=md5_ff(o,s,r,n,e[i+2],17,606105819),n=md5_ff(n,o,s,r,e[i+3],22,-1044525330),r=md5_ff(r,n,o,s,e[i+4],7,-176418897),s=md5_ff(s,r,n,o,e[i+5],12,1200080426),o=md5_ff(o,s,r,n,e[i+6],17,-1473231341),n=md5_ff(n,o,s,r,e[i+7],22,-45705983),r=md5_ff(r,n,o,s,e[i+8],7,1770035416),s=md5_ff(s,r,n,o,e[i+9],12,-1958414417),o=md5_ff(o,s,r,n,e[i+10],17,-42063),n=md5_ff(n,o,s,r,e[i+11],22,-1990404162),r=md5_ff(r,n,o,s,e[i+12],7,1804603682),s=md5_ff(s,r,n,o,e[i+13],12,-40341101),o=md5_ff(o,s,r,n,e[i+14],17,-1502002290),r=md5_gg(r,n=md5_ff(n,o,s,r,e[i+15],22,1236535329),o,s,e[i+1],5,-165796510),s=md5_gg(s,r,n,o,e[i+6],9,-1069501632),o=md5_gg(o,s,r,n,e[i+11],14,643717713),n=md5_gg(n,o,s,r,e[i+0],20,-373897302),r=md5_gg(r,n,o,s,e[i+5],5,-701558691),s=md5_gg(s,r,n,o,e[i+10],9,38016083),o=md5_gg(o,s,r,n,e[i+15],14,-660478335),n=md5_gg(n,o,s,r,e[i+4],20,-405537848),r=md5_gg(r,n,o,s,e[i+9],5,568446438),s=md5_gg(s,r,n,o,e[i+14],9,-1019803690),o=md5_gg(o,s,r,n,e[i+3],14,-187363961),n=md5_gg(n,o,s,r,e[i+8],20,1163531501),r=md5_gg(r,n,o,s,e[i+13],5,-1444681467),s=md5_gg(s,r,n,o,e[i+2],9,-51403784),o=md5_gg(o,s,r,n,e[i+7],14,1735328473),r=md5_hh(r,n=md5_gg(n,o,s,r,e[i+12],20,-1926607734),o,s,e[i+5],4,-378558),s=md5_hh(s,r,n,o,e[i+8],11,-2022574463),o=md5_hh(o,s,r,n,e[i+11],16,1839030562),n=md5_hh(n,o,s,r,e[i+14],23,-35309556),r=md5_hh(r,n,o,s,e[i+1],4,-1530992060),s=md5_hh(s,r,n,o,e[i+4],11,1272893353),o=md5_hh(o,s,r,n,e[i+7],16,-155497632),n=md5_hh(n,o,s,r,e[i+10],23,-1094730640),r=md5_hh(r,n,o,s,e[i+13],4,681279174),s=md5_hh(s,r,n,o,e[i+0],11,-358537222),o=md5_hh(o,s,r,n,e[i+3],16,-722521979),n=md5_hh(n,o,s,r,e[i+6],23,76029189),r=md5_hh(r,n,o,s,e[i+9],4,-640364487),s=md5_hh(s,r,n,o,e[i+12],11,-421815835),o=md5_hh(o,s,r,n,e[i+15],16,530742520),r=md5_ii(r,n=md5_hh(n,o,s,r,e[i+2],23,-995338651),o,s,e[i+0],6,-198630844),s=md5_ii(s,r,n,o,e[i+7],10,1126891415),o=md5_ii(o,s,r,n,e[i+14],15,-1416354905),n=md5_ii(n,o,s,r,e[i+5],21,-57434055),r=md5_ii(r,n,o,s,e[i+12],6,1700485571),s=md5_ii(s,r,n,o,e[i+3],10,-1894986606),o=md5_ii(o,s,r,n,e[i+10],15,-1051523),n=md5_ii(n,o,s,r,e[i+1],21,-2054922799),r=md5_ii(r,n,o,s,e[i+8],6,1873313359),s=md5_ii(s,r,n,o,e[i+15],10,-30611744),o=md5_ii(o,s,r,n,e[i+6],15,-1560198380),n=md5_ii(n,o,s,r,e[i+13],21,1309151649),r=md5_ii(r,n,o,s,e[i+4],6,-145523070),s=md5_ii(s,r,n,o,e[i+11],10,-1120210379),o=md5_ii(o,s,r,n,e[i+2],15,718787259),n=md5_ii(n,o,s,r,e[i+9],21,-343485551),r=safe_add(r,a),n=safe_add(n,u),o=safe_add(o,c),s=safe_add(s,l)}return Array(r,n,o,s)}function md5_cmn(e,t,r,n,o,s){return safe_add((i=safe_add(safe_add(t,e),safe_add(n,s)))<<(a=o)|i>>>32-a,r);var i,a}function md5_ff(e,t,r,n,o,s,i){return md5_cmn(t&r|~t&n,e,t,o,s,i)}function md5_gg(e,t,r,n,o,s,i){return md5_cmn(t&n|r&~n,e,t,o,s,i)}function md5_hh(e,t,r,n,o,s,i){return md5_cmn(t^r^n,e,t,o,s,i)}function md5_ii(e,t,r,n,o,s,i){return md5_cmn(r^(t|~n),e,t,o,s,i)}function safe_add(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}var _$common_12={};Object.defineProperty(_$common_12,"__esModule",{value:!0}),_$common_12.isCorrect=_$common_12.isInSubnet=void 0,_$common_12.isInSubnet=function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()},_$common_12.isCorrect=function(e){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}};var _$constants_16={};Object.defineProperty(_$constants_16,"__esModule",{value:!0}),_$constants_16.RE_SUBNET_STRING=_$constants_16.RE_ADDRESS=_$constants_16.GROUPS=_$constants_16.BITS=void 0,_$constants_16.BITS=32,_$constants_16.GROUPS=4,_$constants_16.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,_$constants_16.RE_SUBNET_STRING=/\/\d{1,2}$/;var _$addressError_11={};Object.defineProperty(_$addressError_11,"__esModule",{value:!0}),_$addressError_11.AddressError=void 0,_$addressError_11.AddressError=class extends Error{constructor(e,t){super(e),this.name="AddressError",null!==t&&(this.parseMessage=t)}};var _$jsbn_51={};(function(){var e;function t(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new t(null)}var n="undefined"!=typeof navigator;n&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=function(e,t,r,n,o,s){for(var i=32767&t,a=t>>15;--s>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*i;o=((u=i*u+((32767&l)<<15)+r[n]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),r[n++]=1073741823&u}return o},e=30):n&&"Netscape"!=navigator.appName?(t.prototype.am=function(e,t,r,n,o,s){for(;--s>=0;){var i=t*this[e++]+r[n]+o;o=Math.floor(i/67108864),r[n++]=67108863&i}return o},e=26):(t.prototype.am=function(e,t,r,n,o,s){for(var i=16383&t,a=t>>14;--s>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*i;o=((u=i*u+((16383&l)<<14)+r[n]+o)>>28)+(l>>14)+a*c,r[n++]=268435455&u}return o},e=28),t.prototype.DB=e,t.prototype.DM=(1<<e)-1,t.prototype.DV=1<<e,t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-e,t.prototype.F2=2*e-52;var o,s,i=new Array;for(o="0".charCodeAt(0),s=0;s<=9;++s)i[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)i[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)i[o++]=s;function a(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function u(e,t){var r=i[e.charCodeAt(t)];return null==r?-1:r}function c(e){var t=r();return t.fromInt(e),t}function l(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function p(e){this.m=e}function f(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function h(e,t){return e&t}function d(e,t){return e|t}function _(e,t){return e^t}function g(e,t){return e&~t}function y(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function v(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function m(){}function b(e){return e}function w(e){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}p.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},p.prototype.revert=function(e){return e},p.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},p.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},f.prototype.convert=function(e){var n=r();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(t.ZERO)>0&&this.m.subTo(n,n),n},f.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},f.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},f.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},t.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},t.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},t.prototype.fromString=function(e,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(e,r);n=2}this.t=0,this.s=0;for(var o=e.length,s=!1,i=0;--o>=0;){var a=8==n?255&e[o]:u(e,o);a<0?"-"==e.charAt(o)&&(s=!0):(s=!1,0==i?this[this.t++]=a:i+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-i)-1)<<i,this[this.t++]=a>>this.DB-i):this[this.t-1]|=a<<i,(i+=n)>=this.DB&&(i-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},t.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},t.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},t.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,o=this.DB-n,s=(1<<o)-1,i=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+i+1]=this[r]>>o|a,a=(this[r]&s)<<n;for(r=i-1;r>=0;--r)t[r]=0;t[i]=a,t.t=this.t+i+1,t.s=this.s,t.clamp()},t.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,o=this.DB-n,s=(1<<n)-1;t[0]=this[r]>>n;for(var i=r+1;i<this.t;++i)t[i-r-1]|=(this[i]&s)<<o,t[i-r]=this[i]>>n;n>0&&(t[this.t-r-1]|=(this.s&s)<<o),t.t=this.t-r,t.clamp()}},t.prototype.subTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},t.prototype.multiplyTo=function(e,r){var n=this.abs(),o=e.abs(),s=n.t;for(r.t=s+o.t;--s>=0;)r[s]=0;for(s=0;s<o.t;++s)r[s+n.t]=n.am(0,o[s],r,s,0,n.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)},t.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},t.prototype.divRemTo=function(e,n,o){var s=e.abs();if(!(s.t<=0)){var i=this.abs();if(i.t<s.t)return null!=n&&n.fromInt(0),void(null!=o&&this.copyTo(o));null==o&&(o=r());var a=r(),u=this.s,c=e.s,p=this.DB-l(s[s.t-1]);p>0?(s.lShiftTo(p,a),i.lShiftTo(p,o)):(s.copyTo(a),i.copyTo(o));var f=a.t,h=a[f-1];if(0!=h){var d=h*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),_=this.FV/d,g=(1<<this.F1)/d,y=1<<this.F2,v=o.t,m=v-f,b=null==n?r():n;for(a.dlShiftTo(m,b),o.compareTo(b)>=0&&(o[o.t++]=1,o.subTo(b,o)),t.ONE.dlShiftTo(f,b),b.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--m>=0;){var w=o[--v]==h?this.DM:Math.floor(o[v]*_+(o[v-1]+y)*g);if((o[v]+=a.am(0,w,o,m,0,f))<w)for(a.dlShiftTo(m,b),o.subTo(b,o);o[v]<--w;)o.subTo(b,o)}null!=n&&(o.drShiftTo(f,n),u!=c&&t.ZERO.subTo(n,n)),o.t=f,o.clamp(),p>0&&o.rShiftTo(p,o),u<0&&t.ZERO.subTo(o,o)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,n){if(e>4294967295||e<1)return t.ONE;var o=r(),s=r(),i=n.convert(this),a=l(e)-1;for(i.copyTo(o);--a>=0;)if(n.sqrTo(o,s),(e&1<<a)>0)n.mulTo(s,i,o);else{var u=o;o=s,s=u}return n.revert(o)},t.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,o=!1,s="",i=this.t,u=this.DB-i*this.DB%t;if(i-- >0)for(u<this.DB&&(r=this[i]>>u)>0&&(o=!0,s=a(r));i>=0;)u<t?(r=(this[i]&(1<<u)-1)<<t-u,r|=this[--i]>>(u+=this.DB-t)):(r=this[i]>>(u-=t)&n,u<=0&&(u+=this.DB,--i)),r>0&&(o=!0),o&&(s+=a(r));return o?s:"0"},t.prototype.negate=function(){var e=r();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=r();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n},t.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new p(t):new f(t),this.exp(e,r)},t.ZERO=c(0),t.ONE=c(1),m.prototype.convert=b,m.prototype.revert=b,m.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},m.prototype.sqrTo=function(e,t){e.squareTo(t)},w.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=r();return e.copyTo(t),this.reduce(t),t},w.prototype.revert=function(e){return e},w.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},w.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},w.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var E,x,A,S=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],C=(1<<26)/S[S.length-1];function P(){var e;e=(new Date).getTime(),x[A++]^=255&e,x[A++]^=e>>8&255,x[A++]^=e>>16&255,x[A++]^=e>>24&255,A>=T&&(A-=T)}if(t.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},t.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),o=c(n),s=r(),i=r(),a="";for(this.divRemTo(o,s,i);s.signum()>0;)a=(n+i.intValue()).toString(e).substr(1)+a,s.divRemTo(o,s,i);return i.intValue().toString(e)+a},t.prototype.fromRadix=function(e,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),o=Math.pow(r,n),s=!1,i=0,a=0,c=0;c<e.length;++c){var l=u(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(s=!0):(a=r*a+l,++i>=n&&(this.dMultiply(o),this.dAddOffset(a,0),i=0,a=0))}i>0&&(this.dMultiply(Math.pow(r,i)),this.dAddOffset(a,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,r,n){if("number"==typeof r)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),d,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var o=new Array,s=7&e;o.length=1+(e>>3),r.nextBytes(o),s>0?o[0]&=(1<<s)-1:o[0]=0,this.fromString(o,256)}},t.prototype.bitwiseTo=function(e,t,r){var n,o,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(o=e.s&this.DM,n=s;n<this.t;++n)r[n]=t(this[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=s;n<e.t;++n)r[n]=t(o,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},t.prototype.changeBit=function(e,r){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,r,n),n},t.prototype.addTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},t.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},t.prototype.multiplyLowerTo=function(e,t,r){var n,o=Math.min(this.t+e.t,t);for(r.s=0,r.t=o;o>0;)r[--o]=0;for(n=r.t-this.t;o<n;++o)r[o+this.t]=this.am(0,e[o],r,o,0,this.t);for(n=Math.min(e.t,t);o<n;++o)this.am(0,e[o],r,o,0,t-o);r.clamp()},t.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},t.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},t.prototype.millerRabin=function(e){var n=this.subtract(t.ONE),o=n.getLowestSetBit();if(o<=0)return!1;var s=n.shiftRight(o);(e=e+1>>1)>S.length&&(e=S.length);for(var i=r(),a=0;a<e;++a){i.fromInt(S[Math.floor(Math.random()*S.length)]);var u=i.modPow(s,this);if(0!=u.compareTo(t.ONE)&&0!=u.compareTo(n)){for(var c=1;c++<o&&0!=u.compareTo(n);)if(0==(u=u.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=u.compareTo(n))return!1}}return!0},t.prototype.clone=function(){var e=r();return this.copyTo(e),e},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,o=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[o++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(t[o++]=r);return t},t.prototype.equals=function(e){return 0==this.compareTo(e)},t.prototype.min=function(e){return this.compareTo(e)<0?this:e},t.prototype.max=function(e){return this.compareTo(e)>0?this:e},t.prototype.and=function(e){var t=r();return this.bitwiseTo(e,h,t),t},t.prototype.or=function(e){var t=r();return this.bitwiseTo(e,d,t),t},t.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,_,t),t},t.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,g,t),t},t.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},t.prototype.shiftLeft=function(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},t.prototype.shiftRight=function(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},t.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+y(this[e]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=v(this[r]^t);return e},t.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},t.prototype.setBit=function(e){return this.changeBit(e,d)},t.prototype.clearBit=function(e){return this.changeBit(e,g)},t.prototype.flipBit=function(e){return this.changeBit(e,_)},t.prototype.add=function(e){var t=r();return this.addTo(e,t),t},t.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},t.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},t.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},t.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},t.prototype.divideAndRemainder=function(e){var t=r(),n=r();return this.divRemTo(e,t,n),new Array(t,n)},t.prototype.modPow=function(e,t){var n,o,s=e.bitLength(),i=c(1);if(s<=0)return i;n=s<18?1:s<48?3:s<144?4:s<768?5:6,o=s<8?new p(t):t.isEven()?new w(t):new f(t);var a=new Array,u=3,h=n-1,d=(1<<n)-1;if(a[1]=o.convert(this),n>1){var _=r();for(o.sqrTo(a[1],_);u<=d;)a[u]=r(),o.mulTo(_,a[u-2],a[u]),u+=2}var g,y,v=e.t-1,m=!0,b=r();for(s=l(e[v])-1;v>=0;){for(s>=h?g=e[v]>>s-h&d:(g=(e[v]&(1<<s+1)-1)<<h-s,v>0&&(g|=e[v-1]>>this.DB+s-h)),u=n;0==(1&g);)g>>=1,--u;if((s-=u)<0&&(s+=this.DB,--v),m)a[g].copyTo(i),m=!1;else{for(;u>1;)o.sqrTo(i,b),o.sqrTo(b,i),u-=2;u>0?o.sqrTo(i,b):(y=i,i=b,b=y),o.mulTo(b,a[g],i)}for(;v>=0&&0==(e[v]&1<<s);)o.sqrTo(i,b),y=i,i=b,b=y,--s<0&&(s=this.DB-1,--v)}return o.revert(i)},t.prototype.modInverse=function(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;for(var n=e.clone(),o=this.clone(),s=c(1),i=c(0),a=c(0),u=c(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),r?(s.isEven()&&i.isEven()||(s.addTo(this,s),i.subTo(e,i)),s.rShiftTo(1,s)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;o.isEven();)o.rShiftTo(1,o),r?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(e,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);n.compareTo(o)>=0?(n.subTo(o,n),r&&s.subTo(a,s),i.subTo(u,i)):(o.subTo(n,o),r&&a.subTo(s,a),u.subTo(i,u))}return 0!=o.compareTo(t.ONE)?t.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},t.prototype.pow=function(e){return this.exp(e,new m)},t.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var o=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(o<s&&(s=o),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},t.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=S[S.length-1]){for(t=0;t<S.length;++t)if(r[0]==S[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<S.length;){for(var n=S[t],o=t+1;o<S.length&&n<C;)n*=S[o++];for(n=r.modInt(n);t<o;)if(n%S[t++]==0)return!1}return r.millerRabin(e)},t.prototype.square=function(){var e=r();return this.squareTo(e),e},t.prototype.Barrett=w,null==x){var I;if(x=new Array,A=0,"undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var F=new Uint8Array(32);for(window.crypto.getRandomValues(F),I=0;I<32;++I)x[A++]=F[I]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var k=window.crypto.random(32);for(I=0;I<k.length;++I)x[A++]=255&k.charCodeAt(I)}for(;A<T;)I=Math.floor(65536*Math.random()),x[A++]=I>>>8,x[A++]=255&I;A=0,P()}function R(){if(null==E){for(P(),(E=new O).init(x),A=0;A<x.length;++A)x[A]=0;A=0}return E.next()}function $(){}function O(){this.i=0,this.j=0,this.S=new Array}$.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=R()},O.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},O.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var T=256;void 0!==_$jsbn_51?_$jsbn_51=_$jsbn_51={default:t,BigInteger:t,SecureRandom:$}:this.jsbn={BigInteger:t,SecureRandom:$}}).call(this);var _$sprintf_83={};!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(r){return function(r,n){var o,s,i,a,u,c,l,p,f,h=1,d=r.length,_="";for(s=0;s<d;s++)if("string"==typeof r[s])_+=r[s];else if("object"==typeof r[s]){if((a=r[s]).keys)for(o=n[h],i=0;i<a.keys.length;i++){if(null==o)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[i],a.keys[i-1]));o=o[a.keys[i]]}else o=a.param_no?n[a.param_no]:n[h++];if(e.not_type.test(a.type)&&e.not_primitive.test(a.type)&&o instanceof Function&&(o=o()),e.numeric_arg.test(a.type)&&"number"!=typeof o&&isNaN(o))throw new TypeError(t("[sprintf] expecting number but found %T",o));switch(e.number.test(a.type)&&(p=o>=0),a.type){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,a.width?parseInt(a.width):0);break;case"e":o=a.precision?parseFloat(o).toExponential(a.precision):parseFloat(o).toExponential();break;case"f":o=a.precision?parseFloat(o).toFixed(a.precision):parseFloat(o);break;case"g":o=a.precision?String(Number(o.toPrecision(a.precision))):parseFloat(o);break;case"o":o=(parseInt(o,10)>>>0).toString(8);break;case"s":o=String(o),o=a.precision?o.substring(0,a.precision):o;break;case"t":o=String(!!o),o=a.precision?o.substring(0,a.precision):o;break;case"T":o=Object.prototype.toString.call(o).slice(8,-1).toLowerCase(),o=a.precision?o.substring(0,a.precision):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf(),o=a.precision?o.substring(0,a.precision):o;break;case"x":o=(parseInt(o,10)>>>0).toString(16);break;case"X":o=(parseInt(o,10)>>>0).toString(16).toUpperCase()}e.json.test(a.type)?_+=o:(!e.number.test(a.type)||p&&!a.sign?f="":(f=p?"+":"-",o=o.toString().replace(e.sign,"")),c=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(f+o).length,u=a.width&&l>0?c.repeat(l):"",_+=a.align?f+o+u:"0"===c?f+u+o:u+f+o)}return _}(function(t){if(n[t])return n[t];for(var r,o=t,s=[],i=0;o;){if(null!==(r=e.text.exec(o)))s.push(r[0]);else if(null!==(r=e.modulo.exec(o)))s.push("%");else{if(null===(r=e.placeholder.exec(o)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){i|=1;var a=[],u=r[2],c=[];if(null===(c=e.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(c[1]);""!==(u=u.substring(c[0].length));)if(null!==(c=e.key_access.exec(u)))a.push(c[1]);else{if(null===(c=e.index_access.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(c[1])}r[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}o=o.substring(r[0].length)}return n[t]=s}(r),arguments)}function r(e,r){return t.apply(null,[e].concat(r||[]))}var n=Object.create(null);void 0!==_$sprintf_83&&(_$sprintf_83.sprintf=t,_$sprintf_83.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=r,"function"==typeof define&&define.amd&&define((function(){return{sprintf:t,vsprintf:r}})))}();var _$ipv4_14={},__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(_$ipv4_14,"__esModule",{value:!0}),_$ipv4_14.Address4=void 0;const __common_14=__importStar(_$common_12),constants=__importStar(_$constants_16);class Address4{constructor(e){this.groups=constants.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=__common_14.isCorrect(constants.BITS),this.isInSubnet=__common_14.isInSubnet,this.address=e;const t=constants.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>constants.BITS)throw new _$addressError_11.AddressError("Invalid subnet mask.");e=e.replace(constants.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new Address4(e),!0}catch(t){return!1}}parse(e){const t=e.split(".");if(!e.match(constants.RE_ADDRESS))throw new _$addressError_11.AddressError("Invalid IPv4 address.");return t}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){const t=e.replace(/:/g,"").padStart(8,"0"),r=[];let n;for(n=0;n<8;n+=2){const e=t.slice(n,n+2);r.push(parseInt(e,16))}return new Address4(r.join("."))}static fromInteger(e){return Address4.fromHex(e.toString(16))}static fromArpa(e){const t=e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new Address4(t)}toHex(){return this.parsedAddress.map(e=>(0,_$sprintf_83.sprintf)("%02x",parseInt(e,10))).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){const e=[];let t;for(t=0;t<constants.GROUPS;t+=2){const r=(0,_$sprintf_83.sprintf)("%02x%02x",parseInt(this.parsedAddress[t],10),parseInt(this.parsedAddress[t+1],10));e.push((0,_$sprintf_83.sprintf)("%x",parseInt(r,16)))}return e.join(":")}bigInteger(){return new _$jsbn_51.BigInteger(this.parsedAddress.map(e=>(0,_$sprintf_83.sprintf)("%02x",parseInt(e,10))).join(""),16)}_startAddress(){return new _$jsbn_51.BigInteger(this.mask()+"0".repeat(constants.BITS-this.subnetMask),2)}startAddress(){return Address4.fromBigInteger(this._startAddress())}startAddressExclusive(){const e=new _$jsbn_51.BigInteger("1");return Address4.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new _$jsbn_51.BigInteger(this.mask()+"1".repeat(constants.BITS-this.subnetMask),2)}endAddress(){return Address4.fromBigInteger(this._endAddress())}endAddressExclusive(){const e=new _$jsbn_51.BigInteger("1");return Address4.fromBigInteger(this._endAddress().subtract(e))}static fromBigInteger(e){return Address4.fromInteger(parseInt(e.toString(),10))}mask(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}reverseForm(e){e||(e={});const t=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?t:(0,_$sprintf_83.sprintf)("%s.in-addr.arpa.",t)}isMulticast(){return this.isInSubnet(new Address4("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(constants.BITS,"0")}groupForV6(){const e=this.parsedAddress;return this.address.replace(constants.RE_ADDRESS,(0,_$sprintf_83.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))}}_$ipv4_14.Address4=Address4;var _$constants_17={};Object.defineProperty(_$constants_17,"__esModule",{value:!0}),_$constants_17.RE_URL_WITH_PORT=_$constants_17.RE_URL=_$constants_17.RE_ZONE_STRING=_$constants_17.RE_SUBNET_STRING=_$constants_17.RE_BAD_ADDRESS=_$constants_17.RE_BAD_CHARACTERS=_$constants_17.TYPES=_$constants_17.SCOPES=_$constants_17.GROUPS=_$constants_17.BITS=void 0,_$constants_17.BITS=128,_$constants_17.GROUPS=8,_$constants_17.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},_$constants_17.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},_$constants_17.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,_$constants_17.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,_$constants_17.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,_$constants_17.RE_ZONE_STRING=/%.*$/,_$constants_17.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),_$constants_17.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);var _$helpers_18={};function spanAllZeroes(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}function spanLeadingZeroesSimple(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}Object.defineProperty(_$helpers_18,"__esModule",{value:!0}),_$helpers_18.simpleGroup=_$helpers_18.spanLeadingZeroes=_$helpers_18.spanAll=_$helpers_18.spanAllZeroes=void 0,_$helpers_18.spanAllZeroes=spanAllZeroes,_$helpers_18.spanAll=function(e,t=0){return e.split("").map((e,r)=>(0,_$sprintf_83.sprintf)('<span class="digit value-%s position-%d">%s</span>',e,r+t,spanAllZeroes(e))).join("")},_$helpers_18.spanLeadingZeroes=function(e){return e.split(":").map(e=>spanLeadingZeroesSimple(e)).join(":")},_$helpers_18.simpleGroup=function(e,t=0){return e.split(":").map((e,r)=>/group-v4/.test(e)?e:(0,_$sprintf_83.sprintf)('<span class="hover-group group-%d">%s</span>',r+t,spanLeadingZeroesSimple(e)))};var _$regularExpressions_19={},____createBinding_19=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),____setModuleDefault_19=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),____importStar_19=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&____createBinding_19(t,e,r);return ____setModuleDefault_19(t,e),t};Object.defineProperty(_$regularExpressions_19,"__esModule",{value:!0}),_$regularExpressions_19.possibleElisions=_$regularExpressions_19.simpleRegularExpression=_$regularExpressions_19.ADDRESS_BOUNDARY=_$regularExpressions_19.padGroup=_$regularExpressions_19.groupPossibilities=void 0;const v6=____importStar_19(_$constants_17);function groupPossibilities(e){return(0,_$sprintf_83.sprintf)("(%s)",e.join("|"))}function padGroup(e){return e.length<4?(0,_$sprintf_83.sprintf)("0{0,%d}%s",4-e.length,e):e}_$regularExpressions_19.groupPossibilities=groupPossibilities,_$regularExpressions_19.padGroup=padGroup,_$regularExpressions_19.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]",_$regularExpressions_19.simpleRegularExpression=function(e){const t=[];e.forEach((e,r)=>{0===parseInt(e,16)&&t.push(r)});const r=t.map(t=>e.map((e,r)=>{if(r===t){const t=0===r||r===v6.GROUPS-1?":":"";return groupPossibilities([padGroup(e),t])}return padGroup(e)}).join(":"));return r.push(e.map(padGroup).join(":")),groupPossibilities(r)},_$regularExpressions_19.possibleElisions=function(e,t,r){const n=t?"":":",o=r?"":":",s=[];t||r||s.push("::"),t&&r&&s.push(""),(r&&!t||!r&&t)&&s.push(":"),s.push((0,_$sprintf_83.sprintf)("%s(:0{1,4}){1,%d}",n,e-1)),s.push((0,_$sprintf_83.sprintf)("(0{1,4}:){1,%d}%s",e-1,o)),s.push((0,_$sprintf_83.sprintf)("(0{1,4}:){%d}0{1,4}",e-1));for(let i=1;i<e-1;i++)for(let t=1;t<e-i;t++)s.push((0,_$sprintf_83.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",t,e-t-i-1));return groupPossibilities(s)};var _$ipv6_15={},____createBinding_15=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),____setModuleDefault_15=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),____importStar_15=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&____createBinding_15(t,e,r);return ____setModuleDefault_15(t,e),t};Object.defineProperty(_$ipv6_15,"__esModule",{value:!0}),_$ipv6_15.Address6=void 0;const __common_15=____importStar_15(_$common_12),constants4=____importStar_15(_$constants_16),constants6=____importStar_15(_$constants_17),helpers=____importStar_15(_$helpers_18);function spanLeadingZeroes4(e){return(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function paddedHex(e){return(0,_$sprintf_83.sprintf)("%04x",parseInt(e,16))}function unsignByte(e){return 255&e}class Address6{constructor(e,t){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=__common_15.isInSubnet,this.isCorrect=__common_15.isCorrect(constants6.BITS),this.groups=void 0===t?constants6.GROUPS:t,this.address=e;const r=constants6.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>constants6.BITS)throw new _$addressError_11.AddressError("Invalid subnet mask.");e=e.replace(constants6.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new _$addressError_11.AddressError("Invalid subnet mask.");const n=constants6.RE_ZONE_STRING.exec(e);n&&(this.zone=n[0],e=e.replace(constants6.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new Address6(e),!0}catch(t){return!1}}static fromBigInteger(e){const t=e.toString(16).padStart(32,"0"),r=[];let n;for(n=0;n<constants6.GROUPS;n++)r.push(t.slice(4*n,4*(n+1)));return new Address6(r.join(":"))}static fromURL(e){let t,r,n=null;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(r=constants6.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};t=r[1],n=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(r=constants6.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};t=r[1]}else t=e;return n?((n=parseInt(n,10))<0||n>65536)&&(n=null):n=null,{address:new Address6(t),port:n}}static fromAddress4(e){const t=new _$ipv4_14.Address4(e),r=constants6.BITS-(constants4.BITS-t.subnetMask);return new Address6(`::ffff:${t.correctForm()}/${r}`)}static fromArpa(e){let t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)throw new _$addressError_11.AddressError("Invalid 'ip6.arpa' form.");const r=t.split(".").reverse();for(let n=7;n>0;n--){const e=4*n;r.splice(e,0,":")}return t=r.join(""),new Address6(t)}microsoftTranscription(){return(0,_$sprintf_83.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){const t=constants6.BITS-this.subnetMask-Math.abs(e-constants6.BITS);return t<0?"0":function(e){const t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}(new _$jsbn_51.BigInteger("2",10).pow(t).toString(10))}_startAddress(){return new _$jsbn_51.BigInteger(this.mask()+"0".repeat(constants6.BITS-this.subnetMask),2)}startAddress(){return Address6.fromBigInteger(this._startAddress())}startAddressExclusive(){const e=new _$jsbn_51.BigInteger("1");return Address6.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new _$jsbn_51.BigInteger(this.mask()+"1".repeat(constants6.BITS-this.subnetMask),2)}endAddress(){return Address6.fromBigInteger(this._endAddress())}endAddressExclusive(){const e=new _$jsbn_51.BigInteger("1");return Address6.fromBigInteger(this._endAddress().subtract(e))}getScope(){let e=constants6.SCOPES[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e||"Unknown"}getType(){for(const e of Object.keys(constants6.TYPES))if(this.isInSubnet(new Address6(e)))return constants6.TYPES[e];return"Global unicast"}getBits(e,t){return new _$jsbn_51.BigInteger(this.getBitsBase2(e,t),2)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}getBitsBase16(e,t){const r=t-e;if(r%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,t).toString(16).padStart(r/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,constants6.BITS)}reverseForm(e){e||(e={});const t=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?r:(0,_$sprintf_83.sprintf)("%s.ip6.arpa.",r):e.omitSuffix?"":"ip6.arpa."}correctForm(){let e,t=[],r=0;const n=[];for(e=0;e<this.parsedAddress.length;e++){const t=parseInt(this.parsedAddress[e],16);0===t&&r++,0!==t&&r>0&&(r>1&&n.push([e-r,e-1]),r=0)}r>1&&n.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);const o=n.map(e=>e[1]-e[0]+1);if(n.length>0){const e=o.indexOf(Math.max(...o));t=function(e,t){const r=[],n=[];let o;for(o=0;o<e.length;o++)o<t[0]?r.push(e[o]):o>t[1]&&n.push(e[o]);return r.concat(["compact"]).concat(n)}(this.parsedAddress,n[e])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));let s=t.join(":");return(s=(s=s.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")}binaryZeroPad(){return this.bigInteger().toString(2).padStart(constants6.BITS,"0")}parse4in6(e){const t=e.split(":"),r=t.slice(-1)[0].match(constants4.RE_ADDRESS);if(r){this.parsedAddress4=r[0],this.address4=new _$ipv4_14.Address4(this.parsedAddress4);for(let t=0;t<this.address4.groups;t++)if(/^0[0-9]+/.test(this.address4.parsedAddress[t]))throw new _$addressError_11.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(constants4.RE_ADDRESS,this.address4.parsedAddress.map(spanLeadingZeroes4).join(".")));this.v4=!0,t[t.length-1]=this.address4.toGroup6(),e=t.join(":")}return e}parse(e){const t=(e=this.parse4in6(e)).match(constants6.RE_BAD_CHARACTERS);if(t)throw new _$addressError_11.AddressError((0,_$sprintf_83.sprintf)("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),e.replace(constants6.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));const r=e.match(constants6.RE_BAD_ADDRESS);if(r)throw new _$addressError_11.AddressError((0,_$sprintf_83.sprintf)("Address failed regex: %s",r.join("")),e.replace(constants6.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let n=[];const o=e.split("::");if(2===o.length){let e=o[0].split(":"),t=o[1].split(":");1===e.length&&""===e[0]&&(e=[]),1===t.length&&""===t[0]&&(t=[]);const r=this.groups-(e.length+t.length);if(!r)throw new _$addressError_11.AddressError("Error parsing groups");this.elidedGroups=r,this.elisionBegin=e.length,this.elisionEnd=e.length+this.elidedGroups,n=n.concat(e);for(let o=0;o<r;o++)n.push("0");n=n.concat(t)}else{if(1!==o.length)throw new _$addressError_11.AddressError("Too many :: groups found");n=e.split(":"),this.elidedGroups=0}if((n=n.map(e=>(0,_$sprintf_83.sprintf)("%x",parseInt(e,16)))).length!==this.groups)throw new _$addressError_11.AddressError("Incorrect number of groups found");return n}canonicalForm(){return this.parsedAddress.map(paddedHex).join(":")}decimal(){return this.parsedAddress.map(e=>(0,_$sprintf_83.sprintf)("%05d",parseInt(e,16))).join(":")}bigInteger(){return new _$jsbn_51.BigInteger(this.parsedAddress.map(paddedHex).join(""),16)}to4(){const e=this.binaryZeroPad().split("");return _$ipv4_14.Address4.fromHex(new _$jsbn_51.BigInteger(e.slice(96,128).join(""),2).toString(16))}to4in6(){const e=this.to4(),t=new Address6(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let r="";return/:$/.test(t)||(r=":"),t+r+e.address}inspectTeredo(){const e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new _$jsbn_51.BigInteger("ffff",16)).toString(),r=_$ipv4_14.Address4.fromHex(this.getBitsBase16(32,64)),n=_$ipv4_14.Address4.fromHex(this.getBits(96,128).xor(new _$jsbn_51.BigInteger("ffffffff",16)).toString(16)),o=this.getBits(64,80),s=this.getBitsBase2(64,80),i=o.testBit(15),a=o.testBit(14),u=o.testBit(8),c=o.testBit(9),l=new _$jsbn_51.BigInteger(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:(0,_$sprintf_83.sprintf)("%s:%s",e.slice(0,4),e.slice(4,8)),server4:r.address,client4:n.address,flags:s,coneNat:i,microsoft:{reserved:a,universalLocal:c,groupIndividual:u,nonce:l},udpPort:t}}inspect6to4(){const e=this.getBitsBase16(0,16),t=_$ipv4_14.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,_$sprintf_83.sprintf)("%s",e.slice(0,4)),gateway:t.address}}to6to4(){if(!this.is4())return null;const e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new Address6(e)}toByteArray(){const e=this.bigInteger().toByteArray();return 17===e.length&&0===e[0]?e.slice(1):e}toUnsignedByteArray(){return this.toByteArray().map(unsignByte)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(unsignByte))}static fromUnsignedByteArray(e){const t=new _$jsbn_51.BigInteger("256",10);let r=new _$jsbn_51.BigInteger("0",10),n=new _$jsbn_51.BigInteger("1",10);for(let o=e.length-1;o>=0;o--)r=r.add(n.multiply(new _$jsbn_51.BigInteger(e[o].toString(10),10))),n=n.multiply(t);return Address6.fromBigInteger(r)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new Address6("2001::/32"))}is6to4(){return this.isInSubnet(new Address6("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(e){return e=void 0===e?"":(0,_$sprintf_83.sprintf)(":%s",e),(0,_$sprintf_83.sprintf)("http://[%s]%s/",this.correctForm(),e)}link(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);let t=this.correctForm;return e.v4&&(t=this.to4in6),e.className?(0,_$sprintf_83.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):(0,_$sprintf_83.sprintf)('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))}group(){if(0===this.elidedGroups)return helpers.simpleGroup(this.address).join(":");const e=[],[t,r]=this.address.split("::");t.length?e.push(...helpers.simpleGroup(t)):e.push("");const n=["hover-group"];for(let o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)n.push((0,_$sprintf_83.sprintf)("group-%d",o));return e.push((0,_$sprintf_83.sprintf)('<span class="%s"></span>',n.join(" "))),r.length?e.push(...helpers.simpleGroup(r,this.elisionEnd)):e.push(""),this.is4()&&(e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let t=[];const r=new Address6(this.correctForm());if(0===r.elidedGroups)t.push((0,_$regularExpressions_19.simpleRegularExpression)(r.parsedAddress));else if(r.elidedGroups===constants6.GROUPS)t.push((0,_$regularExpressions_19.possibleElisions)(constants6.GROUPS));else{const e=r.address.split("::");e[0].length&&t.push((0,_$regularExpressions_19.simpleRegularExpression)(e[0].split(":"))),t.push((0,_$regularExpressions_19.possibleElisions)(r.elidedGroups,0!==e[0].length,0!==e[1].length)),e[1].length&&t.push((0,_$regularExpressions_19.simpleRegularExpression)(e[1].split(":"))),t=[t.join(":")]}return e||(t=["(?=^|",_$regularExpressions_19.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...t,")(?=[^\\w\\:]|",_$regularExpressions_19.ADDRESS_BOUNDARY,"|$)"]),t.join("")}regularExpression(e=!1){return new RegExp(this.regularExpressionString(e),"i")}}_$ipv6_15.Address6=Address6;var _$ipAddress_13={},____createBinding_13=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),____setModuleDefault_13=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),____importStar_13=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&____createBinding_13(t,e,r);return ____setModuleDefault_13(t,e),t};Object.defineProperty(_$ipAddress_13,"__esModule",{value:!0}),_$ipAddress_13.v6=_$ipAddress_13.AddressError=_$ipAddress_13.Address6=_$ipAddress_13.Address4=void 0,Object.defineProperty(_$ipAddress_13,"Address4",{enumerable:!0,get:function(){return _$ipv4_14.Address4}}),Object.defineProperty(_$ipAddress_13,"Address6",{enumerable:!0,get:function(){return _$ipv6_15.Address6}}),Object.defineProperty(_$ipAddress_13,"AddressError",{enumerable:!0,get:function(){return _$addressError_11.AddressError}});const __helpers_13=____importStar_13(_$helpers_18);_$ipAddress_13.v6={helpers:__helpers_13};var _$utils_130={};function ___typeof_130(e){return(___typeof_130="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$utils_130,"__esModule",{value:!0}),_$utils_130.getIfNotBlank=function(e,t){return isNotBlank(e)?e:t},_$utils_130.getIfPresent=function(e,t){return isPresent(e)?e:t},_$utils_130.getPolicyDescriptor=function(e){return e?/^.+?\s*?=\s*?.+?\s*?,.+?/.test(e)?{"policy-descriptor":e}:{policy:e}:{}},_$utils_130.getRandomPort=function(e){var t,r=e.split(/,|\//),n=r[Math.floor(Math.random()*r.length)];if(n.includes("-")){var o=(2,function(e){if(Array.isArray(e))return e}(t=n.split("-").map(Number))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),2!==s.length);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_130(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_130(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(o[0],o[1])}return Number(n)},_$utils_130.ipAddress=void 0,_$utils_130.isIPv4=function(e){return IPV4_REGEX.test(e)},_$utils_130.isIPv6=function(e){return IPV6_REGEX.test(e)},_$utils_130.isNotBlank=isNotBlank,_$utils_130.isPresent=isPresent,_$utils_130.isValidPortNumber=function(e){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(e)},_$utils_130.numberToString=function(e){return Number.isSafeInteger(e)?String(e):BigInt(e).toString()};var ipAddress=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_130(e)&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(_$ipAddress_13);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}function ___arrayLikeToArray_130(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}_$utils_130.ipAddress=ipAddress;var IPV4_REGEX=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,IPV6_REGEX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function isNotBlank(e){return"string"==typeof e&&e.trim().length>0}function isPresent(e){return null!=e}var _$resourceCache_133={};Object.defineProperty(_$resourceCache_133,"__esModule",{value:!0}),_$resourceCache_133.default=void 0;var __obj_133,___app_133=(__obj_133=_$app_87)&&__obj_133.__esModule?__obj_133:{default:__obj_133};function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_133(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_133(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_133(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperties_133(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ___default_133=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expires=t,___app_133.default.read(_$constants_86.RESOURCE_CACHE_KEY)||___app_133.default.write("{}",_$constants_86.RESOURCE_CACHE_KEY);try{this.resourceCache=JSON.parse(___app_133.default.read(_$constants_86.RESOURCE_CACHE_KEY))}catch(n){var r;___app_133.default.error("\u89e3\u6790\u6301\u4e45\u5316\u7f13\u5b58\u4e2d\u7684 ".concat(_$constants_86.RESOURCE_CACHE_KEY," \u5931\u8d25, \u91cd\u7f6e\u4e3a {}, \u9519\u8bef: ").concat(null!==(r=null==n?void 0:n.message)&&void 0!==r?r:n)),this.resourceCache={},___app_133.default.write("{}",_$constants_86.RESOURCE_CACHE_KEY)}this._cleanup()}var t,r;return t=e,(r=[{key:"_cleanup",value:function(){var e=this,t=!1;Object.entries(this.resourceCache).forEach((function(r){var n=_slicedToArray(r,2),o=n[0],s=n[1];s.time||(delete e.resourceCache[o],___app_133.default.delete("#".concat(o)),t=!0),(new Date).getTime()-s.time>e.expires&&(delete e.resourceCache[o],t=!0)})),t&&this._persist()}},{key:"revokeAll",value:function(){this.resourceCache={},this._persist()}},{key:"_persist",value:function(){___app_133.default.write(JSON.stringify(this.resourceCache),_$constants_86.RESOURCE_CACHE_KEY)}},{key:"get",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].data:null}},{key:"set",value:function(e,t){this.resourceCache[e]={time:(new Date).getTime(),data:t},this._persist()}}])&&___defineProperties_133(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())(_$constants_86.CACHE_EXPIRATION_TIME_MS);_$resourceCache_133.default=___default_133;var _$headersResourceCache_129={};Object.defineProperty(_$headersResourceCache_129,"__esModule",{value:!0}),_$headersResourceCache_129.default=void 0;var __obj_129,___app_129=(__obj_129=_$app_87)&&__obj_129.__esModule?__obj_129:{default:__obj_129};function ___slicedToArray_129(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_129(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_129(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_129(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperties_129(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ___default_129=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expires=function(){___app_129.default.read(_$constants_86.CHR_EXPIRATION_TIME_KEY)||___app_129.default.write("6e4",_$constants_86.CHR_EXPIRATION_TIME_KEY);var e=6e4;if(___app_129.default.env.isLoon){var t={"1\u5206\u949f":6e4,"5\u5206\u949f":3e5,"10\u5206\u949f":6e5,"30\u5206\u949f":18e5,"1\u5c0f\u65f6":36e5,"2\u5c0f\u65f6":72e5,"3\u5c0f\u65f6":108e5,"6\u5c0f\u65f6":216e5,"12\u5c0f\u65f6":432e5,"24\u5c0f\u65f6":864e5,"48\u5c0f\u65f6":1728e5,"72\u5c0f\u65f6":2592e5,"\u53c2\u6570\u4f20\u5165":"readcachets"},r=___app_129.default.read("#\u54cd\u5e94\u5934\u7f13\u5b58\u6709\u6548\u671f");return r in t&&"readcachets"===(e=t[r])&&(e=r),e}return ___app_129.default.read(_$constants_86.CHR_EXPIRATION_TIME_KEY)}(),___app_129.default.read(_$constants_86.HEADERS_RESOURCE_CACHE_KEY)||___app_129.default.write("{}",_$constants_86.HEADERS_RESOURCE_CACHE_KEY);try{this.resourceCache=JSON.parse(___app_129.default.read(_$constants_86.HEADERS_RESOURCE_CACHE_KEY))}catch(r){var t;___app_129.default.error("\u89e3\u6790\u6301\u4e45\u5316\u7f13\u5b58\u4e2d\u7684 ".concat(_$constants_86.HEADERS_RESOURCE_CACHE_KEY," \u5931\u8d25, \u91cd\u7f6e\u4e3a {}, \u9519\u8bef: ").concat(null!==(t=null==r?void 0:r.message)&&void 0!==t?t:r)),this.resourceCache={},___app_129.default.write("{}",_$constants_86.HEADERS_RESOURCE_CACHE_KEY)}this._cleanup()}var t,r;return t=e,(r=[{key:"_cleanup",value:function(){var e=this,t=!1;Object.entries(this.resourceCache).forEach((function(r){var n=___slicedToArray_129(r,2),o=n[0],s=n[1];s.time||(delete e.resourceCache[o],___app_129.default.delete("#".concat(o)),t=!0),(new Date).getTime()-s.time>e.expires&&(delete e.resourceCache[o],t=!0)})),t&&this._persist()}},{key:"revokeAll",value:function(){this.resourceCache={},this._persist()}},{key:"_persist",value:function(){___app_129.default.write(JSON.stringify(this.resourceCache),_$constants_86.HEADERS_RESOURCE_CACHE_KEY)}},{key:"get",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].data:null}},{key:"gettime",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].time:null}},{key:"set",value:function(e,t){this.resourceCache[e]={time:(new Date).getTime(),data:t},this._persist()}}])&&___defineProperties_129(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());_$headersResourceCache_129.default=___default_129;var _$flow_126={};Object.defineProperty(_$flow_126,"__esModule",{value:!0}),_$flow_126.flowTransfer=flowTransfer,_$flow_126.getFlowField=getFlowField,_$flow_126.getFlowHeaders=getFlowHeaders,_$flow_126.getRmainingDays=getRmainingDays,_$flow_126.parseFlowHeaders=parseFlowHeaders,_$flow_126.validCheck=validCheck;var ___app_126=_interopRequireDefault(_$app_87),_headersResourceCache=_interopRequireDefault(_$headersResourceCache_129);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_126(){___regeneratorRuntime_126=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_126(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __ownKeys_126(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_126(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_126(Object(r),!0).forEach((function(t){___defineProperty_126(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_126(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_126(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_126(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_126(e,t):void 0}}function ___arrayLikeToArray_126(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___typeof_126(e){return(___typeof_126="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function __asyncGeneratorStep_126(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_126(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_126(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_126(s,n,o,i,a,"throw",e)}i(void 0)}))}}function getFlowField(e){return e[Object.keys(e).filter((function(e){return/SUBSCRIPTION-USERINFO/i.test(e)}))[0]]}function getFlowHeaders(e,t,r,n,o){return _getFlowHeaders.apply(this,arguments)}function _getFlowHeaders(){return _getFlowHeaders=___asyncToGenerator_126(___regeneratorRuntime_126().mark((function _callee(rawUrl,ua,timeout,customProxy,flowUrl){var _$arguments,_$arguments2,url,$arguments,rawArgs,_iterator,_step,pair,key,value,_ENV,isStash,isLoon,isShadowRocket,isQX,cached,flowInfo,_$$read,defaultProxy,defaultFlowUserAgent,defaultTimeout,proxy,userAgent,requestTimeout,http,_yield$http$get,body,_yield$http$head,headers,_e$message2,_yield$http$get2,_headers;return ___regeneratorRuntime_126().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(url=flowUrl||rawUrl||"",$arguments={},rawArgs=url.split("#"),url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch(e){_iterator=_createForOfIteratorHelper(rawArgs[1].split("&"));try{for(_iterator.s();!(_step=_iterator.n()).done;)pair=_step.value,key=pair.split("=")[0],value=pair.split("=")[1],$arguments[key]=null==value||""===value||decodeURIComponent(value)}catch(err){_iterator.e(err)}finally{_iterator.f()}}if(null===(_$arguments=$arguments)||void 0===_$arguments||!_$arguments.noFlow){_context.next=7;break}return _context.abrupt("return");case 7:if(_ENV=(0,_$openApi_140.ENV)(),isStash=_ENV.isStash,isLoon=_ENV.isLoon,isShadowRocket=_ENV.isShadowRocket,isQX=_ENV.isQX,cached=_headersResourceCache.default.get(url),null!==(_$arguments2=$arguments)&&void 0!==_$arguments2&&_$arguments2.noCache||!cached){_context.next=13;break}flowInfo=cached,_context.next=48;break;case 13:if(_$$read=___app_126.default.read(_$constants_86.SETTINGS_KEY),defaultProxy=_$$read.defaultProxy,defaultFlowUserAgent=_$$read.defaultFlowUserAgent,defaultTimeout=_$$read.defaultTimeout,proxy=customProxy||defaultProxy,___app_126.default.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),userAgent=ua||defaultFlowUserAgent||"Quantumult%20X/1.0.30 (iPhone14,2; iOS 15.6)",requestTimeout=timeout||defaultTimeout,http=(0,_$openApi_140.HTTP)(),!flowUrl){_context.next=28;break}return ___app_126.default.info("\u4f7f\u7528 GET \u65b9\u6cd5\u4ece\u54cd\u5e94\u4f53\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f: ".concat(flowUrl,", User-Agent: ").concat(userAgent||"")),_context.next=23,http.get({url:flowUrl,headers:{"User-Agent":userAgent},timeout:requestTimeout});case 23:_yield$http$get=_context.sent,body=_yield$http$get.body,flowInfo=body,_context.next=47;break;case 28:return _context.prev=28,___app_126.default.info("\u4f7f\u7528 HEAD \u65b9\u6cd5\u4ece\u54cd\u5e94\u5934\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f: ".concat(url,", User-Agent: ").concat(userAgent||"",", Proxy: ").concat(proxy)),_context.next=32,http.head(___objectSpread_126(___objectSpread_126(___objectSpread_126(___objectSpread_126({url:url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length}))[0],headers:___objectSpread_126(___objectSpread_126({"User-Agent":userAgent},isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{}),isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}),timeout:requestTimeout},proxy?{proxy:proxy}:{}),isLoon&&proxy?{node:proxy}:{}),isQX&&proxy?{opts:{policy:proxy}}:{}),proxy?(0,_$utils_130.getPolicyDescriptor)(proxy):{}));case 32:_yield$http$head=_context.sent,headers=_yield$http$head.headers,flowInfo=getFlowField(headers),_context.next=40;break;case 37:_context.prev=37,_context.t0=_context.catch(28),___app_126.default.error("\u4f7f\u7528 HEAD \u65b9\u6cd5\u4ece\u54cd\u5e94\u5934\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f\u5931\u8d25: ".concat(url,", User-Agent: ").concat(userAgent||"",", Proxy: ").concat(proxy,": ").concat(null!==(_e$message2=_context.t0.message)&&void 0!==_e$message2?_e$message2:_context.t0));case 40:if(flowInfo){_context.next=47;break}return ___app_126.default.info("\u4f7f\u7528 GET \u65b9\u6cd5\u83b7\u53d6\u6d41\u91cf\u4fe1\u606f: ".concat(url,", User-Agent: ").concat(userAgent||"",", Proxy: ").concat(proxy)),_context.next=44,http.get(___objectSpread_126(___objectSpread_126(___objectSpread_126(___objectSpread_126({url:url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length}))[0],headers:___objectSpread_126(___objectSpread_126({"User-Agent":userAgent},isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{}),isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}),timeout:requestTimeout},proxy?{proxy:proxy}:{}),isLoon&&proxy?{node:proxy}:{}),isQX&&proxy?{opts:{policy:proxy}}:{}),proxy?(0,_$utils_130.getPolicyDescriptor)(proxy):{}));case 44:_yield$http$get2=_context.sent,_headers=_yield$http$get2.headers,flowInfo=getFlowField(_headers);case 47:flowInfo&&_headersResourceCache.default.set(url,flowInfo);case 48:return _context.abrupt("return",flowInfo);case 49:case"end":return _context.stop()}}),_callee,null,[[28,37]])}))),_getFlowHeaders.apply(this,arguments)}function parseFlowHeaders(e){if(e){var t=e.match(/upload=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),r=Number(t[1]+t[2]),n=e.match(/download=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),o=Number(n[1]+n[2]),s=e.match(/total=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),i=Number(s[1]+s[2]),a=e.match(/expire=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/);return{expires:a?Number(a[1]+a[2]):void 0,total:i,usage:{upload:r,download:o}}}}function flowTransfer(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B",r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=r.indexOf(t);return e<1024||n===r.length-1?{value:e.toFixed(1),unit:t}:flowTransfer(e/1024,r[++n])}function validCheck(e){if(!e)throw new Error("\u6ca1\u6709\u6d41\u91cf\u4fe1\u606f");if(null!=e&&e.expires&&1e3*e.expires<Date.now()){var t=new Date(1e3*e.expires).toLocaleDateString();throw new Error("\u8ba2\u9605\u5df2\u8fc7\u671f: ".concat(t))}if(null!=e&&e.total){var r,n,o=(null===(r=e.usage)||void 0===r?void 0:r.upload)||0,s=(null===(n=e.usage)||void 0===n?void 0:n.download)||0;if(e.total-o-s<0){var i=o+s,a=flowTransfer(Math.abs(i));a.value=i<0?"-"+a.value:a.value;var u=flowTransfer(e.total);throw new Error("\u6d41\u91cf\u5df2\u7528\u5b8c: ".concat(a.value," ").concat(a.unit," / ").concat(u.value," ").concat(u.unit))}}}function getRmainingDays(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t=e.resetDay,r=e.startDate,n=e.cycleDays;if(["string","number"].includes(___typeof_126(e))&&(t=e),r&&n){if(n=parseInt(n),isNaN(n)||n<=0)throw new Error("\u91cd\u7f6e\u5468\u671f\u5e94\u4e3a\u6b63\u6574\u6570");if(!r||!Date.parse(r))throw new Error("\u5f00\u59cb\u65e5\u671f\u4e0d\u5408\u6cd5");var o=new Date(r),s=new Date;if(o.setHours(0,0,0,0),s.setHours(0,0,0,0),o.getTime()>s.getTime())throw new Error("\u5f00\u59cb\u65e5\u671f\u5e94\u65e9\u4e8e\u73b0\u5728");var i=new Date(r);for(i.setDate(i.getDate()+n);i<s;)i.setDate(i.getDate()+n);i.setHours(0,0,0,0);var a=i.getTime()-s.getTime();return Math.ceil(a/864e5)}if(!t)return;if(t=parseInt(t),isNaN(t)||t<=0||t>31)throw new Error("\u6708\u91cd\u7f6e\u65e5\u5e94\u4e3a 1-31 \u4e4b\u95f4\u7684\u6574\u6570");var u=new Date,c=u.getDate(),l=u.getMonth(),p=u.getFullYear();return(t>c?0:new Date(p,l+1,0).getDate())-c+t}catch(h){var f;___app_126.default.error("getRmainingDays failed: ".concat(null!==(f=h.message)&&void 0!==f?f:h))}}var _$download_124={};function ___typeof_124(e){return(___typeof_124="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$download_124,"__esModule",{value:!0}),_$download_124.default=download;var _resourceCache=___interopRequireDefault_124(_$resourceCache_133),___headersResourceCache_124=___interopRequireDefault_124(_$headersResourceCache_129),___app_124=___interopRequireDefault_124(_$app_87);function ___interopRequireDefault_124(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_124(){___regeneratorRuntime_124=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_124(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __ownKeys_124(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_124(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_124(Object(r),!0).forEach((function(t){___defineProperty_124(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_124(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_124(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___createForOfIteratorHelper_124(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_124(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___unsupportedIterableToArray_124(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_124(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_124(e,t):void 0}}function ___arrayLikeToArray_124(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __asyncGeneratorStep_124(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_124(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_124(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_124(s,n,o,i,a,"throw",e)}i(void 0)}))}}var tasks=new Map;function download(){return _download.apply(this,arguments)}function _download(){return _download=___asyncToGenerator_124(___regeneratorRuntime_124().mark((function _callee(){var _$arguments,_$arguments2,_$arguments3,_$arguments6,_$arguments10,rawUrl,ua,timeout,customProxy,skipCustomCache,awaitCustomCache,$arguments,url,rawArgs,_iterator,_step,pair,key,value,_ENV,isNode,isStash,isLoon,isShadowRocket,isQX,_$$read,defaultProxy,defaultUserAgent,defaultTimeout,cacheThreshold,proxy,userAgent,requestTimeout,id,customCacheKey,_$arguments4,customCached,_cached,_e$message,_$arguments5,http,result,cached,_$arguments7,_yield$http$get,body,headers,flowInfo,shouldCache,size,_$arguments8,_e$message4,_cached2,_e$message3,_$arguments9,_args=arguments;return ___regeneratorRuntime_124().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(rawUrl=_args.length>0&&void 0!==_args[0]?_args[0]:"",ua=_args.length>1?_args[1]:void 0,timeout=_args.length>2?_args[2]:void 0,customProxy=_args.length>3?_args[3]:void 0,skipCustomCache=_args.length>4?_args[4]:void 0,awaitCustomCache=_args.length>5?_args[5]:void 0,$arguments={},url=rawUrl.replace(/#noFlow$/,""),rawArgs=url.split("#"),url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch(e){_iterator=___createForOfIteratorHelper_124(rawArgs[1].split("&"));try{for(_iterator.s();!(_step=_iterator.n()).done;)pair=_step.value,key=pair.split("=")[0],value=pair.split("=")[1],$arguments[key]=null==value||""===value||decodeURIComponent(value)}catch(err){_iterator.e(err)}finally{_iterator.f()}}if(_ENV=(0,_$openApi_140.ENV)(),isNode=_ENV.isNode,isStash=_ENV.isStash,isLoon=_ENV.isLoon,isShadowRocket=_ENV.isShadowRocket,isQX=_ENV.isQX,_$$read=___app_124.default.read(_$constants_86.SETTINGS_KEY),defaultProxy=_$$read.defaultProxy,defaultUserAgent=_$$read.defaultUserAgent,defaultTimeout=_$$read.defaultTimeout,cacheThreshold=_$$read.cacheThreshold,proxy=customProxy||defaultProxy,___app_124.default.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),userAgent=ua||defaultUserAgent||"clash.meta",requestTimeout=timeout||defaultTimeout,id=(0,_$md5_139.hex_md5)(userAgent+url),!0===(null===(_$arguments=$arguments)||void 0===_$arguments?void 0:_$arguments.cacheKey)&&(___app_124.default.error("\u4f7f\u7528\u81ea\u5b9a\u4e49\u7f13\u5b58\u65f6 cacheKey \u7684\u503c\u4e0d\u80fd\u4e3a\u7a7a"),$arguments.cacheKey=void 0),customCacheKey=null!==(_$arguments2=$arguments)&&void 0!==_$arguments2&&_$arguments2.cacheKey?"#sub-store-cached-custom-".concat(null===(_$arguments3=$arguments)||void 0===_$arguments3?void 0:_$arguments3.cacheKey):void 0,!customCacheKey||skipCustomCache){_context.next=44;break}if(customCached=___app_124.default.read(customCacheKey),_cached=_resourceCache.default.get(id),null!==(_$arguments4=$arguments)&&void 0!==_$arguments4&&_$arguments4.noCache||!_cached){_context.next=26;break}return ___app_124.default.info("\u4e50\u89c2\u7f13\u5b58: URL ".concat(url,"\n\u5b58\u5728\u6709\u6548\u7684\u5e38\u89c4\u7f13\u5b58\n\u4f7f\u7528\u5e38\u89c4\u7f13\u5b58\u4ee5\u907f\u514d\u91cd\u590d\u8bf7\u6c42")),_context.abrupt("return",_cached);case 26:if(!customCached){_context.next=44;break}if(!awaitCustomCache){_context.next=41;break}return ___app_124.default.info("\u4e50\u89c2\u7f13\u5b58: URL ".concat(url,"\n\u672c\u6b21\u8fdb\u884c\u8bf7\u6c42 \u5c1d\u8bd5\u66f4\u65b0\u7f13\u5b58")),_context.prev=29,_context.next=32,download(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0);case 32:_context.next=39;break;case 34:_context.prev=34,_context.t0=_context.catch(29),___app_124.default.error("\u4e50\u89c2\u7f13\u5b58: URL ".concat(url," \u66f4\u65b0\u7f13\u5b58\u53d1\u751f\u9519\u8bef ").concat(null!==(_e$message=_context.t0.message)&&void 0!==_e$message?_e$message:_context.t0)),___app_124.default.info("\u4f7f\u7528\u4e50\u89c2\u7f13\u5b58\u7684\u6570\u636e\u5237\u65b0\u7f13\u5b58, \u9632\u6b62\u540e\u7eed\u8bf7\u6c42"),_resourceCache.default.set(id,customCached);case 39:_context.next=43;break;case 41:___app_124.default.info("\u4e50\u89c2\u7f13\u5b58: URL ".concat(url,"\n\u672c\u6b21\u8fd4\u56de\u81ea\u5b9a\u4e49\u7f13\u5b58 ").concat(null===(_$arguments5=$arguments)||void 0===_$arguments5?void 0:_$arguments5.cacheKey,"\n\u5e76\u8fdb\u884c\u8bf7\u6c42 \u5c1d\u8bd5\u5f02\u6b65\u66f4\u65b0\u7f13\u5b58")),download(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0).catch((function(e){var t;___app_124.default.error("\u4e50\u89c2\u7f13\u5b58: URL ".concat(url," \u5f02\u6b65\u66f4\u65b0\u7f13\u5b58\u53d1\u751f\u9519\u8bef ").concat(null!==(t=e.message)&&void 0!==t?t:e))}));case 43:return _context.abrupt("return",customCached);case 44:if(isNode||!tasks.has(id)){_context.next=46;break}return _context.abrupt("return",tasks.get(id));case 46:if(http=(0,_$openApi_140.HTTP)({headers:___objectSpread_124(___objectSpread_124({"User-Agent":userAgent},isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{}),isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}),timeout:requestTimeout}),cached=_resourceCache.default.get(id),null!==(_$arguments6=$arguments)&&void 0!==_$arguments6&&_$arguments6.noCache||!cached){_context.next=54;break}___app_124.default.info("\u4f7f\u7528\u7f13\u5b58: ".concat(url)),result=cached,customCacheKey&&(___app_124.default.info("URL ".concat(url,"\n\u5199\u5165\u81ea\u5b9a\u4e49\u7f13\u5b58 ").concat(null===(_$arguments7=$arguments)||void 0===_$arguments7?void 0:_$arguments7.cacheKey)),___app_124.default.write(cached,customCacheKey)),_context.next=78;break;case 54:return ___app_124.default.info("Downloading...\nUser-Agent: ".concat(userAgent,"\nTimeout: ").concat(requestTimeout,"\nProxy: ").concat(proxy,"\nURL: ").concat(url)),_context.prev=55,_context.next=58,http.get(___objectSpread_124(___objectSpread_124(___objectSpread_124(___objectSpread_124({url:url},proxy?{proxy:proxy}:{}),isLoon&&proxy?{node:proxy}:{}),isQX&&proxy?{opts:{policy:proxy}}:{}),proxy?(0,_$utils_130.getPolicyDescriptor)(proxy):{}));case 58:if(_yield$http$get=_context.sent,body=_yield$http$get.body,headers=_yield$http$get.headers,headers&&(flowInfo=(0,_$flow_126.getFlowField)(headers),flowInfo&&___headersResourceCache_124.default.set(url,flowInfo)),0!==body.replace(/\s/g,"").length){_context.next=64;break}throw new Error(new Error("\u8fdc\u7a0b\u8d44\u6e90\u5185\u5bb9\u4e3a\u7a7a"));case 64:shouldCache=!0,cacheThreshold&&(size=body.length/1024,size>cacheThreshold&&(___app_124.default.info("\u8d44\u6e90\u5927\u5c0f ".concat(size.toFixed(2)," KB \u8d85\u8fc7\u4e86 ").concat(cacheThreshold," KB, \u4e0d\u7f13\u5b58")),shouldCache=!1)),shouldCache&&(_resourceCache.default.set(id,body),customCacheKey&&(___app_124.default.info("URL ".concat(url,"\n\u5199\u5165\u81ea\u5b9a\u4e49\u7f13\u5b58 ").concat(null===(_$arguments8=$arguments)||void 0===_$arguments8?void 0:_$arguments8.cacheKey)),___app_124.default.write(body,customCacheKey))),result=body,_context.next=78;break;case 70:if(_context.prev=70,_context.t1=_context.catch(55),!customCacheKey){_context.next=77;break}if(_cached2=___app_124.default.read(customCacheKey),!_cached2){_context.next=77;break}return ___app_124.default.info("\u65e0\u6cd5\u4e0b\u8f7d URL ".concat(url,": ").concat(null!==(_e$message3=_context.t1.message)&&void 0!==_e$message3?_e$message3:_context.t1,"\n\u4f7f\u7528\u81ea\u5b9a\u4e49\u7f13\u5b58 ").concat(null===(_$arguments9=$arguments)||void 0===_$arguments9?void 0:_$arguments9.cacheKey)),_context.abrupt("return",_cached2);case 77:throw new Error("\u65e0\u6cd5\u4e0b\u8f7d URL ".concat(url,": ").concat(null!==(_e$message4=_context.t1.message)&&void 0!==_e$message4?_e$message4:_context.t1));case 78:if(null===(_$arguments10=$arguments)||void 0===_$arguments10||!_$arguments10.validCheck){_context.next=87;break}return _context.t2=_$flow_126.validCheck,_context.t3=_$flow_126.parseFlowHeaders,_context.next=83,(0,_$flow_126.getFlowHeaders)(url,$arguments.flowUserAgent,void 0,proxy,$arguments.flowUrl);case 83:return _context.t4=_context.sent,_context.t5=(0,_context.t3)(_context.t4),_context.next=87,(0,_context.t2)(_context.t5);case 87:return isNode||tasks.set(id,result),_context.abrupt("return",result);case 89:case"end":return _context.stop()}}),_callee,null,[[29,34],[55,70]])}))),_download.apply(this,arguments)}var _$scriptResourceCache_135={};Object.defineProperty(_$scriptResourceCache_135,"__esModule",{value:!0}),_$scriptResourceCache_135.default=void 0;var __obj_135,___app_135=(__obj_135=_$app_87)&&__obj_135.__esModule?__obj_135:{default:__obj_135};function ___slicedToArray_135(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_135(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_135(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_135(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperties_135(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ___default_135=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expires=function(){___app_135.default.read(_$constants_86.CSR_EXPIRATION_TIME_KEY)||___app_135.default.write("1728e5",_$constants_86.CSR_EXPIRATION_TIME_KEY);var e=1728e5;if(___app_135.default.env.isLoon){var t={"1\u5206\u949f":6e4,"5\u5206\u949f":3e5,"10\u5206\u949f":6e5,"30\u5206\u949f":18e5,"1\u5c0f\u65f6":36e5,"2\u5c0f\u65f6":72e5,"3\u5c0f\u65f6":108e5,"6\u5c0f\u65f6":216e5,"12\u5c0f\u65f6":432e5,"24\u5c0f\u65f6":864e5,"48\u5c0f\u65f6":1728e5,"72\u5c0f\u65f6":2592e5,"\u53c2\u6570\u4f20\u5165":"readcachets"},r=___app_135.default.read("#\u8282\u70b9\u7f13\u5b58\u6709\u6548\u671f");return r in t&&"readcachets"===(e=t[r])&&(e=r),e}return ___app_135.default.read(_$constants_86.CSR_EXPIRATION_TIME_KEY)}(),___app_135.default.read(_$constants_86.SCRIPT_RESOURCE_CACHE_KEY)||___app_135.default.write("{}",_$constants_86.SCRIPT_RESOURCE_CACHE_KEY);try{this.resourceCache=JSON.parse(___app_135.default.read(_$constants_86.SCRIPT_RESOURCE_CACHE_KEY))}catch(r){var t;___app_135.default.error("\u89e3\u6790\u6301\u4e45\u5316\u7f13\u5b58\u4e2d\u7684 ".concat(_$constants_86.SCRIPT_RESOURCE_CACHE_KEY," \u5931\u8d25, \u91cd\u7f6e\u4e3a {}, \u9519\u8bef: ").concat(null!==(t=null==r?void 0:r.message)&&void 0!==t?t:r)),this.resourceCache={},___app_135.default.write("{}",_$constants_86.SCRIPT_RESOURCE_CACHE_KEY)}this._cleanup()}var t,r;return t=e,(r=[{key:"_cleanup",value:function(){var e=this,t=!1;Object.entries(this.resourceCache).forEach((function(r){var n=___slicedToArray_135(r,2),o=n[0],s=n[1];s.time||(delete e.resourceCache[o],___app_135.default.delete("#".concat(o)),t=!0),(new Date).getTime()-s.time>e.expires&&(delete e.resourceCache[o],t=!0)})),t&&this._persist()}},{key:"revokeAll",value:function(){this.resourceCache={},this._persist()}},{key:"_persist",value:function(){___app_135.default.write(JSON.stringify(this.resourceCache),_$constants_86.SCRIPT_RESOURCE_CACHE_KEY)}},{key:"get",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].data:null}},{key:"gettime",value:function(e){var t=this.resourceCache[e]&&this.resourceCache[e].time;return t&&(new Date).getTime()-t<=this.expires?this.resourceCache[e].time:null}},{key:"set",value:function(e,t){this.resourceCache[e]={time:(new Date).getTime(),data:t},this._persist()}}])&&___defineProperties_135(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());_$scriptResourceCache_135.default=___default_135;var _$logical_131={};function ___arrayLikeToArray_131(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(_$logical_131,"__esModule",{value:!0}),_$logical_131.AND=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.map((function(e,r){return t[r]&&e}))}))},_$logical_131.FULL=function(e,t){return(r=Array(e).keys(),function(e){if(Array.isArray(e))return ___arrayLikeToArray_131(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_131(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_131(e,void 0):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(){return t}));var r},_$logical_131.NOT=function(e){return e.map((function(e){return!e}))},_$logical_131.OR=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.map((function(e,r){return t[r]||e}))}))};var _$geo_127={};Object.defineProperty(_$geo_127,"__esModule",{value:!0}),_$geo_127.MMDB=void 0,_$geo_127.getFlag=getFlag,_$geo_127.getISO=getISO,_$geo_127.removeFlag=removeFlag;var ___app_127=___interopRequireDefault_127(_$app_87);function ___interopRequireDefault_127(e){return e&&e.__esModule?e:{default:e}}function ___classCallCheck_127(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ___defineProperties_127(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ___createClass_127(e,t,r){return t&&___defineProperties_127(e.prototype,t),r&&___defineProperties_127(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var ISOFlags={"\ud83c\udff3\ufe0f\u200d\ud83c\udf08":["EXP","BAND"],"\ud83c\uddf8\ud83c\uddf1":["TEST","SOS"],"\ud83c\udde6\ud83c\udde9":["AD","AND"],"\ud83c\udde6\ud83c\uddea":["AE","ARE"],"\ud83c\udde6\ud83c\uddeb":["AF","AFG"],"\ud83c\udde6\ud83c\uddf1":["AL","ALB"],"\ud83c\udde6\ud83c\uddf2":["AM","ARM"],"\ud83c\udde6\ud83c\uddf7":["AR","ARG"],"\ud83c\udde6\ud83c\uddf9":["AT","AUT"],"\ud83c\udde6\ud83c\uddfa":["AU","AUS"],"\ud83c\udde6\ud83c\uddff":["AZ","AZE"],"\ud83c\udde7\ud83c\udde6":["BA","BIH"],"\ud83c\udde7\ud83c\udde9":["BD","BGD"],"\ud83c\udde7\ud83c\uddea":["BE","BEL"],"\ud83c\udde7\ud83c\uddec":["BG","BGR"],"\ud83c\udde7\ud83c\udded":["BH","BHR"],"\ud83c\udde7\ud83c\uddf7":["BR","BRA"],"\ud83c\udde7\ud83c\uddfe":["BY","BLR"],"\ud83c\udde8\ud83c\udde6":["CA","CAN"],"\ud83c\udde8\ud83c\udded":["CH","CHE"],"\ud83c\udde8\ud83c\uddf1":["CL","CHL"],"\ud83c\udde8\ud83c\uddf4":["CO","COL"],"\ud83c\udde8\ud83c\uddf7":["CR","CRI"],"\ud83c\udde8\ud83c\uddfe":["CY","CYP"],"\ud83c\udde8\ud83c\uddff":["CZ","CZE"],"\ud83c\udde9\ud83c\uddea":["DE","DEU"],"\ud83c\udde9\ud83c\uddf0":["DK","DNK"],"\ud83c\uddea\ud83c\udde8":["EC","ECU"],"\ud83c\uddea\ud83c\uddea":["EE","EST"],"\ud83c\uddea\ud83c\uddec":["EG","EGY"],"\ud83c\uddea\ud83c\uddf8":["ES","ESP"],"\ud83c\uddea\ud83c\uddfa":["EU"],"\ud83c\uddeb\ud83c\uddee":["FI","FIN"],"\ud83c\uddeb\ud83c\uddf7":["FR","FRA"],"\ud83c\uddec\ud83c\udde7":["GB","GBR","UK"],"\ud83c\uddec\ud83c\uddea":["GE","GEO"],"\ud83c\uddec\ud83c\uddf7":["GR","GRC"],"\ud83c\udded\ud83c\uddf0":["HK","HKG","HKT","HKBN","HGC","WTT","CMI"],"\ud83c\udded\ud83c\uddf7":["HR","HRV"],"\ud83c\udded\ud83c\uddfa":["HU","HUN"],"\ud83c\uddef\ud83c\uddf4":["JO","JOR"],"\ud83c\uddef\ud83c\uddf5":["JP","JPN","TYO"],"\ud83c\uddf0\ud83c\uddea":["KE","KEN"],"\ud83c\uddf0\ud83c\uddec":["KG","KGZ"],"\ud83c\uddf0\ud83c\udded":["KH","KGZ"],"\ud83c\uddf0\ud83c\uddf5":["KP","PRK"],"\ud83c\uddf0\ud83c\uddf7":["KR","KOR","SEL"],"\ud83c\uddf0\ud83c\uddff":["KZ","KAZ"],"\ud83c\uddee\ud83c\udde9":["ID","IDN"],"\ud83c\uddee\ud83c\uddea":["IE","IRL"],"\ud83c\uddee\ud83c\uddf1":["IL","ISR"],"\ud83c\uddee\ud83c\uddf2":["IM","IMN"],"\ud83c\uddee\ud83c\uddf3":["IN","IND"],"\ud83c\uddee\ud83c\uddf7":["IR","IRN"],"\ud83c\uddee\ud83c\uddf8":["IS","ISL"],"\ud83c\uddee\ud83c\uddf9":["IT","ITA"],"\ud83c\uddf1\ud83c\uddf9":["LT","LTU"],"\ud83c\uddf1\ud83c\uddfa":["LU","LUX"],"\ud83c\uddf1\ud83c\uddfb":["LV","LVA"],"\ud83c\uddf2\ud83c\udde6":["MA","MAR"],"\ud83c\uddf2\ud83c\udde9":["MD","MDA"],"\ud83c\uddf3\ud83c\uddec":["NG","NGA"],"\ud83c\uddf2\ud83c\uddf0":["MK","MKD"],"\ud83c\uddf2\ud83c\uddf3":["MN","MNG"],"\ud83c\uddf2\ud83c\uddf4":["MO","MAC","CTM"],"\ud83c\uddf2\ud83c\uddf9":["MT","MLT"],"\ud83c\uddf2\ud83c\uddfd":["MX","MEX"],"\ud83c\uddf2\ud83c\uddfe":["MY","MYS"],"\ud83c\uddf3\ud83c\uddf1":["NL","NLD","AMS"],"\ud83c\uddf3\ud83c\uddf4":["NO","NOR"],"\ud83c\uddf3\ud83c\uddf5":["NP","NPL"],"\ud83c\uddf3\ud83c\uddff":["NZ","NZL"],"\ud83c\uddf5\ud83c\udde6":["PA","PAN"],"\ud83c\uddf5\ud83c\uddea":["PE","PER"],"\ud83c\uddf5\ud83c\udded":["PH","PHL"],"\ud83c\uddf5\ud83c\uddf0":["PK","PAK"],"\ud83c\uddf5\ud83c\uddf1":["PL","POL"],"\ud83c\uddf5\ud83c\uddf7":["PR","PRI"],"\ud83c\uddf5\ud83c\uddf9":["PT","PRT"],"\ud83c\uddf5\ud83c\uddfe":["PY","PRY"],"\ud83c\uddf7\ud83c\uddf4":["RO","ROU"],"\ud83c\uddf7\ud83c\uddf8":["RS","SRB"],"\ud83c\uddf7\ud83c\uddea":["RE","REU"],"\ud83c\uddf7\ud83c\uddfa":["RU","RUS"],"\ud83c\uddf8\ud83c\udde6":["SA","SAU"],"\ud83c\uddf8\ud83c\uddea":["SE","SWE"],"\ud83c\uddf8\ud83c\uddec":["SG","SGP"],"\ud83c\uddf8\ud83c\uddee":["SI","SVN"],"\ud83c\uddf8\ud83c\uddf0":["SK","SVK"],"\ud83c\uddf9\ud83c\udded":["TH","THA"],"\ud83c\uddf9\ud83c\uddf3":["TN","TUN"],"\ud83c\uddf9\ud83c\uddf7":["TR","TUR"],"\ud83c\uddf9\ud83c\uddfc":["TW","TWN","CHT","HINET","ROC"],"\ud83c\uddfa\ud83c\udde6":["UA","UKR"],"\ud83c\uddfa\ud83c\uddf8":["US","USA","LAX","SFO","SJC"],"\ud83c\uddfa\ud83c\uddfe":["UY","URY"],"\ud83c\uddfb\ud83c\uddea":["VE","VEN"],"\ud83c\uddfb\ud83c\uddf3":["VN","VNM"],"\ud83c\uddff\ud83c\udde6":["ZA","ZAF","JNB"],"\ud83c\udde8\ud83c\uddf3":["CN","CHN","BACK"]};function getFlag(e){for(var t,r={"\ud83c\udff3\ufe0f\u200d\ud83c\udf08":["\u6d41\u91cf","\u65f6\u95f4","\u8fc7\u671f","Bandwidth","Expire"],"\ud83c\uddf8\ud83c\uddf1":["\u5e94\u6025","\u6d4b\u8bd5\u8282\u70b9"],"\ud83c\udde6\ud83c\udde9":["Andorra","\u5b89\u9053\u5c14"],"\ud83c\udde6\ud83c\uddea":["United Arab Emirates","\u963f\u8054\u914b","\u8fea\u62dc"],"\ud83c\udde6\ud83c\uddeb":["Afghanistan","\u963f\u5bcc\u6c57"],"\ud83c\udde6\ud83c\uddf1":["Albania","\u963f\u5c14\u5df4\u5c3c\u4e9a","\u963f\u723e\u5df4\u5c3c\u4e9e"],"\ud83c\udde6\ud83c\uddf2":["Armenia","\u4e9a\u7f8e\u5c3c\u4e9a"],"\ud83c\udde6\ud83c\uddf7":["Argentina","\u963f\u6839\u5ef7"],"\ud83c\udde6\ud83c\uddf9":["Austria","\u5965\u5730\u5229","\u5967\u5730\u5229","\u7ef4\u4e5f\u7eb3"],"\ud83c\udde6\ud83c\uddfa":["Australia","\u6fb3\u5927\u5229\u4e9a","\u6fb3\u6d32","\u58a8\u5c14\u672c","\u6089\u5c3c","\u571f\u6fb3","\u4eac\u6fb3","\u5ee3\u6fb3","\u6eec\u6fb3","\u6caa\u6fb3","\u5e7f\u6fb3","Sydney"],"\ud83c\udde6\ud83c\uddff":["Azerbaijan","\u963f\u585e\u62dc\u7586"],"\ud83c\udde7\ud83c\udde6":["Bosnia and Herzegovina","\u6ce2\u9ed1\u5171\u548c\u56fd","\u6ce2\u9ed1"],"\ud83c\udde7\ud83c\udde9":["Bangladesh","\u5b5f\u52a0\u62c9\u56fd","\u5b5f\u52a0\u62c9"],"\ud83c\udde7\ud83c\uddea":["Belgium","\u6bd4\u5229\u65f6","\u6bd4\u5229\u6642"],"\ud83c\udde7\ud83c\uddec":["Bulgaria","\u4fdd\u52a0\u5229\u4e9a","\u4fdd\u52a0\u5229\u4e9e"],"\ud83c\udde7\ud83c\udded":["Bahrain","\u5df4\u6797"],"\ud83c\udde7\ud83c\uddf7":["Brazil","\u5df4\u897f","\u5723\u4fdd\u7f57"],"\ud83c\udde7\ud83c\uddfe":["Belarus","\u767d\u4fc4\u7f57\u65af","\u767d\u4fc4"],"\ud83c\udde8\ud83c\udde6":["Canada","\u52a0\u62ff\u5927","\u8499\u7279\u5229\u5c14","\u6e29\u54e5\u534e","\u6953\u8449","\u67ab\u53f6","\u6ed1\u94c1\u5362","\u591a\u4f26\u591a","Waterloo"],"\ud83c\udde8\ud83c\udded":["Switzerland","\u745e\u58eb","\u82cf\u9ece\u4e16","Zurich"],"\ud83c\udde8\ud83c\uddf1":["Chile","\u667a\u5229"],"\ud83c\udde8\ud83c\uddf4":["Colombia","\u54e5\u4f26\u6bd4\u4e9a"],"\ud83c\udde8\ud83c\uddf7":["Costa Rica","\u54e5\u65af\u8fbe\u9ece\u52a0"],"\ud83c\udde8\ud83c\uddfe":["Cyprus","\u585e\u6d66\u8def\u65af"],"\ud83c\udde8\ud83c\uddff":["Czechia","\u6377\u514b"],"\ud83c\udde9\ud83c\uddea":["German","\u5fb7\u56fd","\u5fb7\u570b","\u4eac\u5fb7","\u6eec\u5fb7","\u5ee3\u5fb7","\u6caa\u5fb7","\u5e7f\u5fb7","\u6cd5\u5170\u514b\u798f","Frankfurt","\u5fb7\u610f\u5fd7"],"\ud83c\udde9\ud83c\uddf0":["Denmark","\u4e39\u9ea6","\u4e39\u9ea5"],"\ud83c\uddea\ud83c\udde8":["Ecuador","\u5384\u74dc\u591a\u5c14"],"\ud83c\uddea\ud83c\uddea":["Estonia","\u7231\u6c99\u5c3c\u4e9a"],"\ud83c\uddea\ud83c\uddec":["Egypt","\u57c3\u53ca"],"\ud83c\uddea\ud83c\uddf8":["Spain","\u897f\u73ed\u7259"],"\ud83c\uddea\ud83c\uddfa":["European Union","\u6b27\u76df","\u6b27\u7f57\u5df4"],"\ud83c\uddeb\ud83c\uddee":["Finland","\u82ac\u5170","\u82ac\u862d","\u8d6b\u5c14\u8f9b\u57fa"],"\ud83c\uddeb\ud83c\uddf7":["France","\u6cd5\u56fd","\u6cd5\u570b","\u5df4\u9ece"],"\ud83c\uddec\ud83c\udde7":["Great Britain","\u82f1\u56fd","England","United Kingdom","\u4f26\u6566","\u82f1","London"],"\ud83c\uddec\ud83c\uddea":["Georgia","\u683c\u9c81\u5409\u4e9a","\u683c\u9b6f\u5409\u4e9e"],"\ud83c\uddec\ud83c\uddf7":["Greece","\u5e0c\u814a","\u5e0c\u81d8"],"\ud83c\udded\ud83c\uddf0":["Hongkong","\u9999\u6e2f","Hong Kong","HongKong","HONG KONG","\u6df1\u6e2f","\u6caa\u6e2f","\u547c\u6e2f","\u7a57\u6e2f","\u4eac\u6e2f","\u6e2f"],"\ud83c\udded\ud83c\uddf7":["Croatia","\u514b\u7f57\u5730\u4e9a","\u514b\u7f85\u5730\u4e9e"],"\ud83c\udded\ud83c\uddfa":["Hungary","\u5308\u7259\u5229"],"\ud83c\uddef\ud83c\uddf4":["Jordan","\u7ea6\u65e6"],"\ud83c\uddef\ud83c\uddf5":["Japan","\u65e5\u672c","\u4e1c\u4eac","\u5927\u962a","\u57fc\u7389","\u6caa\u65e5","\u7a57\u65e5","\u5ddd\u65e5","\u4e2d\u65e5","\u6cc9\u65e5","\u676d\u65e5","\u6df1\u65e5","\u8fbd\u65e5","\u5e7f\u65e5","\u5927\u5742","Osaka","Tokyo"],"\ud83c\uddf0\ud83c\uddea":["Kenya","\u80af\u5c3c\u4e9a"],"\ud83c\uddf0\ud83c\uddec":["Kyrgyzstan","\u5409\u5c14\u5409\u65af\u65af\u5766"],"\ud83c\uddf0\ud83c\udded":["Cambodia","\u67ec\u57d4\u5be8"],"\ud83c\uddf0\ud83c\uddf5":["North Korea","\u671d\u9c9c"],"\ud83c\uddf0\ud83c\uddf7":["Korea","\u97e9\u56fd","\u97d3\u570b","\u97e9","\u97d3","\u9996\u5c14","\u6625\u5ddd","Chuncheon","Seoul"],"\ud83c\uddf0\ud83c\uddff":["Kazakhstan","\u54c8\u8428\u514b\u65af\u5766","\u54c8\u8428\u514b"],"\ud83c\uddee\ud83c\udde9":["Indonesia","\u5370\u5c3c","\u5370\u5ea6\u5c3c\u897f\u4e9a","\u96c5\u52a0\u8fbe"],"\ud83c\uddee\ud83c\uddea":["Ireland","\u7231\u5c14\u5170","\u611b\u723e\u862d","\u90fd\u67cf\u6797"],"\ud83c\uddee\ud83c\uddf1":["Israel","\u4ee5\u8272\u5217"],"\ud83c\uddee\ud83c\uddf2":["Isle of Man","\u9a6c\u6069\u5c9b","\u99ac\u6069\u5cf6"],"\ud83c\uddee\ud83c\uddf3":["India","\u5370\u5ea6","\u5b5f\u4e70","MFumbai"],"\ud83c\uddee\ud83c\uddf7":["Iran","\u4f0a\u6717"],"\ud83c\uddee\ud83c\uddf8":["Iceland","\u51b0\u5c9b","\u51b0\u5cf6"],"\ud83c\uddee\ud83c\uddf9":["Italy","\u610f\u5927\u5229","\u7fa9\u5927\u5229","\u7c73\u5170","Nachash"],"\ud83c\uddf1\ud83c\uddf9":["Lithuania","\u7acb\u9676\u5b9b"],"\ud83c\uddf1\ud83c\uddfa":["Luxembourg","\u5362\u68ee\u5821"],"\ud83c\uddf1\ud83c\uddfb":["Latvia","\u62c9\u8131\u7ef4\u4e9a","Latvija"],"\ud83c\uddf2\ud83c\udde6":["Morocco","\u6469\u6d1b\u54e5"],"\ud83c\uddf2\ud83c\udde9":["Moldova","\u6469\u5c14\u591a\u74e6","\u6469\u723e\u591a\u74e6"],"\ud83c\uddf3\ud83c\uddec":["Nigeria","\u5c3c\u65e5\u5229\u4e9a","\u5c3c\u65e5\u5229\u4e9e"],"\ud83c\uddf2\ud83c\uddf0":["Macedonia","\u9a6c\u5176\u987f","\u99ac\u5176\u9813"],"\ud83c\uddf2\ud83c\uddf3":["Mongolia","\u8499\u53e4"],"\ud83c\uddf2\ud83c\uddf4":["Macao","\u6fb3\u95e8","\u6fb3\u9580","CTM"],"\ud83c\uddf2\ud83c\uddf9":["Malta","\u9a6c\u8033\u4ed6"],"\ud83c\uddf2\ud83c\uddfd":["Mexico","\u58a8\u897f\u54e5"],"\ud83c\uddf2\ud83c\uddfe":["Malaysia","\u9a6c\u6765","\u99ac\u4f86","\u5409\u9686\u5761","\u5927\u99ac"],"\ud83c\uddf3\ud83c\uddf1":["Netherlands","\u8377\u5170","\u8377\u862d","\u5c3c\u5fb7\u862d","\u963f\u59c6\u65af\u7279\u4e39"],"\ud83c\uddf3\ud83c\uddf4":["Norway","\u632a\u5a01"],"\ud83c\uddf3\ud83c\uddf5":["Nepal","\u5c3c\u6cca\u5c14"],"\ud83c\uddf3\ud83c\uddff":["New Zealand","\u65b0\u897f\u5170","\u65b0\u897f\u862d"],"\ud83c\uddf5\ud83c\udde6":["Panama","\u5df4\u62ff\u9a6c"],"\ud83c\uddf5\ud83c\uddea":["Peru","\u79d8\u9c81","\u7955\u9b6f"],"\ud83c\uddf5\ud83c\udded":["Philippines","\u83f2\u5f8b\u5bbe","\u83f2\u5f8b\u8cd3"],"\ud83c\uddf5\ud83c\uddf0":["Pakistan","\u5df4\u57fa\u65af\u5766"],"\ud83c\uddf5\ud83c\uddf1":["Poland","\u6ce2\u5170","\u6ce2\u862d"],"\ud83c\uddf5\ud83c\uddf7":["Puerto Rico","\u6ce2\u591a\u9ece\u5404"],"\ud83c\uddf5\ud83c\uddf9":["Portugal","\u8461\u8404\u7259"],"\ud83c\uddf5\ud83c\uddfe":["Paraguay","\u5df4\u62c9\u572d"],"\ud83c\uddf7\ud83c\uddf4":["Romania","\u7f57\u9a6c\u5c3c\u4e9a"],"\ud83c\uddf7\ud83c\uddf8":["Serbia","\u585e\u5c14\u7ef4\u4e9a"],"\ud83c\uddf7\ud83c\uddea":["R\xe9union","\u7559\u5c3c\u6c6a","\u6cd5\u5c5e\u7559\u5c3c\u6c6a"],"\ud83c\uddf7\ud83c\uddfa":["Russia","\u4fc4\u7f57\u65af","\u4fc4\u56fd","\u4fc4\u7f85\u65af","\u4f2f\u529b","\u83ab\u65af\u79d1","\u5723\u5f7c\u5f97\u5821","\u897f\u4f2f\u5229\u4e9a","\u4eac\u4fc4","\u676d\u4fc4","\u5ee3\u4fc4","\u6eec\u4fc4","\u5e7f\u4fc4","\u6caa\u4fc4","Moscow"],"\ud83c\uddf8\ud83c\udde6":["Saudi","\u6c99\u7279\u963f\u62c9\u4f2f","\u6c99\u7279","Riyadh","\u5229\u96c5\u5f97"],"\ud83c\uddf8\ud83c\uddea":["Sweden","\u745e\u5178"],"\ud83c\uddf8\ud83c\uddec":["Singapore","\u65b0\u52a0\u5761","\u72ee\u57ce","\u6caa\u65b0","\u4eac\u65b0","\u4e2d\u65b0","\u6cc9\u65b0","\u7a57\u65b0","\u6df1\u65b0","\u676d\u65b0","\u5e7f\u65b0","\u5ee3\u65b0","\u6eec\u65b0"],"\ud83c\uddf8\ud83c\uddee":["Slovenia","\u65af\u6d1b\u6587\u5c3c\u4e9a"],"\ud83c\uddf8\ud83c\uddf0":["Slovakia","\u65af\u6d1b\u4f10\u514b"],"\ud83c\uddf9\ud83c\udded":["Thailand","\u6cf0\u56fd","\u6cf0\u570b","\u66fc\u8c37"],"\ud83c\uddf9\ud83c\uddf3":["Tunisia","\u7a81\u5c3c\u65af"],"\ud83c\uddf9\ud83c\uddf7":["Turkey","\u571f\u8033\u5176","\u4f0a\u65af\u5766\u5e03\u5c14"],"\ud83c\uddf9\ud83c\uddfc":["Taiwan","\u53f0\u6e7e","\u81fa\u7063","\u53f0\u7063","\u4e2d\u83ef\u6c11\u570b","\u4e2d\u534e\u6c11\u56fd","\u53f0\u5317","\u53f0\u4e2d","\u65b0\u5317","\u5f70\u5316","\u53f0","\u81fa","Taipei","Tai Wan"],"\ud83c\uddfa\ud83c\udde6":["Ukraine","\u4e4c\u514b\u5170","\u70cf\u514b\u862d"],"\ud83c\uddfa\ud83c\uddf8":["United States","\u7f8e\u56fd","America","\u7f8e","\u4eac\u7f8e","\u6ce2\u7279\u5170","\u8fbe\u62c9\u65af","\u4fc4\u52d2\u5188","\u51e4\u51f0\u57ce","\u8d39\u5229\u8499","\u7845\u8c37","\u77fd\u8c37","\u62c9\u65af\u7ef4\u52a0\u65af","\u6d1b\u6749\u77f6","\u5723\u4f55\u585e","\u5723\u514b\u62c9\u62c9","\u897f\u96c5\u56fe","\u829d\u52a0\u54e5","\u6caa\u7f8e","\u54e5\u4f26\u5e03","\u7ebd\u7ea6","Los Angeles","San Jose","Sillicon Valley","Michigan"],"\ud83c\uddfa\ud83c\uddfe":["Uruguay","\u4e4c\u62c9\u572d"],"\ud83c\uddfb\ud83c\uddea":["Venezuela","\u59d4\u5185\u745e\u62c9"],"\ud83c\uddfb\ud83c\uddf3":["Vietnam","\u8d8a\u5357","\u80e1\u5fd7\u660e"],"\ud83c\uddff\ud83c\udde6":["South Africa","\u5357\u975e"],"\ud83c\udde8\ud83c\uddf3":["China","\u4e2d\u56fd","\u4e2d\u570b","\u56de\u56fd","\u56de\u570b","\u56fd\u5185","\u570b\u5167","\u534e\u4e1c","\u534e\u897f","\u534e\u5357","\u534e\u5317","\u534e\u4e2d","\u6c5f\u82cf","\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733","\u676d\u5dde","\u5f90\u5dde","\u9752\u5c9b","\u5b81\u6ce2","\u9547\u6c5f"]},n=(null===(t=e.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/))||void 0===t?void 0:t[0])||"\ud83c\udff4\u200d\u2620\ufe0f",o=0,s=Object.keys(r);o<s.length;o++){var i=s[o];if(r[i].some((function(t){return RegExp("".concat(t),"i").test(e)})))return/\u5185\u8499\u53e4/.test(e)&&["\ud83c\uddf2\ud83c\uddf3"].includes(i)?"\ud83c\udde8\ud83c\uddf3":i}for(var a=0,u=Object.keys(ISOFlags);a<u.length;a++){var c=u[a];if(ISOFlags[c].some((function(t){return RegExp("(^|[^a-zA-Z])".concat(t,"([^a-zA-Z]|$)")).test(e)})))return c}return n}function getISO(e){var t;return null===(t=ISOFlags[getFlag(e)])||void 0===t?void 0:t[0]}function removeFlag(e){return e.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]|\ud83c\udff4\u200d\u2620\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08/g,"").trim()}var MMDB=function(){function MMDB(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},country=_ref.country,asn=_ref.asn;if(___classCallCheck_127(this,MMDB),___app_127.default.env.isNode){var Reader=eval('require("@maxmind/geoip2-node")').Reader,fs=eval("require('fs')"),countryFile=country||eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),asnFile=asn||eval("process.env.SUB_STORE_MMDB_ASN_PATH");if(countryFile&&(this.countryReader=Reader.openBuffer(fs.readFileSync(countryFile))),asnFile){if(!fs.existsSync(asnFile))throw new Error("GeoLite2 ASN MMDB does not exist");this.asnReader=Reader.openBuffer(fs.readFileSync(asnFile))}}}return ___createClass_127(MMDB,[{key:"geoip",value:function(e){var t,r,n;return null===(t=this.countryReader)||void 0===t||null===(r=t.country(e))||void 0===r||null===(n=r.country)||void 0===n?void 0:n.isoCode}},{key:"ipaso",value:function(e){var t,r;return null===(t=this.asnReader)||void 0===t||null===(r=t.asn(e))||void 0===r?void 0:r.autonomousSystemOrganization}}]),MMDB}();_$geo_127.MMDB=MMDB;var _$types_9={toString:function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e},toType:function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}},_$rcodes_8={toString:function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e},toRcode:function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}},_$opcodes_6={toString:function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e},toOpcode:function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}},_$classes_4={toString:function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e},toClass:function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}},_$optioncodes_7={toString:function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:"OPTION_"+e},toCode:function(e){if("number"==typeof e)return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}},_$index_1={exports:{}},ipCodec=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=function(e,t,r){if(t=~~t,(r=r||e.length-t)===n.size)return n.decode(e,t,r);if(r===o.size)return o.decode(e,t,r);throw Error(`Invalid buffer size needs to be ${n.size} for v4 or ${o.size} for v6.`)},e.encode=function(e,t,r){r=~~r;const i=s(e);return"function"==typeof t&&(t=t(r+i)),i===n.size?n.encode(e,t,r):o.encode(e,t,r)},e.familyOf=function(e){return s(e)===n.size?1:2},e.name=void 0,e.sizeOf=s,e.v6=e.v4=void 0;const t=/^(\d{1,3}\.){3,3}\d{1,3}$/,r=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,n={name:"v4",size:4,isFormat:e=>t.test(e),encode(e,t,r){r=~~r,t=t||new Uint8Array(r+4);const n=e.length;let o=0;for(let s=0;s<n;){const n=e.charCodeAt(s++);46===n?(t[r++]=o,o=0):o=10*o+(n-48)}return t[r]=o,t},decode:(e,t)=>(t=~~t,`${e[t++]}.${e[t++]}.${e[t++]}.${e[t]}`)};e.v4=n;const o={name:"v6",size:16,isFormat:e=>e.length>0&&r.test(e),encode(e,t,r){let n=16+(r=~~r),o=-1,s=0,i=0,a=!0,u=!1;t=t||new Uint8Array(r+16);for(let c=0;c<e.length;c++){let l=e.charCodeAt(c);58===l?(a?-1!==o?(r<n&&(t[r]=0),r<n-1&&(t[r+1]=0),r+=2):r<n&&(o=r):(!0===u?(r<n&&(t[r]=i),r++):(r<n&&(t[r]=s>>8),r<n-1&&(t[r+1]=255&s),r+=2),s=0,i=0),a=!0,u=!1):46===l?(r<n&&(t[r]=i),r++,i=0,s=0,a=!1,u=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:i=10*i+(l-=48),s=(s<<4)+l)}if(!1===a)!0===u?(r<n&&(t[r]=i),r++):(r<n&&(t[r]=s>>8),r<n-1&&(t[r+1]=255&s),r+=2);else if(0===o)r<n&&(t[r]=0),r<n-1&&(t[r+1]=0),r+=2;else if(-1!==o){r+=2;for(let e=Math.min(r-1,n-1);e>=o+2;e--)t[e]=t[e-2];t[o]=0,t[o+1]=0,o=r}if(o!==r&&-1!==o)for(r>n-2&&(r=n-2);n>o;)t[--n]=r<n&&r>o?t[--r]:0;else for(;r<n;)t[r++]=0;return t},decode(e,t){t=~~t;let r="";for(let n=0;n<16;n+=2)0!==n&&(r+=":"),r+=(e[t+n]<<8|e[t+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function s(e){if(n.isFormat(e))return n.size;if(o.isFormat(e))return o.size;throw Error("Invalid ip address: "+e)}return e.v6=o,e.name="ip","default"in e?e.default:e}({});"function"==typeof define&&define.amd?define([],(function(){return ipCodec})):"object"==typeof _$index_1.exports&&(_$index_1.exports=ipCodec),_$index_1=_$index_1.exports;var _$dnsPacket_5={};const Buffer=_$buffer_3({}).Buffer,name=_$dnsPacket_5.name={};name.encode=function(e,t,r,{mail:n=!1}={}){t||(t=Buffer.alloc(name.encodingLength(e))),r||(r=0);const o=r,s=e.replace(/^\.|\.$/gm,"");if(s.length){let e=[];if(n){let t="";s.split(".").forEach(r=>{r.endsWith("\\")?t+=(t.length?".":"")+r.slice(0,-1):0===e.length&&t.length?e.push(t+"."+r):e.push(r)})}else e=s.split(".");for(let n=0;n<e.length;n++){const o=t.write(e[n],r+1);t[r]=o,r+=o+1}}return t[r++]=0,name.encode.bytes=r-o,t},name.encode.bytes=0,name.decode=function(e,t,{mail:r=!1}={}){t||(t=0);const n=[];let o=t,s=0,i=0,a=!1;for(;;){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");const u=e[t++];if(i+=a?0:1,0===u)break;if(0==(192&u)){if(t+u>e.length)throw new Error("Cannot decode name (buffer overflow)");if((s+=u+1)>254)throw new Error("Cannot decode name (name too long)");let o=e.toString("utf-8",t,t+u);r&&(o=o.replace(/\./g,"\\.")),n.push(o),t+=u,i+=a?0:u}else{if(192!=(192&u))throw new Error("Cannot decode name (bad label)");{if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");const r=e.readUInt16BE(t-1)-49152;if(r>=o)throw new Error("Cannot decode name (bad pointer)");t=r,o=r,i+=a?0:1,a=!0}}}return name.decode.bytes=i,0===n.length?".":n.join(".")},name.decode.bytes=0,name.encodingLength=function(e){return"."===e||".."===e?1:Buffer.byteLength(e.replace(/^\.|\.$/gm,""))+2};const string={encode:function(e,t,r){t||(t=Buffer.alloc(string.encodingLength(e))),r||(r=0);const n=t.write(e,r+1);return t[r]=n,string.encode.bytes=n+1,t}};string.encode.bytes=0,string.decode=function(e,t){t||(t=0);const r=e[t],n=e.toString("utf-8",t+1,t+1+r);return string.decode.bytes=r+1,n},string.decode.bytes=0,string.encodingLength=function(e){return Buffer.byteLength(e)+1};const header={encode:function(e,t,r){t||(t=header.encodingLength(e)),r||(r=0);const n=32767&(e.flags||0),o="response"===e.type?32768:0;return t.writeUInt16BE(e.id||0,r),t.writeUInt16BE(n|o,r+2),t.writeUInt16BE(e.questions.length,r+4),t.writeUInt16BE(e.answers.length,r+6),t.writeUInt16BE(e.authorities.length,r+8),t.writeUInt16BE(e.additionals.length,r+10),t}};header.encode.bytes=12,header.decode=function(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");const r=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:32768&r?"response":"query",flags:32767&r,flag_qr:1==(r>>15&1),opcode:_$opcodes_6.toString(r>>11&15),flag_aa:1==(r>>10&1),flag_tc:1==(r>>9&1),flag_rd:1==(r>>8&1),flag_ra:1==(r>>7&1),flag_z:1==(r>>6&1),flag_ad:1==(r>>5&1),flag_cd:1==(r>>4&1),rcode:_$rcodes_8.toString(15&r),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}},header.decode.bytes=12,header.encodingLength=function(){return 12};const runknown=_$dnsPacket_5.unknown={};runknown.encode=function(e,t,r){return t||(t=Buffer.alloc(runknown.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.length,r),e.copy(t,r+2),runknown.encode.bytes=e.length+2,t},runknown.encode.bytes=0,runknown.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),n=e.slice(t+2,t+2+r);return runknown.decode.bytes=r+2,n},runknown.decode.bytes=0,runknown.encodingLength=function(e){return e.length+2};const rns=_$dnsPacket_5.ns={};rns.encode=function(e,t,r){return t||(t=Buffer.alloc(rns.encodingLength(e))),r||(r=0),name.encode(e,t,r+2),t.writeUInt16BE(name.encode.bytes,r),rns.encode.bytes=name.encode.bytes+2,t},rns.encode.bytes=0,rns.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),n=name.decode(e,t+2);return rns.decode.bytes=r+2,n},rns.decode.bytes=0,rns.encodingLength=function(e){return name.encodingLength(e)+2};const rsoa=_$dnsPacket_5.soa={};rsoa.encode=function(e,t,r){t||(t=Buffer.alloc(rsoa.encodingLength(e))),r||(r=0);const n=r;return r+=2,name.encode(e.mname,t,r),r+=name.encode.bytes,name.encode(e.rname,t,r,{mail:!0}),r+=name.encode.bytes,t.writeUInt32BE(e.serial||0,r),r+=4,t.writeUInt32BE(e.refresh||0,r),r+=4,t.writeUInt32BE(e.retry||0,r),r+=4,t.writeUInt32BE(e.expire||0,r),r+=4,t.writeUInt32BE(e.minimum||0,r),r+=4,t.writeUInt16BE(r-n-2,n),rsoa.encode.bytes=r-n,t},rsoa.encode.bytes=0,rsoa.decode=function(e,t){t||(t=0);const r=t,n={};return t+=2,n.mname=name.decode(e,t),t+=name.decode.bytes,n.rname=name.decode(e,t,{mail:!0}),t+=name.decode.bytes,n.serial=e.readUInt32BE(t),t+=4,n.refresh=e.readUInt32BE(t),t+=4,n.retry=e.readUInt32BE(t),t+=4,n.expire=e.readUInt32BE(t),t+=4,n.minimum=e.readUInt32BE(t),t+=4,rsoa.decode.bytes=t-r,n},rsoa.decode.bytes=0,rsoa.encodingLength=function(e){return 22+name.encodingLength(e.mname)+name.encodingLength(e.rname)};const rtxt=_$dnsPacket_5.txt={};rtxt.encode=function(e,t,r){Array.isArray(e)||(e=[e]);for(let o=0;o<e.length;o++)if("string"==typeof e[o]&&(e[o]=Buffer.from(e[o])),!Buffer.isBuffer(e[o]))throw new Error("Must be a Buffer");t||(t=Buffer.alloc(rtxt.encodingLength(e))),r||(r=0);const n=r;return r+=2,e.forEach((function(e){t[r++]=e.length,e.copy(t,r,0,e.length),r+=e.length})),t.writeUInt16BE(r-n-2,n),rtxt.encode.bytes=r-n,t},rtxt.encode.bytes=0,rtxt.decode=function(e,t){t||(t=0);const r=t;let n=e.readUInt16BE(t);t+=2;let o=[];for(;n>0;){const r=e[t++];if(--n<r)throw new Error("Buffer overflow");o.push(e.slice(t,t+r)),t+=r,n-=r}return rtxt.decode.bytes=t-r,o},rtxt.decode.bytes=0,rtxt.encodingLength=function(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach((function(e){t+="string"==typeof e?Buffer.byteLength(e)+1:e.length+1})),t};const rnull=_$dnsPacket_5.null={};rnull.encode=function(e,t,r){t||(t=Buffer.alloc(rnull.encodingLength(e))),r||(r=0),"string"==typeof e&&(e=Buffer.from(e)),e||(e=Buffer.alloc(0));const n=r;r+=2;const o=e.length;return e.copy(t,r,0,o),r+=o,t.writeUInt16BE(r-n-2,n),rnull.encode.bytes=r-n,t},rnull.encode.bytes=0,rnull.decode=function(e,t){t||(t=0);const r=t,n=e.readUInt16BE(t);t+=2;const o=e.slice(t,t+n);return t+=n,rnull.decode.bytes=t-r,o},rnull.decode.bytes=0,rnull.encodingLength=function(e){return e?(Buffer.isBuffer(e)?e.length:Buffer.byteLength(e))+2:2};const rhinfo=_$dnsPacket_5.hinfo={};rhinfo.encode=function(e,t,r){t||(t=Buffer.alloc(rhinfo.encodingLength(e))),r||(r=0);const n=r;return r+=2,string.encode(e.cpu,t,r),r+=string.encode.bytes,string.encode(e.os,t,r),r+=string.encode.bytes,t.writeUInt16BE(r-n-2,n),rhinfo.encode.bytes=r-n,t},rhinfo.encode.bytes=0,rhinfo.decode=function(e,t){t||(t=0);const r=t,n={};return t+=2,n.cpu=string.decode(e,t),t+=string.decode.bytes,n.os=string.decode(e,t),t+=string.decode.bytes,rhinfo.decode.bytes=t-r,n},rhinfo.decode.bytes=0,rhinfo.encodingLength=function(e){return string.encodingLength(e.cpu)+string.encodingLength(e.os)+2};const rptr=_$dnsPacket_5.ptr={},rcname=_$dnsPacket_5.cname=rptr,rdname=_$dnsPacket_5.dname=rptr;rptr.encode=function(e,t,r){return t||(t=Buffer.alloc(rptr.encodingLength(e))),r||(r=0),name.encode(e,t,r+2),t.writeUInt16BE(name.encode.bytes,r),rptr.encode.bytes=name.encode.bytes+2,t},rptr.encode.bytes=0,rptr.decode=function(e,t){t||(t=0);const r=name.decode(e,t+2);return rptr.decode.bytes=name.decode.bytes+2,r},rptr.decode.bytes=0,rptr.encodingLength=function(e){return name.encodingLength(e)+2};const rsrv=_$dnsPacket_5.srv={};rsrv.encode=function(e,t,r){t||(t=Buffer.alloc(rsrv.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.priority||0,r+2),t.writeUInt16BE(e.weight||0,r+4),t.writeUInt16BE(e.port||0,r+6),name.encode(e.target,t,r+8);const n=name.encode.bytes+6;return t.writeUInt16BE(n,r),rsrv.encode.bytes=n+2,t},rsrv.encode.bytes=0,rsrv.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),n={};return n.priority=e.readUInt16BE(t+2),n.weight=e.readUInt16BE(t+4),n.port=e.readUInt16BE(t+6),n.target=name.decode(e,t+8),rsrv.decode.bytes=r+2,n},rsrv.decode.bytes=0,rsrv.encodingLength=function(e){return 8+name.encodingLength(e.target)};const rcaa=_$dnsPacket_5.caa={};rcaa.ISSUER_CRITICAL=128,rcaa.encode=function(e,t,r){const n=rcaa.encodingLength(e);return t||(t=Buffer.alloc(rcaa.encodingLength(e))),r||(r=0),e.issuerCritical&&(e.flags=rcaa.ISSUER_CRITICAL),t.writeUInt16BE(n-2,r),r+=2,t.writeUInt8(e.flags||0,r),r+=1,string.encode(e.tag,t,r),r+=string.encode.bytes,t.write(e.value,r),r+=Buffer.byteLength(e.value),rcaa.encode.bytes=n,t},rcaa.encode.bytes=0,rcaa.decode=function(e,t){t||(t=0);const r=e.readUInt16BE(t),n=t+=2,o={};return o.flags=e.readUInt8(t),t+=1,o.tag=string.decode(e,t),t+=string.decode.bytes,o.value=e.toString("utf-8",t,n+r),o.issuerCritical=!!(o.flags&rcaa.ISSUER_CRITICAL),rcaa.decode.bytes=r+2,o},rcaa.decode.bytes=0,rcaa.encodingLength=function(e){return string.encodingLength(e.tag)+string.encodingLength(e.value)+2};const rmx=_$dnsPacket_5.mx={};rmx.encode=function(e,t,r){t||(t=Buffer.alloc(rmx.encodingLength(e))),r||(r=0);const n=r;return r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,name.encode(e.exchange,t,r),r+=name.encode.bytes,t.writeUInt16BE(r-n-2,n),rmx.encode.bytes=r-n,t},rmx.encode.bytes=0,rmx.decode=function(e,t){t||(t=0);const r=t,n={};return t+=2,n.preference=e.readUInt16BE(t),t+=2,n.exchange=name.decode(e,t),t+=name.decode.bytes,rmx.decode.bytes=t-r,n},rmx.encodingLength=function(e){return 4+name.encodingLength(e.exchange)};const ra=_$dnsPacket_5.a={};ra.encode=function(e,t,r){return t||(t=Buffer.alloc(ra.encodingLength(e))),r||(r=0),t.writeUInt16BE(4,r),r+=2,_$index_1.v4.encode(e,t,r),ra.encode.bytes=6,t},ra.encode.bytes=0,ra.decode=function(e,t){t||(t=0),t+=2;const r=_$index_1.v4.decode(e,t);return ra.decode.bytes=6,r},ra.decode.bytes=0,ra.encodingLength=function(){return 6};const raaaa=_$dnsPacket_5.aaaa={};raaaa.encode=function(e,t,r){return t||(t=Buffer.alloc(raaaa.encodingLength(e))),r||(r=0),t.writeUInt16BE(16,r),r+=2,_$index_1.v6.encode(e,t,r),raaaa.encode.bytes=18,t},raaaa.encode.bytes=0,raaaa.decode=function(e,t){t||(t=0),t+=2;const r=_$index_1.v6.decode(e,t);return raaaa.decode.bytes=18,r},raaaa.decode.bytes=0,raaaa.encodingLength=function(){return 18};const roption=_$dnsPacket_5.option={};roption.encode=function(e,t,r){t||(t=Buffer.alloc(roption.encodingLength(e))),r||(r=0);const n=r,o=_$optioncodes_7.toCode(e.code);if(t.writeUInt16BE(o,r),r+=2,e.data)t.writeUInt16BE(e.data.length,r),r+=2,e.data.copy(t,r),r+=e.data.length;else switch(o){case 8:const n=e.sourcePrefixLength||0,o=e.family||_$index_1.familyOf(e.ip),s=_$index_1.encode(e.ip,Buffer.alloc),i=Math.ceil(n/8);t.writeUInt16BE(i+4,r),r+=2,t.writeUInt16BE(o,r),r+=2,t.writeUInt8(n,r++),t.writeUInt8(e.scopePrefixLength||0,r++),s.copy(t,r,0,i),r+=i;break;case 11:e.timeout?(t.writeUInt16BE(2,r),r+=2,t.writeUInt16BE(e.timeout,r),r+=2):(t.writeUInt16BE(0,r),r+=2);break;case 12:const a=e.length||0;t.writeUInt16BE(a,r),r+=2,t.fill(0,r,r+a),r+=a;break;case 14:const u=2*e.tags.length;t.writeUInt16BE(u,r),r+=2;for(const c of e.tags)t.writeUInt16BE(c,r),r+=2;break;default:throw new Error("Unknown roption code: "+e.code)}return roption.encode.bytes=r-n,t},roption.encode.bytes=0,roption.decode=function(e,t){t||(t=0);const r={};r.code=e.readUInt16BE(t),r.type=_$optioncodes_7.toString(r.code),t+=2;const n=e.readUInt16BE(t);switch(t+=2,r.data=e.slice(t,t+n),r.code){case 8:r.family=e.readUInt16BE(t),t+=2,r.sourcePrefixLength=e.readUInt8(t++),r.scopePrefixLength=e.readUInt8(t++);const o=Buffer.alloc(1===r.family?4:16);e.copy(o,0,t,t+n-4),r.ip=_$index_1.decode(o);break;case 11:n>0&&(r.timeout=e.readUInt16BE(t),t+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(e.readUInt16BE(t)),t+=2}return roption.decode.bytes=n+4,r},roption.decode.bytes=0,roption.encodingLength=function(e){if(e.data)return e.data.length+4;switch(_$optioncodes_7.toCode(e.code)){case 8:const t=e.sourcePrefixLength||0;return Math.ceil(t/8)+8;case 11:return"number"==typeof e.timeout?6:4;case 12:return e.length+4;case 14:return 4+2*e.tags.length}throw new Error("Unknown roption code: "+e.code)};const ropt=_$dnsPacket_5.opt={};ropt.encode=function(e,t,r){t||(t=Buffer.alloc(ropt.encodingLength(e))),r||(r=0);const n=r,o=encodingLengthList(e,roption);return t.writeUInt16BE(o,r),r=encodeList(e,roption,t,r+2),ropt.encode.bytes=r-n,t},ropt.encode.bytes=0,ropt.decode=function(e,t){t||(t=0);const r=t,n=[];let o=e.readUInt16BE(t);t+=2;let s=0;for(;o>0;)n[s++]=roption.decode(e,t),t+=roption.decode.bytes,o-=roption.decode.bytes;return ropt.decode.bytes=t-r,n},ropt.decode.bytes=0,ropt.encodingLength=function(e){return 2+encodingLengthList(e||[],roption)};const rdnskey=_$dnsPacket_5.dnskey={};rdnskey.PROTOCOL_DNSSEC=3,rdnskey.ZONE_KEY=128,rdnskey.SECURE_ENTRYPOINT=32768,rdnskey.encode=function(e,t,r){t||(t=Buffer.alloc(rdnskey.encodingLength(e))),r||(r=0);const n=r,o=e.key;if(!Buffer.isBuffer(o))throw new Error("Key must be a Buffer");return r+=2,t.writeUInt16BE(e.flags,r),r+=2,t.writeUInt8(rdnskey.PROTOCOL_DNSSEC,r),r+=1,t.writeUInt8(e.algorithm,r),r+=1,o.copy(t,r,0,o.length),r+=o.length,rdnskey.encode.bytes=r-n,t.writeUInt16BE(rdnskey.encode.bytes-2,n),t},rdnskey.encode.bytes=0,rdnskey.decode=function(e,t){t||(t=0);const r=t;var n={},o=e.readUInt16BE(t);if(t+=2,n.flags=e.readUInt16BE(t),t+=2,e.readUInt8(t)!==rdnskey.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,n.algorithm=e.readUInt8(t),t+=1,n.key=e.slice(t,r+o+2),t+=n.key.length,rdnskey.decode.bytes=t-r,n},rdnskey.decode.bytes=0,rdnskey.encodingLength=function(e){return 6+Buffer.byteLength(e.key)};const rrrsig=_$dnsPacket_5.rrsig={};rrrsig.encode=function(e,t,r){t||(t=Buffer.alloc(rrrsig.encodingLength(e))),r||(r=0);const n=r,o=e.signature;if(!Buffer.isBuffer(o))throw new Error("Signature must be a Buffer");return r+=2,t.writeUInt16BE(_$types_9.toType(e.typeCovered),r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.labels,r),r+=1,t.writeUInt32BE(e.originalTTL,r),r+=4,t.writeUInt32BE(e.expiration,r),r+=4,t.writeUInt32BE(e.inception,r),r+=4,t.writeUInt16BE(e.keyTag,r),r+=2,name.encode(e.signersName,t,r),r+=name.encode.bytes,o.copy(t,r,0,o.length),r+=o.length,rrrsig.encode.bytes=r-n,t.writeUInt16BE(rrrsig.encode.bytes-2,n),t},rrrsig.encode.bytes=0,rrrsig.decode=function(e,t){t||(t=0);const r=t;var n={},o=e.readUInt16BE(t);return t+=2,n.typeCovered=_$types_9.toString(e.readUInt16BE(t)),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.labels=e.readUInt8(t),t+=1,n.originalTTL=e.readUInt32BE(t),t+=4,n.expiration=e.readUInt32BE(t),t+=4,n.inception=e.readUInt32BE(t),t+=4,n.keyTag=e.readUInt16BE(t),t+=2,n.signersName=name.decode(e,t),t+=name.decode.bytes,n.signature=e.slice(t,r+o+2),t+=n.signature.length,rrrsig.decode.bytes=t-r,n},rrrsig.decode.bytes=0,rrrsig.encodingLength=function(e){return 20+name.encodingLength(e.signersName)+Buffer.byteLength(e.signature)};const rrp=_$dnsPacket_5.rp={};rrp.encode=function(e,t,r){t||(t=Buffer.alloc(rrp.encodingLength(e))),r||(r=0);const n=r;return r+=2,name.encode(e.mbox||".",t,r,{mail:!0}),r+=name.encode.bytes,name.encode(e.txt||".",t,r),r+=name.encode.bytes,rrp.encode.bytes=r-n,t.writeUInt16BE(rrp.encode.bytes-2,n),t},rrp.encode.bytes=0,rrp.decode=function(e,t){t||(t=0);const r=t,n={};return t+=2,n.mbox=name.decode(e,t,{mail:!0})||".",t+=name.decode.bytes,n.txt=name.decode(e,t)||".",t+=name.decode.bytes,rrp.decode.bytes=t-r,n},rrp.decode.bytes=0,rrp.encodingLength=function(e){return 2+name.encodingLength(e.mbox||".")+name.encodingLength(e.txt||".")};const typebitmap={encode:function(e,t,r){t||(t=Buffer.alloc(typebitmap.encodingLength(e))),r||(r=0);const n=r;for(var o=[],s=0;s<e.length;s++){var i=_$types_9.toType(e[s]);void 0===o[i>>8]&&(o[i>>8]=[]),o[i>>8][i>>3&31]|=1<<7-(7&i)}for(s=0;s<o.length;s++)if(void 0!==o[s]){var a=Buffer.from(o[s]);t.writeUInt8(s,r),r+=1,t.writeUInt8(a.length,r),r+=1,a.copy(t,r),r+=a.length}return typebitmap.encode.bytes=r-n,t}};typebitmap.encode.bytes=0,typebitmap.decode=function(e,t,r){t||(t=0);const n=t;for(var o=[];t-n<r;){var s=e.readUInt8(t);t+=1;var i=e.readUInt8(t);t+=1;for(var a=0;a<i;a++)for(var u=e.readUInt8(t+a),c=0;c<8;c++)if(u&1<<7-c){var l=_$types_9.toString(s<<8|a<<3|c);o.push(l)}t+=i}return typebitmap.decode.bytes=t-n,o},typebitmap.decode.bytes=0,typebitmap.encodingLength=function(e){for(var t=[],r=0;r<e.length;r++){var n=_$types_9.toType(e[r]);t[n>>8]=Math.max(t[n>>8]||0,255&n)}var o=0;for(r=0;r<t.length;r++)void 0!==t[r]&&(o+=2+Math.ceil((t[r]+1)/8));return o};const rnsec=_$dnsPacket_5.nsec={};rnsec.encode=function(e,t,r){t||(t=Buffer.alloc(rnsec.encodingLength(e))),r||(r=0);const n=r;return r+=2,name.encode(e.nextDomain,t,r),r+=name.encode.bytes,typebitmap.encode(e.rrtypes,t,r),r+=typebitmap.encode.bytes,rnsec.encode.bytes=r-n,t.writeUInt16BE(rnsec.encode.bytes-2,n),t},rnsec.encode.bytes=0,rnsec.decode=function(e,t){t||(t=0);const r=t;var n={},o=e.readUInt16BE(t);return t+=2,n.nextDomain=name.decode(e,t),t+=name.decode.bytes,n.rrtypes=typebitmap.decode(e,t,o-(t-r)),t+=typebitmap.decode.bytes,rnsec.decode.bytes=t-r,n},rnsec.decode.bytes=0,rnsec.encodingLength=function(e){return 2+name.encodingLength(e.nextDomain)+typebitmap.encodingLength(e.rrtypes)};const rnsec3=_$dnsPacket_5.nsec3={};rnsec3.encode=function(e,t,r){t||(t=Buffer.alloc(rnsec3.encodingLength(e))),r||(r=0);const n=r,o=e.salt;if(!Buffer.isBuffer(o))throw new Error("salt must be a Buffer");const s=e.nextDomain;if(!Buffer.isBuffer(s))throw new Error("nextDomain must be a Buffer");return r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.flags,r),r+=1,t.writeUInt16BE(e.iterations,r),r+=2,t.writeUInt8(o.length,r),r+=1,o.copy(t,r,0,o.length),r+=o.length,t.writeUInt8(s.length,r),r+=1,s.copy(t,r,0,s.length),r+=s.length,typebitmap.encode(e.rrtypes,t,r),r+=typebitmap.encode.bytes,rnsec3.encode.bytes=r-n,t.writeUInt16BE(rnsec3.encode.bytes-2,n),t},rnsec3.encode.bytes=0,rnsec3.decode=function(e,t){t||(t=0);const r=t;var n={},o=e.readUInt16BE(t);t+=2,n.algorithm=e.readUInt8(t),t+=1,n.flags=e.readUInt8(t),t+=1,n.iterations=e.readUInt16BE(t),t+=2;const s=e.readUInt8(t);t+=1,n.salt=e.slice(t,t+s),t+=s;const i=e.readUInt8(t);return t+=1,n.nextDomain=e.slice(t,t+i),t+=i,n.rrtypes=typebitmap.decode(e,t,o-(t-r)),t+=typebitmap.decode.bytes,rnsec3.decode.bytes=t-r,n},rnsec3.decode.bytes=0,rnsec3.encodingLength=function(e){return 8+e.salt.length+e.nextDomain.length+typebitmap.encodingLength(e.rrtypes)};const rds=_$dnsPacket_5.ds={};rds.encode=function(e,t,r){t||(t=Buffer.alloc(rds.encodingLength(e))),r||(r=0);const n=r,o=e.digest;if(!Buffer.isBuffer(o))throw new Error("Digest must be a Buffer");return r+=2,t.writeUInt16BE(e.keyTag,r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.digestType,r),r+=1,o.copy(t,r,0,o.length),r+=o.length,rds.encode.bytes=r-n,t.writeUInt16BE(rds.encode.bytes-2,n),t},rds.encode.bytes=0,rds.decode=function(e,t){t||(t=0);const r=t;var n={},o=e.readUInt16BE(t);return t+=2,n.keyTag=e.readUInt16BE(t),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.digestType=e.readUInt8(t),t+=1,n.digest=e.slice(t,r+o+2),t+=n.digest.length,rds.decode.bytes=t-r,n},rds.decode.bytes=0,rds.encodingLength=function(e){return 6+Buffer.byteLength(e.digest)};const rsshfp=_$dnsPacket_5.sshfp={};rsshfp.getFingerprintLengthForHashType=function(e){switch(e){case 1:return 20;case 2:return 32}},rsshfp.encode=function(e,t,r){t||(t=Buffer.alloc(rsshfp.encodingLength(e))),r||(r=0);const n=r;t[r+=2]=e.algorithm,t[r+=1]=e.hash,r+=1;const o=Buffer.from(e.fingerprint.toUpperCase(),"hex");if(o.length!==rsshfp.getFingerprintLengthForHashType(e.hash))throw new Error("Invalid fingerprint length");return o.copy(t,r),r+=o.byteLength,rsshfp.encode.bytes=r-n,t.writeUInt16BE(rsshfp.encode.bytes-2,n),t},rsshfp.encode.bytes=0,rsshfp.decode=function(e,t){t||(t=0);const r=t,n={};t+=2,n.algorithm=e[t],t+=1,n.hash=e[t],t+=1;const o=rsshfp.getFingerprintLengthForHashType(n.hash);return n.fingerprint=e.slice(t,t+o).toString("hex").toUpperCase(),t+=o,rsshfp.decode.bytes=t-r,n},rsshfp.decode.bytes=0,rsshfp.encodingLength=function(e){return 4+Buffer.from(e.fingerprint,"hex").byteLength};const rnaptr=_$dnsPacket_5.naptr={};rnaptr.encode=function(e,t,r){t||(t=Buffer.alloc(rnaptr.encodingLength(e))),r||(r=0);const n=r;return r+=2,t.writeUInt16BE(e.order||0,r),r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,string.encode(e.flags,t,r),r+=string.encode.bytes,string.encode(e.services,t,r),r+=string.encode.bytes,string.encode(e.regexp,t,r),r+=string.encode.bytes,name.encode(e.replacement,t,r),r+=name.encode.bytes,rnaptr.encode.bytes=r-n,t.writeUInt16BE(rnaptr.encode.bytes-2,n),t},rnaptr.encode.bytes=0,rnaptr.decode=function(e,t){t||(t=0);const r=t,n={};return t+=2,n.order=e.readUInt16BE(t),t+=2,n.preference=e.readUInt16BE(t),t+=2,n.flags=string.decode(e,t),t+=string.decode.bytes,n.services=string.decode(e,t),t+=string.decode.bytes,n.regexp=string.decode(e,t),t+=string.decode.bytes,n.replacement=name.decode(e,t),t+=name.decode.bytes,rnaptr.decode.bytes=t-r,n},rnaptr.decode.bytes=0,rnaptr.encodingLength=function(e){return string.encodingLength(e.flags)+string.encodingLength(e.services)+string.encodingLength(e.regexp)+name.encodingLength(e.replacement)+6};const rtlsa=_$dnsPacket_5.tlsa={};rtlsa.encode=function(e,t,r){t||(t=Buffer.alloc(rtlsa.encodingLength(e))),r||(r=0);const n=r,o=e.certificate;if(!Buffer.isBuffer(o))throw new Error("Certificate must be a Buffer");return r+=2,t.writeUInt8(e.usage,r),r+=1,t.writeUInt8(e.selector,r),r+=1,t.writeUInt8(e.matchingType,r),r+=1,o.copy(t,r,0,o.length),r+=o.length,rtlsa.encode.bytes=r-n,t.writeUInt16BE(rtlsa.encode.bytes-2,n),t},rtlsa.encode.bytes=0,rtlsa.decode=function(e,t){t||(t=0);const r=t,n={},o=e.readUInt16BE(t);return t+=2,n.usage=e.readUInt8(t),t+=1,n.selector=e.readUInt8(t),t+=1,n.matchingType=e.readUInt8(t),t+=1,n.certificate=e.slice(t,r+o+2),t+=n.certificate.length,rtlsa.decode.bytes=t-r,n},rtlsa.decode.bytes=0,rtlsa.encodingLength=function(e){return 5+Buffer.byteLength(e.certificate)};const renc=_$dnsPacket_5.record=function(e){switch(e.toUpperCase()){case"A":return ra;case"PTR":return rptr;case"CNAME":return rcname;case"DNAME":return rdname;case"TXT":return rtxt;case"NULL":return rnull;case"AAAA":return raaaa;case"SRV":return rsrv;case"HINFO":return rhinfo;case"CAA":return rcaa;case"NS":return rns;case"SOA":return rsoa;case"MX":return rmx;case"OPT":return ropt;case"DNSKEY":return rdnskey;case"RRSIG":return rrrsig;case"RP":return rrp;case"NSEC":return rnsec;case"NSEC3":return rnsec3;case"SSHFP":return rsshfp;case"DS":return rds;case"NAPTR":return rnaptr;case"TLSA":return rtlsa}return runknown},answer=_$dnsPacket_5.answer={};answer.encode=function(e,t,r){t||(t=Buffer.alloc(answer.encodingLength(e))),r||(r=0);const n=r;if(name.encode(e.name,t,r),r+=name.encode.bytes,t.writeUInt16BE(_$types_9.toType(e.type),r),"OPT"===e.type.toUpperCase()){if("."!==e.name)throw new Error("OPT name must be root.");t.writeUInt16BE(e.udpPayloadSize||4096,r+2),t.writeUInt8(e.extendedRcode||0,r+4),t.writeUInt8(e.ednsVersion||0,r+5),t.writeUInt16BE(e.flags||0,r+6),r+=8,ropt.encode(e.options||[],t,r),r+=ropt.encode.bytes}else{let n=_$classes_4.toClass(void 0===e.class?"IN":e.class);e.flush&&(n|=32768),t.writeUInt16BE(n,r+2),t.writeUInt32BE(e.ttl||0,r+4),r+=8;const o=renc(e.type);o.encode(e.data,t,r),r+=o.encode.bytes}return answer.encode.bytes=r-n,t},answer.encode.bytes=0,answer.decode=function(e,t){t||(t=0);const r={},n=t;if(r.name=name.decode(e,t),t+=name.decode.bytes,r.type=_$types_9.toString(e.readUInt16BE(t)),"OPT"===r.type)r.udpPayloadSize=e.readUInt16BE(t+2),r.extendedRcode=e.readUInt8(t+4),r.ednsVersion=e.readUInt8(t+5),r.flags=e.readUInt16BE(t+6),r.flag_do=1==(r.flags>>15&1),r.options=ropt.decode(e,t+8),t+=8+ropt.decode.bytes;else{const n=e.readUInt16BE(t+2);r.ttl=e.readUInt32BE(t+4),r.class=_$classes_4.toString(-32769&n),r.flush=!!(32768&n);const o=renc(r.type);r.data=o.decode(e,t+8),t+=8+o.decode.bytes}return answer.decode.bytes=t-n,r},answer.decode.bytes=0,answer.encodingLength=function(e){const t=null!==e.data&&void 0!==e.data?e.data:e.options;return name.encodingLength(e.name)+8+renc(e.type).encodingLength(t)};const question=_$dnsPacket_5.question={};function encodingLengthList(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function encodeList(e,t,r,n){for(let o=0;o<e.length;o++)t.encode(e[o],r,n),n+=t.encode.bytes;return n}function decodeList(e,t,r,n){for(let o=0;o<e.length;o++)e[o]=t.decode(r,n),n+=t.decode.bytes;return n}question.encode=function(e,t,r){t||(t=Buffer.alloc(question.encodingLength(e))),r||(r=0);const n=r;return name.encode(e.name,t,r),r+=name.encode.bytes,t.writeUInt16BE(_$types_9.toType(e.type),r),r+=2,t.writeUInt16BE(_$classes_4.toClass(void 0===e.class?"IN":e.class),r),r+=2,question.encode.bytes=r-n,e},question.encode.bytes=0,question.decode=function(e,t){t||(t=0);const r=t,n={};return n.name=name.decode(e,t),t+=name.decode.bytes,n.type=_$types_9.toString(e.readUInt16BE(t)),t+=2,n.class=_$classes_4.toString(e.readUInt16BE(t)),t+=2,!!(32768&n.class)&&(n.class&=-32769),question.decode.bytes=t-r,n},question.decode.bytes=0,question.encodingLength=function(e){return name.encodingLength(e.name)+4},_$dnsPacket_5.AUTHORITATIVE_ANSWER=1024,_$dnsPacket_5.TRUNCATED_RESPONSE=512,_$dnsPacket_5.RECURSION_DESIRED=256,_$dnsPacket_5.RECURSION_AVAILABLE=128,_$dnsPacket_5.AUTHENTIC_DATA=32,_$dnsPacket_5.CHECKING_DISABLED=16,_$dnsPacket_5.DNSSEC_OK=32768,_$dnsPacket_5.encode=function(e,t,r){const n=!t;n&&(t=Buffer.alloc(_$dnsPacket_5.encodingLength(e))),r||(r=0);const o=r;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),header.encode(e,t,r),r+=header.encode.bytes,r=encodeList(e.questions,question,t,r),r=encodeList(e.answers,answer,t,r),r=encodeList(e.authorities,answer,t,r),r=encodeList(e.additionals,answer,t,r),_$dnsPacket_5.encode.bytes=r-o,n&&_$dnsPacket_5.encode.bytes!==t.length?t.slice(0,_$dnsPacket_5.encode.bytes):t},_$dnsPacket_5.encode.bytes=0,_$dnsPacket_5.decode=function(e,t){t||(t=0);const r=t,n=header.decode(e,t);return t+=header.decode.bytes,t=decodeList(n.questions,question,e,t),t=decodeList(n.answers,answer,e,t),t=decodeList(n.authorities,answer,e,t),t=decodeList(n.additionals,answer,e,t),_$dnsPacket_5.decode.bytes=t-r,n},_$dnsPacket_5.decode.bytes=0,_$dnsPacket_5.encodingLength=function(e){return header.encodingLength(e)+encodingLengthList(e.questions||[],question)+encodingLengthList(e.answers||[],answer)+encodingLengthList(e.authorities||[],answer)+encodingLengthList(e.additionals||[],answer)},_$dnsPacket_5.streamEncode=function(e){const t=_$dnsPacket_5.encode(e),r=Buffer.alloc(2);r.writeUInt16BE(t.byteLength);const n=Buffer.concat([r,t]);return _$dnsPacket_5.streamEncode.bytes=n.byteLength,n},_$dnsPacket_5.streamEncode.bytes=0,_$dnsPacket_5.streamDecode=function(e){const t=e.readUInt16BE(0);if(e.byteLength<t+2)return null;const r=_$dnsPacket_5.decode(e.slice(2));return _$dnsPacket_5.streamDecode.bytes=_$dnsPacket_5.decode.bytes,r},_$dnsPacket_5.streamDecode.bytes=0;var _$dns_123={};Object.defineProperty(_$dns_123,"__esModule",{value:!0}),_$dns_123.doh=function(e){return _doh.apply(this,arguments)};var ___app_123=___interopRequireDefault_123(_$app_87),_dnsPacket=___interopRequireDefault_123(_$dnsPacket_5),_buffer=_$buffer_3({});function ___interopRequireDefault_123(e){return e&&e.__esModule?e:{default:e}}function ___typeof_123(e){return(___typeof_123="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ___regeneratorRuntime_123(){___regeneratorRuntime_123=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_123(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __asyncGeneratorStep_123(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function _doh(){var e;return e=___regeneratorRuntime_123().mark((function e(t){var r,n,o,s,i,a,u,c;return ___regeneratorRuntime_123().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.domain,o=t.type,s=void 0===o?"A":o,i=t.timeout,a=t.edns,u=_dnsPacket.default.encode({type:"query",id:0,flags:_dnsPacket.default.RECURSION_DESIRED,questions:[{type:s,name:n}],additionals:[{type:"OPT",name:".",udpPayloadSize:4096,flags:0,options:[{code:"CLIENT_SUBNET",ip:a,sourcePrefixLength:24,scopePrefixLength:0}]}]}),e.next=4,___app_123.default.http.get({url:"".concat(r,"?dns=").concat(u.toString("base64").toString("utf-8").replace(/=/g,"")),headers:{Accept:"application/dns-message"},"binary-mode":!0,encoding:null,timeout:i});case 4:return c=e.sent,e.abrupt("return",_dnsPacket.default.decode(_buffer.Buffer.from(___app_123.default.env.isQX?c.bodyBytes:c.body)));case 6:case"end":return e.stop()}}),e)})),(_doh=function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_123(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_123(s,n,o,i,a,"throw",e)}i(void 0)}))}).apply(this,arguments)}var _$lodash_53={exports:{}};(function(e){(function(){(function(){var t="Expected a function",r="__lodash_placeholder__",n=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],o="[object Arguments]",s="[object Array]",i="[object Boolean]",a="[object Date]",u="[object Error]",c="[object Function]",l="[object GeneratorFunction]",p="[object Map]",f="[object Number]",h="[object Object]",d="[object RegExp]",_="[object Set]",g="[object String]",y="[object Symbol]",v="[object WeakMap]",m="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",A="[object Int16Array]",S="[object Int32Array]",C="[object Uint8Array]",P="[object Uint16Array]",I="[object Uint32Array]",F=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,O=/[&<>"']/g,T=RegExp($.source),D=RegExp(O.source),B=/<%-([\s\S]+?)%>/g,j=/<%([\s\S]+?)%>/g,N=/<%=([\s\S]+?)%>/g,L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/[\\^$.*+?()[\]{}|]/g,q=RegExp(M.source),V=/^\s+/,K=/\s/,G=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,z=/\{\n\/\* \[wrapped with (.+)\] \*/,Y=/,? & /,W=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,X=/[()=,{}\[\]\/\s]/,J=/\\(\\)?/g,Z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Q=/\w*$/,ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,re=/^\[object .+?Constructor\]$/,ne=/^0o[0-7]+$/i,oe=/^(?:0|[1-9]\d*)$/,se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ie=/($^)/,ae=/['\n\r\u2028\u2029\\]/g,ue="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",le="["+ce+"]",pe="["+ue+"]",fe="\\d+",he="[a-z\\xdf-\\xf6\\xf8-\\xff]",de="[^\\ud800-\\udfff"+ce+fe+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",_e="\\ud83c[\\udffb-\\udfff]",ge="[^\\ud800-\\udfff]",ye="(?:\\ud83c[\\udde6-\\uddff]){2}",ve="[\\ud800-\\udbff][\\udc00-\\udfff]",me="[A-Z\\xc0-\\xd6\\xd8-\\xde]",be="(?:"+he+"|"+de+")",we="(?:"+me+"|"+de+")",Ee="(?:"+pe+"|"+_e+")?",xe="[\\ufe0e\\ufe0f]?"+Ee+"(?:\\u200d(?:"+[ge,ye,ve].join("|")+")[\\ufe0e\\ufe0f]?"+Ee+")*",Ae="(?:"+["[\\u2700-\\u27bf]",ye,ve].join("|")+")"+xe,Se="(?:"+[ge+pe+"?",pe,ye,ve,"[\\ud800-\\udfff]"].join("|")+")",Ce=RegExp("['\u2019]","g"),Pe=RegExp(pe,"g"),Ie=RegExp(_e+"(?="+_e+")|"+Se+xe,"g"),Fe=RegExp([me+"?"+he+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[le,me,"$"].join("|")+")",we+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[le,me+be,"$"].join("|")+")",me+"?"+be+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",me+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fe,Ae].join("|"),"g"),ke=RegExp("[\\u200d\\ud800-\\udfff"+ue+"\\ufe0e\\ufe0f]"),Re=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$e=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Oe=-1,Te={};Te[w]=Te[E]=Te[x]=Te[A]=Te[S]=Te[C]=Te["[object Uint8ClampedArray]"]=Te[P]=Te[I]=!0,Te[o]=Te[s]=Te[m]=Te[i]=Te[b]=Te[a]=Te[u]=Te[c]=Te[p]=Te[f]=Te[h]=Te[d]=Te[_]=Te[g]=Te[v]=!1;var De={};De[o]=De[s]=De[m]=De[b]=De[i]=De[a]=De[w]=De[E]=De[x]=De[A]=De[S]=De[p]=De[f]=De[h]=De[d]=De[_]=De[g]=De[y]=De[C]=De["[object Uint8ClampedArray]"]=De[P]=De[I]=!0,De[u]=De[c]=De[v]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},je=parseFloat,Ne=parseInt,Le="object"==typeof e&&e&&e.Object===Object&&e,Ue="object"==typeof self&&self&&self.Object===Object&&self,He=Le||Ue||Function("return this")(),Me="object"==typeof _$lodash_53.exports&&_$lodash_53.exports&&!_$lodash_53.exports.nodeType&&_$lodash_53.exports,qe=Me&&_$lodash_53&&!_$lodash_53.nodeType&&_$lodash_53,Ve=qe&&qe.exports===Me,Ke=Ve&&Le.process,Ge=function(){try{return qe&&qe.require&&qe.require("util").types||Ke&&Ke.binding&&Ke.binding("util")}catch(e){}}(),ze=Ge&&Ge.isArrayBuffer,Ye=Ge&&Ge.isDate,We=Ge&&Ge.isMap,Xe=Ge&&Ge.isRegExp,Je=Ge&&Ge.isSet,Ze=Ge&&Ge.isTypedArray;function Qe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function et(e,t,r,n){for(var o=-1,s=null==e?0:e.length;++o<s;){var i=e[o];t(n,i,r(i),e)}return n}function tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function rt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function nt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function ot(e,t){for(var r=-1,n=null==e?0:e.length,o=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[o++]=i)}return s}function st(e,t){return!(null==e||!e.length)&&_t(e,t,0)>-1}function it(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function at(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function ut(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function ct(e,t,r,n){var o=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++o]);++o<s;)r=t(r,e[o],o,e);return r}function lt(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}function pt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var ft=mt("length");function ht(e,t,r){var n;return r(e,(function(e,r,o){if(t(e,r,o))return n=r,!1})),n}function dt(e,t,r,n){for(var o=e.length,s=r+(n?1:-1);n?s--:++s<o;)if(t(e[s],s,e))return s;return-1}function _t(e,t,r){return t==t?function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):dt(e,yt,r)}function gt(e,t,r,n){for(var o=r-1,s=e.length;++o<s;)if(n(e[o],t))return o;return-1}function yt(e){return e!=e}function vt(e,t){var r=null==e?0:e.length;return r?Et(e,t)/r:NaN}function mt(e){return function(t){return null==t?void 0:t[e]}}function bt(e){return function(t){return null==e?void 0:e[t]}}function wt(e,t,r,n,o){return o(e,(function(e,o,s){r=n?(n=!1,e):t(r,e,o,s)})),r}function Et(e,t){for(var r,n=-1,o=e.length;++n<o;){var s=t(e[n]);void 0!==s&&(r=void 0===r?s:r+s)}return r}function xt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function At(e){return e?e.slice(0,Ht(e)+1).replace(V,""):e}function St(e){return function(t){return e(t)}}function Ct(e,t){return at(t,(function(t){return e[t]}))}function Pt(e,t){return e.has(t)}function It(e,t){for(var r=-1,n=e.length;++r<n&&_t(t,e[r],0)>-1;);return r}function Ft(e,t){for(var r=e.length;r--&&_t(t,e[r],0)>-1;);return r}var kt=bt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Rt=bt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $t(e){return"\\"+Be[e]}function Ot(e){return ke.test(e)}function Tt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function Dt(e,t){return function(r){return e(t(r))}}function Bt(e,t){for(var n=-1,o=e.length,s=0,i=[];++n<o;){var a=e[n];a!==t&&a!==r||(e[n]=r,i[s++]=n)}return i}function jt(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function Nt(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function Lt(e){return Ot(e)?function(e){for(var t=Ie.lastIndex=0;Ie.test(e);)++t;return t}(e):ft(e)}function Ut(e){return Ot(e)?function(e){return e.match(Ie)||[]}(e):function(e){return e.split("")}(e)}function Ht(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t}var Mt=bt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),qt=function e(K){var ue,ce=(K=null==K?He:qt.defaults(He.Object(),K,qt.pick(He,$e))).Array,le=K.Date,pe=K.Error,fe=K.Function,he=K.Math,de=K.Object,_e=K.RegExp,ge=K.String,ye=K.TypeError,ve=ce.prototype,me=fe.prototype,be=de.prototype,we=K["__core-js_shared__"],Ee=me.toString,xe=be.hasOwnProperty,Ae=0,Se=(ue=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",Ie=be.toString,ke=Ee.call(de),Be=He._,Le=_e("^"+Ee.call(xe).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=Ve?K.Buffer:void 0,Me=K.Symbol,qe=K.Uint8Array,Ke=Ue?Ue.allocUnsafe:void 0,Ge=Dt(de.getPrototypeOf,de),ft=de.create,bt=be.propertyIsEnumerable,Vt=ve.splice,Kt=Me?Me.isConcatSpreadable:void 0,Gt=Me?Me.iterator:void 0,zt=Me?Me.toStringTag:void 0,Yt=function(){try{var e=Qo(de,"defineProperty");return e({},"",{}),e}catch(t){}}(),Wt=K.clearTimeout!==He.clearTimeout&&K.clearTimeout,Xt=le&&le.now!==He.Date.now&&le.now,Jt=K.setTimeout!==He.setTimeout&&K.setTimeout,Zt=he.ceil,Qt=he.floor,er=de.getOwnPropertySymbols,tr=Ue?Ue.isBuffer:void 0,rr=K.isFinite,nr=ve.join,or=Dt(de.keys,de),sr=he.max,ir=he.min,ar=le.now,ur=K.parseInt,cr=he.random,lr=ve.reverse,pr=Qo(K,"DataView"),fr=Qo(K,"Map"),hr=Qo(K,"Promise"),dr=Qo(K,"Set"),_r=Qo(K,"WeakMap"),gr=Qo(de,"create"),yr=_r&&new _r,vr={},mr=Ss(pr),br=Ss(fr),wr=Ss(hr),Er=Ss(dr),xr=Ss(_r),Ar=Me?Me.prototype:void 0,Sr=Ar?Ar.valueOf:void 0,Cr=Ar?Ar.toString:void 0;function Pr(e){if(Mi(e)&&!Ri(e)&&!(e instanceof Rr)){if(e instanceof kr)return e;if(xe.call(e,"__wrapped__"))return Cs(e)}return new kr(e)}var Ir=function(){function e(){}return function(t){if(!Hi(t))return{};if(ft)return ft(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Fr(){}function kr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Rr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Or(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Dr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Tr;++t<r;)this.add(e[t])}function Br(e){var t=this.__data__=new Or(e);this.size=t.size}function jr(e,t){var r=Ri(e),n=!r&&ki(e),o=!r&&!n&&Di(e),s=!r&&!n&&!o&&Xi(e),i=r||n||o||s,a=i?xt(e.length,ge):[],u=a.length;for(var c in e)!t&&!xe.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||is(c,u))||a.push(c);return a}function Nr(e){var t=e.length;return t?e[Dn(0,t-1)]:void 0}function Lr(e,t){return Es(yo(e),Yr(t,0,e.length))}function Ur(e){return Es(yo(e))}function Hr(e,t,r){(void 0===r||Pi(e[t],r))&&(void 0!==r||t in e)||Gr(e,t,r)}function Mr(e,t,r){var n=e[t];xe.call(e,t)&&Pi(n,r)&&(void 0!==r||t in e)||Gr(e,t,r)}function qr(e,t){for(var r=e.length;r--;)if(Pi(e[r][0],t))return r;return-1}function Vr(e,t,r,n){return Qr(e,(function(e,o,s){t(n,e,r(e),s)})),n}function Kr(e,t){return e&&vo(t,va(t),e)}function Gr(e,t,r){"__proto__"==t&&Yt?Yt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function zr(e,t){for(var r=-1,n=t.length,o=ce(n),s=null==e;++r<n;)o[r]=s?void 0:ha(e,t[r]);return o}function Yr(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function Wr(e,t,r,n,s,u){var v,F=1&t,k=2&t,R=4&t;if(r&&(v=s?r(e,n,s,u):r(e)),void 0!==v)return v;if(!Hi(e))return e;var $=Ri(e);if($){if(v=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&xe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!F)return yo(e,v)}else{var O=rs(e),T=O==c||O==l;if(Di(e))return lo(e,F);if(O==h||O==o||T&&!s){if(v=k||T?{}:os(e),!F)return k?function(e,t){return vo(e,ts(e),t)}(e,function(e,t){return e&&vo(t,ma(t),e)}(v,e)):function(e,t){return vo(e,es(e),t)}(e,Kr(v,e))}else{if(!De[O])return s?e:{};v=function(e,t,r){var n,o,s,u=e.constructor;switch(t){case m:return po(e);case i:case a:return new u(+e);case b:return function(e,t){var r=t?po(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case w:case E:case x:case A:case S:case C:case"[object Uint8ClampedArray]":case P:case I:return fo(e,r);case p:return new u;case f:case g:return new u(e);case d:return(s=new(o=e).constructor(o.source,Q.exec(o))).lastIndex=o.lastIndex,s;case _:return new u;case y:return n=e,Sr?de(Sr.call(n)):{}}}(e,O,F)}}u||(u=new Br);var D=u.get(e);if(D)return D;u.set(e,v),zi(e)?e.forEach((function(n){v.add(Wr(n,t,r,n,e,u))})):qi(e)&&e.forEach((function(n,o){v.set(o,Wr(n,t,r,o,e,u))}));var B=$?void 0:(R?k?Go:Ko:k?ma:va)(e);return tt(B||e,(function(n,o){B&&(n=e[o=n]),Mr(v,o,Wr(n,t,r,o,e,u))})),v}function Xr(e,t,r){var n=r.length;if(null==e)return!n;for(e=de(e);n--;){var o=r[n],s=t[o],i=e[o];if(void 0===i&&!(o in e)||!s(i))return!1}return!0}function Jr(e,r,n){if("function"!=typeof e)throw new ye(t);return vs((function(){e.apply(void 0,n)}),r)}function Zr(e,t,r,n){var o=-1,s=st,i=!0,a=e.length,u=[],c=t.length;if(!a)return u;r&&(t=at(t,St(r))),n?(s=it,i=!1):t.length>=200&&(s=Pt,i=!1,t=new Dr(t));e:for(;++o<a;){var l=e[o],p=null==r?l:r(l);if(l=n||0!==l?l:0,i&&p==p){for(var f=c;f--;)if(t[f]===p)continue e;u.push(l)}else s(t,p,n)||u.push(l)}return u}Pr.templateSettings={escape:B,evaluate:j,interpolate:N,variable:"",imports:{_:Pr}},Pr.prototype=Fr.prototype,Pr.prototype.constructor=Pr,kr.prototype=Ir(Fr.prototype),kr.prototype.constructor=kr,Rr.prototype=Ir(Fr.prototype),Rr.prototype.constructor=Rr,$r.prototype.clear=function(){this.__data__=gr?gr(null):{},this.size=0},$r.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$r.prototype.get=function(e){var t=this.__data__;if(gr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return xe.call(t,e)?t[e]:void 0},$r.prototype.has=function(e){var t=this.__data__;return gr?void 0!==t[e]:xe.call(t,e)},$r.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gr&&void 0===t?"__lodash_hash_undefined__":t,this},Or.prototype.clear=function(){this.__data__=[],this.size=0},Or.prototype.delete=function(e){var t=this.__data__,r=qr(t,e);return!(r<0||(r==t.length-1?t.pop():Vt.call(t,r,1),--this.size,0))},Or.prototype.get=function(e){var t=this.__data__,r=qr(t,e);return r<0?void 0:t[r][1]},Or.prototype.has=function(e){return qr(this.__data__,e)>-1},Or.prototype.set=function(e,t){var r=this.__data__,n=qr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Tr.prototype.clear=function(){this.size=0,this.__data__={hash:new $r,map:new(fr||Or),string:new $r}},Tr.prototype.delete=function(e){var t=Jo(this,e).delete(e);return this.size-=t?1:0,t},Tr.prototype.get=function(e){return Jo(this,e).get(e)},Tr.prototype.has=function(e){return Jo(this,e).has(e)},Tr.prototype.set=function(e,t){var r=Jo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Dr.prototype.add=Dr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Dr.prototype.has=function(e){return this.__data__.has(e)},Br.prototype.clear=function(){this.__data__=new Or,this.size=0},Br.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Br.prototype.get=function(e){return this.__data__.get(e)},Br.prototype.has=function(e){return this.__data__.has(e)},Br.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Or){var n=r.__data__;if(!fr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Tr(n)}return r.set(e,t),this.size=r.size,this};var Qr=wo(un),en=wo(cn,!0);function tn(e,t){var r=!0;return Qr(e,(function(e,n,o){return r=!!t(e,n,o)})),r}function rn(e,t,r){for(var n=-1,o=e.length;++n<o;){var s=e[n],i=t(s);if(null!=i&&(void 0===a?i==i&&!Wi(i):r(i,a)))var a=i,u=s}return u}function nn(e,t){var r=[];return Qr(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function on(e,t,r,n,o){var s=-1,i=e.length;for(r||(r=ss),o||(o=[]);++s<i;){var a=e[s];t>0&&r(a)?t>1?on(a,t-1,r,n,o):ut(o,a):n||(o[o.length]=a)}return o}var sn=Eo(),an=Eo(!0);function un(e,t){return e&&sn(e,t,va)}function cn(e,t){return e&&an(e,t,va)}function ln(e,t){return ot(t,(function(t){return Ni(e[t])}))}function pn(e,t){for(var r=0,n=(t=io(t,e)).length;null!=e&&r<n;)e=e[As(t[r++])];return r&&r==n?e:void 0}function fn(e,t,r){var n=t(e);return Ri(e)?n:ut(n,r(e))}function hn(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":zt&&zt in de(e)?function(e){var t=xe.call(e,zt),r=e[zt];try{e[zt]=void 0;var n=!0}catch(s){}var o=Ie.call(e);return n&&(t?e[zt]=r:delete e[zt]),o}(e):function(e){return Ie.call(e)}(e)}function dn(e,t){return e>t}function _n(e,t){return null!=e&&xe.call(e,t)}function gn(e,t){return null!=e&&t in de(e)}function yn(e,t,r){for(var n=r?it:st,o=e[0].length,s=e.length,i=s,a=ce(s),u=1/0,c=[];i--;){var l=e[i];i&&t&&(l=at(l,St(t))),u=ir(l.length,u),a[i]=!r&&(t||o>=120&&l.length>=120)?new Dr(i&&l):void 0}l=e[0];var p=-1,f=a[0];e:for(;++p<o&&c.length<u;){var h=l[p],d=t?t(h):h;if(h=r||0!==h?h:0,!(f?Pt(f,d):n(c,d,r))){for(i=s;--i;){var _=a[i];if(!(_?Pt(_,d):n(e[i],d,r)))continue e}f&&f.push(d),c.push(h)}}return c}function vn(e,t,r){var n=null==(e=_s(e,t=io(t,e)))?e:e[As(js(t))];return null==n?void 0:Qe(n,e,r)}function mn(e){return Mi(e)&&hn(e)==o}function bn(e,t,r,n,c){return e===t||(null==e||null==t||!Mi(e)&&!Mi(t)?e!=e&&t!=t:function(e,t,r,n,c,l){var v=Ri(e),w=Ri(t),E=v?s:rs(e),x=w?s:rs(t),A=(E=E==o?h:E)==h,S=(x=x==o?h:x)==h,C=E==x;if(C&&Di(e)){if(!Di(t))return!1;v=!0,A=!1}if(C&&!A)return l||(l=new Br),v||Xi(e)?qo(e,t,r,n,c,l):function(e,t,r,n,o,s,c){switch(r){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case m:return!(e.byteLength!=t.byteLength||!s(new qe(e),new qe(t)));case i:case a:case f:return Pi(+e,+t);case u:return e.name==t.name&&e.message==t.message;case d:case g:return e==t+"";case p:var l=Tt;case _:var h=1&n;if(l||(l=jt),e.size!=t.size&&!h)return!1;var v=c.get(e);if(v)return v==t;n|=2,c.set(e,t);var w=qo(l(e),l(t),n,o,s,c);return c.delete(e),w;case y:if(Sr)return Sr.call(e)==Sr.call(t)}return!1}(e,t,E,r,n,c,l);if(!(1&r)){var P=A&&xe.call(e,"__wrapped__"),I=S&&xe.call(t,"__wrapped__");if(P||I){var F=P?e.value():e,k=I?t.value():t;return l||(l=new Br),c(F,k,r,n,l)}}return!!C&&(l||(l=new Br),function(e,t,r,n,o,s){var i=1&r,a=Ko(e),u=a.length;if(u!=Ko(t).length&&!i)return!1;for(var c=u;c--;){var l=a[c];if(!(i?l in t:xe.call(t,l)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var h=!0;s.set(e,t),s.set(t,e);for(var d=i;++c<u;){var _=e[l=a[c]],g=t[l];if(n)var y=i?n(g,_,l,t,e,s):n(_,g,l,e,t,s);if(!(void 0===y?_===g||o(_,g,r,n,s):y)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var v=e.constructor,m=t.constructor;v!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,n,c,l))}(e,t,r,n,bn,c))}function wn(e,t,r,n){var o=r.length,s=o,i=!n;if(null==e)return!s;for(e=de(e);o--;){var a=r[o];if(i&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<s;){var u=(a=r[o])[0],c=e[u],l=a[1];if(i&&a[2]){if(void 0===c&&!(u in e))return!1}else{var p=new Br;if(n)var f=n(c,l,u,e,t,p);if(!(void 0===f?bn(l,c,3,n,p):f))return!1}}return!0}function En(e){return!(!Hi(e)||(t=e,Se&&Se in t))&&(Ni(e)?Le:re).test(Ss(e));var t}function xn(e){return"function"==typeof e?e:null==e?Va:"object"==typeof e?Ri(e)?In(e[0],e[1]):Pn(e):Qa(e)}function An(e){if(!ps(e))return or(e);var t=[];for(var r in de(e))xe.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Sn(e,t){return e<t}function Cn(e,t){var r=-1,n=Oi(e)?ce(e.length):[];return Qr(e,(function(e,o,s){n[++r]=t(e,o,s)})),n}function Pn(e){var t=Zo(e);return 1==t.length&&t[0][2]?hs(t[0][0],t[0][1]):function(r){return r===e||wn(r,e,t)}}function In(e,t){return us(e)&&fs(t)?hs(As(e),t):function(r){var n=ha(r,e);return void 0===n&&n===t?da(r,e):bn(t,n,3)}}function Fn(e,t,r,n,o){e!==t&&sn(t,(function(s,i){if(o||(o=new Br),Hi(s))!function(e,t,r,n,o,s,i){var a=gs(e,r),u=gs(t,r),c=i.get(u);if(c)Hr(e,r,c);else{var l=s?s(a,u,r+"",e,t,i):void 0,p=void 0===l;if(p){var f=Ri(u),h=!f&&Di(u),d=!f&&!h&&Xi(u);l=u,f||h||d?Ri(a)?l=a:Ti(a)?l=yo(a):h?(p=!1,l=lo(u,!0)):d?(p=!1,l=fo(u,!0)):l=[]:Ki(u)||ki(u)?(l=a,ki(a)?l=oa(a):Hi(a)&&!Ni(a)||(l=os(u))):p=!1}p&&(i.set(u,l),o(l,u,n,s,i),i.delete(u)),Hr(e,r,l)}}(e,t,i,r,Fn,n,o);else{var a=n?n(gs(e,i),s,i+"",e,t,o):void 0;void 0===a&&(a=s),Hr(e,i,a)}}),ma)}function kn(e,t){var r=e.length;if(r)return is(t+=t<0?r:0,r)?e[t]:void 0}function Rn(e,t,r){t=t.length?at(t,(function(e){return Ri(e)?function(t){return pn(t,1===e.length?e[0]:e)}:e})):[Va];var n=-1;return t=at(t,St(Xo())),function(e,t){var n=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var n=-1,o=e.criteria,s=t.criteria,i=o.length,a=r.length;++n<i;){var u=ho(o[n],s[n]);if(u)return n>=a?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}));n--;)e[n]=e[n].value;return e}(Cn(e,(function(e,r,o){return{criteria:at(t,(function(t){return t(e)})),index:++n,value:e}})))}function $n(e,t,r){for(var n=-1,o=t.length,s={};++n<o;){var i=t[n],a=pn(e,i);r(a,i)&&Un(s,io(i,e),a)}return s}function On(e,t,r,n){var o=n?gt:_t,s=-1,i=t.length,a=e;for(e===t&&(t=yo(t)),r&&(a=at(e,St(r)));++s<i;)for(var u=0,c=t[s],l=r?r(c):c;(u=o(a,l,u,n))>-1;)a!==e&&Vt.call(a,u,1),Vt.call(e,u,1);return e}function Tn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==s){var s=o;is(o)?Vt.call(e,o,1):Zn(e,o)}}return e}function Dn(e,t){return e+Qt(cr()*(t-e+1))}function Bn(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=Qt(t/2))&&(e+=e)}while(t);return r}function jn(e,t){return ms(ds(e,t,Va),e+"")}function Nn(e){return Nr(Pa(e))}function Ln(e,t){var r=Pa(e);return Es(r,Yr(t,0,r.length))}function Un(e,t,r,n){if(!Hi(e))return e;for(var o=-1,s=(t=io(t,e)).length,i=s-1,a=e;null!=a&&++o<s;){var u=As(t[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=i){var l=a[u];void 0===(c=n?n(l,u,a):void 0)&&(c=Hi(l)?l:is(t[o+1])?[]:{})}Mr(a,u,c),a=a[u]}return e}var Hn=yr?function(e,t){return yr.set(e,t),e}:Va,Mn=Yt?function(e,t){return Yt(e,"toString",{configurable:!0,enumerable:!1,value:Ha(t),writable:!0})}:Va;function qn(e){return Es(Pa(e))}function Vn(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=ce(o);++n<o;)s[n]=e[n+t];return s}function Kn(e,t){var r;return Qr(e,(function(e,n,o){return!(r=t(e,n,o))})),!!r}function Gn(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var s=n+o>>>1,i=e[s];null!==i&&!Wi(i)&&(r?i<=t:i<t)?n=s+1:o=s}return o}return zn(e,t,Va,r)}function zn(e,t,r,n){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var i=(t=r(t))!=t,a=null===t,u=Wi(t),c=void 0===t;o<s;){var l=Qt((o+s)/2),p=r(e[l]),f=void 0!==p,h=null===p,d=p==p,_=Wi(p);if(i)var g=n||d;else g=c?d&&(n||f):a?d&&f&&(n||!h):u?d&&f&&!h&&(n||!_):!h&&!_&&(n?p<=t:p<t);g?o=l+1:s=l}return ir(s,4294967294)}function Yn(e,t){for(var r=-1,n=e.length,o=0,s=[];++r<n;){var i=e[r],a=t?t(i):i;if(!r||!Pi(a,u)){var u=a;s[o++]=0===i?0:i}}return s}function Wn(e){return"number"==typeof e?e:Wi(e)?NaN:+e}function Xn(e){if("string"==typeof e)return e;if(Ri(e))return at(e,Xn)+"";if(Wi(e))return Cr?Cr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Jn(e,t,r){var n=-1,o=st,s=e.length,i=!0,a=[],u=a;if(r)i=!1,o=it;else if(s>=200){var c=t?null:jo(e);if(c)return jt(c);i=!1,o=Pt,u=new Dr}else u=t?[]:a;e:for(;++n<s;){var l=e[n],p=t?t(l):l;if(l=r||0!==l?l:0,i&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue e;t&&u.push(p),a.push(l)}else o(u,p,r)||(u!==a&&u.push(p),a.push(l))}return a}function Zn(e,t){return null==(e=_s(e,t=io(t,e)))||delete e[As(js(t))]}function Qn(e,t,r,n){return Un(e,t,r(pn(e,t)),n)}function eo(e,t,r,n){for(var o=e.length,s=n?o:-1;(n?s--:++s<o)&&t(e[s],s,e););return r?Vn(e,n?0:s,n?s+1:o):Vn(e,n?s+1:0,n?o:s)}function to(e,t){var r=e;return r instanceof Rr&&(r=r.value()),ct(t,(function(e,t){return t.func.apply(t.thisArg,ut([e],t.args))}),r)}function ro(e,t,r){var n=e.length;if(n<2)return n?Jn(e[0]):[];for(var o=-1,s=ce(n);++o<n;)for(var i=e[o],a=-1;++a<n;)a!=o&&(s[o]=Zr(s[o]||i,e[a],t,r));return Jn(on(s,1),t,r)}function no(e,t,r){for(var n=-1,o=e.length,s=t.length,i={};++n<o;){var a=n<s?t[n]:void 0;r(i,e[n],a)}return i}function oo(e){return Ti(e)?e:[]}function so(e){return"function"==typeof e?e:Va}function io(e,t){return Ri(e)?e:us(e,t)?[e]:xs(sa(e))}var ao=jn;function uo(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Vn(e,t,r)}var co=Wt||function(e){return He.clearTimeout(e)};function lo(e,t){if(t)return e.slice();var r=e.length,n=Ke?Ke(r):new e.constructor(r);return e.copy(n),n}function po(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function fo(e,t){var r=t?po(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ho(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,s=Wi(e),i=void 0!==t,a=null===t,u=t==t,c=Wi(t);if(!a&&!c&&!s&&e>t||s&&i&&u&&!a&&!c||n&&i&&u||!r&&u||!o)return 1;if(!n&&!s&&!c&&e<t||c&&r&&o&&!n&&!s||a&&r&&o||!i&&o||!u)return-1}return 0}function _o(e,t,r,n){for(var o=-1,s=e.length,i=r.length,a=-1,u=t.length,c=sr(s-i,0),l=ce(u+c),p=!n;++a<u;)l[a]=t[a];for(;++o<i;)(p||o<s)&&(l[r[o]]=e[o]);for(;c--;)l[a++]=e[o++];return l}function go(e,t,r,n){for(var o=-1,s=e.length,i=-1,a=r.length,u=-1,c=t.length,l=sr(s-a,0),p=ce(l+c),f=!n;++o<l;)p[o]=e[o];for(var h=o;++u<c;)p[h+u]=t[u];for(;++i<a;)(f||o<s)&&(p[h+r[i]]=e[o++]);return p}function yo(e,t){var r=-1,n=e.length;for(t||(t=ce(n));++r<n;)t[r]=e[r];return t}function vo(e,t,r,n){var o=!r;r||(r={});for(var s=-1,i=t.length;++s<i;){var a=t[s],u=n?n(r[a],e[a],a,r,e):void 0;void 0===u&&(u=e[a]),o?Gr(r,a,u):Mr(r,a,u)}return r}function mo(e,t){return function(r,n){var o=Ri(r)?et:Vr,s=t?t():{};return o(r,e,Xo(n,2),s)}}function bo(e){return jn((function(t,r){var n=-1,o=r.length,s=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,i&&as(r[0],r[1],i)&&(s=o<3?void 0:s,o=1),t=de(t);++n<o;){var a=r[n];a&&e(t,a,n,s)}return t}))}function wo(e,t){return function(r,n){if(null==r)return r;if(!Oi(r))return e(r,n);for(var o=r.length,s=t?o:-1,i=de(r);(t?s--:++s<o)&&!1!==n(i[s],s,i););return r}}function Eo(e){return function(t,r,n){for(var o=-1,s=de(t),i=n(t),a=i.length;a--;){var u=i[e?a:++o];if(!1===r(s[u],u,s))break}return t}}function xo(e){return function(t){var r=Ot(t=sa(t))?Ut(t):void 0,n=r?r[0]:t.charAt(0),o=r?uo(r,1).join(""):t.slice(1);return n[e]()+o}}function Ao(e){return function(t){return ct(Na(ka(t).replace(Ce,"")),e,"")}}function So(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ir(e.prototype),n=e.apply(r,t);return Hi(n)?n:r}}function Co(e){return function(t,r,n){var o=de(t);if(!Oi(t)){var s=Xo(r,3);t=va(t),r=function(e){return s(o[e],e,o)}}var i=e(t,r,n);return i>-1?o[s?t[i]:i]:void 0}}function Po(e){return Vo((function(r){var n=r.length,o=n,s=kr.prototype.thru;for(e&&r.reverse();o--;){var i=r[o];if("function"!=typeof i)throw new ye(t);if(s&&!a&&"wrapper"==Yo(i))var a=new kr([],!0)}for(o=a?o:n;++o<n;){var u=Yo(i=r[o]),c="wrapper"==u?zo(i):void 0;a=c&&cs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?a[Yo(c[0])].apply(a,c[3]):1==i.length&&cs(i)?a[u]():a.thru(i)}return function(){var e=arguments,t=e[0];if(a&&1==e.length&&Ri(t))return a.plant(t).value();for(var o=0,s=n?r[o].apply(this,e):t;++o<n;)s=r[o].call(this,s);return s}}))}function Io(e,t,r,n,o,s,i,a,u,c){var l=128&t,p=1&t,f=2&t,h=24&t,d=512&t,_=f?void 0:So(e);return function g(){for(var y=arguments.length,v=ce(y),m=y;m--;)v[m]=arguments[m];if(h)var b=Wo(g),w=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,b);if(n&&(v=_o(v,n,o,h)),s&&(v=go(v,s,i,h)),y-=w,h&&y<c){var E=Bt(v,b);return Do(e,t,Io,g.placeholder,r,v,E,a,u,c-y)}var x=p?r:this,A=f?x[e]:e;return y=v.length,a?v=function(e,t){for(var r=e.length,n=ir(t.length,r),o=yo(e);n--;){var s=t[n];e[n]=is(s,r)?o[s]:void 0}return e}(v,a):d&&y>1&&v.reverse(),l&&u<y&&(v.length=u),this&&this!==He&&this instanceof g&&(A=_||So(A)),A.apply(x,v)}}function Fo(e,t){return function(r,n){return function(e,t,r,n){return un(e,(function(e,o,s){t(n,r(e),o,s)})),n}(r,e,t(n),{})}}function ko(e,t){return function(r,n){var o;if(void 0===r&&void 0===n)return t;if(void 0!==r&&(o=r),void 0!==n){if(void 0===o)return n;"string"==typeof r||"string"==typeof n?(r=Xn(r),n=Xn(n)):(r=Wn(r),n=Wn(n)),o=e(r,n)}return o}}function Ro(e){return Vo((function(t){return t=at(t,St(Xo())),jn((function(r){var n=this;return e(t,(function(e){return Qe(e,n,r)}))}))}))}function $o(e,t){var r=(t=void 0===t?" ":Xn(t)).length;if(r<2)return r?Bn(t,e):t;var n=Bn(t,Zt(e/Lt(t)));return Ot(t)?uo(Ut(n),0,e).join(""):n.slice(0,e)}function Oo(e){return function(t,r,n){return n&&"number"!=typeof n&&as(t,r,n)&&(r=n=void 0),t=ea(t),void 0===r?(r=t,t=0):r=ea(r),function(e,t,r,n){for(var o=-1,s=sr(Zt((t-e)/(r||1)),0),i=ce(s);s--;)i[n?s:++o]=e,e+=r;return i}(t,r,n=void 0===n?t<r?1:-1:ea(n),e)}}function To(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=na(t),r=na(r)),e(t,r)}}function Do(e,t,r,n,o,s,i,a,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var p=[e,t,o,l?s:void 0,l?i:void 0,l?void 0:s,l?void 0:i,a,u,c],f=r.apply(void 0,p);return cs(e)&&ys(f,p),f.placeholder=n,bs(f,e,t)}function Bo(e){var t=he[e];return function(e,r){if(e=na(e),(r=null==r?0:ir(ta(r),292))&&rr(e)){var n=(sa(e)+"e").split("e");return+((n=(sa(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var jo=dr&&1/jt(new dr([,-0]))[1]==1/0?function(e){return new dr(e)}:Wa;function No(e){return function(t){var r=rs(t);return r==p?Tt(t):r==_?Nt(t):function(e,t){return at(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Lo(e,n,o,s,i,a,u,c){var l=2&n;if(!l&&"function"!=typeof e)throw new ye(t);var p=s?s.length:0;if(p||(n&=-97,s=i=void 0),u=void 0===u?u:sr(ta(u),0),c=void 0===c?c:ta(c),p-=i?i.length:0,64&n){var f=s,h=i;s=i=void 0}var d=l?void 0:zo(e),_=[e,n,o,s,i,f,h,a,u,c];if(d&&function(e,t){var n=e[1],o=t[1],s=n|o,i=s<131,a=128==o&&8==n||128==o&&256==n&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==n;if(!i&&!a)return e;1&o&&(e[2]=t[2],s|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?_o(c,u,t[4]):u,e[4]=c?Bt(e[3],r):t[4]}(u=t[5])&&(c=e[5],e[5]=c?go(c,u,t[6]):u,e[6]=c?Bt(e[5],r):t[6]),(u=t[7])&&(e[7]=u),128&o&&(e[8]=null==e[8]?t[8]:ir(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=s}(_,d),e=_[0],n=_[1],o=_[2],s=_[3],i=_[4],!(c=_[9]=void 0===_[9]?l?0:e.length:sr(_[9]-p,0))&&24&n&&(n&=-25),n&&1!=n)g=8==n||16==n?function(e,t,r){var n=So(e);return function o(){for(var s=arguments.length,i=ce(s),a=s,u=Wo(o);a--;)i[a]=arguments[a];var c=s<3&&i[0]!==u&&i[s-1]!==u?[]:Bt(i,u);return(s-=c.length)<r?Do(e,t,Io,o.placeholder,void 0,i,c,void 0,void 0,r-s):Qe(this&&this!==He&&this instanceof o?n:e,this,i)}}(e,n,c):32!=n&&33!=n||i.length?Io.apply(void 0,_):function(e,t,r,n){var o=1&t,s=So(e);return function t(){for(var i=-1,a=arguments.length,u=-1,c=n.length,l=ce(c+a),p=this&&this!==He&&this instanceof t?s:e;++u<c;)l[u]=n[u];for(;a--;)l[u++]=arguments[++i];return Qe(p,o?r:this,l)}}(e,n,o,s);else var g=function(e,t,r){var n=1&t,o=So(e);return function t(){return(this&&this!==He&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,n,o);return bs((d?Hn:ys)(g,_),e,n)}function Uo(e,t,r,n){return void 0===e||Pi(e,be[r])&&!xe.call(n,r)?t:e}function Ho(e,t,r,n,o,s){return Hi(e)&&Hi(t)&&(s.set(t,e),Fn(e,t,void 0,Ho,s),s.delete(t)),e}function Mo(e){return Ki(e)?void 0:e}function qo(e,t,r,n,o,s){var i=1&r,a=e.length,u=t.length;if(a!=u&&!(i&&u>a))return!1;var c=s.get(e),l=s.get(t);if(c&&l)return c==t&&l==e;var p=-1,f=!0,h=2&r?new Dr:void 0;for(s.set(e,t),s.set(t,e);++p<a;){var d=e[p],_=t[p];if(n)var g=i?n(_,d,p,t,e,s):n(d,_,p,e,t,s);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!pt(t,(function(e,t){if(!Pt(h,t)&&(d===e||o(d,e,r,n,s)))return h.push(t)}))){f=!1;break}}else if(d!==_&&!o(d,_,r,n,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Vo(e){return ms(ds(e,void 0,$s),e+"")}function Ko(e){return fn(e,va,es)}function Go(e){return fn(e,ma,ts)}var zo=yr?function(e){return yr.get(e)}:Wa;function Yo(e){for(var t=e.name+"",r=vr[t],n=xe.call(vr,t)?r.length:0;n--;){var o=r[n],s=o.func;if(null==s||s==e)return o.name}return t}function Wo(e){return(xe.call(Pr,"placeholder")?Pr:e).placeholder}function Xo(){var e=Pr.iteratee||Ka;return e=e===Ka?xn:e,arguments.length?e(arguments[0],arguments[1]):e}function Jo(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Zo(e){for(var t=va(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,fs(o)]}return t}function Qo(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return En(r)?r:void 0}var es=er?function(e){return null==e?[]:(e=de(e),ot(er(e),(function(t){return bt.call(e,t)})))}:ru,ts=er?function(e){for(var t=[];e;)ut(t,es(e)),e=Ge(e);return t}:ru,rs=hn;function ns(e,t,r){for(var n=-1,o=(t=io(t,e)).length,s=!1;++n<o;){var i=As(t[n]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++n!=o?s:!!(o=null==e?0:e.length)&&Ui(o)&&is(i,o)&&(Ri(e)||ki(e))}function os(e){return"function"!=typeof e.constructor||ps(e)?{}:Ir(Ge(e))}function ss(e){return Ri(e)||ki(e)||!!(Kt&&e&&e[Kt])}function is(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&oe.test(e))&&e>-1&&e%1==0&&e<t}function as(e,t,r){if(!Hi(r))return!1;var n=typeof t;return!!("number"==n?Oi(r)&&is(t,r.length):"string"==n&&t in r)&&Pi(r[t],e)}function us(e,t){if(Ri(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Wi(e))||U.test(e)||!L.test(e)||null!=t&&e in de(t)}function cs(e){var t=Yo(e),r=Pr[t];if("function"!=typeof r||!(t in Rr.prototype))return!1;if(e===r)return!0;var n=zo(r);return!!n&&e===n[0]}(pr&&rs(new pr(new ArrayBuffer(1)))!=b||fr&&rs(new fr)!=p||hr&&"[object Promise]"!=rs(hr.resolve())||dr&&rs(new dr)!=_||_r&&rs(new _r)!=v)&&(rs=function(e){var t=hn(e),r=t==h?e.constructor:void 0,n=r?Ss(r):"";if(n)switch(n){case mr:return b;case br:return p;case wr:return"[object Promise]";case Er:return _;case xr:return v}return t});var ls=we?Ni:nu;function ps(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||be)}function fs(e){return e==e&&!Hi(e)}function hs(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in de(r))}}function ds(e,t,r){return t=sr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,s=sr(n.length-t,0),i=ce(s);++o<s;)i[o]=n[t+o];o=-1;for(var a=ce(t+1);++o<t;)a[o]=n[o];return a[t]=r(i),Qe(e,this,a)}}function _s(e,t){return t.length<2?e:pn(e,Vn(t,0,-1))}function gs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ys=ws(Hn),vs=Jt||function(e,t){return He.setTimeout(e,t)},ms=ws(Mn);function bs(e,t,r){var o=t+"";return ms(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(G,"{\n/* [wrapped with "+t+"] */\n")}(o,function(e,t){return tt(n,(function(r){var n="_."+r[0];t&r[1]&&!st(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(z);return t?t[1].split(Y):[]}(o),r)))}function ws(e){var t=0,r=0;return function(){var n=ar(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Es(e,t){var r=-1,n=e.length,o=n-1;for(t=void 0===t?n:t;++r<t;){var s=Dn(r,o),i=e[s];e[s]=e[r],e[r]=i}return e.length=t,e}var xs=function(e){var t=wi((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(H,(function(e,r,n,o){t.push(n?o.replace(J,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}();function As(e){if("string"==typeof e||Wi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ss(e){if(null!=e){try{return Ee.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Cs(e){if(e instanceof Rr)return e.clone();var t=new kr(e.__wrapped__,e.__chain__);return t.__actions__=yo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ps=jn((function(e,t){return Ti(e)?Zr(e,on(t,1,Ti,!0)):[]})),Is=jn((function(e,t){var r=js(t);return Ti(r)&&(r=void 0),Ti(e)?Zr(e,on(t,1,Ti,!0),Xo(r,2)):[]})),Fs=jn((function(e,t){var r=js(t);return Ti(r)&&(r=void 0),Ti(e)?Zr(e,on(t,1,Ti,!0),void 0,r):[]}));function ks(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:ta(r);return o<0&&(o=sr(n+o,0)),dt(e,Xo(t,3),o)}function Rs(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return void 0!==r&&(o=ta(r),o=r<0?sr(n+o,0):ir(o,n-1)),dt(e,Xo(t,3),o,!0)}function $s(e){return null!=e&&e.length?on(e,1):[]}function Os(e){return e&&e.length?e[0]:void 0}var Ts=jn((function(e){var t=at(e,oo);return t.length&&t[0]===e[0]?yn(t):[]})),Ds=jn((function(e){var t=js(e),r=at(e,oo);return t===js(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?yn(r,Xo(t,2)):[]})),Bs=jn((function(e){var t=js(e),r=at(e,oo);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?yn(r,void 0,t):[]}));function js(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ns=jn(Ls);function Ls(e,t){return e&&e.length&&t&&t.length?On(e,t):e}var Us=Vo((function(e,t){var r=null==e?0:e.length,n=zr(e,t);return Tn(e,at(t,(function(e){return is(e,r)?+e:e})).sort(ho)),n}));function Hs(e){return null==e?e:lr.call(e)}var Ms=jn((function(e){return Jn(on(e,1,Ti,!0))})),qs=jn((function(e){var t=js(e);return Ti(t)&&(t=void 0),Jn(on(e,1,Ti,!0),Xo(t,2))})),Vs=jn((function(e){var t=js(e);return t="function"==typeof t?t:void 0,Jn(on(e,1,Ti,!0),void 0,t)}));function Ks(e){if(!e||!e.length)return[];var t=0;return e=ot(e,(function(e){if(Ti(e))return t=sr(e.length,t),!0})),xt(t,(function(t){return at(e,mt(t))}))}function Gs(e,t){if(!e||!e.length)return[];var r=Ks(e);return null==t?r:at(r,(function(e){return Qe(t,void 0,e)}))}var zs=jn((function(e,t){return Ti(e)?Zr(e,t):[]})),Ys=jn((function(e){return ro(ot(e,Ti))})),Ws=jn((function(e){var t=js(e);return Ti(t)&&(t=void 0),ro(ot(e,Ti),Xo(t,2))})),Xs=jn((function(e){var t=js(e);return t="function"==typeof t?t:void 0,ro(ot(e,Ti),void 0,t)})),Js=jn(Ks),Zs=jn((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,Gs(e,r)}));function Qs(e){var t=Pr(e);return t.__chain__=!0,t}function ei(e,t){return t(e)}var ti=Vo((function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,o=function(t){return zr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Rr&&is(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:ei,args:[o],thisArg:void 0}),new kr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(o)})),ri=mo((function(e,t,r){xe.call(e,r)?++e[r]:Gr(e,r,1)})),ni=Co(ks),oi=Co(Rs);function si(e,t){return(Ri(e)?tt:Qr)(e,Xo(t,3))}function ii(e,t){return(Ri(e)?rt:en)(e,Xo(t,3))}var ai=mo((function(e,t,r){xe.call(e,r)?e[r].push(t):Gr(e,r,[t])})),ui=jn((function(e,t,r){var n=-1,o="function"==typeof t,s=Oi(e)?ce(e.length):[];return Qr(e,(function(e){s[++n]=o?Qe(t,e,r):vn(e,t,r)})),s})),ci=mo((function(e,t,r){Gr(e,r,t)}));function li(e,t){return(Ri(e)?at:Cn)(e,Xo(t,3))}var pi=mo((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),fi=jn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&as(e,t[0],t[1])?t=[]:r>2&&as(t[0],t[1],t[2])&&(t=[t[0]]),Rn(e,on(t,1),[])})),hi=Xt||function(){return He.Date.now()};function di(e,t,r){return t=r?void 0:t,Lo(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function _i(e,r){var n;if("function"!=typeof r)throw new ye(t);return e=ta(e),function(){return--e>0&&(n=r.apply(this,arguments)),e<=1&&(r=void 0),n}}var gi=jn((function(e,t,r){var n=1;if(r.length){var o=Bt(r,Wo(gi));n|=32}return Lo(e,n,t,r,o)})),yi=jn((function(e,t,r){var n=3;if(r.length){var o=Bt(r,Wo(yi));n|=32}return Lo(t,n,e,r,o)}));function vi(e,r,n){var o,s,i,a,u,c,l=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new ye(t);function d(t){var r=o,n=s;return o=s=void 0,l=t,a=e.apply(n,r)}function _(e){var t=e-c;return void 0===c||t>=r||t<0||f&&e-l>=i}function g(){var e=hi();if(_(e))return y(e);u=vs(g,function(e){var t=r-(e-c);return f?ir(t,i-(e-l)):t}(e))}function y(e){return u=void 0,h&&o?d(e):(o=s=void 0,a)}function v(){var e=hi(),t=_(e);if(o=arguments,s=this,c=e,t){if(void 0===u)return function(e){return l=e,u=vs(g,r),p?d(e):a}(c);if(f)return co(u),u=vs(g,r),d(c)}return void 0===u&&(u=vs(g,r)),a}return r=na(r)||0,Hi(n)&&(p=!!n.leading,i=(f="maxWait"in n)?sr(na(n.maxWait)||0,r):i,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==u&&co(u),l=0,o=c=s=u=void 0},v.flush=function(){return void 0===u?a:y(hi())},v}var mi=jn((function(e,t){return Jr(e,1,t)})),bi=jn((function(e,t,r){return Jr(e,na(t)||0,r)}));function wi(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new ye(t);var n=function(){var t=arguments,o=r?r.apply(this,t):t[0],s=n.cache;if(s.has(o))return s.get(o);var i=e.apply(this,t);return n.cache=s.set(o,i)||s,i};return n.cache=new(wi.Cache||Tr),n}function Ei(e){if("function"!=typeof e)throw new ye(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}wi.Cache=Tr;var xi=ao((function(e,t){var r=(t=1==t.length&&Ri(t[0])?at(t[0],St(Xo())):at(on(t,1),St(Xo()))).length;return jn((function(n){for(var o=-1,s=ir(n.length,r);++o<s;)n[o]=t[o].call(this,n[o]);return Qe(e,this,n)}))})),Ai=jn((function(e,t){return Lo(e,32,void 0,t,Bt(t,Wo(Ai)))})),Si=jn((function(e,t){return Lo(e,64,void 0,t,Bt(t,Wo(Si)))})),Ci=Vo((function(e,t){return Lo(e,256,void 0,void 0,void 0,t)}));function Pi(e,t){return e===t||e!=e&&t!=t}var Ii=To(dn),Fi=To((function(e,t){return e>=t})),ki=mn(function(){return arguments}())?mn:function(e){return Mi(e)&&xe.call(e,"callee")&&!bt.call(e,"callee")},Ri=ce.isArray,$i=ze?St(ze):function(e){return Mi(e)&&hn(e)==m};function Oi(e){return null!=e&&Ui(e.length)&&!Ni(e)}function Ti(e){return Mi(e)&&Oi(e)}var Di=tr||nu,Bi=Ye?St(Ye):function(e){return Mi(e)&&hn(e)==a};function ji(e){if(!Mi(e))return!1;var t=hn(e);return t==u||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ki(e)}function Ni(e){if(!Hi(e))return!1;var t=hn(e);return t==c||t==l||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Li(e){return"number"==typeof e&&e==ta(e)}function Ui(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Hi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Mi(e){return null!=e&&"object"==typeof e}var qi=We?St(We):function(e){return Mi(e)&&rs(e)==p};function Vi(e){return"number"==typeof e||Mi(e)&&hn(e)==f}function Ki(e){if(!Mi(e)||hn(e)!=h)return!1;var t=Ge(e);if(null===t)return!0;var r=xe.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ee.call(r)==ke}var Gi=Xe?St(Xe):function(e){return Mi(e)&&hn(e)==d},zi=Je?St(Je):function(e){return Mi(e)&&rs(e)==_};function Yi(e){return"string"==typeof e||!Ri(e)&&Mi(e)&&hn(e)==g}function Wi(e){return"symbol"==typeof e||Mi(e)&&hn(e)==y}var Xi=Ze?St(Ze):function(e){return Mi(e)&&Ui(e.length)&&!!Te[hn(e)]},Ji=To(Sn),Zi=To((function(e,t){return e<=t}));function Qi(e){if(!e)return[];if(Oi(e))return Yi(e)?Ut(e):yo(e);if(Gt&&e[Gt])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Gt]());var t=rs(e);return(t==p?Tt:t==_?jt:Pa)(e)}function ea(e){return e?(e=na(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ta(e){var t=ea(e),r=t%1;return t==t?r?t-r:t:0}function ra(e){return e?Yr(ta(e),0,4294967295):0}function na(e){if("number"==typeof e)return e;if(Wi(e))return NaN;if(Hi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Hi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=At(e);var r=te.test(e);return r||ne.test(e)?Ne(e.slice(2),r?2:8):ee.test(e)?NaN:+e}function oa(e){return vo(e,ma(e))}function sa(e){return null==e?"":Xn(e)}var ia=bo((function(e,t){if(ps(t)||Oi(t))vo(t,va(t),e);else for(var r in t)xe.call(t,r)&&Mr(e,r,t[r])})),aa=bo((function(e,t){vo(t,ma(t),e)})),ua=bo((function(e,t,r,n){vo(t,ma(t),e,n)})),ca=bo((function(e,t,r,n){vo(t,va(t),e,n)})),la=Vo(zr),pa=jn((function(e,t){e=de(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&as(t[0],t[1],o)&&(n=1);++r<n;)for(var s=t[r],i=ma(s),a=-1,u=i.length;++a<u;){var c=i[a],l=e[c];(void 0===l||Pi(l,be[c])&&!xe.call(e,c))&&(e[c]=s[c])}return e})),fa=jn((function(e){return e.push(void 0,Ho),Qe(wa,void 0,e)}));function ha(e,t,r){var n=null==e?void 0:pn(e,t);return void 0===n?r:n}function da(e,t){return null!=e&&ns(e,t,gn)}var _a=Fo((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),e[t]=r}),Ha(Va)),ga=Fo((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),xe.call(e,t)?e[t].push(r):e[t]=[r]}),Xo),ya=jn(vn);function va(e){return Oi(e)?jr(e):An(e)}function ma(e){return Oi(e)?jr(e,!0):function(e){if(!Hi(e))return function(e){var t=[];if(null!=e)for(var r in de(e))t.push(r);return t}(e);var t=ps(e),r=[];for(var n in e)("constructor"!=n||!t&&xe.call(e,n))&&r.push(n);return r}(e)}var ba=bo((function(e,t,r){Fn(e,t,r)})),wa=bo((function(e,t,r,n){Fn(e,t,r,n)})),Ea=Vo((function(e,t){var r={};if(null==e)return r;var n=!1;t=at(t,(function(t){return t=io(t,e),n||(n=t.length>1),t})),vo(e,Go(e),r),n&&(r=Wr(r,7,Mo));for(var o=t.length;o--;)Zn(r,t[o]);return r})),xa=Vo((function(e,t){return null==e?{}:function(e,t){return $n(e,t,(function(t,r){return da(e,r)}))}(e,t)}));function Aa(e,t){if(null==e)return{};var r=at(Go(e),(function(e){return[e]}));return t=Xo(t),$n(e,r,(function(e,r){return t(e,r[0])}))}var Sa=No(va),Ca=No(ma);function Pa(e){return null==e?[]:Ct(e,va(e))}var Ia=Ao((function(e,t,r){return t=t.toLowerCase(),e+(r?Fa(t):t)}));function Fa(e){return ja(sa(e).toLowerCase())}function ka(e){return(e=sa(e))&&e.replace(se,kt).replace(Pe,"")}var Ra=Ao((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),$a=Ao((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Oa=xo("toLowerCase"),Ta=Ao((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Da=Ao((function(e,t,r){return e+(r?" ":"")+ja(t)})),Ba=Ao((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),ja=xo("toUpperCase");function Na(e,t,r){return e=sa(e),void 0===(t=r?void 0:t)?function(e){return Re.test(e)}(e)?function(e){return e.match(Fe)||[]}(e):function(e){return e.match(W)||[]}(e):e.match(t)||[]}var La=jn((function(e,t){try{return Qe(e,void 0,t)}catch(r){return ji(r)?r:new pe(r)}})),Ua=Vo((function(e,t){return tt(t,(function(t){t=As(t),Gr(e,t,gi(e[t],e))})),e}));function Ha(e){return function(){return e}}var Ma=Po(),qa=Po(!0);function Va(e){return e}function Ka(e){return xn("function"==typeof e?e:Wr(e,1))}var Ga=jn((function(e,t){return function(r){return vn(r,e,t)}})),za=jn((function(e,t){return function(r){return vn(e,r,t)}}));function Ya(e,t,r){var n=va(t),o=ln(t,n);null!=r||Hi(t)&&(o.length||!n.length)||(r=t,t=e,e=this,o=ln(t,va(t)));var s=!(Hi(r)&&"chain"in r&&!r.chain),i=Ni(e);return tt(o,(function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=yo(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,ut([this.value()],arguments))})})),e}function Wa(){}var Xa=Ro(at),Ja=Ro(nt),Za=Ro(pt);function Qa(e){return us(e)?mt(As(e)):function(e){return function(t){return pn(t,e)}}(e)}var eu=Oo(),tu=Oo(!0);function ru(){return[]}function nu(){return!1}var ou,su=ko((function(e,t){return e+t}),0),iu=Bo("ceil"),au=ko((function(e,t){return e/t}),1),uu=Bo("floor"),cu=ko((function(e,t){return e*t}),1),lu=Bo("round"),pu=ko((function(e,t){return e-t}),0);return Pr.after=function(e,r){if("function"!=typeof r)throw new ye(t);return e=ta(e),function(){if(--e<1)return r.apply(this,arguments)}},Pr.ary=di,Pr.assign=ia,Pr.assignIn=aa,Pr.assignInWith=ua,Pr.assignWith=ca,Pr.at=la,Pr.before=_i,Pr.bind=gi,Pr.bindAll=Ua,Pr.bindKey=yi,Pr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ri(e)?e:[e]},Pr.chain=Qs,Pr.chunk=function(e,t,r){t=(r?as(e,t,r):void 0===t)?1:sr(ta(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,s=0,i=ce(Zt(n/t));o<n;)i[s++]=Vn(e,o,o+=t);return i},Pr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var s=e[t];s&&(o[n++]=s)}return o},Pr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ce(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return ut(Ri(r)?yo(r):[r],on(t,1))},Pr.cond=function(e){var r=null==e?0:e.length,n=Xo();return e=r?at(e,(function(e){if("function"!=typeof e[1])throw new ye(t);return[n(e[0]),e[1]]})):[],jn((function(t){for(var n=-1;++n<r;){var o=e[n];if(Qe(o[0],this,t))return Qe(o[1],this,t)}}))},Pr.conforms=function(e){return function(e){var t=va(e);return function(r){return Xr(r,e,t)}}(Wr(e,1))},Pr.constant=Ha,Pr.countBy=ri,Pr.create=function(e,t){var r=Ir(e);return null==t?r:Kr(r,t)},Pr.curry=function e(t,r,n){var o=Lo(t,8,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return o.placeholder=e.placeholder,o},Pr.curryRight=function e(t,r,n){var o=Lo(t,16,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return o.placeholder=e.placeholder,o},Pr.debounce=vi,Pr.defaults=pa,Pr.defaultsDeep=fa,Pr.defer=mi,Pr.delay=bi,Pr.difference=Ps,Pr.differenceBy=Is,Pr.differenceWith=Fs,Pr.drop=function(e,t,r){var n=null==e?0:e.length;return n?Vn(e,(t=r||void 0===t?1:ta(t))<0?0:t,n):[]},Pr.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?Vn(e,0,(t=n-(t=r||void 0===t?1:ta(t)))<0?0:t):[]},Pr.dropRightWhile=function(e,t){return e&&e.length?eo(e,Xo(t,3),!0,!0):[]},Pr.dropWhile=function(e,t){return e&&e.length?eo(e,Xo(t,3),!0):[]},Pr.fill=function(e,t,r,n){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&as(e,t,r)&&(r=0,n=o),function(e,t,r,n){var o=e.length;for((r=ta(r))<0&&(r=-r>o?0:o+r),(n=void 0===n||n>o?o:ta(n))<0&&(n+=o),n=r>n?0:ra(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Pr.filter=function(e,t){return(Ri(e)?ot:nn)(e,Xo(t,3))},Pr.flatMap=function(e,t){return on(li(e,t),1)},Pr.flatMapDeep=function(e,t){return on(li(e,t),1/0)},Pr.flatMapDepth=function(e,t,r){return r=void 0===r?1:ta(r),on(li(e,t),r)},Pr.flatten=$s,Pr.flattenDeep=function(e){return null!=e&&e.length?on(e,1/0):[]},Pr.flattenDepth=function(e,t){return null!=e&&e.length?on(e,t=void 0===t?1:ta(t)):[]},Pr.flip=function(e){return Lo(e,512)},Pr.flow=Ma,Pr.flowRight=qa,Pr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n},Pr.functions=function(e){return null==e?[]:ln(e,va(e))},Pr.functionsIn=function(e){return null==e?[]:ln(e,ma(e))},Pr.groupBy=ai,Pr.initial=function(e){return null!=e&&e.length?Vn(e,0,-1):[]},Pr.intersection=Ts,Pr.intersectionBy=Ds,Pr.intersectionWith=Bs,Pr.invert=_a,Pr.invertBy=ga,Pr.invokeMap=ui,Pr.iteratee=Ka,Pr.keyBy=ci,Pr.keys=va,Pr.keysIn=ma,Pr.map=li,Pr.mapKeys=function(e,t){var r={};return t=Xo(t,3),un(e,(function(e,n,o){Gr(r,t(e,n,o),e)})),r},Pr.mapValues=function(e,t){var r={};return t=Xo(t,3),un(e,(function(e,n,o){Gr(r,n,t(e,n,o))})),r},Pr.matches=function(e){return Pn(Wr(e,1))},Pr.matchesProperty=function(e,t){return In(e,Wr(t,1))},Pr.memoize=wi,Pr.merge=ba,Pr.mergeWith=wa,Pr.method=Ga,Pr.methodOf=za,Pr.mixin=Ya,Pr.negate=Ei,Pr.nthArg=function(e){return e=ta(e),jn((function(t){return kn(t,e)}))},Pr.omit=Ea,Pr.omitBy=function(e,t){return Aa(e,Ei(Xo(t)))},Pr.once=function(e){return _i(2,e)},Pr.orderBy=function(e,t,r,n){return null==e?[]:(Ri(t)||(t=null==t?[]:[t]),Ri(r=n?void 0:r)||(r=null==r?[]:[r]),Rn(e,t,r))},Pr.over=Xa,Pr.overArgs=xi,Pr.overEvery=Ja,Pr.overSome=Za,Pr.partial=Ai,Pr.partialRight=Si,Pr.partition=pi,Pr.pick=xa,Pr.pickBy=Aa,Pr.property=Qa,Pr.propertyOf=function(e){return function(t){return null==e?void 0:pn(e,t)}},Pr.pull=Ns,Pr.pullAll=Ls,Pr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?On(e,t,Xo(r,2)):e},Pr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?On(e,t,void 0,r):e},Pr.pullAt=Us,Pr.range=eu,Pr.rangeRight=tu,Pr.rearg=Ci,Pr.reject=function(e,t){return(Ri(e)?ot:nn)(e,Ei(Xo(t,3)))},Pr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],s=e.length;for(t=Xo(t,3);++n<s;){var i=e[n];t(i,n,e)&&(r.push(i),o.push(n))}return Tn(e,o),r},Pr.rest=function(e,r){if("function"!=typeof e)throw new ye(t);return jn(e,r=void 0===r?r:ta(r))},Pr.reverse=Hs,Pr.sampleSize=function(e,t,r){return t=(r?as(e,t,r):void 0===t)?1:ta(t),(Ri(e)?Lr:Ln)(e,t)},Pr.set=function(e,t,r){return null==e?e:Un(e,t,r)},Pr.setWith=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Un(e,t,r,n)},Pr.shuffle=function(e){return(Ri(e)?Ur:qn)(e)},Pr.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&as(e,t,r)?(t=0,r=n):(t=null==t?0:ta(t),r=void 0===r?n:ta(r)),Vn(e,t,r)):[]},Pr.sortBy=fi,Pr.sortedUniq=function(e){return e&&e.length?Yn(e):[]},Pr.sortedUniqBy=function(e,t){return e&&e.length?Yn(e,Xo(t,2)):[]},Pr.split=function(e,t,r){return r&&"number"!=typeof r&&as(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=sa(e))&&("string"==typeof t||null!=t&&!Gi(t))&&!(t=Xn(t))&&Ot(e)?uo(Ut(e),0,r):e.split(t,r):[]},Pr.spread=function(e,r){if("function"!=typeof e)throw new ye(t);return r=null==r?0:sr(ta(r),0),jn((function(t){var n=t[r],o=uo(t,0,r);return n&&ut(o,n),Qe(e,this,o)}))},Pr.tail=function(e){var t=null==e?0:e.length;return t?Vn(e,1,t):[]},Pr.take=function(e,t,r){return e&&e.length?Vn(e,0,(t=r||void 0===t?1:ta(t))<0?0:t):[]},Pr.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?Vn(e,(t=n-(t=r||void 0===t?1:ta(t)))<0?0:t,n):[]},Pr.takeRightWhile=function(e,t){return e&&e.length?eo(e,Xo(t,3),!1,!0):[]},Pr.takeWhile=function(e,t){return e&&e.length?eo(e,Xo(t,3)):[]},Pr.tap=function(e,t){return t(e),e},Pr.throttle=function(e,r,n){var o=!0,s=!0;if("function"!=typeof e)throw new ye(t);return Hi(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),vi(e,r,{leading:o,maxWait:r,trailing:s})},Pr.thru=ei,Pr.toArray=Qi,Pr.toPairs=Sa,Pr.toPairsIn=Ca,Pr.toPath=function(e){return Ri(e)?at(e,As):Wi(e)?[e]:yo(xs(sa(e)))},Pr.toPlainObject=oa,Pr.transform=function(e,t,r){var n=Ri(e),o=n||Di(e)||Xi(e);if(t=Xo(t,4),null==r){var s=e&&e.constructor;r=o?n?new s:[]:Hi(e)&&Ni(s)?Ir(Ge(e)):{}}return(o?tt:un)(e,(function(e,n,o){return t(r,e,n,o)})),r},Pr.unary=function(e){return di(e,1)},Pr.union=Ms,Pr.unionBy=qs,Pr.unionWith=Vs,Pr.uniq=function(e){return e&&e.length?Jn(e):[]},Pr.uniqBy=function(e,t){return e&&e.length?Jn(e,Xo(t,2)):[]},Pr.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Jn(e,void 0,t):[]},Pr.unset=function(e,t){return null==e||Zn(e,t)},Pr.unzip=Ks,Pr.unzipWith=Gs,Pr.update=function(e,t,r){return null==e?e:Qn(e,t,so(r))},Pr.updateWith=function(e,t,r,n){return n="function"==typeof n?n:void 0,null==e?e:Qn(e,t,so(r),n)},Pr.values=Pa,Pr.valuesIn=function(e){return null==e?[]:Ct(e,ma(e))},Pr.without=zs,Pr.words=Na,Pr.wrap=function(e,t){return Ai(so(t),e)},Pr.xor=Ys,Pr.xorBy=Ws,Pr.xorWith=Xs,Pr.zip=Js,Pr.zipObject=function(e,t){return no(e||[],t||[],Mr)},Pr.zipObjectDeep=function(e,t){return no(e||[],t||[],Un)},Pr.zipWith=Zs,Pr.entries=Sa,Pr.entriesIn=Ca,Pr.extend=aa,Pr.extendWith=ua,Ya(Pr,Pr),Pr.add=su,Pr.attempt=La,Pr.camelCase=Ia,Pr.capitalize=Fa,Pr.ceil=iu,Pr.clamp=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=na(r))==r?r:0),void 0!==t&&(t=(t=na(t))==t?t:0),Yr(na(e),t,r)},Pr.clone=function(e){return Wr(e,4)},Pr.cloneDeep=function(e){return Wr(e,5)},Pr.cloneDeepWith=function(e,t){return Wr(e,5,t="function"==typeof t?t:void 0)},Pr.cloneWith=function(e,t){return Wr(e,4,t="function"==typeof t?t:void 0)},Pr.conformsTo=function(e,t){return null==t||Xr(e,t,va(t))},Pr.deburr=ka,Pr.defaultTo=function(e,t){return null==e||e!=e?t:e},Pr.divide=au,Pr.endsWith=function(e,t,r){e=sa(e),t=Xn(t);var n=e.length,o=r=void 0===r?n:Yr(ta(r),0,n);return(r-=t.length)>=0&&e.slice(r,o)==t},Pr.eq=Pi,Pr.escape=function(e){return(e=sa(e))&&D.test(e)?e.replace(O,Rt):e},Pr.escapeRegExp=function(e){return(e=sa(e))&&q.test(e)?e.replace(M,"\\$&"):e},Pr.every=function(e,t,r){var n=Ri(e)?nt:tn;return r&&as(e,t,r)&&(t=void 0),n(e,Xo(t,3))},Pr.find=ni,Pr.findIndex=ks,Pr.findKey=function(e,t){return ht(e,Xo(t,3),un)},Pr.findLast=oi,Pr.findLastIndex=Rs,Pr.findLastKey=function(e,t){return ht(e,Xo(t,3),cn)},Pr.floor=uu,Pr.forEach=si,Pr.forEachRight=ii,Pr.forIn=function(e,t){return null==e?e:sn(e,Xo(t,3),ma)},Pr.forInRight=function(e,t){return null==e?e:an(e,Xo(t,3),ma)},Pr.forOwn=function(e,t){return e&&un(e,Xo(t,3))},Pr.forOwnRight=function(e,t){return e&&cn(e,Xo(t,3))},Pr.get=ha,Pr.gt=Ii,Pr.gte=Fi,Pr.has=function(e,t){return null!=e&&ns(e,t,_n)},Pr.hasIn=da,Pr.head=Os,Pr.identity=Va,Pr.includes=function(e,t,r,n){e=Oi(e)?e:Pa(e),r=r&&!n?ta(r):0;var o=e.length;return r<0&&(r=sr(o+r,0)),Yi(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&_t(e,t,r)>-1},Pr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:ta(r);return o<0&&(o=sr(n+o,0)),_t(e,t,o)},Pr.inRange=function(e,t,r){return t=ea(t),void 0===r?(r=t,t=0):r=ea(r),function(e,t,r){return e>=ir(t,r)&&e<sr(t,r)}(e=na(e),t,r)},Pr.invoke=ya,Pr.isArguments=ki,Pr.isArray=Ri,Pr.isArrayBuffer=$i,Pr.isArrayLike=Oi,Pr.isArrayLikeObject=Ti,Pr.isBoolean=function(e){return!0===e||!1===e||Mi(e)&&hn(e)==i},Pr.isBuffer=Di,Pr.isDate=Bi,Pr.isElement=function(e){return Mi(e)&&1===e.nodeType&&!Ki(e)},Pr.isEmpty=function(e){if(null==e)return!0;if(Oi(e)&&(Ri(e)||"string"==typeof e||"function"==typeof e.splice||Di(e)||Xi(e)||ki(e)))return!e.length;var t=rs(e);if(t==p||t==_)return!e.size;if(ps(e))return!An(e).length;for(var r in e)if(xe.call(e,r))return!1;return!0},Pr.isEqual=function(e,t){return bn(e,t)},Pr.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===n?bn(e,t,void 0,r):!!n},Pr.isError=ji,Pr.isFinite=function(e){return"number"==typeof e&&rr(e)},Pr.isFunction=Ni,Pr.isInteger=Li,Pr.isLength=Ui,Pr.isMap=qi,Pr.isMatch=function(e,t){return e===t||wn(e,t,Zo(t))},Pr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:void 0,wn(e,t,Zo(t),r)},Pr.isNaN=function(e){return Vi(e)&&e!=+e},Pr.isNative=function(e){if(ls(e))throw new pe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return En(e)},Pr.isNil=function(e){return null==e},Pr.isNull=function(e){return null===e},Pr.isNumber=Vi,Pr.isObject=Hi,Pr.isObjectLike=Mi,Pr.isPlainObject=Ki,Pr.isRegExp=Gi,Pr.isSafeInteger=function(e){return Li(e)&&e>=-9007199254740991&&e<=9007199254740991},Pr.isSet=zi,Pr.isString=Yi,Pr.isSymbol=Wi,Pr.isTypedArray=Xi,Pr.isUndefined=function(e){return void 0===e},Pr.isWeakMap=function(e){return Mi(e)&&rs(e)==v},Pr.isWeakSet=function(e){return Mi(e)&&"[object WeakSet]"==hn(e)},Pr.join=function(e,t){return null==e?"":nr.call(e,t)},Pr.kebabCase=Ra,Pr.last=js,Pr.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=n;return void 0!==r&&(o=(o=ta(r))<0?sr(n+o,0):ir(o,n-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):dt(e,yt,o,!0)},Pr.lowerCase=$a,Pr.lowerFirst=Oa,Pr.lt=Ji,Pr.lte=Zi,Pr.max=function(e){return e&&e.length?rn(e,Va,dn):void 0},Pr.maxBy=function(e,t){return e&&e.length?rn(e,Xo(t,2),dn):void 0},Pr.mean=function(e){return vt(e,Va)},Pr.meanBy=function(e,t){return vt(e,Xo(t,2))},Pr.min=function(e){return e&&e.length?rn(e,Va,Sn):void 0},Pr.minBy=function(e,t){return e&&e.length?rn(e,Xo(t,2),Sn):void 0},Pr.stubArray=ru,Pr.stubFalse=nu,Pr.stubObject=function(){return{}},Pr.stubString=function(){return""},Pr.stubTrue=function(){return!0},Pr.multiply=cu,Pr.nth=function(e,t){return e&&e.length?kn(e,ta(t)):void 0},Pr.noConflict=function(){return He._===this&&(He._=Be),this},Pr.noop=Wa,Pr.now=hi,Pr.pad=function(e,t,r){e=sa(e);var n=(t=ta(t))?Lt(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return $o(Qt(o),r)+e+$o(Zt(o),r)},Pr.padEnd=function(e,t,r){e=sa(e);var n=(t=ta(t))?Lt(e):0;return t&&n<t?e+$o(t-n,r):e},Pr.padStart=function(e,t,r){e=sa(e);var n=(t=ta(t))?Lt(e):0;return t&&n<t?$o(t-n,r)+e:e},Pr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),ur(sa(e).replace(V,""),t||0)},Pr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&as(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ea(e),void 0===t?(t=e,e=0):t=ea(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var o=cr();return ir(e+o*(t-e+je("1e-"+((o+"").length-1))),t)}return Dn(e,t)},Pr.reduce=function(e,t,r){var n=Ri(e)?ct:wt,o=arguments.length<3;return n(e,Xo(t,4),r,o,Qr)},Pr.reduceRight=function(e,t,r){var n=Ri(e)?lt:wt,o=arguments.length<3;return n(e,Xo(t,4),r,o,en)},Pr.repeat=function(e,t,r){return t=(r?as(e,t,r):void 0===t)?1:ta(t),Bn(sa(e),t)},Pr.replace=function(){var e=arguments,t=sa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Pr.result=function(e,t,r){var n=-1,o=(t=io(t,e)).length;for(o||(o=1,e=void 0);++n<o;){var s=null==e?void 0:e[As(t[n])];void 0===s&&(n=o,s=r),e=Ni(s)?s.call(e):s}return e},Pr.round=lu,Pr.runInContext=e,Pr.sample=function(e){return(Ri(e)?Nr:Nn)(e)},Pr.size=function(e){if(null==e)return 0;if(Oi(e))return Yi(e)?Lt(e):e.length;var t=rs(e);return t==p||t==_?e.size:An(e).length},Pr.snakeCase=Ta,Pr.some=function(e,t,r){var n=Ri(e)?pt:Kn;return r&&as(e,t,r)&&(t=void 0),n(e,Xo(t,3))},Pr.sortedIndex=function(e,t){return Gn(e,t)},Pr.sortedIndexBy=function(e,t,r){return zn(e,t,Xo(r,2))},Pr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=Gn(e,t);if(n<r&&Pi(e[n],t))return n}return-1},Pr.sortedLastIndex=function(e,t){return Gn(e,t,!0)},Pr.sortedLastIndexBy=function(e,t,r){return zn(e,t,Xo(r,2),!0)},Pr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Gn(e,t,!0)-1;if(Pi(e[r],t))return r}return-1},Pr.startCase=Da,Pr.startsWith=function(e,t,r){return e=sa(e),r=null==r?0:Yr(ta(r),0,e.length),t=Xn(t),e.slice(r,r+t.length)==t},Pr.subtract=pu,Pr.sum=function(e){return e&&e.length?Et(e,Va):0},Pr.sumBy=function(e,t){return e&&e.length?Et(e,Xo(t,2)):0},Pr.template=function(e,t,r){var n=Pr.templateSettings;r&&as(e,t,r)&&(t=void 0),e=sa(e),t=ua({},t,n,Uo);var o,s,i=ua({},t.imports,n.imports,Uo),a=va(i),u=Ct(i,a),c=0,l=t.interpolate||ie,p="__p += '",f=_e((t.escape||ie).source+"|"+l.source+"|"+(l===N?Z:ie).source+"|"+(t.evaluate||ie).source+"|$","g"),h="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Oe+"]")+"\n";e.replace(f,(function(t,r,n,i,a,u){return n||(n=i),p+=e.slice(c,u).replace(ae,$t),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),p+="';\n";var d=xe.call(t,"variable")&&t.variable;if(d){if(X.test(d))throw new pe("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(F,""):p).replace(k,"$1").replace(R,"$1;"),p="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=La((function(){return fe(a,h+"return "+p).apply(void 0,u)}));if(_.source=p,ji(_))throw _;return _},Pr.times=function(e,t){if((e=ta(e))<1||e>9007199254740991)return[];var r=4294967295,n=ir(e,4294967295);e-=4294967295;for(var o=xt(n,t=Xo(t));++r<e;)t(r);return o},Pr.toFinite=ea,Pr.toInteger=ta,Pr.toLength=ra,Pr.toLower=function(e){return sa(e).toLowerCase()},Pr.toNumber=na,Pr.toSafeInteger=function(e){return e?Yr(ta(e),-9007199254740991,9007199254740991):0===e?e:0},Pr.toString=sa,Pr.toUpper=function(e){return sa(e).toUpperCase()},Pr.trim=function(e,t,r){if((e=sa(e))&&(r||void 0===t))return At(e);if(!e||!(t=Xn(t)))return e;var n=Ut(e),o=Ut(t);return uo(n,It(n,o),Ft(n,o)+1).join("")},Pr.trimEnd=function(e,t,r){if((e=sa(e))&&(r||void 0===t))return e.slice(0,Ht(e)+1);if(!e||!(t=Xn(t)))return e;var n=Ut(e);return uo(n,0,Ft(n,Ut(t))+1).join("")},Pr.trimStart=function(e,t,r){if((e=sa(e))&&(r||void 0===t))return e.replace(V,"");if(!e||!(t=Xn(t)))return e;var n=Ut(e);return uo(n,It(n,Ut(t))).join("")},Pr.truncate=function(e,t){var r=30,n="...";if(Hi(t)){var o="separator"in t?t.separator:o;r="length"in t?ta(t.length):r,n="omission"in t?Xn(t.omission):n}var s=(e=sa(e)).length;if(Ot(e)){var i=Ut(e);s=i.length}if(r>=s)return e;var a=r-Lt(n);if(a<1)return n;var u=i?uo(i,0,a).join(""):e.slice(0,a);if(void 0===o)return u+n;if(i&&(a+=u.length-a),Gi(o)){if(e.slice(a).search(o)){var c,l=u;for(o.global||(o=_e(o.source,sa(Q.exec(o))+"g")),o.lastIndex=0;c=o.exec(l);)var p=c.index;u=u.slice(0,void 0===p?a:p)}}else if(e.indexOf(Xn(o),a)!=a){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+n},Pr.unescape=function(e){return(e=sa(e))&&T.test(e)?e.replace($,Mt):e},Pr.uniqueId=function(e){var t=++Ae;return sa(e)+t},Pr.upperCase=Ba,Pr.upperFirst=ja,Pr.each=si,Pr.eachRight=ii,Pr.first=Os,Ya(Pr,(ou={},un(Pr,(function(e,t){xe.call(Pr.prototype,t)||(ou[t]=e)})),ou),{chain:!1}),Pr.VERSION="4.17.21",tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Pr[e].placeholder=Pr})),tt(["drop","take"],(function(e,t){Rr.prototype[e]=function(r){r=void 0===r?1:sr(ta(r),0);var n=this.__filtered__&&!t?new Rr(this):this.clone();return n.__filtered__?n.__takeCount__=ir(r,n.__takeCount__):n.__views__.push({size:ir(r,4294967295),type:e+(n.__dir__<0?"Right":"")}),n},Rr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),tt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Rr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Xo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),tt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Rr.prototype[e]=function(){return this[r](1).value()[0]}})),tt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Rr.prototype[e]=function(){return this.__filtered__?new Rr(this):this[r](1)}})),Rr.prototype.compact=function(){return this.filter(Va)},Rr.prototype.find=function(e){return this.filter(e).head()},Rr.prototype.findLast=function(e){return this.reverse().find(e)},Rr.prototype.invokeMap=jn((function(e,t){return"function"==typeof e?new Rr(this):this.map((function(r){return vn(r,e,t)}))})),Rr.prototype.reject=function(e){return this.filter(Ei(Xo(e)))},Rr.prototype.slice=function(e,t){e=ta(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Rr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=ta(t))<0?r.dropRight(-t):r.take(t-e)),r)},Rr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Rr.prototype.toArray=function(){return this.take(4294967295)},un(Rr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),o=Pr[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);o&&(Pr.prototype[t]=function(){var t=this.__wrapped__,i=n?[1]:arguments,a=t instanceof Rr,u=i[0],c=a||Ri(t),l=function(e){var t=o.apply(Pr,ut([e],i));return n&&p?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(a=c=!1);var p=this.__chain__,f=!!this.__actions__.length,h=s&&!p,d=a&&!f;if(!s&&c){t=d?t:new Rr(this);var _=e.apply(t,i);return _.__actions__.push({func:ei,args:[l],thisArg:void 0}),new kr(_,p)}return h&&d?e.apply(this,i):(_=this.thru(l),h?n?_.value()[0]:_.value():_)})})),tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ve[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Pr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(Ri(o)?o:[],e)}return this[r]((function(r){return t.apply(Ri(r)?r:[],e)}))}})),un(Rr.prototype,(function(e,t){var r=Pr[t];if(r){var n=r.name+"";xe.call(vr,n)||(vr[n]=[]),vr[n].push({name:t,func:r})}})),vr[Io(void 0,2).name]=[{name:"wrapper",func:void 0}],Rr.prototype.clone=function(){var e=new Rr(this.__wrapped__);return e.__actions__=yo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=yo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=yo(this.__views__),e},Rr.prototype.reverse=function(){if(this.__filtered__){var e=new Rr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Rr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ri(e),n=t<0,o=r?e.length:0,s=function(e,t,r){for(var n=-1,o=r.length;++n<o;){var s=r[n],i=s.size;switch(s.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=ir(t,e+i);break;case"takeRight":e=sr(e,t-i)}}return{start:e,end:t}}(0,o,this.__views__),i=s.start,a=s.end,u=a-i,c=n?a:i-1,l=this.__iteratees__,p=l.length,f=0,h=ir(u,this.__takeCount__);if(!r||!n&&o==u&&h==u)return to(e,this.__actions__);var d=[];e:for(;u--&&f<h;){for(var _=-1,g=e[c+=t];++_<p;){var y=l[_],v=y.iteratee,m=y.type,b=v(g);if(2==m)g=b;else if(!b){if(1==m)continue e;break e}}d[f++]=g}return d},Pr.prototype.at=ti,Pr.prototype.chain=function(){return Qs(this)},Pr.prototype.commit=function(){return new kr(this.value(),this.__chain__)},Pr.prototype.next=function(){void 0===this.__values__&&(this.__values__=Qi(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Pr.prototype.plant=function(e){for(var t,r=this;r instanceof Fr;){var n=Cs(r);n.__index__=0,n.__values__=void 0,t?o.__wrapped__=n:t=n;var o=n;r=r.__wrapped__}return o.__wrapped__=e,t},Pr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Rr){var t=e;return this.__actions__.length&&(t=new Rr(this)),(t=t.reverse()).__actions__.push({func:ei,args:[Hs],thisArg:void 0}),new kr(t,this.__chain__)}return this.thru(Hs)},Pr.prototype.toJSON=Pr.prototype.valueOf=Pr.prototype.value=function(){return to(this.__wrapped__,this.__actions__)},Pr.prototype.first=Pr.prototype.head,Gt&&(Pr.prototype[Gt]=function(){return this}),Pr}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(He._=qt,define((function(){return qt}))):qe?((qe.exports=qt)._=qt,Me._=qt):He._=qt}).call(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$lodash_53=_$lodash_53.exports;var _$response_120={};Object.defineProperty(_$response_120,"__esModule",{value:!0}),_$response_120.failed=function(e,t,r){e.status(r||500).json({status:"failed",error:{code:t.code,type:t.type,message:t.message,details:t.details}})},_$response_120.success=function(e,t,r){e.status(r||200).json({status:"success",data:t})};var _$errors_117={};function ___typeof_117(e){return(___typeof_117="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===___typeof_117(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ___defineProperties_117(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ___createClass_117(e,t,r){return t&&___defineProperties_117(e.prototype,t),r&&___defineProperties_117(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ___classCallCheck_117(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(_$errors_117,"__esModule",{value:!0}),_$errors_117.ResourceNotFoundError=_$errors_117.RequestInvalidError=_$errors_117.NetworkError=_$errors_117.InternalServerError=void 0;var BaseError=___createClass_117((function e(t,r,n){___classCallCheck_117(this,e),this.code=t,this.message=r,this.details=n})),InternalServerError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var s;return ___classCallCheck_117(this,r),(s=t.call(this,e,n,o)).type="InternalServerError",s}return ___createClass_117(r)}();_$errors_117.InternalServerError=InternalServerError;var RequestInvalidError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var s;return ___classCallCheck_117(this,r),(s=t.call(this,e,n,o)).type="RequestInvalidError",s}return ___createClass_117(r)}();_$errors_117.RequestInvalidError=RequestInvalidError;var ResourceNotFoundError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var s;return ___classCallCheck_117(this,r),(s=t.call(this,e,n,o)).type="ResourceNotFoundError",s}return ___createClass_117(r)}();_$errors_117.ResourceNotFoundError=ResourceNotFoundError;var NetworkError=function(e){_inherits(r,BaseError);var t=_createSuper(r);function r(e,n,o){var s;return ___classCallCheck_117(this,r),(s=t.call(this,e,n,o)).type="NetworkError",s}return ___createClass_117(r)}();_$errors_117.NetworkError=NetworkError;var _$database_122={};function findIndexByName(e,t){return e.findIndex((function(e){return e.name===t}))}Object.defineProperty(_$database_122,"__esModule",{value:!0}),_$database_122.deleteByName=function(e,t){var r=findIndexByName(e,t);e.splice(r,1)},_$database_122.findByName=function(e,t){return e.find((function(e){return e.name===t}))},_$database_122.findIndexByName=findIndexByName,_$database_122.updateByName=function(e,t,r){e[findIndexByName(e,t)]=r};var _$preprocessors_112={};Object.defineProperty(_$preprocessors_112,"__esModule",{value:!0}),_$preprocessors_112.default=void 0;var ___default_112=[{name:"HTML",test:function(e){return/^<!DOCTYPE html>/.test(e)},parse:function(){return""}},{name:"Clash Provider",test:function(e){return/^payload:/gm.exec(e).index>=0},parse:function(e){return e.replace("payload:","").replace(/^\s*-\s*/gm,"")}}];_$preprocessors_112.default=___default_112;var _$producers_113={};Object.defineProperty(_$producers_113,"__esModule",{value:!0}),_$producers_113.default=void 0;var __obj_113,_yaml=(__obj_113=_$yaml_137)&&__obj_113.__esModule?__obj_113:{default:__obj_113},___default_113={QX:{type:"SINGLE",func:function(e){return-1!==["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL","GEOSITE","GEOIP"].indexOf(e.type)?null:"".concat({"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[e.type]||e.type,",").concat(e.content,",SUB-STORE")}},Surge:{type:"SINGLE",func:function(e){if(-1!==["GEOSITE","GEOIP"].indexOf(e.type))return null;var t,r="".concat(e.type,",").concat(e.content);return["IP-CIDR","IP-CIDR6"].includes(e.type)&&(r+=(null===(t=e.options)||void 0===t?void 0:t.length)>0?",".concat(e.options.join(",")):""),r}},Loon:{type:"SINGLE",func:function(e){return-1!==["SRC-IP","GEOSITE","GEOIP"].indexOf(e.type)?null:(["IP-CIDR","IP-CIDR6"].includes(e.type)&&e.options&&(e.options=e.options.filter((function(e){return["no-resolve"].includes(e)}))),function(e){if(-1!==["GEOSITE","GEOIP"].indexOf(e.type))return null;var t,r="".concat(e.type,",").concat(e.content);return["IP-CIDR","IP-CIDR6"].includes(e.type)&&(r+=(null===(t=e.options)||void 0===t?void 0:t.length)>0?",".concat(e.options.join(",")):""),r}(e))}},Clash:{type:"ALL",func:function(e){var t={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},r={payload:e.map((function(e){var r,n="".concat(t[e.type]||e.type,",").concat(e.content);return["IP-CIDR","IP-CIDR6","GEOIP"].includes(e.type)&&(e.options&&(e.options=e.options.filter((function(e){return["no-resolve"].includes(e)}))),n+=(null===(r=e.options)||void 0===r?void 0:r.length)>0?",".concat(e.options.join(",")):""),n}))};return _yaml.default.dump(r)}}};_$producers_113.default=___default_113;var _$parsers_111={};function ___createForOfIteratorHelper_111(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_111(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_111(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___arrayLikeToArray_111(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(_$parsers_111,"__esModule",{value:!0}),_$parsers_111.default=void 0;var RULE_TYPES_MAPPING=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/,"IP-CIDR6"],[/^GEOIP$/i,"GEOIP"],[/^GEOSITE$/i,"GEOSITE"]],___default_111=[{name:"Universal Rule Parser",test:function(){return!0},parse:function(e){var t,r=[],n=___createForOfIteratorHelper_111(e.split("\n"));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(0!==(o=o.trim()).length&&!/\s*#/.test(o))try{var s,i=o.split(",").map((function(e){return e.trim()})),a=i[0],u=!1,c=___createForOfIteratorHelper_111(RULE_TYPES_MAPPING);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(l[0].test(a)){u=!0;var p={type:l[1],content:i[1]};["IP-CIDR","IP-CIDR6","GEOIP"].includes(p.type)&&(p.options=i.slice(2)),r.push(p)}}}catch(f){c.e(f)}finally{c.f()}if(!u)throw new Error("Invalid rule type: "+a)}catch(h){console.log("Failed to parse line: ".concat(o,"\n Reason: ").concat(h))}}}catch(f){n.e(f)}finally{n.f()}return r}}];_$parsers_111.default=___default_111;var _$ruleUtils_110={};Object.defineProperty(_$ruleUtils_110,"__esModule",{value:!0}),_$ruleUtils_110.RuleUtils=void 0;var _preprocessors=___interopRequireDefault_110(_$preprocessors_112),_producers=___interopRequireDefault_110(_$producers_113),_parsers=___interopRequireDefault_110(_$parsers_111),___app_110=___interopRequireDefault_110(_$app_87);function ___interopRequireDefault_110(e){return e&&e.__esModule?e:{default:e}}function ___createForOfIteratorHelper_110(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_110(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_110(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___arrayLikeToArray_110(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var RuleUtils={parse:function(e){e=function(e){var t,r=___createForOfIteratorHelper_110(_preprocessors.default);try{for(r.s();!(t=r.n()).done;){var n=t.value;try{if(n.test(e))return ___app_110.default.info("Pre-processor [".concat(n.name,"] activated")),n.parse(e)}catch(o){___app_110.default.error("Parser [".concat(n.name,"] failed\n Reason: ").concat(o))}}}catch(s){r.e(s)}finally{r.f()}return e}(e);var t,r=___createForOfIteratorHelper_110(_parsers.default);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=void 0;try{o=n.test(e)}catch(s){o=!1}if(o)return ___app_110.default.info("Rule parser [".concat(n.name,"] is activated!")),n.parse(e)}}catch(s){r.e(s)}finally{r.f()}},produce:function(e,t){var r=_producers.default[t];if(!r)throw new Error("Target platform: ".concat(t," is not supported!"));return void 0===r.type||"SINGLE"===r.type?e.map((function(e){try{return r.func(e)}catch(t){return console.log("ERROR: cannot produce rule: ".concat(JSON.stringify(e),"\nReason: ").concat(t)),""}})).filter((function(e){return e.length>0})).join("\n"):"ALL"===r.type?r.func(e):void 0}};_$ruleUtils_110.RuleUtils=RuleUtils;var _$gist_128={};function ___typeof_128(e){return(___typeof_128="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$gist_128,"__esModule",{value:!0}),_$gist_128.default=void 0;var ___app_128=___interopRequireDefault_128(_$app_87);function ___interopRequireDefault_128(e){return e&&e.__esModule?e:{default:e}}function ___slicedToArray_128(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||___unsupportedIterableToArray_128(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ___regeneratorRuntime_128(){___regeneratorRuntime_128=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_128(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function ___createForOfIteratorHelper_128(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_128(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___unsupportedIterableToArray_128(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_128(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_128(e,t):void 0}}function ___arrayLikeToArray_128(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __asyncGeneratorStep_128(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_128(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_128(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_128(s,n,o,i,a,"throw",e)}i(void 0)}))}}function __ownKeys_128(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_128(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_128(Object(r),!0).forEach((function(t){___defineProperty_128(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_128(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_128(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___classCallCheck_128(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ___defineProperties_128(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ___createClass_128(e,t,r){return t&&___defineProperties_128(e.prototype,t),r&&___defineProperties_128(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Gist=function(){function Gist(_ref){var token=_ref.token,key=_ref.key,syncPlatform=_ref.syncPlatform;___classCallCheck_128(this,Gist);var _ENV=(0,_$openApi_140.ENV)(),isStash=_ENV.isStash,isLoon=_ENV.isLoon,isShadowRocket=_ENV.isShadowRocket,isQX=_ENV.isQX,_$$read=___app_128.default.read(_$constants_86.SETTINGS_KEY),defaultProxy=_$$read.defaultProxy,timeout=_$$read.defaultTimeout,proxy=defaultProxy;___app_128.default.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),"gitlab"===syncPlatform?(this.headers={"PRIVATE-TOKEN":"".concat(token),"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=(0,_$openApi_140.HTTP)(___objectSpread_128(___objectSpread_128(___objectSpread_128(___objectSpread_128(___objectSpread_128({baseURL:"https://gitlab.com/api/v4",headers:___objectSpread_128(___objectSpread_128(___objectSpread_128({},this.headers),isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{}),isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{})},proxy?{proxy:proxy}:{}),isLoon&&proxy?{node:proxy}:{}),isQX&&proxy?{opts:{policy:proxy}}:{}),proxy?(0,_$utils_130.getPolicyDescriptor)(proxy):{}),{},{timeout:timeout,events:{onResponse:function(e){if(/^[45]/.test(String(e.statusCode))){var t,r,n=JSON.parse(e.body);return Promise.reject("ERROR: ".concat(null!==(t=null===(r=n.message)||void 0===r?void 0:r.error)&&void 0!==t?t:n.message))}return e}}}))):(this.headers={Authorization:"token ".concat(token),"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=(0,_$openApi_140.HTTP)(___objectSpread_128(___objectSpread_128(___objectSpread_128(___objectSpread_128(___objectSpread_128({baseURL:"https://api.github.com",headers:___objectSpread_128(___objectSpread_128(___objectSpread_128({},this.headers),isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{}),isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{})},proxy?{proxy:proxy}:{}),isLoon&&proxy?{node:proxy}:{}),isQX&&proxy?{opts:{policy:proxy}}:{}),proxy?(0,_$utils_130.getPolicyDescriptor)(proxy):{}),{},{timeout:timeout,events:{onResponse:function(e){return/^[45]/.test(String(e.statusCode))?Promise.reject("ERROR: ".concat(JSON.parse(e.body).message)):e}}}))),this.key=key,this.syncPlatform=syncPlatform}return ___createClass_128(Gist,[{key:"locate",value:(_locate=___asyncToGenerator_128(___regeneratorRuntime_128().mark((function e(){var t=this;return ___regeneratorRuntime_128().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gitlab"!==this.syncPlatform){e.next=4;break}return e.abrupt("return",this.http.get("/snippets").then((function(e){var r,n=___createForOfIteratorHelper_128(JSON.parse(e.body));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.title===t.key)return o}}catch(s){n.e(s)}finally{n.f()}})));case 4:return e.abrupt("return",this.http.get("/gists").then((function(e){var r,n=___createForOfIteratorHelper_128(JSON.parse(e.body));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.description===t.key)return o}}catch(s){n.e(s)}finally{n.f()}})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return _locate.apply(this,arguments)})},{key:"upload",value:(_upload=___asyncToGenerator_128(___regeneratorRuntime_128().mark((function e(t){var r,n,o,s;return ___regeneratorRuntime_128().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(t).length){e.next=2;break}return e.abrupt("return",Promise.reject("\u672a\u63d0\u4f9b\u9700\u4e0a\u4f20\u7684\u6587\u4ef6"));case 2:return e.next=4,this.locate();case 4:if(r=e.sent,n=t,null==r||!r.id){e.next=25;break}if("gitlab"===this.syncPlatform&&(r.files=r.files.reduce((function(e,t){return e[t.path]=t,e}),{})),o=[],s=___objectSpread_128({},r.files),Object.keys(n).map((function(e){s[e]?null==n[e].content||""===n[e].content?(delete s[e],o.push({action:"delete",file_path:e})):(s[e]=n[e],o.push({action:"update",file_path:e,content:n[e].content})):null==n[e].content||""===n[e].content?(delete s[e],delete n[e]):(s[e]=n[e],o.push({action:"create",file_path:e,content:n[e].content}))})),"gitlab"!==this.syncPlatform){e.next=20;break}if(0!==Object.keys(s).length){e.next=14;break}return e.abrupt("return",Promise.reject("\u672c\u6b21\u64cd\u4f5c\u5c06\u5bfc\u81f4\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u66f4\u65b0 snippet"));case 14:if(!(Object.keys(s).length>10)){e.next=16;break}return e.abrupt("return",Promise.reject("\u672c\u6b21\u64cd\u4f5c\u5c06\u5bfc\u81f4 snippet \u7684\u6587\u4ef6\u6570\u8d85\u8fc7 10, \u65e0\u6cd5\u66f4\u65b0 snippet"));case 16:return n=o,e.abrupt("return",this.http.put({headers:___objectSpread_128(___objectSpread_128({},this.headers),{},{"Content-Type":"application/json"}),url:"/snippets/".concat(r.id),body:JSON.stringify({files:n})}));case 20:if(0!==Object.keys(s).length){e.next=22;break}return e.abrupt("return",Promise.reject("\u672c\u6b21\u64cd\u4f5c\u5c06\u5bfc\u81f4\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u66f4\u65b0 gist"));case 22:return e.abrupt("return",this.http.patch({url:"/gists/".concat(r.id),body:JSON.stringify({files:n})}));case 23:e.next=36;break;case 25:if(n=Object.entries(n).reduce((function(e,t){var r=___slicedToArray_128(t,2),n=r[0],o=r[1];return null!==o.content&&""!==o.content&&(e[n]=o),e}),{}),"gitlab"!==this.syncPlatform){e.next=33;break}if(0!==Object.keys(n).length){e.next=29;break}return e.abrupt("return",Promise.reject("\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u521b\u5efa snippet"));case 29:return n=Object.keys(n).map((function(e){return{file_path:e,content:n[e].content}})),e.abrupt("return",this.http.post({headers:___objectSpread_128(___objectSpread_128({},this.headers),{},{"Content-Type":"application/json"}),url:"/snippets",body:JSON.stringify({title:this.key,visibility:"private",files:n})}));case 33:if(0!==Object.keys(n).length){e.next=35;break}return e.abrupt("return",Promise.reject("\u6240\u6709\u6587\u4ef6\u7684\u5185\u5bb9\u90fd\u4e3a\u7a7a, \u65e0\u6cd5\u521b\u5efa gist"));case 35:return e.abrupt("return",this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:n})}));case 36:case"end":return e.stop()}}),e,this)}))),function(e){return _upload.apply(this,arguments)})},{key:"download",value:function(){var e=___asyncToGenerator_128(___regeneratorRuntime_128().mark((function e(t){var r,n,o,s;return ___regeneratorRuntime_128().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.locate();case 2:if(null==(r=e.sent)||!r.id){e.next=20;break}return e.prev=4,e.next=7,this.http.get("/gists/".concat(r.id)).then((function(e){return JSON.parse(e.body)}));case 7:return n=e.sent,o=n.files,s=o[t].raw_url,e.next=12,this.http.get(s).then((function(e){return e.body}));case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0));case 18:e.next=21;break;case 20:return e.abrupt("return",Promise.reject("\u627e\u4e0d\u5230 Sub-Store Gist"));case 21:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}]),Gist;var _upload,_locate}();_$gist_128.default=Gist;var _$artifacts_115={};function ___typeof_115(e){return(___typeof_115="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$artifacts_115,"__esModule",{value:!0}),_$artifacts_115.default=function(e){___app_115.default.read(_$constants_86.ARTIFACTS_KEY)||___app_115.default.write({},_$constants_86.ARTIFACTS_KEY),e.get("/api/artifacts/restore",restoreArtifacts),e.route("/api/artifacts").get(getAllArtifacts).post(createArtifact).put(replaceArtifact),e.route("/api/artifact/:name").get(getArtifact).patch(updateArtifact).delete(deleteArtifact)},_$artifacts_115.syncToGist=syncToGist;var ___app_115=___interopRequireDefault_115(_$app_87),_gist=___interopRequireDefault_115(_$gist_128);function ___interopRequireDefault_115(e){return e&&e.__esModule?e:{default:e}}function ___regeneratorRuntime_115(){___regeneratorRuntime_115=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_115(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __ownKeys_115(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_115(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_115(Object(r),!0).forEach((function(t){___defineProperty_115(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_115(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_115(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function __asyncGeneratorStep_115(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_115(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_115(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_115(s,n,o,i,a,"throw",e)}i(void 0)}))}}function restoreArtifacts(e,t){return _restoreArtifacts.apply(this,arguments)}function _restoreArtifacts(){return(_restoreArtifacts=___asyncToGenerator_115(___regeneratorRuntime_115().mark((function e(t,r){var n,o,s,i,a,u,c,l,p,f;return ___regeneratorRuntime_115().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(___app_115.default.info("\u5f00\u59cb\u6062\u590d\u8fdc\u7a0b\u914d\u7f6e..."),e.prev=1,n=___app_115.default.read(_$constants_86.SETTINGS_KEY),o=n.gistToken,s=n.syncPlatform,o){e.next=5;break}return e.abrupt("return",Promise.reject("\u672a\u8bbe\u7f6e GitHub Token\uff01"));case 5:return i=new _gist.default({token:o,key:_$constants_86.ARTIFACT_REPOSITORY_KEY,syncPlatform:s}),e.prev=6,e.next=9,i.locate();case 9:if(null!=(a=e.sent)&&a.files){e.next=12;break}throw new Error("\u627e\u4e0d\u5230 Sub-Store Gist \u6587\u4ef6\u5217\u8868");case 12:u=___app_115.default.read(_$constants_86.ARTIFACTS_KEY),c=[],Object.keys(a.files).map((function(e){var t,r=null===(t=a.files[e])||void 0===t?void 0:t.filename;if(r)if(encodeURIComponent(r)!==r)___app_115.default.error("\u6587\u4ef6\u540d ".concat(r," \u672a\u7f16\u7801 \u4e0d\u4fdd\u5b58")),c.push(r);else{var n,o,s=(0,_$database_122.findByName)(u,r);s?(0,_$database_122.updateByName)(u,r,___objectSpread_115(___objectSpread_115({},s),{},{url:null===(n=a.files[e])||void 0===n?void 0:n.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})):u.push({name:"".concat(r),url:null===(o=a.files[e])||void 0===o?void 0:o.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})}})),___app_115.default.write(u,_$constants_86.ARTIFACTS_KEY),e.next=22;break;case 18:throw e.prev=18,e.t0=e.catch(6),___app_115.default.error("\u67e5\u627e Sub-Store Gist \u65f6\u53d1\u751f\u9519\u8bef: ".concat(null!==(l=e.t0.message)&&void 0!==l?l:e.t0)),e.t0;case 22:(0,_$response_120.success)(r),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(1),___app_115.default.error("\u6062\u590d\u8fdc\u7a0b\u914d\u7f6e\u5931\u8d25\uff0c\u539f\u56e0\uff1a".concat(null!==(p=e.t1.message)&&void 0!==p?p:e.t1)),(0,_$response_120.failed)(r,new _$errors_117.InternalServerError("FAILED_TO_RESTORE_ARTIFACTS","Failed to restore artifacts","Reason: ".concat(null!==(f=e.t1.message)&&void 0!==f?f:e.t1)));case 29:case"end":return e.stop()}}),e,null,[[1,25],[6,18]])})))).apply(this,arguments)}function getAllArtifacts(e,t){var r=___app_115.default.read(_$constants_86.ARTIFACTS_KEY);(0,_$response_120.success)(t,r)}function replaceArtifact(e,t){var r=e.body;___app_115.default.write(r,_$constants_86.ARTIFACTS_KEY),(0,_$response_120.success)(t)}function getArtifact(e,t){return _getArtifact.apply(this,arguments)}function _getArtifact(){return(_getArtifact=___asyncToGenerator_115(___regeneratorRuntime_115().mark((function e(t,r){var n,o,s;return ___regeneratorRuntime_115().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.params.name,n=decodeURIComponent(n),o=___app_115.default.read(_$constants_86.ARTIFACTS_KEY),(s=(0,_$database_122.findByName)(o,n))?(0,_$response_120.success)(r,s):(0,_$response_120.failed)(r,new _$errors_117.ResourceNotFoundError("RESOURCE_NOT_FOUND","Artifact ".concat(n," does not exist!")),404);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function createArtifact(e,t){var r=e.body;if(validateArtifactName(r.name)){___app_115.default.info("\u6b63\u5728\u521b\u5efa\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(r.name));var n=___app_115.default.read(_$constants_86.ARTIFACTS_KEY);(0,_$database_122.findByName)(n,r.name)?(0,_$response_120.failed)(t,new _$errors_117.RequestInvalidError("DUPLICATE_KEY","Artifact ".concat(r.name," already exists."))):(n.push(r),___app_115.default.write(n,_$constants_86.ARTIFACTS_KEY),(0,_$response_120.success)(t,r,201))}else(0,_$response_120.failed)(t,new _$errors_117.RequestInvalidError("INVALID_ARTIFACT_NAME","Artifact name ".concat(r.name," is invalid.")))}function updateArtifact(e,t){var r=___app_115.default.read(_$constants_86.ARTIFACTS_KEY),n=e.params.name;n=decodeURIComponent(n);var o=(0,_$database_122.findByName)(r,n);if(o){___app_115.default.info("\u6b63\u5728\u66f4\u65b0\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(o.name));var s=___objectSpread_115(___objectSpread_115({},o),e.body);if(!validateArtifactName(s.name))return void(0,_$response_120.failed)(t,new _$errors_117.RequestInvalidError("INVALID_ARTIFACT_NAME","Artifact name ".concat(s.name," is invalid.")));(0,_$database_122.updateByName)(r,n,s),___app_115.default.write(r,_$constants_86.ARTIFACTS_KEY),(0,_$response_120.success)(t,s)}else(0,_$response_120.failed)(t,new _$errors_117.RequestInvalidError("DUPLICATE_KEY","Artifact ".concat(n," already exists.")))}function deleteArtifact(e,t){return _deleteArtifact.apply(this,arguments)}function _deleteArtifact(){return(_deleteArtifact=___asyncToGenerator_115(___regeneratorRuntime_115().mark((function e(t,r){var n,o,s,i;return ___regeneratorRuntime_115().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.name,n=decodeURIComponent(n),___app_115.default.info("\u6b63\u5728\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n)),o=___app_115.default.read(_$constants_86.ARTIFACTS_KEY),e.prev=4,s=(0,_$database_122.findByName)(o,n)){e.next=8;break}throw new Error("\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,"\u4e0d\u5b58\u5728\uff01"));case 8:if(!s.updated){e.next=20;break}return(i={})[encodeURIComponent(s.name)]={content:""},encodeURIComponent(s.name)!==s.name&&(i[s.name]={content:""}),e.prev=12,e.next=15,syncToGist(i);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),___app_115.default.error("Function syncToGist: ".concat(n," : ").concat(e.t0));case 20:(0,_$database_122.deleteByName)(o,n),___app_115.default.write(o,_$constants_86.ARTIFACTS_KEY),(0,_$response_120.success)(r),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(4),___app_115.default.error("\u65e0\u6cd5\u5220\u9664\u8fdc\u7a0b\u914d\u7f6e\uff1a".concat(n,"\uff0c\u539f\u56e0\uff1a").concat(e.t1)),(0,_$response_120.failed)(r,new _$errors_117.InternalServerError("FAILED_TO_DELETE_ARTIFACT","Failed to delete artifact ".concat(n),"Reason: ".concat(e.t1)));case 29:case"end":return e.stop()}}),e,null,[[4,25],[12,17]])})))).apply(this,arguments)}function validateArtifactName(e){return/^[a-zA-Z0-9._-]*$/.test(e)}function syncToGist(e){return _syncToGist.apply(this,arguments)}function _syncToGist(){return(_syncToGist=___asyncToGenerator_115(___regeneratorRuntime_115().mark((function e(t){var r,n,o,s,i,a,u,c,l,p,f;return ___regeneratorRuntime_115().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=___app_115.default.read(_$constants_86.SETTINGS_KEY),i=s.gistToken,a=s.syncPlatform,i){e.next=3;break}return e.abrupt("return",Promise.reject("\u672a\u8bbe\u7f6e GitHub Token\uff01"));case 3:return u=new _gist.default({token:i,key:_$constants_86.ARTIFACT_REPOSITORY_KEY,syncPlatform:a}),e.next=6,u.upload(t);case 6:c=e.sent,l={};try{l=JSON.parse(c.body)}catch(h){}return p=null!==(r=null===(n=l)||void 0===n?void 0:n.html_url)&&void 0!==r?r:null===(o=l)||void 0===o?void 0:o.web_url,f=___app_115.default.read(_$constants_86.SETTINGS_KEY),p?(___app_115.default.log("\u540c\u6b65 Gist \u540e, \u627e\u5230 Sub-Store Gist: ".concat(p)),f.artifactStore=p,f.artifactStoreStatus="VALID"):(___app_115.default.error("\u540c\u6b65 Gist \u540e, \u627e\u4e0d\u5230 Sub-Store Gist"),f.artifactStoreStatus="NOT FOUND"),___app_115.default.write(f,_$constants_86.SETTINGS_KEY),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _$env_125={};Object.defineProperty(_$env_125,"__esModule",{value:!0}),_$env_125.default=void 0;var _ENV=(0,_$openApi_140.ENV)(),__isNode_125=_ENV.isNode,__isQX_125=_ENV.isQX,__isLoon_125=_ENV.isLoon,__isSurge_125=_ENV.isSurge,__isStash_125=_ENV.isStash,__isShadowRocket_125=_ENV.isShadowRocket,__isLanceX_125=_ENV.isLanceX,__isEgern_125=_ENV.isEgern,__isGUIforCores_125=_ENV.isGUIforCores,backend="Node";__isNode_125&&(backend="Node"),__isQX_125&&(backend="QX"),__isLoon_125&&(backend="Loon"),__isSurge_125&&(backend="Surge"),__isStash_125&&(backend="Stash"),__isShadowRocket_125&&(backend="ShadowRocket"),__isEgern_125&&(backend="Egern"),__isLanceX_125&&(backend="LanceX"),__isGUIforCores_125&&(backend="GUI.for.Cores");var meta={};try{if("undefined"!=typeof $environment&&(meta.env=$environment),"undefined"!=typeof $loon&&(meta.loon=$loon),"undefined"!=typeof $script&&(meta.script=$script),"undefined"!=typeof $Plugin&&(meta.plugin=$Plugin),__isNode_125){meta.node={version:eval("process.version"),argv:eval("process.argv"),filename:eval("__filename"),dirname:eval("__dirname"),env:{}};var env=eval("process.env");for(var key in env)/^SUB_STORE_/.test(key)&&(meta.node.env[key]=env[key])}}catch(e){}var ___default_125={backend:backend,version:_$package_85.version,meta:meta};_$env_125.default=___default_125;var _$base64_20={exports:{}};(function(e,t){(function(){!function(e,t){var r,n;"object"==typeof _$base64_20.exports?_$base64_20.exports=t():"function"==typeof define&&define.amd?define(t):(r=e.Base64,(n=t()).noConflict=function(){return e.Base64=r,n},e.Meteor&&(Base64=n),e.Base64=n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this,(function(){"use strict";var e,r="function"==typeof atob,n="function"==typeof btoa,o="function"==typeof t,s="function"==typeof TextDecoder?new TextDecoder:void 0,i="function"==typeof TextEncoder?new TextEncoder:void 0,a=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),u=(e={},a.forEach((function(t,r){return e[t]=r})),e),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e,t){return void 0===t&&(t=function(e){return e}),new Uint8Array(Array.prototype.slice.call(e,0).map(t))},f=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},h=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},d=function(e){for(var t,r,n,o,s="",i=e.length%3,u=0;u<e.length;){if((r=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255||(o=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");s+=a[(t=r<<16|n<<8|o)>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}return i?s.slice(0,i-3)+"===".substring(i):s},_=n?function(e){return btoa(e)}:o?function(e){return t.from(e,"binary").toString("base64")}:d,g=o?function(e){return t.from(e).toString("base64")}:function(e){for(var t=[],r=0,n=e.length;r<n;r+=4096)t.push(l.apply(null,e.subarray(r,r+4096)));return _(t.join(""))},y=function(e,t){return void 0===t&&(t=!1),t?f(g(e)):g(e)},v=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},m=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,b=function(e){return e.replace(m,v)},w=o?function(e){return t.from(e,"utf8").toString("base64")}:i?function(e){return g(i.encode(e))}:function(e){return _(b(e))},E=function(e,t){return void 0===t&&(t=!1),t?f(w(e)):w(e)},x=function(e){return E(e,!0)},A=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,S=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return l(55296+(t>>>10))+l(56320+(1023&t));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},C=function(e){return e.replace(A,S)},P=function(e){if(e=e.replace(/\s+/g,""),!c.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,o="",s=0;s<e.length;)t=u[e.charAt(s++)]<<18|u[e.charAt(s++)]<<12|(r=u[e.charAt(s++)])<<6|(n=u[e.charAt(s++)]),o+=64===r?l(t>>16&255):64===n?l(t>>16&255,t>>8&255):l(t>>16&255,t>>8&255,255&t);return o},I=r?function(e){return atob(h(e))}:o?function(e){return t.from(e,"base64").toString("binary")}:P,F=o?function(e){return p(t.from(e,"base64"))}:function(e){return p(I(e),(function(e){return e.charCodeAt(0)}))},k=function(e){return F($(e))},R=o?function(e){return t.from(e,"base64").toString("utf8")}:s?function(e){return s.decode(F(e))}:function(e){return C(I(e))},$=function(e){return h(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},O=function(e){return R($(e))},T=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},D=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,T(t))};e("fromBase64",(function(){return O(this)})),e("toBase64",(function(e){return E(this,e)})),e("toBase64URI",(function(){return E(this,!0)})),e("toBase64URL",(function(){return E(this,!0)})),e("toUint8Array",(function(){return k(this)}))},B=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,T(t))};e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},j={version:"3.7.2",VERSION:"3.7.2",atob:I,atobPolyfill:P,btoa:_,btoaPolyfill:d,fromBase64:O,toBase64:E,encode:E,encodeURI:x,encodeURL:x,utob:b,btou:C,decode:O,isValid:function(e){if("string"!=typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:y,toUint8Array:k,extendString:D,extendUint8Array:B,extendBuiltins:function(){D(),B()},Base64:{}};return Object.keys(j).forEach((function(e){return j.Base64[e]=j[e]})),j}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_$buffer_3({}).Buffer),_$base64_20=_$base64_20.exports;var _$preprocessors_94={};Object.defineProperty(_$preprocessors_94,"__esModule",{value:!0}),_$preprocessors_94.default=void 0;var keys,___default_94=[{name:"HTML",test:function(e){return/^<!DOCTYPE html>/.test(e)},parse:function(){return""}},{name:"Clash Pre-processor",test:function(e){if(!/proxies/.test(e))return!1;var t=(0,_$yaml_137.safeLoad)(e);return t.proxies&&Array.isArray(t.proxies)},parse:function(e){var t=e.replace(/short-id:([ ]*[^,\n}]*)/g,(function(e,t){var r=t.trim();return r&&""!==r?/^(['"]).*\1$/.test(r)?"short-id: ".concat(r):'short-id: "'.concat(r,'"'):'short-id: ""'})),r=(0,_$yaml_137.safeLoad)(t),n=r.proxies,o=r["global-client-fingerprint"];return n.map((function(e){return o&&!e["client-fingerprint"]&&(e["client-fingerprint"]=o),JSON.stringify(e)})).join("\n")}},(keys=["dm1lc3M","c3NyOi8v","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="],{name:"Base64 Pre-processor",test:function(e){return!/^\w+:\/\/\w+/im.test(e)&&keys.some((function(t){return-1!==e.indexOf(t)}))},parse:function(e){return _$base64_20.Base64.decode(e)}}),{name:"SSD Pre-processor",test:function(e){return 0===e.indexOf("ssd://")},parse:function(e){for(var t=[],r=JSON.parse(_$base64_20.Base64.decode(e.split("ssd://")[1])),n=r.port,o=r.encryption,s=r.password,i=r.servers,a=0;a<i.length;a++){var u=i[a];o=u.encryption?u.encryption:o,s=u.password?u.password:s;var c=_$base64_20.Base64.encode(o+":"+s),l=u.server;n=u.port?u.port:n;var p=u.remarks?u.remarks:a,f=u.plugin_options?"/?plugin="+encodeURIComponent(u.plugin+";"+u.plugin_options):"";t[a]="ss://"+c+"@"+l+":"+n+f+"#"+p}return t.join("\n")}},{name:"Full Config Preprocessor",test:function(e){return/^(\[server_local\]|\[Proxy\])/gm.test(e)},parse:function(e){var t;return(null===(t=e.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im))||void 0===t?void 0:t[1])||e}}];_$preprocessors_94.default=___default_94;var _$utils_108={};Object.defineProperty(_$utils_108,"__esModule",{value:!0}),_$utils_108.Result=void 0,_$utils_108.isPresent=__isPresent_108;var __obj_108,___lodash_108=(__obj_108=_$lodash_53)&&__obj_108.__esModule?__obj_108:{default:__obj_108};function ___defineProperties_108(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Result=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.proxy=t,this.output=[]}var t,r;return t=e,(r=[{key:"append",value:function(e){if(void 0===e)throw new Error("required field is missing");this.output.push(e)}},{key:"appendIfPresent",value:function(e,t){__isPresent_108(this.proxy,t)&&this.append(e)}},{key:"toString",value:function(){return this.output.join("")}}])&&___defineProperties_108(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function __isPresent_108(e,t){return null!=___lodash_108.default.get(e,t)}_$utils_108.Result=Result;var _$surge_105={};Object.defineProperty(_$surge_105,"__esModule",{value:!0}),_$surge_105.default=function(){return{produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e.name=e.name.replace(/=|,/g,""),e.ports&&(e.ports=String(e.ports)),e.type){case"ss":return function(e,t){var r,n=new _$utils_108.Result(e);if(n.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),e.cipher||(e.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none"].concat((r=t?["2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"]:[],function(e){if(Array.isArray(e))return ___arrayLikeToArray_105(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_105(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_105(e,void 0):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));n.append(",encrypt-method=".concat(e.cipher)),n.appendIfPresent(",password=".concat(e.password),"password");var o=ipVersions[e["ip-version"]]||e["ip-version"];if(n.appendIfPresent(",ip-version=".concat(o),"ip-version"),n.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),(0,_$utils_108.isPresent)(e,"plugin"))if("obfs"===e.plugin)n.append(",obfs=".concat(e["plugin-opts"].mode)),n.appendIfPresent(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),n.appendIfPresent(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error("plugin ".concat(e.plugin," is not supported"));if(n.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),n.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),n.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),n.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),n.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),n.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),n.appendIfPresent(",tos=".concat(e.tos),"tos"),n.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),n.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password"))n.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),n.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),n.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){var s=e["plugin-opts"].password,i=e["plugin-opts"].host,a=e["plugin-opts"].version;if(s&&(n.append(",shadow-tls-password=".concat(s)),i&&n.append(",shadow-tls-sni=".concat(i)),a)){if(a<2)throw new Error("shadow-tls version ".concat(a," is not supported"));n.append(",shadow-tls-version=".concat(a))}}return n.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),n.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),n.toString()}(e,r["include-unsupported-proxy"]);case"trojan":return function(e){var t=new _$utils_108.Result(e);t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",password=".concat(e.password),"password");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),handleTransport(t,e),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"vmess":return function(e,t){var r=new _$utils_108.Result(e);r.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),r.appendIfPresent(",username=".concat(e.uuid),"uuid");var n=ipVersions[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(",ip-version=".concat(n),"ip-version"),r.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),handleTransport(r,e,t),(0,_$utils_108.isPresent)(e,"aead")?r.append(",vmess-aead=".concat(e.aead)):r.append(",vmess-aead=".concat(0===e.alterId)),r.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),r.appendIfPresent(",tls=".concat(e.tls),"tls"),r.appendIfPresent(",sni=".concat(e.sni),"sni"),r.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),r.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),r.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),r.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),r.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),r.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),r.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),r.appendIfPresent(",tos=".concat(e.tos),"tos"),r.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),r.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(r.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),r.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),r.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),r.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),r.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),r.toString()}(e,r["include-unsupported-proxy"]);case"http":return function(e){var t=new _$utils_108.Result(e),r=e.tls?"https":"http";t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password");var n=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(n),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_108.Result(e),r=e.tls?"socks5-tls":"socks5";t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password");var n=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(n),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),e.tfo&&___app_105.default.info("Option tfo is not supported by Surge, thus omitted"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"snell":return function(e){var t,r,n,o=new _$utils_108.Result(e);o.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),o.appendIfPresent(",version=".concat(e.version),"version"),o.appendIfPresent(",psk=".concat(e.psk),"psk");var s=ipVersions[e["ip-version"]]||e["ip-version"];return o.appendIfPresent(",ip-version=".concat(s),"ip-version"),o.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),o.appendIfPresent(",obfs=".concat(null===(t=e["obfs-opts"])||void 0===t?void 0:t.mode),"obfs-opts.mode"),o.appendIfPresent(",obfs-host=".concat(null===(r=e["obfs-opts"])||void 0===r?void 0:r.host),"obfs-opts.host"),o.appendIfPresent(",obfs-uri=".concat(null===(n=e["obfs-opts"])||void 0===n?void 0:n.path),"obfs-opts.path"),o.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),o.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),o.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),o.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),o.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),o.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),o.appendIfPresent(",tos=".concat(e.tos),"tos"),o.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),o.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(o.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),o.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),o.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),o.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),o.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),o.appendIfPresent(",reuse=".concat(e.reuse),"reuse"),o.toString()}(e);case"tuic":return function(e){var t=new _$utils_108.Result(e),r=e.type;e.token&&0!==e.token.length||(r="tuic-v5"),t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",uuid=".concat(e.uuid),"uuid"),t.appendIfPresent(",password=".concat(e.password),"password"),t.appendIfPresent(",token=".concat(e.token),"token"),t.appendIfPresent(",alpn=".concat(Array.isArray(e.alpn)?e.alpn[0]:e.alpn),"alpn"),(0,_$utils_108.isPresent)(e,"ports")&&t.append(',port-hopping="'.concat(e.ports.replace(/,/g,";"),'"')),t.appendIfPresent(",port-hopping-interval=".concat(e["hop-interval"]),"hop-interval");var n=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(n),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),(0,_$utils_108.isPresent)(e,"tfo")?t.append(",tfo=".concat(e.tfo)):(0,_$utils_108.isPresent)(e,"fast-open")&&t.append(",tfo=".concat(e["fast-open"])),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.appendIfPresent(",ecn=".concat(e.ecn),"ecn"),t.toString()}(e);case"wireguard-surge":return function(e){var t=new _$utils_108.Result(e);t.append("".concat(e.name,"=wireguard")),t.appendIfPresent(",section-name=".concat(e["section-name"]),"section-name"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(t.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),t.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),t.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e);case"hysteria2":return function(e){var t;if(e.obfs||e["obfs-password"])throw new Error("obfs is unsupported");var r=new _$utils_108.Result(e);r.append("".concat(e.name,"=hysteria2,").concat(e.server,",").concat(e.port)),r.appendIfPresent(",password=".concat(e.password),"password"),(0,_$utils_108.isPresent)(e,"ports")&&r.append(',port-hopping="'.concat(e.ports.replace(/,/g,";"),'"')),r.appendIfPresent(",port-hopping-interval=".concat(e["hop-interval"]),"hop-interval");var n=ipVersions[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(",ip-version=".concat(n),"ip-version"),r.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),r.appendIfPresent(",sni=".concat(e.sni),"sni"),r.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),r.appendIfPresent(",server-cert-fingerprint-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),(0,_$utils_108.isPresent)(e,"tfo")?r.append(",tfo=".concat(e.tfo)):(0,_$utils_108.isPresent)(e,"fast-open")&&r.append(",tfo=".concat(e["fast-open"])),r.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),r.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),r.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),r.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),r.appendIfPresent(",tos=".concat(e.tos),"tos"),r.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),r.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(r.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),r.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),r.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),r.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),r.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),r.appendIfPresent(",download-bandwidth=".concat((null===(t="".concat(e.down).match(/\d+/))||void 0===t?void 0:t[0])||0),"down"),r.appendIfPresent(",ecn=".concat(e.ecn),"ecn"),r.toString()}(e);case"ssh":return function(e){var t=new _$utils_108.Result(e);t.append("".concat(e.name,"=ssh,").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password"),t.appendIfPresent(",private-key=".concat(e["keystore-private-key"]),"keystore-private-key"),t.appendIfPresent(",idle-timeout=".concat(e["idle-timeout"]),"idle-timeout"),t.appendIfPresent(',server-fingerprint="'.concat(e["server-fingerprint"],'"'),"server-fingerprint");var r=ipVersions[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(",ip-version=".concat(r),"ip-version"),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),t.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),t.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),t.appendIfPresent(",tos=".concat(e.tos),"tos"),t.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),t.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),t.toString()}(e)}if(r["include-unsupported-proxy"]&&"wireguard"===e.type)return function(e){var t;Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);var r=new _$utils_108.Result(e);r.append("# > WireGuard Proxy ".concat(e.name,"\n# ").concat(e.name,"=wireguard")),e["section-name"]=(0,_$utils_130.getIfNotBlank)(e["section-name"],e.name),r.appendIfPresent(",section-name=".concat(e["section-name"]),"section-name"),r.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert");var n=ipVersions[e["ip-version"]]||e["ip-version"];r.appendIfPresent(",ip-version=".concat(n),"ip-version"),r.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),r.appendIfPresent(",test-timeout=".concat(e["test-timeout"]),"test-timeout"),r.appendIfPresent(",test-udp=".concat(e["test-udp"]),"test-udp"),r.appendIfPresent(",hybrid=".concat(e.hybrid),"hybrid"),r.appendIfPresent(",tos=".concat(e.tos),"tos"),r.appendIfPresent(",allow-other-interface=".concat(e["allow-other-interface"]),"allow-other-interface"),r.appendIfPresent(",interface=".concat(e["interface-name"]),"interface-name"),(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&(r.append(",shadow-tls-password=".concat(e["shadow-tls-password"])),r.appendIfPresent(",shadow-tls-version=".concat(e["shadow-tls-version"]),"shadow-tls-version"),r.appendIfPresent(",shadow-tls-sni=".concat(e["shadow-tls-sni"]),"shadow-tls-sni")),r.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),r.appendIfPresent(",underlying-proxy=".concat(e["underlying-proxy"]),"underlying-proxy"),r.append("\n# > WireGuard Section ".concat(e.name,"\n[WireGuard ").concat(e["section-name"],"]\nprivate-key = ").concat(e["private-key"])),r.appendIfPresent("\nself-ip = ".concat(e.ip),"ip"),r.appendIfPresent("\nself-ip-v6 = ".concat(e.ipv6),"ipv6"),e.dns&&(Array.isArray(e.dns)&&(e.dns=e.dns.join(", ")),r.append("\ndns-server = ".concat(e.dns))),r.appendIfPresent("\nmtu = ".concat(e.mtu),"mtu"),"prefer-v6"===n&&r.append("\nprefer-ipv6 = true");var o=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],s=Array.isArray(e.reserved)?e.reserved.join("/"):e.reserved,i=null!==(t=e["preshared-key"])&&void 0!==t?t:e["pre-shared-key"];i&&(i=',preshared-key="'.concat(i,'"'));var a={"public-key":e["public-key"],"allowed-ips":o?'"'.concat(o,'"'):void 0,endpoint:"".concat(e.server,":").concat(e.port),keepalive:e["persistent-keepalive"]||e.keepalive,"client-id":s,"preshared-key":i};return r.append("\npeer = (".concat(Object.keys(a).filter((function(e){return null!=a[e]})).map((function(e){return"".concat(e," = ").concat(a[e])})).join(", "),")")),r.toString()}(e);throw new Error("Platform ".concat(targetPlatform," does not support proxy type: ").concat(e.type))}}};var __obj_105,___app_105=(__obj_105=_$app_87)&&__obj_105.__esModule?__obj_105:{default:__obj_105};function ___arrayLikeToArray_105(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var targetPlatform="Surge",ipVersions={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function handleTransport(e,t,r){if((0,_$utils_108.isPresent)(t,"network"))if("ws"===t.network){if(e.append(",ws=true"),(0,_$utils_108.isPresent)(t,"ws-opts")&&(e.appendIfPresent(",ws-path=".concat(t["ws-opts"].path),"ws-opts.path"),(0,_$utils_108.isPresent)(t,"ws-opts.headers"))){var n=t["ws-opts"].headers,o=Object.keys(n).map((function(e){var t=n[e];return["Host"].includes(e)&&(t='"'.concat(t,'"')),"".concat(e,":").concat(t)})).join("|");(0,_$utils_130.isNotBlank)(o)&&e.append(",ws-headers=".concat(o))}}else{if(!r||!["http"].includes(t.network))throw new Error("network ".concat(t.network," is unsupported"));___app_105.default.info("Include Unsupported Proxy: nework ".concat(t.network," -> tcp"))}}var _$clashmeta_97={};Object.defineProperty(_$clashmeta_97,"__esModule",{value:!0}),_$clashmeta_97.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||"snell"!==e.type||"4"!==String(e.version)})).map((function(e){var r;if("vmess"===e.type)(0,_$utils_108.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_108.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("tuic"===e.type)(0,_$utils_108.isPresent)(e,"alpn")?e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]:e.alpn=["h3"],(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo),e.token&&0!==e.token.length||(0,_$utils_108.isPresent)(e,"version")||(e.version=5);else if("hysteria"===e.type)(0,_$utils_108.isPresent)(e,"auth_str")&&!(0,_$utils_108.isPresent)(e,"auth-str")&&(e["auth-str"]=e.auth_str),(0,_$utils_108.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo);else if("wireguard"===e.type){var n,o;e.keepalive=null!==(n=e.keepalive)&&void 0!==n?n:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(o=e["preshared-key"])&&void 0!==o?o:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type?(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni):"ss"===e.type&&(0,_$utils_108.isPresent)(e,"shadow-tls-password")&&!(0,_$utils_108.isPresent)(e,"plugin")&&(e.plugin="shadow-tls",e["plugin-opts"]={host:e["shadow-tls-sni"],password:e["shadow-tls-password"],version:e["shadow-tls-version"]});if(["vmess","vless"].includes(e.type)&&"http"===e.network){var s,i,a,u=null===(s=e["http-opts"])||void 0===s?void 0:s.path;(0,_$utils_108.isPresent)(e,"http-opts.path")&&!Array.isArray(u)&&(e["http-opts"].path=[u]);var c=null===(i=e["http-opts"])||void 0===i||null===(a=i.headers)||void 0===a?void 0:a.Host;(0,_$utils_108.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(c)&&(e["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var l,p,f,h=null===(l=e["h2-opts"])||void 0===l?void 0:l.path;(0,_$utils_108.isPresent)(e,"h2-opts.path")&&Array.isArray(h)&&(e["h2-opts"].path=h[0]);var d=null===(p=e["h2-opts"])||void 0===p||null===(f=p.headers)||void 0===f?void 0:f.host;(0,_$utils_108.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(d)&&(e["h2-opts"].headers.host=[d])}if(null!==(r=e["plugin-opts"])&&void 0!==r&&r.tls&&(0,_$utils_108.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_108.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,delete e["no-resolve"],"internal"!==t)for(var _ in e)(null==e[_]||/^_/i.test(_))&&delete e[_];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$surgemac_106={};Object.defineProperty(_$surgemac_106,"__esModule",{value:!0}),_$surgemac_106.default=function(){return{produce:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t.type){case"external":return external(t);default:try{return surge_Producer.produce(t,r,n)}catch(e){if(n.useMihomoExternal)return ___app_106.default.log("".concat(t.name," is not supported on ").concat(__targetPlatform_106,", try to use Mihomo(SurgeMac - External Proxy Program) instead")),function(e,t,r){var n,o=null===(n=(0,_clashmeta.default)().produce([e],"internal"))||void 0===n?void 0:n[0];if(o){var s=(null==r?void 0:r.localPort)||e._localPort||65535,i=!["ipv4","v4-only"].includes(e["ip-version"]),a={name:e.name,type:"external",exec:e._exec||"/usr/local/bin/mihomo","local-port":s,args:["-config",_$base64_20.Base64.encode(JSON.stringify({"mixed-port":s,ipv6:i,mode:"global",dns:{enable:!0,ipv6:i,nameserver:["https://223.6.6.6/dns-query","https://120.53.53.53/dns-query"]},proxies:[___objectSpread_106(___objectSpread_106({},o),{},{name:"proxy"})],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return __isIP_106(e.server)?a.addresses.push(e.server):___app_106.default.log("Platform ".concat(__targetPlatform_106,", proxy type ").concat(e.type,": addresses should be an IP address, but got ").concat(e.server)),r.localPort=s-1,external(a)}}(t,0,n)}}}}};var _surge=___interopRequireDefault_106(_$surge_105),_clashmeta=___interopRequireDefault_106(_$clashmeta_97),___app_106=___interopRequireDefault_106(_$app_87);function ___interopRequireDefault_106(e){return e&&e.__esModule?e:{default:e}}function __ownKeys_106(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_106(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_106(Object(r),!0).forEach((function(t){___defineProperty_106(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_106(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_106(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var __targetPlatform_106="SurgeMac",surge_Producer=(0,_surge.default)();function external(e){var t=new _$utils_108.Result(e);if(!e.exec||!e["local-port"])throw new Error("".concat(e.type,": exec and local-port are required"));return t.append("".concat(e.name,'=external,exec="').concat(e.exec,'",local-port=').concat(e["local-port"])),Array.isArray(e.args)&&e.args.map((function(e){t.append(',args="'.concat(e,'"'))})),Array.isArray(e.addresses)&&e.addresses.map((function(e){t.append(",addresses=".concat(e))})),t.appendIfPresent(",no-error-alert=".concat(e["no-error-alert"]),"no-error-alert"),(0,_$utils_108.isPresent)(e,"tfo")?t.append(",tfo=".concat(e.tfo)):(0,_$utils_108.isPresent)(e,"fast-open")&&t.append(",tfo=".concat(e["fast-open"])),t.appendIfPresent(",test-url=".concat(e["test-url"]),"test-url"),t.appendIfPresent(",block-quic=".concat(e["block-quic"]),"block-quic"),t.toString()}function __isIP_106(e){return(0,_$utils_130.isIPv4)(e)||(0,_$utils_130.isIPv6)(e)}var _$clash_96={};Object.defineProperty(_$clash_96,"__esModule",{value:!0}),_$clash_96.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||!(!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(e.type)||"ss"===e.type&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher)||"snell"===e.type&&"4"===String(e.version)||"vless"===e.type&&(void 0!==e.flow||e["reality-opts"]))})).map((function(e){var r;if("vmess"===e.type)(0,_$utils_108.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_108.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("wireguard"===e.type){var n,o;e.keepalive=null!==(n=e.keepalive)&&void 0!==n?n:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(o=e["preshared-key"])&&void 0!==o?o:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type&&(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni);if(["vmess","vless"].includes(e.type)&&"http"===e.network){var s,i,a,u=null===(s=e["http-opts"])||void 0===s?void 0:s.path;(0,_$utils_108.isPresent)(e,"http-opts.path")&&!Array.isArray(u)&&(e["http-opts"].path=[u]);var c=null===(i=e["http-opts"])||void 0===i||null===(a=i.headers)||void 0===a?void 0:a.Host;(0,_$utils_108.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(c)&&(e["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var l,p,f,h=null===(l=e["h2-opts"])||void 0===l?void 0:l.path;(0,_$utils_108.isPresent)(e,"h2-opts.path")&&Array.isArray(h)&&(e["h2-opts"].path=h[0]);var d=null===(p=e["h2-opts"])||void 0===p||null===(f=p.headers)||void 0===f?void 0:f.host;(0,_$utils_108.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(d)&&(e["h2-opts"].headers.host=[d])}if(null!==(r=e["plugin-opts"])&&void 0!==r&&r.tls&&(0,_$utils_108.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_108.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,delete e["no-resolve"],"internal"!==t)for(var _ in e)(null==e[_]||/^_/i.test(_))&&delete e[_];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$stash_103={};Object.defineProperty(_$stash_103,"__esModule",{value:!0}),_$stash_103.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||!(!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity"].includes(e.type)||"ss"===e.type&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher)||"snell"===e.type&&"4"===String(e.version)||"vless"===e.type&&e["reality-opts"])})).map((function(e){var r;if("vmess"===e.type)(0,_$utils_108.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_108.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("tuic"===e.type)(0,_$utils_108.isPresent)(e,"alpn")?e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]:e.alpn=["h3"],(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo,delete e.tfo),e.token&&0!==e.token.length||(0,_$utils_108.isPresent)(e,"version")||(e.version=5);else if("hysteria"===e.type){var n,o;(0,_$utils_108.isPresent)(e,"auth_str")&&!(0,_$utils_108.isPresent)(e,"auth-str")&&(e["auth-str"]=e.auth_str),(0,_$utils_108.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo,delete e.tfo),(0,_$utils_108.isPresent)(e,"down")&&!(0,_$utils_108.isPresent)(e,"down-speed")&&(e["down-speed"]=e.down,delete e.down),(0,_$utils_108.isPresent)(e,"up")&&!(0,_$utils_108.isPresent)(e,"up-speed")&&(e["up-speed"]=e.up,delete e.up),(0,_$utils_108.isPresent)(e,"down-speed")&&(e["down-speed"]=(null===(n="".concat(e["down-speed"]).match(/\d+/))||void 0===n?void 0:n[0])||0),(0,_$utils_108.isPresent)(e,"up-speed")&&(e["up-speed"]=(null===(o="".concat(e["up-speed"]).match(/\d+/))||void 0===o?void 0:o[0])||0)}else if("hysteria2"===e.type){var s,i;(0,_$utils_108.isPresent)(e,"password")&&!(0,_$utils_108.isPresent)(e,"auth")&&(e.auth=e.password,delete e.password),(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo,delete e.tfo),(0,_$utils_108.isPresent)(e,"down")&&!(0,_$utils_108.isPresent)(e,"down-speed")&&(e["down-speed"]=e.down,delete e.down),(0,_$utils_108.isPresent)(e,"up")&&!(0,_$utils_108.isPresent)(e,"up-speed")&&(e["up-speed"]=e.up,delete e.up),(0,_$utils_108.isPresent)(e,"down-speed")&&(e["down-speed"]=(null===(s="".concat(e["down-speed"]).match(/\d+/))||void 0===s?void 0:s[0])||0),(0,_$utils_108.isPresent)(e,"up-speed")&&(e["up-speed"]=(null===(i="".concat(e["up-speed"]).match(/\d+/))||void 0===i?void 0:i[0])||0)}else if("wireguard"===e.type){var a,u;e.keepalive=null!==(a=e.keepalive)&&void 0!==a?a:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(u=e["preshared-key"])&&void 0!==u?u:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type&&(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni);if(["vmess","vless"].includes(e.type)&&"http"===e.network){var c,l,p,f=null===(c=e["http-opts"])||void 0===c?void 0:c.path;(0,_$utils_108.isPresent)(e,"http-opts.path")&&!Array.isArray(f)&&(e["http-opts"].path=[f]);var h=null===(l=e["http-opts"])||void 0===l||null===(p=l.headers)||void 0===p?void 0:p.Host;(0,_$utils_108.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(h)&&(e["http-opts"].headers.Host=[h])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var d,_,g,y=null===(d=e["h2-opts"])||void 0===d?void 0:d.path;(0,_$utils_108.isPresent)(e,"h2-opts.path")&&Array.isArray(y)&&(e["h2-opts"].path=y[0]);var v=null===(_=e["h2-opts"])||void 0===_||null===(g=_.headers)||void 0===g?void 0:g.host;(0,_$utils_108.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(v)&&(e["h2-opts"].headers.host=[v])}if(null!==(r=e["plugin-opts"])&&void 0!==r&&r.tls&&(0,_$utils_108.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e["server-cert-fingerprint"]=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_108.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,e["test-url"]&&(e["benchmark-url"]=e["test-url"],delete e["test-url"]),e["test-timeout"]&&(e["benchmark-timeout"]=e["test-timeout"],delete e["test-timeout"]),delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,delete e["no-resolve"],"internal"!==t)for(var m in e)(null==e[m]||/^_/i.test(m))&&delete e[m];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$loon_99={};Object.defineProperty(_$loon_99,"__esModule",{value:!0}),_$loon_99.default=function(){return{produce:function(e){switch(e.type){case"ss":return function(e){var t=new _$utils_108.Result(e);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));if(t.append("".concat(e.name,"=shadowsocks,").concat(e.server,",").concat(e.port,",").concat(e.cipher,',"').concat(e.password,'"')),(0,_$utils_108.isPresent)(e,"plugin")){if("obfs"!==e.plugin)throw new Error("plugin ".concat(e.plugin," is not supported"));t.append(",obfs-name=".concat(e["plugin-opts"].mode)),t.appendIfPresent(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),t.appendIfPresent(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path")}return t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"ssr":return function(e){var t=new _$utils_108.Result(e);return t.append("".concat(e.name,"=shadowsocksr,").concat(e.server,",").concat(e.port,",").concat(e.cipher,',"').concat(e.password,'"')),t.append(",protocol=".concat(e.protocol)),t.appendIfPresent(",protocol-param=".concat(e["protocol-param"]),"protocol-param"),t.appendIfPresent(",obfs=".concat(e.obfs),"obfs"),t.appendIfPresent(",obfs-param=".concat(e["obfs-param"]),"obfs-param"),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_108.Result(e);if(t.append("".concat(e.name,"=trojan,").concat(e.server,",").concat(e.port,',"').concat(e.password,'"')),"tcp"===e.network&&delete e.network,(0,_$utils_108.isPresent)(e,"network")){if("ws"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var r,n,o;t.append(",transport=ws"),t.appendIfPresent(",path=".concat(null===(r=e["ws-opts"])||void 0===r?void 0:r.path),"ws-opts.path"),t.appendIfPresent(",host=".concat(null===(n=e["ws-opts"])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host),"ws-opts.headers.Host")}return t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tls-name=".concat(e.sni),"sni"),t.appendIfPresent(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"vmess":return function(e){var t=new _$utils_108.Result(e);if(t.append("".concat(e.name,"=vmess,").concat(e.server,",").concat(e.port,",").concat(e.cipher,',"').concat(e.uuid,'"')),"tcp"===e.network&&delete e.network,(0,_$utils_108.isPresent)(e,"network"))if("ws"===e.network){var r,n,o;t.append(",transport=ws"),t.appendIfPresent(",path=".concat(null===(r=e["ws-opts"])||void 0===r?void 0:r.path),"ws-opts.path"),t.appendIfPresent(",host=".concat(null===(n=e["ws-opts"])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host),"ws-opts.headers.Host")}else{if("http"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var s,i,a;t.append(",transport=http");var u=null===(s=e["http-opts"])||void 0===s?void 0:s.path,c=null===(i=e["http-opts"])||void 0===i||null===(a=i.headers)||void 0===a?void 0:a.Host;t.appendIfPresent(",path=".concat(Array.isArray(u)?u[0]:u),"http-opts.path"),t.appendIfPresent(",host=".concat(Array.isArray(c)?c[0]:c),"http-opts.headers.Host")}else t.append(",transport=tcp");return t.appendIfPresent(",over-tls=".concat(e.tls),"tls"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tls-name=".concat(e.sni),"sni"),t.appendIfPresent(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),(0,_$utils_108.isPresent)(e,"aead")?t.append(",alterId=0"):t.append(",alterId=".concat(e.alterId)),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"vless":return function(e){if(e["reality-opts"])throw new Error("VLESS REALITY is unsupported");var t=new _$utils_108.Result(e);if(t.append("".concat(e.name,"=vless,").concat(e.server,",").concat(e.port,',"').concat(e.uuid,'"')),"tcp"===e.network&&delete e.network,(0,_$utils_108.isPresent)(e,"network"))if("ws"===e.network){var r,n,o;t.append(",transport=ws"),t.appendIfPresent(",path=".concat(null===(r=e["ws-opts"])||void 0===r?void 0:r.path),"ws-opts.path"),t.appendIfPresent(",host=".concat(null===(n=e["ws-opts"])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.Host),"ws-opts.headers.Host")}else{if("http"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var s,i,a;t.append(",transport=http");var u=null===(s=e["http-opts"])||void 0===s?void 0:s.path,c=null===(i=e["http-opts"])||void 0===i||null===(a=i.headers)||void 0===a?void 0:a.Host;t.appendIfPresent(",path=".concat(Array.isArray(u)?u[0]:u),"http-opts.path"),t.appendIfPresent(",host=".concat(Array.isArray(c)?c[0]:c),"http-opts.headers.Host")}else t.append(",transport=tcp");return t.appendIfPresent(",over-tls=".concat(e.tls),"tls"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tls-name=".concat(e.sni),"sni"),t.appendIfPresent(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),t.appendIfPresent(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),t.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"http":return function(e){var t=new _$utils_108.Result(e),r=e.tls?"https":"http";return t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(',"'.concat(e.password,'"'),"password"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_108.Result(e);return t.append("".concat(e.name,"=socks5,").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(',"'.concat(e.password,'"'),"password"),t.appendIfPresent(",over-tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),e.udp&&t.append(",udp=true"),t.toString()}(e);case"wireguard":return function(e){var t,r,n;Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);var o=new _$utils_108.Result(e);if(o.append("".concat(e.name,"=wireguard")),o.appendIfPresent(",interface-ip=".concat(e.ip),"ip"),o.appendIfPresent(",interface-ipv6=".concat(e.ipv6),"ipv6"),o.appendIfPresent(',private-key="'.concat(e["private-key"],'"'),"private-key"),o.appendIfPresent(",mtu=".concat(e.mtu),"mtu"),e.dns&&Array.isArray(e.dns)){e.dnsv6=e.dns.find((function(e){return(0,_$utils_130.isIPv6)(e)}));var s=e.dns.find((function(e){return(0,_$utils_130.isIPv4)(e)}));s||(s=e.dns.find((function(e){return!(0,_$utils_130.isIPv4)(e)&&!(0,_$utils_130.isIPv6)(e)}))),e.dns=s}o.appendIfPresent(",dns=".concat(e.dns),"dns"),o.appendIfPresent(",dnsv6=".concat(e.dnsv6),"dnsv6"),o.appendIfPresent(",keepalive=".concat(e["persistent-keepalive"]),"persistent-keepalive"),o.appendIfPresent(",keepalive=".concat(e.keepalive),"keepalive");var i=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],a=Array.isArray(e.reserved)?e.reserved.join(","):e.reserved;a&&(a=",reserved=[".concat(a,"]"));var u=null!==(t=e["preshared-key"])&&void 0!==t?t:e["pre-shared-key"];return u&&(u=',preshared-key="'.concat(u,'"')),o.append(',peers=[{public-key="'.concat(e["public-key"],'",allowed-ips="').concat(null!=i?i:"0.0.0.0/0,::/0",'",endpoint=').concat(e.server,":").concat(e.port).concat(null!==(r=a)&&void 0!==r?r:"").concat(null!==(n=u)&&void 0!==n?n:"","}]")),o.toString()}(e);case"hysteria2":return function(e){var t;if(e["obfs-password"]&&"salamander"!=e.obfs)throw new Error("only salamander obfs is supported");var r=new _$utils_108.Result(e);return r.append("".concat(e.name,"=Hysteria2,").concat(e.server,",").concat(e.port)),r.appendIfPresent(',"'.concat(e.password,'"'),"password"),r.appendIfPresent(",tls-name=".concat(e.sni),"sni"),r.appendIfPresent(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),r.appendIfPresent(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),r.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),e["obfs-password"]&&"salamander"==e.obfs&&r.append(",salamander-password=".concat(e["obfs-password"])),r.appendIfPresent(",fast-open=".concat(e.tfo),"tfo"),e.udp&&r.append(",udp=true"),r.appendIfPresent(",download-bandwidth=".concat((null===(t="".concat(e.down).match(/\d+/))||void 0===t?void 0:t[0])||0),"down"),r.appendIfPresent(",ecn=".concat(e.ecn),"ecn"),r.toString()}(e)}throw new Error("Platform ".concat(__targetPlatform_99," does not support proxy type: ").concat(e.type))}}};var __targetPlatform_99="Loon",_$uri_107={};Object.defineProperty(_$uri_107,"__esModule",{value:!0}),_$uri_107.default=function(){return{type:"SINGLE",produce:function(e){var t,r,n,o,s,i,a="";for(var u in delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,delete e["no-resolve"],e)(null==e[u]||/^_/i.test(u))&&delete e[u];switch(["trojan","tuic","hysteria","hysteria2","juicity"].includes(e.type)&&delete e.tls,e.server&&(0,_$utils_130.isIPv6)(e.server)&&(e.server="[".concat(e.server,"]")),e.type){case"ss":var c="".concat(e.cipher,":").concat(e.password);if(a="ss://".concat(_$base64_20.Base64.encode(c),"@").concat(e.server,":").concat(e.port).concat(e.plugin?"/":""),e.plugin){a+="?plugin=";var l=e["plugin-opts"];switch(e.plugin){case"obfs":a+=encodeURIComponent("simple-obfs;obfs=".concat(l.mode).concat(l.host?";obfs-host="+l.host:""));break;case"v2ray-plugin":a+=encodeURIComponent("v2ray-plugin;obfs=".concat(l.mode).concat(l.host?";obfs-host"+l.host:"").concat(l.tls?";tls":""));break;default:throw new Error("Unsupported plugin option: ".concat(e.plugin))}}e["udp-over-tcp"]&&(a="".concat(a).concat(e.plugin?"&":"?","uot=1")),e.tfo&&(a="".concat(a).concat(e.plugin||e["udp-over-tcp"]?"&":"?","tfo=1")),a+="#".concat(encodeURIComponent(e.name));break;case"ssr":a="".concat(e.server,":").concat(e.port,":").concat(e.protocol,":").concat(e.cipher,":").concat(e.obfs,":").concat(_$base64_20.Base64.encode(e.password),"/"),a+="?remarks=".concat(_$base64_20.Base64.encode(e.name)).concat(e["obfs-param"]?"&obfsparam="+_$base64_20.Base64.encode(e["obfs-param"]):"").concat(e["protocol-param"]?"&protocolparam="+_$base64_20.Base64.encode(e["protocol-param"]):""),a="ssr://"+_$base64_20.Base64.encode(a);break;case"vmess":var p="",f=e.network||"tcp";if("http"===e.network?(f="tcp",p="http"):"ws"===e.network&&null!==(t=e["ws-opts"])&&void 0!==t&&t["v2ray-http-upgrade"]&&(f="httpupgrade"),a={v:"2",ps:e.name,add:e.server,port:e.port,id:e.uuid,type:p,aid:0,net:f,tls:e.tls?"tls":""},e.tls&&e.sni&&(a.sni=e.sni),e.network){var h,d,_,g,y,v=null===(h=e["".concat(e.network,"-opts")])||void 0===h?void 0:h.path,m=null===(d=e["".concat(e.network,"-opts")])||void 0===d||null===(_=d.headers)||void 0===_?void 0:_.Host;v&&(a.path=Array.isArray(v)?v[0]:v),m&&(a.host=Array.isArray(m)?m[0]:m),["grpc"].includes(e.network)&&(a.path=null===(g=e["".concat(e.network,"-opts")])||void 0===g?void 0:g["grpc-service-name"],a.type=(null===(y=e["".concat(e.network,"-opts")])||void 0===y?void 0:y["_grpc-type"])||"gun")}a="vmess://"+_$base64_20.Base64.encode(JSON.stringify(a));break;case"vless":var b="none",w="",E="";if(e["reality-opts"]){var x,A;b="reality";var S=null===(x=e["reality-opts"])||void 0===x?void 0:x["public-key"];S&&(E="&pbk=".concat(encodeURIComponent(S)));var C=null===(A=e["reality-opts"])||void 0===A?void 0:A["short-id"];C&&(w="&sid=".concat(encodeURIComponent(C)))}else e.tls&&(b="tls");var P="";e.alpn&&(P="&alpn=".concat(encodeURIComponent(Array.isArray(e.alpn)?e.alpn:e.alpn.join(","))));var I="";e["skip-cert-verify"]&&(I="&allowInsecure=1");var F="";e.sni&&(F="&sni=".concat(encodeURIComponent(e.sni)));var k="";e["client-fingerprint"]&&(k="&fp=".concat(encodeURIComponent(e["client-fingerprint"])));var R="";e.flow&&(R="&flow=".concat(encodeURIComponent(e.flow)));var $=e.network;"ws"===e.network&&null!==(r=e["ws-opts"])&&void 0!==r&&r["v2ray-http-upgrade"]&&($="httpupgrade");var O,T="&type=".concat(encodeURIComponent($));["grpc"].includes(e.network)&&(T+="&mode=".concat(encodeURIComponent((null===(O=e["".concat(e.network,"-opts")])||void 0===O?void 0:O["_grpc-type"])||"gun")));var D=null===(n=e["".concat(e.network,"-opts")])||void 0===n?void 0:n["".concat(e.network,"-service-name")],B=null===(o=e["".concat(e.network,"-opts")])||void 0===o?void 0:o.path,j=null===(s=e["".concat(e.network,"-opts")])||void 0===s||null===(i=s.headers)||void 0===i?void 0:i.Host;B&&(T+="&path=".concat(encodeURIComponent(Array.isArray(B)?B[0]:B))),j&&(T+="&host=".concat(encodeURIComponent(Array.isArray(j)?j[0]:j))),D&&(T+="&serviceName=".concat(encodeURIComponent(D))),a="vless://".concat(e.uuid,"@").concat(e.server,":").concat(e.port,"?security=").concat(encodeURIComponent(b)).concat(T).concat(P).concat(I).concat(F).concat(k).concat(R).concat(w).concat(E,"#").concat(encodeURIComponent(e.name));break;case"trojan":var N="";if(e.network){var L,U,H,M,q=e.network;if("ws"===e.network&&null!==(L=e["ws-opts"])&&void 0!==L&&L["v2ray-http-upgrade"]&&(q="httpupgrade"),N="&type=".concat(encodeURIComponent(q)),["grpc"].includes(e.network)){var V,K,G=null===(V=e["".concat(e.network,"-opts")])||void 0===V?void 0:V["".concat(e.network,"-service-name")];G&&(N+="&serviceName=".concat(encodeURIComponent(G))),N+="&mode=".concat(encodeURIComponent((null===(K=e["".concat(e.network,"-opts")])||void 0===K?void 0:K["_grpc-type"])||"gun"))}var z=null===(U=e["".concat(e.network,"-opts")])||void 0===U?void 0:U.path,Y=null===(H=e["".concat(e.network,"-opts")])||void 0===H||null===(M=H.headers)||void 0===M?void 0:M.Host;z&&(N+="&path=".concat(encodeURIComponent(Array.isArray(z)?z[0]:z))),Y&&(N+="&host=".concat(encodeURIComponent(Array.isArray(Y)?Y[0]:Y)))}a="trojan://".concat(e.password,"@").concat(e.server,":").concat(e.port,"?sni=").concat(encodeURIComponent(e.sni||e.server)).concat(e["skip-cert-verify"]?"&allowInsecure=1":"").concat(N,"#").concat(encodeURIComponent(e.name));break;case"hysteria2":var W=[];e["skip-cert-verify"]&&W.push("insecure=1"),e.obfs&&(W.push("obfs=".concat(encodeURIComponent(e.obfs))),e["obfs-password"]&&W.push("obfs-password=".concat(encodeURIComponent(e["obfs-password"])))),e.sni&&W.push("sni=".concat(encodeURIComponent(e.sni))),e.ports&&W.push("mport=".concat(e.ports)),e["tls-fingerprint"]&&W.push("pinSHA256=".concat(encodeURIComponent(e["tls-fingerprint"]))),e.tfo&&W.push("fastopen=1"),a="hysteria2://".concat(encodeURIComponent(e.password),"@").concat(e.server,":").concat(e.port,"?").concat(W.join("&"),"#").concat(encodeURIComponent(e.name));break;case"hysteria":var X=[];Object.keys(e).forEach((function(t){if(!["name","type","server","port"].includes(t)){var r=t.replace(/-/,"_");["alpn"].includes(t)?e[t]&&X.push("".concat(r,"=").concat(encodeURIComponent(Array.isArray(e[t])?e[t][0]:e[t]))):["skip-cert-verify"].includes(t)?e[t]&&X.push("insecure=1"):["tfo","fast-open"].includes(t)?e[t]&&!X.includes("fastopen=1")&&X.push("fastopen=1"):["ports"].includes(t)?X.push("mport=".concat(e[t])):["auth-str"].includes(t)?X.push("auth=".concat(e[t])):["up"].includes(t)?X.push("upmbps=".concat(e[t])):["down"].includes(t)?X.push("downmbps=".concat(e[t])):["_obfs"].includes(t)?X.push("obfs=".concat(e[t])):["obfs"].includes(t)?X.push("obfsParam=".concat(e[t])):["sni"].includes(t)?X.push("peer=".concat(e[t])):e[t]&&X.push("".concat(r,"=").concat(encodeURIComponent(e[t])))}})),a="hysteria://".concat(e.server,":").concat(e.port,"?").concat(X.join("&"),"#").concat(encodeURIComponent(e.name));break;case"tuic":if(!e.token||0===e.token.length){var J=[];Object.keys(e).forEach((function(t){if(!["name","type","uuid","password","server","port"].includes(t)){var r=t.replace(/-/,"_");["alpn"].includes(t)?e[t]&&J.push("".concat(r,"=").concat(encodeURIComponent(Array.isArray(e[t])?e[t][0]:e[t]))):["skip-cert-verify"].includes(t)?e[t]&&J.push("allow_insecure=1"):["tfo","fast-open"].includes(t)?e[t]&&!J.includes("fast_open=1")&&J.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(t)&&e[t]?J.push("".concat(r,"=1")):e[t]&&J.push("".concat(r,"=").concat(encodeURIComponent(e[t])))}})),a="tuic://".concat(encodeURIComponent(e.uuid),":").concat(encodeURIComponent(e.password),"@").concat(e.server,":").concat(e.port,"?").concat(J.join("&"),"#").concat(encodeURIComponent(e.name))}break;case"wireguard":var Z=[];Object.keys(e).forEach((function(t){["name","type","server","port","ip","ipv6","private-key"].includes(t)||(["public-key"].includes(t)?Z.push("publickey=".concat(e[t])):["udp"].includes(t)?e[t]&&Z.push("".concat(t,"=1")):e[t]&&Z.push("".concat(t,"=").concat(encodeURIComponent(e[t]))))})),e.ip&&e.ipv6?Z.push("address=".concat(e.ip,"/32,").concat(e.ipv6,"/128")):e.ip?Z.push("address=".concat(e.ip,"/32")):e.ipv6&&Z.push("address=".concat(e.ipv6,"/128")),a="wireguard://".concat(encodeURIComponent(e["private-key"]),"@").concat(e.server,":").concat(e.port,"/?").concat(Z.join("&"),"#").concat(encodeURIComponent(e.name))}return a}}};var _$v2ray_109={};Object.defineProperty(_$v2ray_109,"__esModule",{value:!0}),_$v2ray_109.default=function(){return{type:"ALL",produce:function(e){var t=[];return e.map((function(e){try{t.push(URI.produce(e))}catch(r){___app_109.default.error("Cannot produce proxy: ".concat(JSON.stringify(e,null,2),"\nReason: ").concat(r))}})),_$base64_20.Base64.encode(t.join("\n"))}}};var _uri=___interopRequireDefault_109(_$uri_107),___app_109=___interopRequireDefault_109(_$app_87);function ___interopRequireDefault_109(e){return e&&e.__esModule?e:{default:e}}var URI=(0,_uri.default)(),_$qx_100={};Object.defineProperty(_$qx_100,"__esModule",{value:!0}),_$qx_100.default=function(){return{produce:function(e,t){switch(e.type){case"ss":return function(e){var t=new _$utils_108.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(e.cipher||(e.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));if(r("shadowsocks=".concat(e.server,":").concat(e.port)),r(",method=".concat(e.cipher)),r(",password=".concat(e.password)),needTls(e)&&(e.tls=!0),(0,_$utils_108.isPresent)(e,"plugin")){if("obfs"===e.plugin){var o=e["plugin-opts"];r(",obfs=".concat(o.mode))}else{if("v2ray-plugin"!==e.plugin||"websocket"!==e["plugin-opts"].mode)throw new Error("plugin is not supported");e["plugin-opts"].tls?r(",obfs=wss"):r(",obfs=ws")}n(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),n(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path")}return needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"ssr":return function(e){var t=new _$utils_108.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r("shadowsocks=".concat(e.server,":").concat(e.port)),r(",method=".concat(e.cipher)),r(",password=".concat(e.password)),r(",ssr-protocol=".concat(e.protocol)),n(",ssr-protocol-param=".concat(e["protocol-param"]),"protocol-param"),n(",obfs=".concat(e.obfs),"obfs"),n(",obfs-host=".concat(e["obfs-param"]),"obfs-param"),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_108.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r("trojan=".concat(e.server,":").concat(e.port)),r(",password=".concat(e.password)),(0,_$utils_108.isPresent)(e,"network")){if("ws"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));var o,s,i;needTls(e)?r(",obfs=wss"):r(",obfs=ws"),n(",obfs-uri=".concat(null===(o=e["ws-opts"])||void 0===o?void 0:o.path),"ws-opts.path"),n(",obfs-host=".concat(null===(s=e["ws-opts"])||void 0===s||null===(i=s.headers)||void 0===i?void 0:i.Host),"ws-opts.headers.Host")}return"ws"!==e.network&&needTls(e)&&r(",over-tls=true"),needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"vmess":return function(e){var t,r=new _$utils_108.Result(e),n=r.append.bind(r),o=r.appendIfPresent.bind(r);if(n("vmess=".concat(e.server,":").concat(e.port)),t="auto"===e.cipher?"chacha20-ietf-poly1305":e.cipher,n(",method=".concat(t)),n(",password=".concat(e.uuid)),needTls(e)&&(e.tls=!0),(0,_$utils_108.isPresent)(e,"network")){var s,i,a;if("ws"===e.network)e.tls?n(",obfs=wss"):n(",obfs=ws");else{if("http"!==e.network)throw new Error("network ".concat(e.network," is unsupported"));n(",obfs=http")}var u=null===(s=e["".concat(e.network,"-opts")])||void 0===s?void 0:s.path,c=null===(i=e["".concat(e.network,"-opts")])||void 0===i||null===(a=i.headers)||void 0===a?void 0:a.Host;o(",obfs-uri=".concat(Array.isArray(u)?u[0]:u),"".concat(e.network,"-opts.path")),o(",obfs-host=".concat(Array.isArray(c)?c[0]:c),"".concat(e.network,"-opts.headers.Host"))}else e.tls&&n(",obfs=over-tls");return needTls(e)&&(o(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),o(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),o(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),o(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),o(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),o(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),o(",tls-host=".concat(e.sni),"sni")),(0,_$utils_108.isPresent)(e,"aead")?n(",aead=".concat(e.aead)):n(",aead=".concat(0===e.alterId)),o(",fast-open=".concat(e.tfo),"tfo"),o(",udp-relay=".concat(e.udp),"udp"),r.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),n(",tag=".concat(e.name)),r.toString()}(e);case"http":return function(e){var t=new _$utils_108.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r("http=".concat(e.server,":").concat(e.port)),n(",username=".concat(e.username),"username"),n(",password=".concat(e.password),"password"),needTls(e)&&(e.tls=!0),n(",over-tls=".concat(e.tls),"tls"),needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_108.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r("socks5=".concat(e.server,":").concat(e.port)),n(",username=".concat(e.username),"username"),n(",password=".concat(e.password),"password"),needTls(e)&&(e.tls=!0),n(",over-tls=".concat(e.tls),"tls"),needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e);case"vless":return function(e){if(void 0!==e.flow||e["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");var t=new _$utils_108.Result(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r("vless=".concat(e.server,":").concat(e.port)),r(",method=".concat("none")),r(",password=".concat(e.uuid)),needTls(e)&&(e.tls=!0),(0,_$utils_108.isPresent)(e,"network")){var o,s,i;if("ws"===e.network)e.tls?r(",obfs=wss"):r(",obfs=ws");else if("http"===e.network)r(",obfs=http");else if(!["tcp"].includes(e.network))throw new Error("network ".concat(e.network," is unsupported"));var a=null===(o=e["".concat(e.network,"-opts")])||void 0===o?void 0:o.path,u=null===(s=e["".concat(e.network,"-opts")])||void 0===s||null===(i=s.headers)||void 0===i?void 0:i.Host;n(",obfs-uri=".concat(Array.isArray(a)?a[0]:a),"".concat(e.network,"-opts.path")),n(",obfs-host=".concat(Array.isArray(u)?u[0]:u),"".concat(e.network,"-opts.headers.Host"))}else e.tls&&r(",obfs=over-tls");return needTls(e)&&(n(",tls-pubkey-sha256=".concat(e["tls-pubkey-sha256"]),"tls-pubkey-sha256"),n(",tls-alpn=".concat(e["tls-alpn"]),"tls-alpn"),n(",tls-no-session-ticket=".concat(e["tls-no-session-ticket"]),"tls-no-session-ticket"),n(",tls-no-session-reuse=".concat(e["tls-no-session-reuse"]),"tls-no-session-reuse"),n(",tls-cert-sha256=".concat(e["tls-fingerprint"]),"tls-fingerprint"),n(",tls-verification=".concat(!e["skip-cert-verify"]),"skip-cert-verify"),n(",tls-host=".concat(e.sni),"sni")),n(",fast-open=".concat(e.tfo),"tfo"),n(",udp-relay=".concat(e.udp),"udp"),t.appendIfPresent(",server_check_url=".concat(e["test-url"]),"test-url"),r(",tag=".concat(e.name)),t.toString()}(e)}throw new Error("Platform ".concat(__targetPlatform_100," does not support proxy type: ").concat(e.type))}}};var __targetPlatform_100="QX";function needTls(e){return e.tls}var _$shadowrocket_101={};Object.defineProperty(_$shadowrocket_101,"__esModule",{value:!0}),_$shadowrocket_101.default=function(){return{type:"ALL",produce:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.filter((function(e){return!!r["include-unsupported-proxy"]||"snell"!==e.type||"4"!==String(e.version)})).map((function(e){var r;if("vmess"===e.type)(0,_$utils_108.isPresent)(e,"aead")&&(e.aead&&(e.alterId=0),delete e.aead),(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni),(0,_$utils_108.isPresent)(e,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(e.cipher)&&(e.cipher="auto");else if("tuic"===e.type)(0,_$utils_108.isPresent)(e,"alpn")?e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]:e.alpn=["h3"],(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo),e.token&&0!==e.token.length||(0,_$utils_108.isPresent)(e,"version")||(e.version=5);else if("hysteria"===e.type)(0,_$utils_108.isPresent)(e,"auth_str")&&!(0,_$utils_108.isPresent)(e,"auth-str")&&(e["auth-str"]=e.auth_str),(0,_$utils_108.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo);else if("hysteria2"===e.type)e["obfs-password"]&&"salamander"==e.obfs&&(e.obfs=e["obfs-password"],delete e["obfs-password"]),(0,_$utils_108.isPresent)(e,"alpn")&&(e.alpn=Array.isArray(e.alpn)?e.alpn:[e.alpn]),(0,_$utils_108.isPresent)(e,"tfo")&&!(0,_$utils_108.isPresent)(e,"fast-open")&&(e["fast-open"]=e.tfo);else if("wireguard"===e.type){var n,o;e.keepalive=null!==(n=e.keepalive)&&void 0!==n?n:e["persistent-keepalive"],e["persistent-keepalive"]=e.keepalive,e["preshared-key"]=null!==(o=e["preshared-key"])&&void 0!==o?o:e["pre-shared-key"],e["pre-shared-key"]=e["preshared-key"]}else"vless"===e.type&&(0,_$utils_108.isPresent)(e,"sni")&&(e.servername=e.sni,delete e.sni);if(["vmess","vless"].includes(e.type)&&"http"===e.network){var s,i,a,u=null===(s=e["http-opts"])||void 0===s?void 0:s.path;(0,_$utils_108.isPresent)(e,"http-opts.path")&&!Array.isArray(u)&&(e["http-opts"].path=[u]);var c=null===(i=e["http-opts"])||void 0===i||null===(a=i.headers)||void 0===a?void 0:a.Host;(0,_$utils_108.isPresent)(e,"http-opts.headers.Host")&&!Array.isArray(c)&&(e["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(e.type)&&"h2"===e.network){var l,p,f,h=null===(l=e["h2-opts"])||void 0===l?void 0:l.path;(0,_$utils_108.isPresent)(e,"h2-opts.path")&&Array.isArray(h)&&(e["h2-opts"].path=h[0]);var d=null===(p=e["h2-opts"])||void 0===p||null===(f=p.headers)||void 0===f?void 0:f.host;(0,_$utils_108.isPresent)(e,"h2-opts.headers.Host")&&!Array.isArray(d)&&(e["h2-opts"].headers.host=[d])}if(null!==(r=e["plugin-opts"])&&void 0!==r&&r.tls&&(0,_$utils_108.isPresent)(e,"skip-cert-verify")&&(e["plugin-opts"]["skip-cert-verify"]=e["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity"].includes(e.type)&&delete e.tls,e["tls-fingerprint"]&&(e.fingerprint=e["tls-fingerprint"]),delete e["tls-fingerprint"],e["underlying-proxy"]&&(e["dialer-proxy"]=e["underlying-proxy"]),delete e["underlying-proxy"],(0,_$utils_108.isPresent)(e,"tls")&&"boolean"!=typeof e.tls&&delete e.tls,delete e.subName,delete e.collectionName,delete e.id,delete e.resolved,delete e["no-resolve"],"internal"!==t)for(var _ in e)(null==e[_]||/^_/i.test(_))&&delete e[_];return["grpc"].includes(e.network)&&e["".concat(e.network,"-opts")]&&delete e["".concat(e.network,"-opts")]["_grpc-type"],e}));return"internal"===t?n:"proxies:\n"+n.map((function(e){return"  - "+JSON.stringify(e)+"\n"})).join("")}}};var _$surfboard_104={};Object.defineProperty(_$surfboard_104,"__esModule",{value:!0}),_$surfboard_104.default=function(){return{produce:function(e){switch(e.name=e.name.replace(/=|,/g,""),e.type){case"ss":return function(e){var t=new _$utils_108.Result(e);if(t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(e.cipher))throw new Error("cipher ".concat(e.cipher," is not supported"));if(t.append(",encrypt-method=".concat(e.cipher)),t.appendIfPresent(",password=".concat(e.password),"password"),(0,_$utils_108.isPresent)(e,"plugin")){if("obfs"!==e.plugin)throw new Error("plugin ".concat(e.plugin," is not supported"));t.append(",obfs=".concat(e["plugin-opts"].mode)),t.appendIfPresent(",obfs-host=".concat(e["plugin-opts"].host),"plugin-opts.host"),t.appendIfPresent(",obfs-uri=".concat(e["plugin-opts"].path),"plugin-opts.path")}return t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"trojan":return function(e){var t=new _$utils_108.Result(e);return t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",password=".concat(e.password),"password"),__handleTransport_104(t,e),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",tfo=".concat(e.tfo),"tfo"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"vmess":return function(e){var t=new _$utils_108.Result(e);return t.append("".concat(e.name,"=").concat(e.type,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",username=".concat(e.uuid),"uuid"),__handleTransport_104(t,e),(0,_$utils_108.isPresent)(e,"aead")?t.append(",vmess-aead=".concat(e.aead)):t.append(",vmess-aead=".concat(0===e.alterId)),t.appendIfPresent(",tls=".concat(e.tls),"tls"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"http":return function(e){var t=new _$utils_108.Result(e),r=e.tls?"https":"http";return t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"socks5":return function(e){var t=new _$utils_108.Result(e),r=e.tls?"socks5-tls":"socks5";return t.append("".concat(e.name,"=").concat(r,",").concat(e.server,",").concat(e.port)),t.appendIfPresent(",".concat(e.username),"username"),t.appendIfPresent(",".concat(e.password),"password"),t.appendIfPresent(",sni=".concat(e.sni),"sni"),t.appendIfPresent(",skip-cert-verify=".concat(e["skip-cert-verify"]),"skip-cert-verify"),t.appendIfPresent(",udp-relay=".concat(e.udp),"udp"),t.toString()}(e);case"wireguard-surge":return function(e){var t=new _$utils_108.Result(e);return t.append("".concat(e.name,"=wireguard")),t.appendIfPresent(",section-name=".concat(e["section-name"]),"section-name"),t.toString()}(e)}throw new Error("Platform ".concat(__targetPlatform_104," does not support proxy type: ").concat(e.type))}}};var __targetPlatform_104="Surfboard";function __handleTransport_104(e,t){if((0,_$utils_108.isPresent)(t,"network")){if("ws"!==t.network)throw new Error("network ".concat(t.network," is unsupported"));if(e.append(",ws=true"),(0,_$utils_108.isPresent)(t,"ws-opts")&&(e.appendIfPresent(",ws-path=".concat(t["ws-opts"].path),"ws-opts.path"),(0,_$utils_108.isPresent)(t,"ws-opts.headers"))){var r=t["ws-opts"].headers,n=Object.keys(r).map((function(e){var t=r[e];return["Host"].includes(e)&&(t='"'.concat(t,'"')),"".concat(e,":").concat(t)})).join("|");(0,_$utils_130.isNotBlank)(n)&&e.append(",ws-headers=".concat(n))}}}var _$singBox_102={};Object.defineProperty(_$singBox_102,"__esModule",{value:!0}),_$singBox_102.default=function(){return{type:"ALL",produce:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[];return(0,___clashmeta_102.default)().produce(t,"internal",{"include-unsupported-proxy":!0}).map((function(t){try{switch(t.type){case"ssh":o.push(sshParser(t));break;case"http":o.push(httpParser(t));break;case"socks5":if(t.tls)throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with tls"));o.push(socks5Parser(t));break;case"ss":if("shadow-tls"===t.plugin){var r=shadowTLSParser(t),s=r.ssPart,i=r.stPart;o.push(s),o.push(i)}else o.push(ssParser(t));break;case"ssr":if(!n["include-unsupported-proxy"])throw new Error("Platform sing-box does not support proxy type: ".concat(t.type));o.push(ssrParser(t));break;case"vmess":if(t.network&&!["ws","grpc","h2","http"].includes(t.network))throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with network ").concat(t.network));o.push(vmessParser(t));break;case"vless":if(t.flow&&!["xtls-rprx-vision"].includes(t.flow))throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with flow ").concat(t.flow));o.push(vlessParser(t));break;case"trojan":if(t.flow)throw new Error("Platform sing-box does not support proxy type: ".concat(t.type," with flow ").concat(t.flow));o.push(trojanParser(t));break;case"hysteria":o.push(hysteriaParser(t));break;case"hysteria2":o.push(hysteria2Parser(t));break;case"tuic":if(t.token&&0!==t.token.length)throw new Error("Platform sing-box does not support proxy type: TUIC v4");o.push(tuic5Parser(t));break;case"wireguard":o.push(wireguardParser(t));break;default:throw new Error("Platform sing-box does not support proxy type: ".concat(t.type))}}catch(e){var a;___app_102.default.error(null!==(a=e.message)&&void 0!==a?a:e)}})),"internal"===r?o:JSON.stringify({outbounds:o},null,2)}}};var ___clashmeta_102=___interopRequireDefault_102(_$clashmeta_97),___app_102=___interopRequireDefault_102(_$app_87);function ___interopRequireDefault_102(e){return e&&e.__esModule?e:{default:e}}function ___slicedToArray_102(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||___unsupportedIterableToArray_102(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___createForOfIteratorHelper_102(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_102(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___unsupportedIterableToArray_102(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_102(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_102(e,t):void 0}}function ___arrayLikeToArray_102(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var detourParser=function(e,t){e["dialer-proxy"]&&(t.detour=e["dialer-proxy"])},tfoParser=function(e,t){t.tcp_fast_open=!1,e.tfo&&(t.tcp_fast_open=!0),e.tcp_fast_open&&(t.tcp_fast_open=!0),e["tcp-fast-open"]&&(t.tcp_fast_open=!0),t.tcp_fast_open||delete t.tcp_fast_open},smuxParser=function(e,t){e&&e.enabled&&(t.multiplex={enabled:!0},t.multiplex.protocol=e.protocol,e["max-connections"]&&(t.multiplex.max_connections=parseInt("".concat(e["max-connections"]),10)),e["max-streams"]&&(t.multiplex.max_streams=parseInt("".concat(e["max-streams"]),10)),e["min-streams"]&&(t.multiplex.min_streams=parseInt("".concat(e["min-streams"]),10)),e.padding&&(t.multiplex.padding=!0))},wsParser=function(e,t){var r={type:"ws",headers:{}};if(e["ws-opts"]){var n=e["ws-opts"],o=n.path,s=void 0===o?"":o,i=n.headers,a=void 0===i?{}:i;if(""!==s&&(r.path="".concat(s)),Object.keys(a).length>0){for(var u={},c=0,l=Object.keys(a);c<l.length;c++){var p=l[c],f=a[p];""!==f&&(Array.isArray(f)||(f=["".concat(f)]),f.length>0&&(u[p]=f))}var h=u.Host;if(1===h.length){var d,_=___createForOfIteratorHelper_102("Host:".concat(h[0]).split("\n"));try{for(_.s();!(d=_.n()).done;){var g=___slicedToArray_102(d.value.split(":"),2),y=g[0],v=g[1];""!==v.trim()&&(u[y.trim()]=v.trim().split(","))}}catch(M){_.e(M)}finally{_.f()}}r.headers=u}}if(e["ws-headers"]){for(var m={},b=0,w=Object.keys(e["ws-headers"]);b<w.length;b++){var E=w[b],x=e["ws-headers"][E];""!==x&&(Array.isArray(x)||(x=["".concat(x)]),x.length>0&&(m[E]=x))}var A=m.Host;if(1===A.length){var S,C=___createForOfIteratorHelper_102("Host:".concat(A[0]).split("\n"));try{for(C.s();!(S=C.n()).done;){var P=___slicedToArray_102(S.value.split(":"),2),I=P[0],F=P[1];""!==F.trim()&&(m[I.trim()]=F.trim().split(","))}}catch(M){C.e(M)}finally{C.f()}}for(var k=0,R=Object.keys(m);k<R.length;k++){var $=R[k];r.headers[$]=m[$]}}if(e["ws-path"]&&""!==e["ws-path"]&&(r.path="".concat(e["ws-path"])),r.path){var O=___slicedToArray_102(/^(.*?)(?:\?ed=(\d+))?$/.exec(r.path),3),T=(O[0],O[1]),D=void 0===T?"":T,B=O[2],j=void 0===B?"":B;r.path=D,""!==j&&(r.early_data_header_name="Sec-WebSocket-Protocol",r.max_early_data=parseInt(j,10))}t.tls.insecure&&(t.tls.server_name=r.headers.Host[0]),e["ws-opts"]&&e["ws-opts"]["v2ray-http-upgrade"]&&(r.type="httpupgrade",r.headers.Host&&(r.host=r.headers.Host[0],delete r.headers.Host),r.max_early_data&&delete r.max_early_data,r.early_data_header_name&&delete r.early_data_header_name);for(var N=0,L=Object.keys(r.headers);N<L.length;N++){var U=L[N],H=r.headers[U];1===H.length&&(r.headers[U]=H[0])}t.transport=r},grpcParser=function(e,t){var r={type:"grpc"};if(e["grpc-opts"]){var n=e["grpc-opts"]["grpc-service-name"];null!=n&&""!==n&&(r.service_name="".concat(n))}t.transport=r},tlsParser=function(e,t){e.tls&&(t.tls.enabled=!0),e.servername&&""!==e.servername&&(t.tls.server_name=e.servername),e.peer&&""!==e.peer&&(t.tls.server_name=e.peer),e.sni&&""!==e.sni&&(t.tls.server_name=e.sni),e["skip-cert-verify"]&&(t.tls.insecure=!0),e.insecure&&(t.tls.insecure=!0),e["disable-sni"]&&(t.tls.disable_sni=!0),"string"==typeof e.alpn?t.tls.alpn=[e.alpn]:Array.isArray(e.alpn)&&(t.tls.alpn=e.alpn),e.ca&&(t.tls.certificate_path="".concat(e.ca)),e.ca_str&&(t.tls.certificate=[e.ca_str]),e["ca-str"]&&(t.tls.certificate=[e["ca-str"]]),e["reality-opts"]&&(t.tls.reality={enabled:!0},e["reality-opts"]["public-key"]&&(t.tls.reality.public_key=e["reality-opts"]["public-key"]),e["reality-opts"]["short-id"]&&(t.tls.reality.short_id=e["reality-opts"]["short-id"]),t.tls.utls={enabled:!0}),e["client-fingerprint"]&&""!==e["client-fingerprint"]&&(t.tls.utls={enabled:!0,fingerprint:e["client-fingerprint"]}),t.tls.enabled||delete t.tls},sshParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"ssh",server:e.server,server_port:parseInt("".concat(e.port),10)};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.user=e.username),e.password&&(t.password=e.password),e.privateKey&&(t.private_key_path=e.privateKey),e["private-key"]&&(t.private_key_path=e["private-key"]),e["private-key-passphrase"]&&(t.private_key_passphrase=e["private-key-passphrase"]),e["server-fingerprint"]&&(t.host_key=[e["server-fingerprint"]],t.host_key_algorithms=[e["server-fingerprint"].split(" ")[0]]),e["host-key"]&&(t.host_key=e["host-key"]),e["host-key-algorithms"]&&(t.host_key_algorithms=e["host-key-algorithms"]),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),t},httpParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"http",server:e.server,server_port:parseInt("".concat(e.port),10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.headers){t.headers={};for(var r=0,n=Object.keys(e.headers);r<n.length;r++){var o=n[r];t.headers[o]="".concat(e.headers[o])}0===Object.keys(t.headers).length&&delete t.headers}return e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),t},socks5Parser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"socks",server:e.server,server_port:parseInt("".concat(e.port),10),password:e.password,version:"5"};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),t},shadowTLSParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"shadowsocks",method:e.cipher,password:e.password,detour:"".concat(e.name,"_shadowtls")},r={tag:"".concat(e.name,"_shadowtls"),type:"shadowtls",server:e.server,server_port:parseInt("".concat(e.port),10),version:e["plugin-opts"].version,password:e["plugin-opts"].password,tls:{enabled:!0,server_name:e["plugin-opts"].host,utls:{enabled:!0,fingerprint:e["client-fingerprint"]}}};if(r.server_port<0||r.server_port>65535)throw"\u7aef\u53e3\u503c\u975e\u6cd5";return!0===e["fast-open"]&&(r.udp_fragment=!0),tfoParser(e,r),detourParser(e,r),smuxParser(e.smux,t),{type:"ss-with-st",ssPart:t,stPart:r}},ssParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"shadowsocks",server:e.server,server_port:parseInt("".concat(e.port),10),method:e.cipher,password:e.password};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),e.plugin){var r=[];"obfs"===e.plugin&&(t.plugin="obfs-local",t.plugin_opts="",e["obfs-host"]&&(e["plugin-opts"].host=e["obfs-host"]),Object.keys(e["plugin-opts"]).forEach((function(t){switch(t){case"mode":r.push("obfs=".concat(e["plugin-opts"].mode));break;case"host":r.push("obfs-host=".concat(e["plugin-opts"].host));break;default:r.push("".concat(t,"=").concat(e["plugin-opts"][t]))}}))),"v2ray-plugin"===e.plugin&&(t.plugin="v2ray-plugin",e["ws-host"]&&(e["plugin-opts"].host=e["ws-host"]),e["ws-path"]&&(e["plugin-opts"].path=e["ws-path"]),Object.keys(e["plugin-opts"]).forEach((function(n){switch(n){case"tls":e["plugin-opts"].tls&&r.push("tls");break;case"host":r.push("host=".concat(e["plugin-opts"].host));break;case"path":r.push("path=".concat(e["plugin-opts"].path));break;case"headers":r.push("headers=".concat(JSON.stringify(e["plugin-opts"].headers)));break;case"mux":e["plugin-opts"].mux&&(t.multiplex={enabled:!0});break;default:r.push("".concat(n,"=").concat(e["plugin-opts"][n]))}}))),t.plugin_opts=r.join(";")}return t},ssrParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"shadowsocksr",server:e.server,server_port:parseInt("".concat(e.port),10),method:e.cipher,password:e.password,obfs:e.obfs,protocol:e.protocol};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["obfs-param"]&&(t.obfs_param=e["obfs-param"]),e["protocol-param"]&&""!==e["protocol-param"]&&(t.protocol_param=e["protocol-param"]),e["fast-open"]&&(t.udp_fragment=!0),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),t},vmessParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"vmess",server:e.server,server_port:parseInt("".concat(e.port),10),uuid:e.uuid,security:e.cipher,alter_id:parseInt("".concat(e.alterId),10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(-1===["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(t.security)&&(t.security="auto"),t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),"ws"===e.network&&wsParser(e,t),"h2"===e.network&&function(e,t){var r={type:"http"};if(e["h2-opts"]){var n=e["h2-opts"],o=n.host,s=void 0===o?"":o,i=n.path,a=void 0===i?"":i;""!==a&&(r.path="".concat(a)),""!==s&&(Array.isArray(s)||(s="".concat(s).split(",").map((function(e){return e.trim()}))),s.length>0&&(r.host=s))}if(e["h2-host"]&&""!==e["h2-host"]){var u=e["h2-host"];Array.isArray(u)||(u="".concat(u).split(",").map((function(e){return e.trim()}))),u.length>0&&(r.host=u)}e["h2-path"]&&""!==e["h2-path"]&&(r.path="".concat(e["h2-path"])),t.tls.enabled=!0,t.tls.insecure&&(t.tls.server_name=r.host[0]),1===r.host.length&&(r.host=r.host[0]),t.transport=r}(e,t),"http"===e.network&&function(e,t){var r={type:"http",headers:{}};if(e["http-opts"]){var n=e["http-opts"],o=n.method,s=void 0===o?"":o,i=n.path,a=void 0===i?"":i,u=n.headers,c=void 0===u?{}:u;""!==s&&(r.method=s),Array.isArray(a)?r.path="".concat(a[0]):""!==a&&(r.path="".concat(a));for(var l=0,p=Object.keys(c);l<p.length;l++){var f=p[l],h=c[f];if(""!==h)if("host"!==f.toLowerCase())Array.isArray(h)||(h="".concat(h).split(",").map((function(e){return e.trim()}))),h.length>0&&(r.headers[f]=h);else{var d=h;Array.isArray(d)||(d="".concat(d).split(",").map((function(e){return e.trim()}))),d.length>0&&(r.host=d)}}}if(e["http-host"]&&""!==e["http-host"]){var _=e["http-host"];Array.isArray(_)||(_="".concat(_).split(",").map((function(e){return e.trim()}))),_.length>0&&(r.host=_)}if(r.host){if(e["http-path"]&&""!==e["http-path"]){var g=e["http-path"];Array.isArray(g)?r.path="".concat(g[0]):""!==g&&(r.path="".concat(g))}t.tls.insecure&&(t.tls.server_name=r.host[0]),1===r.host.length&&(r.host=r.host[0]);for(var y=0,v=Object.keys(r.headers);y<v.length;y++){var m=v[y],b=r.headers[m];1===b.length&&(r.headers[m]=b[0])}t.transport=r}}(e,t),"grpc"===e.network&&grpcParser(e,t),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),smuxParser(e.smux,t),t},vlessParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"vless",server:e.server,server_port:parseInt("".concat(e.port),10),uuid:e.uuid,tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),"xtls-rprx-vision"===e.flow&&(t.flow=e.flow),"ws"===e.network&&wsParser(e,t),"grpc"===e.network&&grpcParser(e,t),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),tlsParser(e,t),t},trojanParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"trojan",server:e.server,server_port:parseInt("".concat(e.port),10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),"grpc"===e.network&&grpcParser(e,t),"ws"===e.network&&wsParser(e,t),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),smuxParser(e.smux,t),t},hysteriaParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"hysteria",server:e.server,server_port:parseInt("".concat(e.port),10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";e.auth_str&&(t.auth_str="".concat(e.auth_str)),e["auth-str"]&&(t.auth_str="".concat(e["auth-str"])),e["fast-open"]&&(t.udp_fragment=!0);var r=new RegExp("^[0-9]+[ \t]*[KMGT]*[Bb]ps$");return r.test("".concat(e.up))?t.up="".concat(e.up):t.up_mbps=parseInt("".concat(e.up),10),r.test("".concat(e.down))?t.down="".concat(e.down):t.down_mbps=parseInt("".concat(e.down),10),e.obfs&&(t.obfs=e.obfs),e.recv_window_conn&&(t.recv_window_conn=e.recv_window_conn),e["recv-window-conn"]&&(t.recv_window_conn=e["recv-window-conn"]),e.recv_window&&(t.recv_window=e.recv_window),e["recv-window"]&&(t.recv_window=e["recv-window"]),e.disable_mtu_discovery&&("boolean"==typeof e.disable_mtu_discovery?t.disable_mtu_discovery=e.disable_mtu_discovery:1===e.disable_mtu_discovery&&(t.disable_mtu_discovery=!0)),tlsParser(e,t),detourParser(e,t),tfoParser(e,t),smuxParser(e.smux,t),t},hysteria2Parser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"hysteria2",server:e.server,server_port:parseInt("".concat(e.port),10),password:e.password,obfs:{},tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.up&&(t.up_mbps=parseInt("".concat(e.up),10)),e.down&&(t.down_mbps=parseInt("".concat(e.down),10)),"salamander"===e.obfs&&(t.obfs.type="salamander"),e["obfs-password"]&&(t.obfs.password=e["obfs-password"]),t.obfs.type||delete t.obfs,tlsParser(e,t),tfoParser(e,t),detourParser(e,t),smuxParser(e.smux,t),t},tuic5Parser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={tag:e.name,type:"tuic",server:e.server,server_port:parseInt("".concat(e.port),10),uuid:e.uuid,password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e["congestion-controller"]&&"cubic"!==e["congestion-controller"]&&(t.congestion_control=e["congestion-controller"]),e["udp-relay-mode"]&&"native"!==e["udp-relay-mode"]&&(t.udp_relay_mode=e["udp-relay-mode"]),e["reduce-rtt"]&&(t.zero_rtt_handshake=!0),e["udp-over-stream"]&&(t.udp_over_stream=!0),e["heartbeat-interval"]&&(t.heartbeat="".concat(e["heartbeat-interval"],"ms")),tfoParser(e,t),detourParser(e,t),tlsParser(e,t),smuxParser(e.smux,t),t},wireguardParser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["ip","ipv6"].map((function(t){return e[t]})).map((function(e){return(0,_$utils_130.isIPv4)(e)?"".concat(e,"/32"):(0,_$utils_130.isIPv6)(e)?"".concat(e,"/128"):void 0})).filter((function(e){return e})),r={tag:e.name,type:"wireguard",server:e.server,server_port:parseInt("".concat(e.port),10),local_address:t,private_key:e["private-key"],peer_public_key:e["public-key"],pre_shared_key:e["pre-shared-key"],reserved:[]};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(e["fast-open"]&&(r.udp_fragment=!0),"string"==typeof e.reserved)r.reserved=e.reserved;else if(Array.isArray(e.reserved)){var n,o=___createForOfIteratorHelper_102(e.reserved);try{for(o.s();!(n=o.n()).done;){var s=n.value;r.reserved.push(s)}}catch(h){o.e(h)}finally{o.f()}}else delete r.reserved;if(e.peers&&e.peers.length>0){r.peers=[];var i,a=___createForOfIteratorHelper_102(e.peers);try{for(a.s();!(i=a.n()).done;){var u=i.value,c={server:u.server,server_port:parseInt("".concat(u.port),10),public_key:u["public-key"],allowed_ips:u["allowed-ips"]||u.allowed_ips,reserved:[]};if("string"==typeof u.reserved)c.reserved.push(u.reserved);else if(Array.isArray(u.reserved)){var l,p=___createForOfIteratorHelper_102(u.reserved);try{for(p.s();!(l=p.n()).done;){var f=l.value;c.reserved.push(f)}}catch(h){p.e(h)}finally{p.f()}}else delete c.reserved;u["pre-shared-key"]&&(c.pre_shared_key=u["pre-shared-key"]),r.peers.push(c)}}catch(h){a.e(h)}finally{a.f()}}return tfoParser(e,r),detourParser(e,r),smuxParser(e.smux,r),r},_$producers_98={};Object.defineProperty(_$producers_98,"__esModule",{value:!0}),_$producers_98.default=void 0;var ___surge_98=___interopRequireDefault_98(_$surge_105),_surgemac=___interopRequireDefault_98(_$surgemac_106),_clash=___interopRequireDefault_98(_$clash_96),___clashmeta_98=___interopRequireDefault_98(_$clashmeta_97),_stash=___interopRequireDefault_98(_$stash_103),_loon=___interopRequireDefault_98(_$loon_99),___uri_98=___interopRequireDefault_98(_$uri_107),_v2ray=___interopRequireDefault_98(_$v2ray_109),_qx=___interopRequireDefault_98(_$qx_100),_shadowrocket=___interopRequireDefault_98(_$shadowrocket_101),_surfboard=___interopRequireDefault_98(_$surfboard_104),_singBox=___interopRequireDefault_98(_$singBox_102);function ___interopRequireDefault_98(e){return e&&e.__esModule?e:{default:e}}var ___default_98={QX:(0,_qx.default)(),QuantumultX:(0,_qx.default)(),Surge:(0,___surge_98.default)(),SurgeMac:(0,_surgemac.default)(),Loon:(0,_loon.default)(),Clash:(0,_clash.default)(),ClashMeta:(0,___clashmeta_98.default)(),URI:(0,___uri_98.default)(),V2Ray:(0,_v2ray.default)(),JSON:{type:"ALL",produce:function(e,t){return"internal"===t?e:JSON.stringify(e,null,2)}},Stash:(0,_stash.default)(),Shadowrocket:(0,_shadowrocket.default)(),ShadowRocket:(0,_shadowrocket.default)(),Surfboard:(0,_surfboard.default)(),"sing-box":(0,_singBox.default)()};_$producers_98.default=___default_98;const setProtoOf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};class GrammarError extends Error{constructor(e,t,r){super(e),setProtoOf(this,GrammarError.prototype),this.name="GrammarError",this.location=t,void 0===r&&(r=[]),this.diagnostics=r,this.stage=null,this.problems=[["error",e,t,r]]}toString(){let e=super.toString();this.location&&(e+="\n at ",void 0!==this.location.source&&null!==this.location.source&&(e+=this.location.source+":"),e+=`${this.location.start.line}:${this.location.start.column}`);for(const t of this.diagnostics)e+="\n from ",void 0!==t.location.source&&null!==t.location.source&&(e+=t.location.source+":"),e+=`${t.location.start.line}:${t.location.start.column}: ${t.message}`;return e}format(e){const t=e.map(({source:e,text:t})=>({source:e,text:t.split(/\r\n|\n|\r/g)}));function r(e,r,n=""){let o="";const s=t.find(({source:t})=>t===e.source),i=e.start;if(s){const t=e.end,a=s.text[i.line-1],u=(i.line===t.line?t.column:a.length+1)-i.column||1;n&&(o+="\nnote: "+n),o+=`\n --\x3e ${e.source}:${i.line}:${i.column}\n${"".padEnd(r)} |\n${i.line.toString().padStart(r)} | ${a}\n${"".padEnd(r)} | ${"".padEnd(i.column-1)}${"".padEnd(u,"^")}`}else o+=`\n at ${e.source}:${i.line}:${i.column}`,n&&(o+=": "+n);return o}return this.problems.filter(e=>"info"!==e[0]).map(e=>function(e,t,n,o=[]){let s;s=(s=n?o.reduce((e,{location:t})=>Math.max(e,t.start.line),n.start.line):Math.max.apply(null,o.map(e=>e.location.start.line))).toString().length;let i=`${e}: ${t}`;n&&(i+=r(n,s));for(const a of o)i+=r(a.location,s,a.message);return i}(...e)).join("\n\n")}}var _$GrammarError_71=GrammarError;const visitor={build(e){function t(t,...r){return e[t.type](t,...r)}function r(){}function n(e,...r){return t(e.expression,...r)}function o(e){return function(r,...n){r[e].forEach(e=>t(e,...n))}}const s={grammar(e,...r){e.topLevelInitializer&&t(e.topLevelInitializer,...r),e.initializer&&t(e.initializer,...r),e.rules.forEach(e=>t(e,...r))},top_level_initializer:r,initializer:r,rule:n,named:n,choice:o("alternatives"),action:n,sequence:o("elements"),labeled:n,text:n,simple_and:n,simple_not:n,optional:n,zero_or_more:n,one_or_more:n,group:n,semantic_and:r,semantic_not:r,rule_ref:r,literal:r,class:r,any:r};return Object.keys(s).forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)||(e[t]=s[t])}),t}};var _$visitor_70=visitor;const asts={findRule(e,t){for(let r=0;r<e.rules.length;r++)if(e.rules[r].name===t)return e.rules[r]},indexOfRule(e,t){for(let r=0;r<e.rules.length;r++)if(e.rules[r].name===t)return r;return-1},alwaysConsumesOnSuccess(e,t){function r(){return!0}function n(){return!1}const o=_$visitor_70.build({choice:e=>e.alternatives.every(o),sequence:e=>e.elements.some(o),simple_and:n,simple_not:n,optional:n,zero_or_more:n,semantic_and:n,semantic_not:n,rule_ref(t){const r=asts.findRule(e,t.name);return r?o(r):void 0},literal:e=>""!==e.value,class:r,any:r});return o(t)}};var _$asts_54=asts,_$opcodes_56={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29},_$inferenceMatchResult_59={};const ALWAYS_MATCH=1,SOMETIMES_MATCH=0,NEVER_MATCH=-1;function inferenceMatchResult(e){function t(e){return e.match=SOMETIMES_MATCH}function r(e){return s(e.expression),e.match=ALWAYS_MATCH}function n(e){return e.match=s(e.expression)}function o(e,t){const r=e.length;let n=0,o=0;for(let i=0;i<r;++i){const t=s(e[i]);t===ALWAYS_MATCH&&++n,t===NEVER_MATCH&&++o}return n===r?ALWAYS_MATCH:t?o===r?NEVER_MATCH:SOMETIMES_MATCH:o>0?NEVER_MATCH:SOMETIMES_MATCH}const s=_$visitor_70.build({rule(e){let t,r=0;if(void 0===e.match){e.match=SOMETIMES_MATCH;do{if(t=e.match,e.match=s(e.expression),++r>6)throw new _$GrammarError_71("Infinity cycle detected when trying to evaluate node match result",e.location)}while(t!==e.match)}return e.match},named:n,choice:e=>e.match=o(e.alternatives,!0),action:n,sequence:e=>e.match=o(e.elements,!1),labeled:n,text:n,simple_and:n,simple_not:e=>e.match=-s(e.expression),optional:r,zero_or_more:r,one_or_more:n,group:n,semantic_and:t,semantic_not:t,rule_ref(t){const r=_$asts_54.findRule(e,t.name);return t.match=s(r)},literal(e){const t=0===e.value.length?ALWAYS_MATCH:SOMETIMES_MATCH;return e.match=t},class(e){const t=0===e.parts.length?NEVER_MATCH:SOMETIMES_MATCH;return e.match=t},any:t});s(e)}inferenceMatchResult.ALWAYS_MATCH=ALWAYS_MATCH,inferenceMatchResult.SOMETIMES_MATCH=SOMETIMES_MATCH,inferenceMatchResult.NEVER_MATCH=NEVER_MATCH,_$inferenceMatchResult_59=inferenceMatchResult;const{ALWAYS_MATCH:__ALWAYS_MATCH_57,SOMETIMES_MATCH:__SOMETIMES_MATCH_57,NEVER_MATCH:__NEVER_MATCH_57}=_$inferenceMatchResult_59;var _$generateBytecode_57=function(e){const t=[],r=[],n=[],o=[];function s(e){const t=JSON.stringify(e),r=n.findIndex(e=>JSON.stringify(e)===t);return-1===r?n.push(e)-1:r}function i(e,t,r){const n={predicate:e,params:t,body:r.code,location:r.codeLocation},s=JSON.stringify(n),i=o.findIndex(e=>JSON.stringify(e)===s);return-1===i?o.push(n)-1:i}function a(e){const t={};return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}function u(e,...t){return e.concat(...t)}function c(e,t,r,n){return e===__ALWAYS_MATCH_57?r:e===__NEVER_MATCH_57?n:t.concat([r.length,n.length],r,n)}function l(e,t,r,n){const o=Object.keys(r).map(e=>n-r[e]);return[_$opcodes_56.CALL,e,t,o.length].concat(o)}function p(e,t,r){const n=0|e.match;return u([_$opcodes_56.PUSH_CURR_POS],[_$opcodes_56.SILENT_FAILS_ON],d(e,{sp:r.sp+1,env:a(r.env),action:null}),[_$opcodes_56.SILENT_FAILS_OFF],c(t?-n:n,[t?_$opcodes_56.IF_ERROR:_$opcodes_56.IF_NOT_ERROR],u([_$opcodes_56.POP],[t?_$opcodes_56.POP:_$opcodes_56.POP_CURR_POS],[_$opcodes_56.PUSH_UNDEFINED]),u([_$opcodes_56.POP],[t?_$opcodes_56.POP_CURR_POS:_$opcodes_56.POP],[_$opcodes_56.PUSH_FAILED])))}function f(e,t,r){const n=i(!0,Object.keys(r.env),e);return u([_$opcodes_56.UPDATE_SAVED_POS],l(n,0,r.env,r.sp),c(0|e.match,[_$opcodes_56.IF],u([_$opcodes_56.POP],t?[_$opcodes_56.PUSH_FAILED]:[_$opcodes_56.PUSH_UNDEFINED]),u([_$opcodes_56.POP],t?[_$opcodes_56.PUSH_UNDEFINED]:[_$opcodes_56.PUSH_FAILED])))}function h(e){return t=[_$opcodes_56.WHILE_NOT_ERROR],r=u([_$opcodes_56.APPEND],e),t.concat([r.length],r);var t,r}const d=_$visitor_70.build({grammar(e){e.rules.forEach(d),e.literals=t,e.classes=r,e.expectations=n,e.functions=o},rule(e){e.bytecode=d(e.expression,{sp:-1,env:{},pluck:[],action:null})},named(e,t){const r=0|e.match,n=r===__NEVER_MATCH_57?null:s({type:"rule",value:e.name});return u([_$opcodes_56.SILENT_FAILS_ON],d(e.expression,t),[_$opcodes_56.SILENT_FAILS_OFF],c(r,[_$opcodes_56.IF_ERROR],[_$opcodes_56.FAIL,n],[]))},choice:(e,t)=>function e(t,r){const n=0|t[0].match,o=d(t[0],{sp:r.sp,env:a(r.env),action:null});return n===__ALWAYS_MATCH_57?o:u(o,t.length>1?c(__SOMETIMES_MATCH_57,[_$opcodes_56.IF_ERROR],u([_$opcodes_56.POP],e(t.slice(1),r)),[]):[])}(e.alternatives,t),action(e,t){const r=a(t.env),n="sequence"!==e.expression.type||0===e.expression.elements.length,o=d(e.expression,{sp:t.sp+(n?1:0),env:r,action:e}),s=0|e.expression.match,p=n&&s!==__NEVER_MATCH_57?i(!1,Object.keys(r),e):null;return n?u([_$opcodes_56.PUSH_CURR_POS],o,c(s,[_$opcodes_56.IF_NOT_ERROR],u([_$opcodes_56.LOAD_SAVED_POS,1],l(p,1,r,t.sp+2)),[]),[_$opcodes_56.NIP]):o},sequence:(e,t)=>u([_$opcodes_56.PUSH_CURR_POS],function t(r,n){if(r.length>0){const o=e.elements.length-r.length+1;return u(d(r[0],{sp:n.sp,env:n.env,pluck:n.pluck,action:null}),c(0|r[0].match,[_$opcodes_56.IF_NOT_ERROR],t(r.slice(1),{sp:n.sp+1,env:n.env,pluck:n.pluck,action:n.action}),u(o>1?[_$opcodes_56.POP_N,o]:[_$opcodes_56.POP],[_$opcodes_56.POP_CURR_POS],[_$opcodes_56.PUSH_FAILED])))}if(n.pluck.length>0)return u([_$opcodes_56.PLUCK,e.elements.length+1,n.pluck.length],n.pluck.map(e=>n.sp-e));if(n.action){const t=i(!1,Object.keys(n.env),n.action);return u([_$opcodes_56.LOAD_SAVED_POS,e.elements.length],l(t,e.elements.length+1,n.env,n.sp))}return u([_$opcodes_56.WRAP,e.elements.length],[_$opcodes_56.NIP])}(e.elements,{sp:t.sp+1,env:t.env,pluck:[],action:t.action})),labeled(e,t){let r=t.env;const n=e.label,o=t.sp+1;return n&&(r=a(t.env),t.env[e.label]=o),e.pick&&t.pluck.push(o),d(e.expression,{sp:t.sp,env:r,action:null})},text:(e,t)=>u([_$opcodes_56.PUSH_CURR_POS],d(e.expression,{sp:t.sp+1,env:a(t.env),action:null}),c(0|e.match,[_$opcodes_56.IF_NOT_ERROR],u([_$opcodes_56.POP],[_$opcodes_56.TEXT]),[_$opcodes_56.NIP])),simple_and:(e,t)=>p(e.expression,!1,t),simple_not:(e,t)=>p(e.expression,!0,t),optional:(e,t)=>u(d(e.expression,{sp:t.sp,env:a(t.env),action:null}),c(-(0|e.expression.match),[_$opcodes_56.IF_ERROR],u([_$opcodes_56.POP],[_$opcodes_56.PUSH_NULL]),[])),zero_or_more(e,t){const r=d(e.expression,{sp:t.sp+1,env:a(t.env),action:null});return u([_$opcodes_56.PUSH_EMPTY_ARRAY],r,h(r),[_$opcodes_56.POP])},one_or_more(e,t){const r=d(e.expression,{sp:t.sp+1,env:a(t.env),action:null});return u([_$opcodes_56.PUSH_EMPTY_ARRAY],r,c(0|e.expression.match,[_$opcodes_56.IF_NOT_ERROR],u(h(r),[_$opcodes_56.POP]),u([_$opcodes_56.POP],[_$opcodes_56.POP],[_$opcodes_56.PUSH_FAILED])))},group:(e,t)=>d(e.expression,{sp:t.sp,env:a(t.env),action:null}),semantic_and:(e,t)=>f(e,!1,t),semantic_not:(e,t)=>f(e,!0,t),rule_ref:t=>[_$opcodes_56.RULE,_$asts_54.indexOfRule(e,t.name)],literal(e){if(e.value.length>0){const r=0|e.match,n=r===__SOMETIMES_MATCH_57||r===__ALWAYS_MATCH_57&&!e.ignoreCase?function(e){const r=t.indexOf(e);return-1===r?t.push(e)-1:r}(e.ignoreCase?e.value.toLowerCase():e.value):null,o=r!==__ALWAYS_MATCH_57?s({type:"literal",value:e.value,ignoreCase:e.ignoreCase}):null;return c(r,e.ignoreCase?[_$opcodes_56.MATCH_STRING_IC,n]:[_$opcodes_56.MATCH_STRING,n],e.ignoreCase?[_$opcodes_56.ACCEPT_N,e.value.length]:[_$opcodes_56.ACCEPT_STRING,n],[_$opcodes_56.FAIL,o])}return[_$opcodes_56.PUSH_EMPTY_STRING]},class(e){const t=0|e.match,n=t===__SOMETIMES_MATCH_57?function(e){const t={value:e.parts,inverted:e.inverted,ignoreCase:e.ignoreCase},n=JSON.stringify(t),o=r.findIndex(e=>JSON.stringify(e)===n);return-1===o?r.push(t)-1:o}(e):null,o=t!==__ALWAYS_MATCH_57?s({type:"class",value:e.parts,inverted:e.inverted,ignoreCase:e.ignoreCase}):null;return c(t,[_$opcodes_56.MATCH_CHAR_CLASS,n],[_$opcodes_56.ACCEPT_N,1],[_$opcodes_56.FAIL,o])},any(e){const t=0|e.match,r=t!==__ALWAYS_MATCH_57?s({type:"any"}):null;return c(t,[_$opcodes_56.MATCH_ANY],[_$opcodes_56.ACCEPT_N,1],[_$opcodes_56.FAIL,r])}});d(e)},_$stack_68=class{constructor(e,t,r){this.sp=-1,this.maxSp=-1,this.varName=t,this.ruleName=e,this.type=r}name(e){if(e<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${e}`);return this.varName+e}push(e){const t=this.name(++this.sp)+" = "+e+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t}pop(e){return void 0!==e?(this.sp-=e,Array.from({length:e},(e,t)=>this.name(this.sp+1+t))):this.name(this.sp--)}top(){return this.name(this.sp)}index(e){if(e<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${e}`);return this.name(this.sp-e)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(e,t)=>this.name(t)).join(", ")+";"}checkedIf(e,t,r){const n=this.sp;if(t(),r){const t=this.sp;if(this.sp=n,r(),t!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+e+": Branches of a condition can't move the stack pointer differently (before: "+n+", after then: "+t+", after else: "+this.sp+").")}}checkedLoop(e,t){const r=this.sp;if(t(),r!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+e+": Body of a loop can't move the stack pointer (before: "+r+", after: "+this.sp+").")}},_$version_74="2.0.1",_$utils_69={};function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}_$utils_69.hex=hex,_$utils_69.stringEscape=function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+hex(e)).replace(/[\x10-\x1F\x7F-\xFF]/g,e=>"\\x"+hex(e)).replace(/[\u0100-\u0FFF]/g,e=>"\\u0"+hex(e)).replace(/[\u1000-\uFFFF]/g,e=>"\\u"+hex(e))},_$utils_69.regexpClassEscape=function(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+hex(e)).replace(/[\x10-\x1F\x7F-\xFF]/g,e=>"\\x"+hex(e)).replace(/[\u0100-\u0FFF]/g,e=>"\\u0"+hex(e)).replace(/[\u1000-\uFFFF]/g,e=>"\\u"+hex(e))};var _$base64_77={};const intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");_$base64_77.encode=function(e){if(0<=e&&e<intToCharMap.length)return intToCharMap[e];throw new TypeError("Must be between 0 and 63: "+e)};var _$base64Vlq_76={encode:function(e){let t,r="",n=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&n,(n>>>=5)>0&&(t|=32),r+=_$base64_77.encode(t)}while(n>0);return r}},_$util_81={getArg:function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')}};const supportsNullProto=!("__proto__"in Object.create(null));function identity(e){return e}function isProtoString(e){if(!e)return!1;const t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(let r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function strcmp(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}_$util_81.toSetString=supportsNullProto?identity:function(e){return isProtoString(e)?"$"+e:e},_$util_81.fromSetString=supportsNullProto?identity:function(e){return isProtoString(e)?e.slice(1):e},_$util_81.compareByGeneratedPositionsInflated=function(e,t){let r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=strcmp(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:strcmp(e.name,t.name)};const PROTOCOL="http:",PROTOCOL_AND_HOST=PROTOCOL+"//host";function createSafeHandler(e){return t=>{const r=getURLType(t),n=buildSafeBase(t),o=new URL(t,n);e(o);const s=o.toString();return"absolute"===r?s:"scheme-relative"===r?s.slice(PROTOCOL.length):"path-absolute"===r?s.slice(PROTOCOL_AND_HOST.length):computeRelativeURL(n,s)}}function withBase(e,t){return new URL(e,t).toString()}function buildSafeBase(e){const t=e.split("..").length-1,r=function(e,t){let r=0;for(;;){const e="p"+r++;if(-1===t.indexOf(e))return e}}(0,e);let n=PROTOCOL_AND_HOST+"/";for(let o=0;o<t;o++)n+=r+"/";return n}const ABSOLUTE_SCHEME=/^[A-Za-z0-9\+\-\.]+:/;function getURLType(e){return"/"===e[0]?"/"===e[1]?"scheme-relative":"path-absolute":ABSOLUTE_SCHEME.test(e)?"absolute":"path-relative"}function computeRelativeURL(e,t){"string"==typeof e&&(e=new URL(e)),"string"==typeof t&&(t=new URL(t));const r=t.pathname.split("/"),n=e.pathname.split("/");for(n.length>0&&!n[n.length-1]&&n.pop();r.length>0&&n.length>0&&r[0]===n[0];)r.shift(),n.shift();return n.map(()=>"..").concat(r).join("/")+t.search+t.hash}const ensureDirectory=createSafeHandler(e=>{e.pathname=e.pathname.replace(/\/?$/,"/")}),normalize=createSafeHandler(e=>{});_$util_81.normalize=normalize,_$util_81.join=function(e,t){const r=getURLType(t),n=getURLType(e);if(e=ensureDirectory(e),"absolute"===r)return withBase(t,void 0);if("absolute"===n)return withBase(t,e);if("scheme-relative"===r)return normalize(t);if("scheme-relative"===n)return withBase(t,withBase(e,PROTOCOL_AND_HOST)).slice(PROTOCOL.length);if("path-absolute"===r)return normalize(t);if("path-absolute"===n)return withBase(t,withBase(e,PROTOCOL_AND_HOST)).slice(PROTOCOL_AND_HOST.length);const o=buildSafeBase(t+e);return computeRelativeURL(o,withBase(t,withBase(e,o)))},_$util_81.relative=function(e,t){const r=function(e,t){if(getURLType(e)!==getURLType(t))return null;const r=buildSafeBase(e+t),n=new URL(e,r),o=new URL(t,r);try{new URL("",o.toString())}catch(s){return null}return o.protocol!==n.protocol||o.user!==n.user||o.password!==n.password||o.hostname!==n.hostname||o.port!==n.port?null:computeRelativeURL(n,o)}(e,t);return"string"==typeof r?r:normalize(t)};var _$arraySet_75={};class ArraySet{constructor(){this._array=[],this._set=new Map}static fromArray(e,t){const r=new ArraySet;for(let n=0,o=e.length;n<o;n++)r.add(e[n],t);return r}size(){return this._set.size}add(e,t){const r=this.has(e),n=this._array.length;r&&!t||this._array.push(e),r||this._set.set(e,n)}has(e){return this._set.has(e)}indexOf(e){const t=this._set.get(e);if(t>=0)return t;throw new Error('"'+e+'" is not in the set.')}at(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)}toArray(){return this._array.slice()}}_$arraySet_75.ArraySet=ArraySet;var _$mappingList_78={MappingList:class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(e,t){this._array.forEach(e,t)}add(e){!function(e,t){const r=e.generatedLine,n=t.generatedLine,o=e.generatedColumn,s=t.generatedColumn;return n>r||n==r&&s>=o||_$util_81.compareByGeneratedPositionsInflated(e,t)<=0}(this._last,e)?(this._sorted=!1,this._array.push(e)):(this._last=e,this._array.push(e))}toArray(){return this._sorted||(this._array.sort(_$util_81.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}}},_$sourceMapGenerator_79={};const __ArraySet_79=_$arraySet_75.ArraySet,MappingList=_$mappingList_78.MappingList;class SourceMapGenerator{constructor(e){e||(e={}),this._file=_$util_81.getArg(e,"file",null),this._sourceRoot=_$util_81.getArg(e,"sourceRoot",null),this._skipValidation=_$util_81.getArg(e,"skipValidation",!1),this._sources=new __ArraySet_79,this._names=new __ArraySet_79,this._mappings=new MappingList,this._sourcesContents=null}static fromSourceMap(e){const t=e.sourceRoot,r=new SourceMapGenerator({file:e.file,sourceRoot:t});return e.eachMapping((function(e){const n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=_$util_81.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(n){let o=n;null!=t&&(o=_$util_81.relative(t,n)),r._sources.has(o)||r._sources.add(o);const s=e.sourceContentFor(n);null!=s&&r.setSourceContent(n,s)})),r}addMapping(e){const t=_$util_81.getArg(e,"generated"),r=_$util_81.getArg(e,"original",null);let n=_$util_81.getArg(e,"source",null),o=_$util_81.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:r&&r.line,originalColumn:r&&r.column,source:n,name:o})}setSourceContent(e,t){let r=e;null!=this._sourceRoot&&(r=_$util_81.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[_$util_81.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[_$util_81.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))}applySourceMap(e,t,r){let n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}const o=this._sourceRoot;null!=o&&(n=_$util_81.relative(o,n));const s=this._mappings.toArray().length>0?new __ArraySet_79:this._sources,i=new __ArraySet_79;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){const n=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=n.source&&(t.source=n.source,null!=r&&(t.source=_$util_81.join(r,t.source)),null!=o&&(t.source=_$util_81.relative(o,t.source)),t.originalLine=n.line,t.originalColumn=n.column,null!=n.name&&(t.name=n.name))}const a=t.source;null==a||s.has(a)||s.add(a);const u=t.name;null==u||i.has(u)||i.add(u)}),this),this._sources=s,this._names=i,e.sources.forEach((function(t){const n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=_$util_81.join(r,t)),null!=o&&(t=_$util_81.relative(o,t)),this.setSourceContent(t,n))}),this)}_validateMapping(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!r&&!n);else if(!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))}_serializeMappings(){let e,t,r,n,o=0,s=1,i=0,a=0,u=0,c=0,l="";const p=this._mappings.toArray();for(let f=0,h=p.length;f<h;f++){if(e="",(t=p[f]).generatedLine!==s)for(o=0;t.generatedLine!==s;)e+=";",s++;else if(f>0){if(!_$util_81.compareByGeneratedPositionsInflated(t,p[f-1]))continue;e+=","}e+=_$base64Vlq_76.encode(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=_$base64Vlq_76.encode(n-c),c=n,e+=_$base64Vlq_76.encode(t.originalLine-1-a),a=t.originalLine-1,e+=_$base64Vlq_76.encode(t.originalColumn-i),i=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=_$base64Vlq_76.encode(r-u),u=r)),l+=e}return l}_generateSourcesContent(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=_$util_81.relative(t,e));const r=_$util_81.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)}toJSON(){const e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e}toString(){return JSON.stringify(this.toJSON())}}SourceMapGenerator.prototype._version=3,_$sourceMapGenerator_79.SourceMapGenerator=SourceMapGenerator;var _$sourceNode_80={};const __SourceMapGenerator_80=_$sourceMapGenerator_79.SourceMapGenerator,REGEX_NEWLINE=/(\r?\n)/,NEWLINE_CODE=10,isSourceNode="$$$isSourceNode$$$";class SourceNode{constructor(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[isSourceNode]=!0,null!=n&&this.add(n)}static fromStringWithSourceMap(e,t,r){const n=new SourceNode,o=e.split(REGEX_NEWLINE);let s=0;const i=function(){return e()+(e()||"");function e(){return s<o.length?o[s++]:void 0}};let a,u=1,c=0,l=null;return t.eachMapping((function(e){if(null!==l){if(!(u<e.generatedLine)){const t=(a=o[s]||"").substr(0,e.generatedColumn-c);return o[s]=a.substr(e.generatedColumn-c),c=e.generatedColumn,p(l,t),void(l=e)}p(l,i()),u++,c=0}for(;u<e.generatedLine;)n.add(i()),u++;c<e.generatedColumn&&(a=o[s]||"",n.add(a.substr(0,e.generatedColumn)),o[s]=a.substr(e.generatedColumn),c=e.generatedColumn),l=e}),this),s<o.length&&(l&&p(l,i()),n.add(o.splice(s).join(""))),t.sources.forEach((function(e){const o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=_$util_81.join(r,e)),n.setSourceContent(e,o))})),n;function p(e,t){if(null===e||void 0===e.source)n.add(t);else{const o=r?_$util_81.join(r,e.source):e.source;n.add(new SourceNode(e.originalLine,e.originalColumn,o,t,e.name))}}}add(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this}prepend(e){if(Array.isArray(e))for(let t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[isSourceNode]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this}walk(e){let t;for(let r=0,n=this.children.length;r<n;r++)(t=this.children[r])[isSourceNode]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})}join(e){let t,r;const n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this}replaceRight(e,t){const r=this.children[this.children.length-1];return r[isSourceNode]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this}setSourceContent(e,t){this.sourceContents[_$util_81.toSetString(e)]=t}walkSourceContents(e){for(let r=0,n=this.children.length;r<n;r++)this.children[r][isSourceNode]&&this.children[r].walkSourceContents(e);const t=Object.keys(this.sourceContents);for(let r=0,n=t.length;r<n;r++)e(_$util_81.fromSetString(t[r]),this.sourceContents[t[r]])}toString(){let e="";return this.walk((function(t){e+=t})),e}toStringWithSourceMap(e){const t={code:"",line:1,column:0},r=new __SourceMapGenerator_80(e);let n=!1,o=null,s=null,i=null,a=null;return this.walk((function(e,u){t.code+=e,null!==u.source&&null!==u.line&&null!==u.column?(o===u.source&&s===u.line&&i===u.column&&a===u.name||r.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name}),o=u.source,s=u.line,i=u.column,a=u.name,n=!0):n&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,n=!1);for(let s=0,i=e.length;s<i;s++)e.charCodeAt(s)===NEWLINE_CODE?(t.line++,t.column=0,s+1===i?(o=null,n=!1):n&&r.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}}}_$sourceNode_80.SourceNode=SourceNode;var _$sourceMap_82={};_$sourceMap_82.SourceMapGenerator=_$sourceMapGenerator_79.SourceMapGenerator,_$sourceMap_82.SourceNode=_$sourceNode_80.SourceNode;const{stringEscape:stringEscape,regexpClassEscape:regexpClassEscape}=_$utils_69,{SourceNode:__SourceNode_58}=_$sourceMap_82;function toSourceNode(e,t,r){const n=t.start.line,o=t.start.column-1,s=e.split("\n");return 1===s.length?new __SourceNode_58(n,o,t.source,e,r):new __SourceNode_58(null,null,t.source,s.map((e,i)=>new __SourceNode_58(n+i,0===i?o:0,t.source,i===s.length-1?e:[e,"\n"],r)))}function wrapInSourceNode(e,t,r,n,o){return r?new __SourceNode_58(null,null,r.source,[e,toSourceNode(t,r,o),new __SourceNode_58(r.end.line,r.end.column-1,r.source,n)]):new __SourceNode_58(null,null,null,[e,t,n])}var _$generateJs_58=function(e,t){function r(e){return e instanceof __SourceNode_58?e:e.replace(/^(.+)$/gm,"  $1")}function n(e){return"peg$c"+e}function o(e){return"peg$r"+e}function s(e){return"peg$e"+e}function i(e){return"peg$f"+e}function a(e){return"peg$parse"+e}function u(e){return e.codeLocation?toSourceNode(e.code,e.codeLocation,"$"+e.type):e.code}e.code=function(e){function n(){return[`// Generated by Peggy ${_$version_74}.`,"//","// https://peggyjs.org/"]}function o(){return t.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join("\n"):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join("\n")}const s={bare:()=>[...n(),"(function() {",'  "use strict";',"",e,"",r("return "+o()+";"),"})()"],commonjs(){const r=Object.keys(t.dependencies),s=n();return s.push("",'"use strict";',""),r.length>0&&(r.forEach(e=>{s.push("var "+e+' = require("'+stringEscape(t.dependencies[e])+'");')}),s.push("")),s.push(e,"","module.exports = "+o()+";"),s},es(){const r=Object.keys(t.dependencies),o=n();return o.push(""),r.length>0&&(r.forEach(e=>{o.push("import "+e+' from "'+stringEscape(t.dependencies[e])+'";')}),o.push("")),o.push(e,"","export {","  peg$SyntaxError as SyntaxError,",t.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),o},amd(){const s=Object.keys(t.dependencies),i="["+s.map(e=>t.dependencies[e]).map(e=>'"'+stringEscape(e)+'"').join(", ")+"]",a=s.join(", ");return[...n(),"define("+i+", function("+a+") {",'  "use strict";',"",e,"",r("return "+o()+";"),"});"]},globals:()=>[...n(),"(function(root) {",'  "use strict";',"",e,"",r("root."+t.exportVar+" = "+o()+";"),"})(this);"],umd(){const s=Object.keys(t.dependencies),i=s.map(e=>t.dependencies[e]),a="["+i.map(e=>'"'+stringEscape(e)+'"').join(", ")+"]",u=i.map(e=>'require("'+stringEscape(e)+'")').join(", "),c=s.join(", "),l=n();return l.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+a+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+u+");"),null!==t.exportVar&&l.push("  } else {","    root."+t.exportVar+" = factory();"),l.push("  }","})(this, function("+c+") {",'  "use strict";',"",e,"",r("return "+o()+";"),"});"),l}}[t.format]();return new __SourceNode_58(null,null,t.grammarSource,s.map(e=>e instanceof __SourceNode_58?e:e+"\n"))}(function(){const c=[];e.topLevelInitializer&&(c.push(u(e.topLevelInitializer)),c.push("")),c.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;","      var filler = peg$padEnd(\"\", s.line.toString().length, ' ');","      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --\x3e " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"','          + filler + " | " + peg$padEnd("", s.column - 1, \' \')','          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),t.trace&&c.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");const l="{ "+t.allowedStartRules.map(e=>e+": "+a(e)).join(", ")+" }",p=a(t.allowedStartRules[0]);return c.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+l+";","  var peg$startRuleFunction = "+p+";","",new __SourceNode_58(null,null,t.grammarSource,[e.literals.map((e,t)=>"  var "+n(t)+' = "'+stringEscape(e)+'";').concat("",e.classes.map((e,t)=>{return"  var "+o(t)+" = /^["+((r=e).inverted?"^":"")+r.value.map(e=>Array.isArray(e)?regexpClassEscape(e[0])+"-"+regexpClassEscape(e[1]):regexpClassEscape(e)).join("")+"]/"+(r.ignoreCase?"i":"")+";";var r})).concat("",e.expectations.map((e,t)=>"  var "+s(t)+" = "+function(e){switch(e.type){case"rule":return'peg$otherExpectation("'+stringEscape(e.value)+'")';case"literal":return'peg$literalExpectation("'+stringEscape(e.value)+'", '+e.ignoreCase+")";case"class":return"peg$classExpectation(["+e.value.map(e=>Array.isArray(e)?'["'+stringEscape(e[0])+'", "'+stringEscape(e[1])+'"]':'"'+stringEscape(e)+'"').join(", ")+"], "+e.inverted+", "+e.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(e)+")")}}(e)+";")).concat("").join("\n"),e.functions.map((function(e,t){return wrapInSourceNode(`\n  var ${i(t)} = function(${e.params.join(", ")}) {`,e.body,e.location,"};")}))]),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),t.cache&&c.push("  var peg$resultsCache = {};",""),t.trace&&c.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),c.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",'      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");',"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),e.rules.forEach(u=>{c.push(...function(u){const c=[],l=new _$stack_68(u.name,"s","var"),p=function t(u){let c=0;const p=u.length,f=[];let h;function d(e,n){const o=n+3,s=u[c+o-2],i=u[c+o-1];let a,p;l.checkedIf(c,()=>{c+=o,a=t(u.slice(c,c+s)),c+=s},i>0?()=>{p=t(u.slice(c,c+i)),c+=i}:null),f.push("if ("+e+") {"),f.push(...a.map(r)),i>0&&(f.push("} else {"),f.push(...p.map(r))),f.push("}")}function _(e){const n=u[c+2-1];let o;l.checkedLoop(c,()=>{c+=2,o=t(u.slice(c,c+n)),c+=n}),f.push("while ("+e+") {"),f.push(...o.map(r)),f.push("}")}function g(){const e=u[c+4-1],t=i(u[c+1])+"("+u.slice(c+4,c+4+e).map(e=>l.index(e)).join(", ")+")";l.pop(u[c+2]),f.push(l.push(t)),c+=4+e}for(;c<p;)switch(u[c]){case _$opcodes_56.PUSH_EMPTY_STRING:f.push(l.push("''")),c++;break;case _$opcodes_56.PUSH_CURR_POS:f.push(l.push("peg$currPos")),c++;break;case _$opcodes_56.PUSH_UNDEFINED:f.push(l.push("undefined")),c++;break;case _$opcodes_56.PUSH_NULL:f.push(l.push("null")),c++;break;case _$opcodes_56.PUSH_FAILED:f.push(l.push("peg$FAILED")),c++;break;case _$opcodes_56.PUSH_EMPTY_ARRAY:f.push(l.push("[]")),c++;break;case _$opcodes_56.POP:l.pop(),c++;break;case _$opcodes_56.POP_CURR_POS:f.push("peg$currPos = "+l.pop()+";"),c++;break;case _$opcodes_56.POP_N:l.pop(u[c+1]),c+=2;break;case _$opcodes_56.NIP:h=l.pop(),l.pop(),f.push(l.push(h)),c++;break;case _$opcodes_56.APPEND:h=l.pop(),f.push(l.top()+".push("+h+");"),c++;break;case _$opcodes_56.WRAP:f.push(l.push("["+l.pop(u[c+1]).join(", ")+"]")),c+=2;break;case _$opcodes_56.TEXT:f.push(l.push("input.substring("+l.pop()+", peg$currPos)")),c++;break;case _$opcodes_56.PLUCK:{const e=3,t=u[c+e-1],r=e+t;h=u.slice(c+e,c+r),h=1===t?l.index(h[0]):`[ ${h.map(e=>l.index(e)).join(", ")} ]`,l.pop(u[c+1]),f.push(l.push(h)),c+=r;break}case _$opcodes_56.IF:d(l.top(),0);break;case _$opcodes_56.IF_ERROR:d(l.top()+" === peg$FAILED",0);break;case _$opcodes_56.IF_NOT_ERROR:d(l.top()+" !== peg$FAILED",0);break;case _$opcodes_56.WHILE_NOT_ERROR:_(l.top()+" !== peg$FAILED");break;case _$opcodes_56.MATCH_ANY:d("input.length > peg$currPos",0);break;case _$opcodes_56.MATCH_STRING:d(e.literals[u[c+1]].length>1?"input.substr(peg$currPos, "+e.literals[u[c+1]].length+") === "+n(u[c+1]):"input.charCodeAt(peg$currPos) === "+e.literals[u[c+1]].charCodeAt(0),1);break;case _$opcodes_56.MATCH_STRING_IC:d("input.substr(peg$currPos, "+e.literals[u[c+1]].length+").toLowerCase() === "+n(u[c+1]),1);break;case _$opcodes_56.MATCH_CHAR_CLASS:d(o(u[c+1])+".test(input.charAt(peg$currPos))",1);break;case _$opcodes_56.ACCEPT_N:f.push(l.push(u[c+1]>1?"input.substr(peg$currPos, "+u[c+1]+")":"input.charAt(peg$currPos)")),f.push(u[c+1]>1?"peg$currPos += "+u[c+1]+";":"peg$currPos++;"),c+=2;break;case _$opcodes_56.ACCEPT_STRING:f.push(l.push(n(u[c+1]))),f.push(e.literals[u[c+1]].length>1?"peg$currPos += "+e.literals[u[c+1]].length+";":"peg$currPos++;"),c+=2;break;case _$opcodes_56.FAIL:f.push(l.push("peg$FAILED")),f.push("if (peg$silentFails === 0) { peg$fail("+s(u[c+1])+"); }"),c+=2;break;case _$opcodes_56.LOAD_SAVED_POS:f.push("peg$savedPos = "+l.index(u[c+1])+";"),c+=2;break;case _$opcodes_56.UPDATE_SAVED_POS:f.push("peg$savedPos = peg$currPos;"),c++;break;case _$opcodes_56.CALL:g();break;case _$opcodes_56.RULE:f.push(l.push(a(e.rules[u[c+1]].name)+"()")),c+=2;break;case _$opcodes_56.SILENT_FAILS_ON:f.push("peg$silentFails++;"),c++;break;case _$opcodes_56.SILENT_FAILS_OFF:f.push("peg$silentFails--;"),c++;break;default:throw new Error("Invalid opcode: "+u[c]+".")}return f}(u.bytecode);return c.push(wrapInSourceNode("  function ",a(u.name),u.nameLocation,"() {\n",u.name)),t.trace&&c.push("  var startPos = peg$currPos;"),c.push(r(l.defines())),c.push(...function(r,n){const o=[];return o.push(""),t.trace&&o.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+r+",","  location: peg$computeLocation(startPos, startPos)","});",""),t.cache&&(o.push("var key = peg$currPos * "+e.rules.length+" + "+n+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),t.trace&&o.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+r+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+r+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),o.push("  return cached.result;","}","")),o}('"'+stringEscape(u.name)+'"',_$asts_54.indexOfRule(e,u.name)).map(r)),c.push(...p.map(r)),c.push(...function(e,r){const n=[];return t.cache&&n.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+r+" };"),t.trace&&n.push("","if ("+r+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+e+",","    result: "+r+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),n.push("","return "+r+";"),n}('"'+stringEscape(u.name)+'"',l.result()).map(r)),c.push("}"),c}(u).map(r)),c.push("")}),e.initializer&&(c.push(u(e.initializer)),c.push("")),c.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new __SourceNode_58(null,null,t.grammarSource,c.map(e=>e instanceof __SourceNode_58?e:e+"\n"))}())},_$removeProxyRules_60=function(e,t,r){const n=[];e.rules.forEach((o,s)=>{var i;"rule"===(i=o).type&&"rule_ref"===i.expression.type&&(function(e,t,n){_$visitor_70.build({rule_ref(o){o.name===t&&(o.name=n,r.info(`Proxy rule "${t}" replaced by the rule "${n}"`,o.location,[{message:"This rule will be used",location:_$asts_54.findRule(e,n).nameLocation}]))}})(e)}(e,o.name,o.expression.name),-1===t.allowedStartRules.indexOf(o.name)&&n.push(s))}),n.reverse(),n.forEach(t=>{e.rules.splice(t,1)})},_$reportDuplicateLabels_61=function(e,t,r){function n(e){const t={};return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}function o(e,t){s(e.expression,n(t))}const s=_$visitor_70.build({rule(e){s(e.expression,{})},choice(e,t){e.alternatives.forEach(e=>{s(e,n(t))})},action:o,labeled(e,t){const n=e.label;n&&Object.prototype.hasOwnProperty.call(t,n)&&r.error(`Label "${e.label}" is already defined`,e.labelLocation,[{message:"Original label location",location:t[n]}]),s(e.expression,t),t[e.label]=e.labelLocation},text:o,simple_and:o,simple_not:o,optional:o,zero_or_more:o,one_or_more:o,group:o});s(e)},_$reportDuplicateRules_62=function(e,t,r){const n={};_$visitor_70.build({rule(e){Object.prototype.hasOwnProperty.call(n,e.name)?r.error(`Rule "${e.name}" is already defined`,e.nameLocation,[{message:"Original rule location",location:n[e.name]}]):n[e.name]=e.nameLocation}})(e)},_$reportInfiniteRecursion_64=function(e,t,r){const n=[],o=[],s=_$visitor_70.build({rule(e){n.push(e.name),s(e.expression),n.pop()},sequence(t){t.elements.every(t=>(s(t),!_$asts_54.alwaysConsumesOnSuccess(e,t)))},rule_ref(t){o.push(t);const i=_$asts_54.findRule(e,t.name);if(-1!==n.indexOf(t.name))return n.push(t.name),void r.error("Possible infinite loop when parsing (left recursion: "+n.join(" -> ")+")",i.nameLocation,o.map((e,t,r)=>({message:t+1!==r.length?`Step ${t+1}: call of the rule "${e.name}" without input consumption`:`Step ${t+1}: call itself without input consumption - left recursion`,location:e.location})));i&&s(i),o.pop()}});s(e)},_$reportInfiniteRepetition_65=function(e,t,r){_$visitor_70.build({zero_or_more(t){_$asts_54.alwaysConsumesOnSuccess(e,t.expression)||r.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",t.location)},one_or_more(t){_$asts_54.alwaysConsumesOnSuccess(e,t.expression)||r.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",t.location)}})(e)},_$reportUndefinedRules_66=function(e,t,r){_$visitor_70.build({rule_ref(t){_$asts_54.findRule(e,t.name)||r.error(`Rule "${t.name}" is not defined`,t.location)}})(e)},_$reportIncorrectPlucking_63=function(e,t,r){const n=_$visitor_70.build({action(e){n(e.expression,e)},labeled(e,t){e.pick&&t&&r.error('"@" cannot be used with an action block',e.labelLocation,[{message:"Action block location",location:t.codeLocation}]),n(e.expression)}});n(e)};class Defaults{constructor(e){"function"==typeof(e=void 0!==e?e:{}).error&&(this.error=e.error),"function"==typeof e.warning&&(this.warning=e.warning),"function"==typeof e.info&&(this.info=e.info)}error(){}warning(){}info(){}}var _$session_67=class{constructor(e){this._callbacks=new Defaults(e),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...e){++this.errors,null===this._firstError&&(this._firstError=new _$GrammarError_71(...e),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...e]),this._callbacks.error(this.stage,...e)}warning(...e){this.problems.push(["warning",...e]),this._callbacks.warning(this.stage,...e)}info(...e){this.problems.push(["info",...e]),this._callbacks.info(this.stage,...e)}checkErrors(){if(0!==this.errors)throw this._firstError}};function processOptions(e,t){const r={};return Object.keys(e).forEach(t=>{r[t]=e[t]}),Object.keys(t).forEach(e=>{Object.prototype.hasOwnProperty.call(r,e)||(r[e]=t[e])}),r}const compiler={visitor:_$visitor_70,passes:{check:[_$reportUndefinedRules_66,_$reportDuplicateRules_62,_$reportDuplicateLabels_61,_$reportInfiniteRecursion_64,_$reportInfiniteRepetition_65,_$reportIncorrectPlucking_63],transform:[_$removeProxyRules_60,_$inferenceMatchResult_59],generate:[_$generateBytecode_57,_$generateJs_58]},compile(ast,passes,options){if(options=void 0!==options?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(0===options.allowedStartRules.length)throw new Error("Must have at least one start rule");const allRules=ast.rules.map(e=>e.name);for(const e of options.allowedStartRules)if(-1===allRules.indexOf(e))throw new Error(`Unknown start rule "${e}"`);const session=new _$session_67(options);switch(Object.keys(passes).forEach(e=>{session.stage=e,session.info("Process stage "+e),passes[e].forEach(t=>{session.info(`Process pass ${e}.${t.name}`),t(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};var _$compiler_55=compiler,_$parser_72={};const OPS_TO_PREFIXED_TYPES={$:"text","&":"simple_and","!":"simple_not"},OPS_TO_SUFFIXED_TYPES={"?":"optional","*":"zero_or_more","+":"one_or_more"},OPS_TO_SEMANTIC_PREDICATE_TYPES={"&":"semantic_and","!":"semantic_not"};function peg$SyntaxError(e,t,r,n){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,peg$SyntaxError.prototype),o.expected=t,o.found=r,o.location=n,o.name="SyntaxError",o}function peg$padEnd(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(peg$SyntaxError,Error),peg$SyntaxError.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,s=this.location.source+":"+o.line+":"+o.column;if(n){var i=this.location.end,a=peg$padEnd("",o.line.toString().length," "),u=n[o.line-1],c=(o.line===i.line?i.column:u.length+1)-o.column||1;t+="\n --\x3e "+s+"\n"+a+" |\n"+o.line+" | "+u+"\n"+a+" | "+peg$padEnd("",o.column-1," ")+peg$padEnd("",c,"^")}else t+="\n at "+s}return t},peg$SyntaxError.buildMessage=function(e,t){var r={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(i);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."},_$parser_72={SyntaxError:peg$SyntaxError,parse:function(e,t){var r,n={},o=(t=void 0!==t?t:{}).grammarSource,s={Grammar:rt},i=rt,a=/^[\n\r\u2028\u2029]/,u=/^[0-9]/,c=/^[0-9a-f]/i,l=/^[{}]/,p=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,f=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,h=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,d=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,_=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,g=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,y=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,v=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,m=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,b=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,w=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,E=Xe("{",!1),x=Xe("}",!1),A=Xe("=",!1),S=Xe("/",!1),C=Xe("@",!1),P=Xe(":",!1),I=Xe("$",!1),F=Xe("&",!1),k=Xe("!",!1),R=Xe("?",!1),$=Xe("*",!1),O=Xe("+",!1),T=Xe("(",!1),D=Xe(")",!1),B={type:"any"},j=Ze("whitespace"),N=Xe("\t",!1),L=Xe("\v",!1),U=Xe("\f",!1),H=Xe(" ",!1),M=Xe("\xa0",!1),q=Xe("\ufeff",!1),V=Je(["\n","\r","\u2028","\u2029"],!1,!1),K=Ze("end of line"),G=Xe("\n",!1),z=Xe("\r\n",!1),Y=Xe("\r",!1),W=Xe("\u2028",!1),X=Xe("\u2029",!1),J=Ze("comment"),Z=Xe("/*",!1),Q=Xe("*/",!1),ee=Xe("//",!1),te=Ze("identifier"),re=Xe("_",!1),ne=Xe("\\",!1),oe=Xe("\u200c",!1),se=Xe("\u200d",!1),ie=Ze("literal"),ae=Xe("i",!1),ue=Ze("string"),ce=Xe('"',!1),le=Xe("'",!1),pe=Ze("character class"),fe=Xe("[",!1),he=Xe("^",!1),de=Xe("]",!1),_e=Xe("-",!1),ge=Xe("0",!1),ye=Xe("b",!1),ve=Xe("f",!1),me=Xe("n",!1),be=Xe("r",!1),we=Xe("t",!1),Ee=Xe("v",!1),xe=Xe("x",!1),Ae=Xe("u",!1),Se=Je([["0","9"]],!1,!1),Ce=Je([["0","9"],["a","f"]],!1,!0),Pe=Xe(".",!1),Ie=Ze("code block"),Fe=Je(["{","}"],!1,!1),ke=Je([["a","z"],"\xb5",["\xdf","\xf6"],["\xf8","\xff"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010b","\u010d","\u010f","\u0111","\u0113","\u0115","\u0117","\u0119","\u011b","\u011d","\u011f","\u0121","\u0123","\u0125","\u0127","\u0129","\u012b","\u012d","\u012f","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013a","\u013c","\u013e","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014b","\u014d","\u014f","\u0151","\u0153","\u0155","\u0157","\u0159","\u015b","\u015d","\u015f","\u0161","\u0163","\u0165","\u0167","\u0169","\u016b","\u016d","\u016f","\u0171","\u0173","\u0175","\u0177","\u017a","\u017c",["\u017e","\u0180"],"\u0183","\u0185","\u0188",["\u018c","\u018d"],"\u0192","\u0195",["\u0199","\u019b"],"\u019e","\u01a1","\u01a3","\u01a5","\u01a8",["\u01aa","\u01ab"],"\u01ad","\u01b0","\u01b4","\u01b6",["\u01b9","\u01ba"],["\u01bd","\u01bf"],"\u01c6","\u01c9","\u01cc","\u01ce","\u01d0","\u01d2","\u01d4","\u01d6","\u01d8","\u01da",["\u01dc","\u01dd"],"\u01df","\u01e1","\u01e3","\u01e5","\u01e7","\u01e9","\u01eb","\u01ed",["\u01ef","\u01f0"],"\u01f3","\u01f5","\u01f9","\u01fb","\u01fd","\u01ff","\u0201","\u0203","\u0205","\u0207","\u0209","\u020b","\u020d","\u020f","\u0211","\u0213","\u0215","\u0217","\u0219","\u021b","\u021d","\u021f","\u0221","\u0223","\u0225","\u0227","\u0229","\u022b","\u022d","\u022f","\u0231",["\u0233","\u0239"],"\u023c",["\u023f","\u0240"],"\u0242","\u0247","\u0249","\u024b","\u024d",["\u024f","\u0293"],["\u0295","\u02af"],"\u0371","\u0373","\u0377",["\u037b","\u037d"],"\u0390",["\u03ac","\u03ce"],["\u03d0","\u03d1"],["\u03d5","\u03d7"],"\u03d9","\u03db","\u03dd","\u03df","\u03e1","\u03e3","\u03e5","\u03e7","\u03e9","\u03eb","\u03ed",["\u03ef","\u03f3"],"\u03f5","\u03f8",["\u03fb","\u03fc"],["\u0430","\u045f"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046b","\u046d","\u046f","\u0471","\u0473","\u0475","\u0477","\u0479","\u047b","\u047d","\u047f","\u0481","\u048b","\u048d","\u048f","\u0491","\u0493","\u0495","\u0497","\u0499","\u049b","\u049d","\u049f","\u04a1","\u04a3","\u04a5","\u04a7","\u04a9","\u04ab","\u04ad","\u04af","\u04b1","\u04b3","\u04b5","\u04b7","\u04b9","\u04bb","\u04bd","\u04bf","\u04c2","\u04c4","\u04c6","\u04c8","\u04ca","\u04cc",["\u04ce","\u04cf"],"\u04d1","\u04d3","\u04d5","\u04d7","\u04d9","\u04db","\u04dd","\u04df","\u04e1","\u04e3","\u04e5","\u04e7","\u04e9","\u04eb","\u04ed","\u04ef","\u04f1","\u04f3","\u04f5","\u04f7","\u04f9","\u04fb","\u04fd","\u04ff","\u0501","\u0503","\u0505","\u0507","\u0509","\u050b","\u050d","\u050f","\u0511","\u0513","\u0515","\u0517","\u0519","\u051b","\u051d","\u051f","\u0521","\u0523","\u0525","\u0527","\u0529","\u052b","\u052d","\u052f",["\u0561","\u0587"],["\u13f8","\u13fd"],["\u1d00","\u1d2b"],["\u1d6b","\u1d77"],["\u1d79","\u1d9a"],"\u1e01","\u1e03","\u1e05","\u1e07","\u1e09","\u1e0b","\u1e0d","\u1e0f","\u1e11","\u1e13","\u1e15","\u1e17","\u1e19","\u1e1b","\u1e1d","\u1e1f","\u1e21","\u1e23","\u1e25","\u1e27","\u1e29","\u1e2b","\u1e2d","\u1e2f","\u1e31","\u1e33","\u1e35","\u1e37","\u1e39","\u1e3b","\u1e3d","\u1e3f","\u1e41","\u1e43","\u1e45","\u1e47","\u1e49","\u1e4b","\u1e4d","\u1e4f","\u1e51","\u1e53","\u1e55","\u1e57","\u1e59","\u1e5b","\u1e5d","\u1e5f","\u1e61","\u1e63","\u1e65","\u1e67","\u1e69","\u1e6b","\u1e6d","\u1e6f","\u1e71","\u1e73","\u1e75","\u1e77","\u1e79","\u1e7b","\u1e7d","\u1e7f","\u1e81","\u1e83","\u1e85","\u1e87","\u1e89","\u1e8b","\u1e8d","\u1e8f","\u1e91","\u1e93",["\u1e95","\u1e9d"],"\u1e9f","\u1ea1","\u1ea3","\u1ea5","\u1ea7","\u1ea9","\u1eab","\u1ead","\u1eaf","\u1eb1","\u1eb3","\u1eb5","\u1eb7","\u1eb9","\u1ebb","\u1ebd","\u1ebf","\u1ec1","\u1ec3","\u1ec5","\u1ec7","\u1ec9","\u1ecb","\u1ecd","\u1ecf","\u1ed1","\u1ed3","\u1ed5","\u1ed7","\u1ed9","\u1edb","\u1edd","\u1edf","\u1ee1","\u1ee3","\u1ee5","\u1ee7","\u1ee9","\u1eeb","\u1eed","\u1eef","\u1ef1","\u1ef3","\u1ef5","\u1ef7","\u1ef9","\u1efb","\u1efd",["\u1eff","\u1f07"],["\u1f10","\u1f15"],["\u1f20","\u1f27"],["\u1f30","\u1f37"],["\u1f40","\u1f45"],["\u1f50","\u1f57"],["\u1f60","\u1f67"],["\u1f70","\u1f7d"],["\u1f80","\u1f87"],["\u1f90","\u1f97"],["\u1fa0","\u1fa7"],["\u1fb0","\u1fb4"],["\u1fb6","\u1fb7"],"\u1fbe",["\u1fc2","\u1fc4"],["\u1fc6","\u1fc7"],["\u1fd0","\u1fd3"],["\u1fd6","\u1fd7"],["\u1fe0","\u1fe7"],["\u1ff2","\u1ff4"],["\u1ff6","\u1ff7"],"\u210a",["\u210e","\u210f"],"\u2113","\u212f","\u2134","\u2139",["\u213c","\u213d"],["\u2146","\u2149"],"\u214e","\u2184",["\u2c30","\u2c5e"],"\u2c61",["\u2c65","\u2c66"],"\u2c68","\u2c6a","\u2c6c","\u2c71",["\u2c73","\u2c74"],["\u2c76","\u2c7b"],"\u2c81","\u2c83","\u2c85","\u2c87","\u2c89","\u2c8b","\u2c8d","\u2c8f","\u2c91","\u2c93","\u2c95","\u2c97","\u2c99","\u2c9b","\u2c9d","\u2c9f","\u2ca1","\u2ca3","\u2ca5","\u2ca7","\u2ca9","\u2cab","\u2cad","\u2caf","\u2cb1","\u2cb3","\u2cb5","\u2cb7","\u2cb9","\u2cbb","\u2cbd","\u2cbf","\u2cc1","\u2cc3","\u2cc5","\u2cc7","\u2cc9","\u2ccb","\u2ccd","\u2ccf","\u2cd1","\u2cd3","\u2cd5","\u2cd7","\u2cd9","\u2cdb","\u2cdd","\u2cdf","\u2ce1",["\u2ce3","\u2ce4"],"\u2cec","\u2cee","\u2cf3",["\u2d00","\u2d25"],"\u2d27","\u2d2d","\ua641","\ua643","\ua645","\ua647","\ua649","\ua64b","\ua64d","\ua64f","\ua651","\ua653","\ua655","\ua657","\ua659","\ua65b","\ua65d","\ua65f","\ua661","\ua663","\ua665","\ua667","\ua669","\ua66b","\ua66d","\ua681","\ua683","\ua685","\ua687","\ua689","\ua68b","\ua68d","\ua68f","\ua691","\ua693","\ua695","\ua697","\ua699","\ua69b","\ua723","\ua725","\ua727","\ua729","\ua72b","\ua72d",["\ua72f","\ua731"],"\ua733","\ua735","\ua737","\ua739","\ua73b","\ua73d","\ua73f","\ua741","\ua743","\ua745","\ua747","\ua749","\ua74b","\ua74d","\ua74f","\ua751","\ua753","\ua755","\ua757","\ua759","\ua75b","\ua75d","\ua75f","\ua761","\ua763","\ua765","\ua767","\ua769","\ua76b","\ua76d","\ua76f",["\ua771","\ua778"],"\ua77a","\ua77c","\ua77f","\ua781","\ua783","\ua785","\ua787","\ua78c","\ua78e","\ua791",["\ua793","\ua795"],"\ua797","\ua799","\ua79b","\ua79d","\ua79f","\ua7a1","\ua7a3","\ua7a5","\ua7a7","\ua7a9","\ua7b5","\ua7b7","\ua7fa",["\uab30","\uab5a"],["\uab60","\uab65"],["\uab70","\uabbf"],["\ufb00","\ufb06"],["\ufb13","\ufb17"],["\uff41","\uff5a"]],!1,!1),Re=Je([["\u02b0","\u02c1"],["\u02c6","\u02d1"],["\u02e0","\u02e4"],"\u02ec","\u02ee","\u0374","\u037a","\u0559","\u0640",["\u06e5","\u06e6"],["\u07f4","\u07f5"],"\u07fa","\u081a","\u0824","\u0828","\u0971","\u0e46","\u0ec6","\u10fc","\u17d7","\u1843","\u1aa7",["\u1c78","\u1c7d"],["\u1d2c","\u1d6a"],"\u1d78",["\u1d9b","\u1dbf"],"\u2071","\u207f",["\u2090","\u209c"],["\u2c7c","\u2c7d"],"\u2d6f","\u2e2f","\u3005",["\u3031","\u3035"],"\u303b",["\u309d","\u309e"],["\u30fc","\u30fe"],"\ua015",["\ua4f8","\ua4fd"],"\ua60c","\ua67f",["\ua69c","\ua69d"],["\ua717","\ua71f"],"\ua770","\ua788",["\ua7f8","\ua7f9"],"\ua9cf","\ua9e6","\uaa70","\uaadd",["\uaaf3","\uaaf4"],["\uab5c","\uab5f"],"\uff70",["\uff9e","\uff9f"]],!1,!1),$e=Je(["\xaa","\xba","\u01bb",["\u01c0","\u01c3"],"\u0294",["\u05d0","\u05ea"],["\u05f0","\u05f2"],["\u0620","\u063f"],["\u0641","\u064a"],["\u066e","\u066f"],["\u0671","\u06d3"],"\u06d5",["\u06ee","\u06ef"],["\u06fa","\u06fc"],"\u06ff","\u0710",["\u0712","\u072f"],["\u074d","\u07a5"],"\u07b1",["\u07ca","\u07ea"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08a0","\u08b4"],["\u0904","\u0939"],"\u093d","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098c"],["\u098f","\u0990"],["\u0993","\u09a8"],["\u09aa","\u09b0"],"\u09b2",["\u09b6","\u09b9"],"\u09bd","\u09ce",["\u09dc","\u09dd"],["\u09df","\u09e1"],["\u09f0","\u09f1"],["\u0a05","\u0a0a"],["\u0a0f","\u0a10"],["\u0a13","\u0a28"],["\u0a2a","\u0a30"],["\u0a32","\u0a33"],["\u0a35","\u0a36"],["\u0a38","\u0a39"],["\u0a59","\u0a5c"],"\u0a5e",["\u0a72","\u0a74"],["\u0a85","\u0a8d"],["\u0a8f","\u0a91"],["\u0a93","\u0aa8"],["\u0aaa","\u0ab0"],["\u0ab2","\u0ab3"],["\u0ab5","\u0ab9"],"\u0abd","\u0ad0",["\u0ae0","\u0ae1"],"\u0af9",["\u0b05","\u0b0c"],["\u0b0f","\u0b10"],["\u0b13","\u0b28"],["\u0b2a","\u0b30"],["\u0b32","\u0b33"],["\u0b35","\u0b39"],"\u0b3d",["\u0b5c","\u0b5d"],["\u0b5f","\u0b61"],"\u0b71","\u0b83",["\u0b85","\u0b8a"],["\u0b8e","\u0b90"],["\u0b92","\u0b95"],["\u0b99","\u0b9a"],"\u0b9c",["\u0b9e","\u0b9f"],["\u0ba3","\u0ba4"],["\u0ba8","\u0baa"],["\u0bae","\u0bb9"],"\u0bd0",["\u0c05","\u0c0c"],["\u0c0e","\u0c10"],["\u0c12","\u0c28"],["\u0c2a","\u0c39"],"\u0c3d",["\u0c58","\u0c5a"],["\u0c60","\u0c61"],["\u0c85","\u0c8c"],["\u0c8e","\u0c90"],["\u0c92","\u0ca8"],["\u0caa","\u0cb3"],["\u0cb5","\u0cb9"],"\u0cbd","\u0cde",["\u0ce0","\u0ce1"],["\u0cf1","\u0cf2"],["\u0d05","\u0d0c"],["\u0d0e","\u0d10"],["\u0d12","\u0d3a"],"\u0d3d","\u0d4e",["\u0d5f","\u0d61"],["\u0d7a","\u0d7f"],["\u0d85","\u0d96"],["\u0d9a","\u0db1"],["\u0db3","\u0dbb"],"\u0dbd",["\u0dc0","\u0dc6"],["\u0e01","\u0e30"],["\u0e32","\u0e33"],["\u0e40","\u0e45"],["\u0e81","\u0e82"],"\u0e84",["\u0e87","\u0e88"],"\u0e8a","\u0e8d",["\u0e94","\u0e97"],["\u0e99","\u0e9f"],["\u0ea1","\u0ea3"],"\u0ea5","\u0ea7",["\u0eaa","\u0eab"],["\u0ead","\u0eb0"],["\u0eb2","\u0eb3"],"\u0ebd",["\u0ec0","\u0ec4"],["\u0edc","\u0edf"],"\u0f00",["\u0f40","\u0f47"],["\u0f49","\u0f6c"],["\u0f88","\u0f8c"],["\u1000","\u102a"],"\u103f",["\u1050","\u1055"],["\u105a","\u105d"],"\u1061",["\u1065","\u1066"],["\u106e","\u1070"],["\u1075","\u1081"],"\u108e",["\u10d0","\u10fa"],["\u10fd","\u1248"],["\u124a","\u124d"],["\u1250","\u1256"],"\u1258",["\u125a","\u125d"],["\u1260","\u1288"],["\u128a","\u128d"],["\u1290","\u12b0"],["\u12b2","\u12b5"],["\u12b8","\u12be"],"\u12c0",["\u12c2","\u12c5"],["\u12c8","\u12d6"],["\u12d8","\u1310"],["\u1312","\u1315"],["\u1318","\u135a"],["\u1380","\u138f"],["\u1401","\u166c"],["\u166f","\u167f"],["\u1681","\u169a"],["\u16a0","\u16ea"],["\u16f1","\u16f8"],["\u1700","\u170c"],["\u170e","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176c"],["\u176e","\u1770"],["\u1780","\u17b3"],"\u17dc",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18a8"],"\u18aa",["\u18b0","\u18f5"],["\u1900","\u191e"],["\u1950","\u196d"],["\u1970","\u1974"],["\u1980","\u19ab"],["\u19b0","\u19c9"],["\u1a00","\u1a16"],["\u1a20","\u1a54"],["\u1b05","\u1b33"],["\u1b45","\u1b4b"],["\u1b83","\u1ba0"],["\u1bae","\u1baf"],["\u1bba","\u1be5"],["\u1c00","\u1c23"],["\u1c4d","\u1c4f"],["\u1c5a","\u1c77"],["\u1ce9","\u1cec"],["\u1cee","\u1cf1"],["\u1cf5","\u1cf6"],["\u2135","\u2138"],["\u2d30","\u2d67"],["\u2d80","\u2d96"],["\u2da0","\u2da6"],["\u2da8","\u2dae"],["\u2db0","\u2db6"],["\u2db8","\u2dbe"],["\u2dc0","\u2dc6"],["\u2dc8","\u2dce"],["\u2dd0","\u2dd6"],["\u2dd8","\u2dde"],"\u3006","\u303c",["\u3041","\u3096"],"\u309f",["\u30a1","\u30fa"],"\u30ff",["\u3105","\u312d"],["\u3131","\u318e"],["\u31a0","\u31ba"],["\u31f0","\u31ff"],["\u3400","\u4db5"],["\u4e00","\u9fd5"],["\ua000","\ua014"],["\ua016","\ua48c"],["\ua4d0","\ua4f7"],["\ua500","\ua60b"],["\ua610","\ua61f"],["\ua62a","\ua62b"],"\ua66e",["\ua6a0","\ua6e5"],"\ua78f","\ua7f7",["\ua7fb","\ua801"],["\ua803","\ua805"],["\ua807","\ua80a"],["\ua80c","\ua822"],["\ua840","\ua873"],["\ua882","\ua8b3"],["\ua8f2","\ua8f7"],"\ua8fb","\ua8fd",["\ua90a","\ua925"],["\ua930","\ua946"],["\ua960","\ua97c"],["\ua984","\ua9b2"],["\ua9e0","\ua9e4"],["\ua9e7","\ua9ef"],["\ua9fa","\ua9fe"],["\uaa00","\uaa28"],["\uaa40","\uaa42"],["\uaa44","\uaa4b"],["\uaa60","\uaa6f"],["\uaa71","\uaa76"],"\uaa7a",["\uaa7e","\uaaaf"],"\uaab1",["\uaab5","\uaab6"],["\uaab9","\uaabd"],"\uaac0","\uaac2",["\uaadb","\uaadc"],["\uaae0","\uaaea"],"\uaaf2",["\uab01","\uab06"],["\uab09","\uab0e"],["\uab11","\uab16"],["\uab20","\uab26"],["\uab28","\uab2e"],["\uabc0","\uabe2"],["\uac00","\ud7a3"],["\ud7b0","\ud7c6"],["\ud7cb","\ud7fb"],["\uf900","\ufa6d"],["\ufa70","\ufad9"],"\ufb1d",["\ufb1f","\ufb28"],["\ufb2a","\ufb36"],["\ufb38","\ufb3c"],"\ufb3e",["\ufb40","\ufb41"],["\ufb43","\ufb44"],["\ufb46","\ufbb1"],["\ufbd3","\ufd3d"],["\ufd50","\ufd8f"],["\ufd92","\ufdc7"],["\ufdf0","\ufdfb"],["\ufe70","\ufe74"],["\ufe76","\ufefc"],["\uff66","\uff6f"],["\uff71","\uff9d"],["\uffa0","\uffbe"],["\uffc2","\uffc7"],["\uffca","\uffcf"],["\uffd2","\uffd7"],["\uffda","\uffdc"]],!1,!1),Oe=Je(["\u01c5","\u01c8","\u01cb","\u01f2",["\u1f88","\u1f8f"],["\u1f98","\u1f9f"],["\u1fa8","\u1faf"],"\u1fbc","\u1fcc","\u1ffc"],!1,!1),Te=Je([["A","Z"],["\xc0","\xd6"],["\xd8","\xde"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010a","\u010c","\u010e","\u0110","\u0112","\u0114","\u0116","\u0118","\u011a","\u011c","\u011e","\u0120","\u0122","\u0124","\u0126","\u0128","\u012a","\u012c","\u012e","\u0130","\u0132","\u0134","\u0136","\u0139","\u013b","\u013d","\u013f","\u0141","\u0143","\u0145","\u0147","\u014a","\u014c","\u014e","\u0150","\u0152","\u0154","\u0156","\u0158","\u015a","\u015c","\u015e","\u0160","\u0162","\u0164","\u0166","\u0168","\u016a","\u016c","\u016e","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017b","\u017d",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018b"],["\u018e","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019c","\u019d"],["\u019f","\u01a0"],"\u01a2","\u01a4",["\u01a6","\u01a7"],"\u01a9","\u01ac",["\u01ae","\u01af"],["\u01b1","\u01b3"],"\u01b5",["\u01b7","\u01b8"],"\u01bc","\u01c4","\u01c7","\u01ca","\u01cd","\u01cf","\u01d1","\u01d3","\u01d5","\u01d7","\u01d9","\u01db","\u01de","\u01e0","\u01e2","\u01e4","\u01e6","\u01e8","\u01ea","\u01ec","\u01ee","\u01f1","\u01f4",["\u01f6","\u01f8"],"\u01fa","\u01fc","\u01fe","\u0200","\u0202","\u0204","\u0206","\u0208","\u020a","\u020c","\u020e","\u0210","\u0212","\u0214","\u0216","\u0218","\u021a","\u021c","\u021e","\u0220","\u0222","\u0224","\u0226","\u0228","\u022a","\u022c","\u022e","\u0230","\u0232",["\u023a","\u023b"],["\u023d","\u023e"],"\u0241",["\u0243","\u0246"],"\u0248","\u024a","\u024c","\u024e","\u0370","\u0372","\u0376","\u037f","\u0386",["\u0388","\u038a"],"\u038c",["\u038e","\u038f"],["\u0391","\u03a1"],["\u03a3","\u03ab"],"\u03cf",["\u03d2","\u03d4"],"\u03d8","\u03da","\u03dc","\u03de","\u03e0","\u03e2","\u03e4","\u03e6","\u03e8","\u03ea","\u03ec","\u03ee","\u03f4","\u03f7",["\u03f9","\u03fa"],["\u03fd","\u042f"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046a","\u046c","\u046e","\u0470","\u0472","\u0474","\u0476","\u0478","\u047a","\u047c","\u047e","\u0480","\u048a","\u048c","\u048e","\u0490","\u0492","\u0494","\u0496","\u0498","\u049a","\u049c","\u049e","\u04a0","\u04a2","\u04a4","\u04a6","\u04a8","\u04aa","\u04ac","\u04ae","\u04b0","\u04b2","\u04b4","\u04b6","\u04b8","\u04ba","\u04bc","\u04be",["\u04c0","\u04c1"],"\u04c3","\u04c5","\u04c7","\u04c9","\u04cb","\u04cd","\u04d0","\u04d2","\u04d4","\u04d6","\u04d8","\u04da","\u04dc","\u04de","\u04e0","\u04e2","\u04e4","\u04e6","\u04e8","\u04ea","\u04ec","\u04ee","\u04f0","\u04f2","\u04f4","\u04f6","\u04f8","\u04fa","\u04fc","\u04fe","\u0500","\u0502","\u0504","\u0506","\u0508","\u050a","\u050c","\u050e","\u0510","\u0512","\u0514","\u0516","\u0518","\u051a","\u051c","\u051e","\u0520","\u0522","\u0524","\u0526","\u0528","\u052a","\u052c","\u052e",["\u0531","\u0556"],["\u10a0","\u10c5"],"\u10c7","\u10cd",["\u13a0","\u13f5"],"\u1e00","\u1e02","\u1e04","\u1e06","\u1e08","\u1e0a","\u1e0c","\u1e0e","\u1e10","\u1e12","\u1e14","\u1e16","\u1e18","\u1e1a","\u1e1c","\u1e1e","\u1e20","\u1e22","\u1e24","\u1e26","\u1e28","\u1e2a","\u1e2c","\u1e2e","\u1e30","\u1e32","\u1e34","\u1e36","\u1e38","\u1e3a","\u1e3c","\u1e3e","\u1e40","\u1e42","\u1e44","\u1e46","\u1e48","\u1e4a","\u1e4c","\u1e4e","\u1e50","\u1e52","\u1e54","\u1e56","\u1e58","\u1e5a","\u1e5c","\u1e5e","\u1e60","\u1e62","\u1e64","\u1e66","\u1e68","\u1e6a","\u1e6c","\u1e6e","\u1e70","\u1e72","\u1e74","\u1e76","\u1e78","\u1e7a","\u1e7c","\u1e7e","\u1e80","\u1e82","\u1e84","\u1e86","\u1e88","\u1e8a","\u1e8c","\u1e8e","\u1e90","\u1e92","\u1e94","\u1e9e","\u1ea0","\u1ea2","\u1ea4","\u1ea6","\u1ea8","\u1eaa","\u1eac","\u1eae","\u1eb0","\u1eb2","\u1eb4","\u1eb6","\u1eb8","\u1eba","\u1ebc","\u1ebe","\u1ec0","\u1ec2","\u1ec4","\u1ec6","\u1ec8","\u1eca","\u1ecc","\u1ece","\u1ed0","\u1ed2","\u1ed4","\u1ed6","\u1ed8","\u1eda","\u1edc","\u1ede","\u1ee0","\u1ee2","\u1ee4","\u1ee6","\u1ee8","\u1eea","\u1eec","\u1eee","\u1ef0","\u1ef2","\u1ef4","\u1ef6","\u1ef8","\u1efa","\u1efc","\u1efe",["\u1f08","\u1f0f"],["\u1f18","\u1f1d"],["\u1f28","\u1f2f"],["\u1f38","\u1f3f"],["\u1f48","\u1f4d"],"\u1f59","\u1f5b","\u1f5d","\u1f5f",["\u1f68","\u1f6f"],["\u1fb8","\u1fbb"],["\u1fc8","\u1fcb"],["\u1fd8","\u1fdb"],["\u1fe8","\u1fec"],["\u1ff8","\u1ffb"],"\u2102","\u2107",["\u210b","\u210d"],["\u2110","\u2112"],"\u2115",["\u2119","\u211d"],"\u2124","\u2126","\u2128",["\u212a","\u212d"],["\u2130","\u2133"],["\u213e","\u213f"],"\u2145","\u2183",["\u2c00","\u2c2e"],"\u2c60",["\u2c62","\u2c64"],"\u2c67","\u2c69","\u2c6b",["\u2c6d","\u2c70"],"\u2c72","\u2c75",["\u2c7e","\u2c80"],"\u2c82","\u2c84","\u2c86","\u2c88","\u2c8a","\u2c8c","\u2c8e","\u2c90","\u2c92","\u2c94","\u2c96","\u2c98","\u2c9a","\u2c9c","\u2c9e","\u2ca0","\u2ca2","\u2ca4","\u2ca6","\u2ca8","\u2caa","\u2cac","\u2cae","\u2cb0","\u2cb2","\u2cb4","\u2cb6","\u2cb8","\u2cba","\u2cbc","\u2cbe","\u2cc0","\u2cc2","\u2cc4","\u2cc6","\u2cc8","\u2cca","\u2ccc","\u2cce","\u2cd0","\u2cd2","\u2cd4","\u2cd6","\u2cd8","\u2cda","\u2cdc","\u2cde","\u2ce0","\u2ce2","\u2ceb","\u2ced","\u2cf2","\ua640","\ua642","\ua644","\ua646","\ua648","\ua64a","\ua64c","\ua64e","\ua650","\ua652","\ua654","\ua656","\ua658","\ua65a","\ua65c","\ua65e","\ua660","\ua662","\ua664","\ua666","\ua668","\ua66a","\ua66c","\ua680","\ua682","\ua684","\ua686","\ua688","\ua68a","\ua68c","\ua68e","\ua690","\ua692","\ua694","\ua696","\ua698","\ua69a","\ua722","\ua724","\ua726","\ua728","\ua72a","\ua72c","\ua72e","\ua732","\ua734","\ua736","\ua738","\ua73a","\ua73c","\ua73e","\ua740","\ua742","\ua744","\ua746","\ua748","\ua74a","\ua74c","\ua74e","\ua750","\ua752","\ua754","\ua756","\ua758","\ua75a","\ua75c","\ua75e","\ua760","\ua762","\ua764","\ua766","\ua768","\ua76a","\ua76c","\ua76e","\ua779","\ua77b",["\ua77d","\ua77e"],"\ua780","\ua782","\ua784","\ua786","\ua78b","\ua78d","\ua790","\ua792","\ua796","\ua798","\ua79a","\ua79c","\ua79e","\ua7a0","\ua7a2","\ua7a4","\ua7a6","\ua7a8",["\ua7aa","\ua7ad"],["\ua7b0","\ua7b4"],"\ua7b6",["\uff21","\uff3a"]],!1,!1),De=Je(["\u0903","\u093b",["\u093e","\u0940"],["\u0949","\u094c"],["\u094e","\u094f"],["\u0982","\u0983"],["\u09be","\u09c0"],["\u09c7","\u09c8"],["\u09cb","\u09cc"],"\u09d7","\u0a03",["\u0a3e","\u0a40"],"\u0a83",["\u0abe","\u0ac0"],"\u0ac9",["\u0acb","\u0acc"],["\u0b02","\u0b03"],"\u0b3e","\u0b40",["\u0b47","\u0b48"],["\u0b4b","\u0b4c"],"\u0b57",["\u0bbe","\u0bbf"],["\u0bc1","\u0bc2"],["\u0bc6","\u0bc8"],["\u0bca","\u0bcc"],"\u0bd7",["\u0c01","\u0c03"],["\u0c41","\u0c44"],["\u0c82","\u0c83"],"\u0cbe",["\u0cc0","\u0cc4"],["\u0cc7","\u0cc8"],["\u0cca","\u0ccb"],["\u0cd5","\u0cd6"],["\u0d02","\u0d03"],["\u0d3e","\u0d40"],["\u0d46","\u0d48"],["\u0d4a","\u0d4c"],"\u0d57",["\u0d82","\u0d83"],["\u0dcf","\u0dd1"],["\u0dd8","\u0ddf"],["\u0df2","\u0df3"],["\u0f3e","\u0f3f"],"\u0f7f",["\u102b","\u102c"],"\u1031","\u1038",["\u103b","\u103c"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106d"],["\u1083","\u1084"],["\u1087","\u108c"],"\u108f",["\u109a","\u109c"],"\u17b6",["\u17be","\u17c5"],["\u17c7","\u17c8"],["\u1923","\u1926"],["\u1929","\u192b"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1a19","\u1a1a"],"\u1a55","\u1a57","\u1a61",["\u1a63","\u1a64"],["\u1a6d","\u1a72"],"\u1b04","\u1b35","\u1b3b",["\u1b3d","\u1b41"],["\u1b43","\u1b44"],"\u1b82","\u1ba1",["\u1ba6","\u1ba7"],"\u1baa","\u1be7",["\u1bea","\u1bec"],"\u1bee",["\u1bf2","\u1bf3"],["\u1c24","\u1c2b"],["\u1c34","\u1c35"],"\u1ce1",["\u1cf2","\u1cf3"],["\u302e","\u302f"],["\ua823","\ua824"],"\ua827",["\ua880","\ua881"],["\ua8b4","\ua8c3"],["\ua952","\ua953"],"\ua983",["\ua9b4","\ua9b5"],["\ua9ba","\ua9bb"],["\ua9bd","\ua9c0"],["\uaa2f","\uaa30"],["\uaa33","\uaa34"],"\uaa4d","\uaa7b","\uaa7d","\uaaeb",["\uaaee","\uaaef"],"\uaaf5",["\uabe3","\uabe4"],["\uabe6","\uabe7"],["\uabe9","\uabea"],"\uabec"],!1,!1),Be=Je([["\u0300","\u036f"],["\u0483","\u0487"],["\u0591","\u05bd"],"\u05bf",["\u05c1","\u05c2"],["\u05c4","\u05c5"],"\u05c7",["\u0610","\u061a"],["\u064b","\u065f"],"\u0670",["\u06d6","\u06dc"],["\u06df","\u06e4"],["\u06e7","\u06e8"],["\u06ea","\u06ed"],"\u0711",["\u0730","\u074a"],["\u07a6","\u07b0"],["\u07eb","\u07f3"],["\u0816","\u0819"],["\u081b","\u0823"],["\u0825","\u0827"],["\u0829","\u082d"],["\u0859","\u085b"],["\u08e3","\u0902"],"\u093a","\u093c",["\u0941","\u0948"],"\u094d",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09bc",["\u09c1","\u09c4"],"\u09cd",["\u09e2","\u09e3"],["\u0a01","\u0a02"],"\u0a3c",["\u0a41","\u0a42"],["\u0a47","\u0a48"],["\u0a4b","\u0a4d"],"\u0a51",["\u0a70","\u0a71"],"\u0a75",["\u0a81","\u0a82"],"\u0abc",["\u0ac1","\u0ac5"],["\u0ac7","\u0ac8"],"\u0acd",["\u0ae2","\u0ae3"],"\u0b01","\u0b3c","\u0b3f",["\u0b41","\u0b44"],"\u0b4d","\u0b56",["\u0b62","\u0b63"],"\u0b82","\u0bc0","\u0bcd","\u0c00",["\u0c3e","\u0c40"],["\u0c46","\u0c48"],["\u0c4a","\u0c4d"],["\u0c55","\u0c56"],["\u0c62","\u0c63"],"\u0c81","\u0cbc","\u0cbf","\u0cc6",["\u0ccc","\u0ccd"],["\u0ce2","\u0ce3"],"\u0d01",["\u0d41","\u0d44"],"\u0d4d",["\u0d62","\u0d63"],"\u0dca",["\u0dd2","\u0dd4"],"\u0dd6","\u0e31",["\u0e34","\u0e3a"],["\u0e47","\u0e4e"],"\u0eb1",["\u0eb4","\u0eb9"],["\u0ebb","\u0ebc"],["\u0ec8","\u0ecd"],["\u0f18","\u0f19"],"\u0f35","\u0f37","\u0f39",["\u0f71","\u0f7e"],["\u0f80","\u0f84"],["\u0f86","\u0f87"],["\u0f8d","\u0f97"],["\u0f99","\u0fbc"],"\u0fc6",["\u102d","\u1030"],["\u1032","\u1037"],["\u1039","\u103a"],["\u103d","\u103e"],["\u1058","\u1059"],["\u105e","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108d","\u109d",["\u135d","\u135f"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17b4","\u17b5"],["\u17b7","\u17bd"],"\u17c6",["\u17c9","\u17d3"],"\u17dd",["\u180b","\u180d"],"\u18a9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193b"],["\u1a17","\u1a18"],"\u1a1b","\u1a56",["\u1a58","\u1a5e"],"\u1a60","\u1a62",["\u1a65","\u1a6c"],["\u1a73","\u1a7c"],"\u1a7f",["\u1ab0","\u1abd"],["\u1b00","\u1b03"],"\u1b34",["\u1b36","\u1b3a"],"\u1b3c","\u1b42",["\u1b6b","\u1b73"],["\u1b80","\u1b81"],["\u1ba2","\u1ba5"],["\u1ba8","\u1ba9"],["\u1bab","\u1bad"],"\u1be6",["\u1be8","\u1be9"],"\u1bed",["\u1bef","\u1bf1"],["\u1c2c","\u1c33"],["\u1c36","\u1c37"],["\u1cd0","\u1cd2"],["\u1cd4","\u1ce0"],["\u1ce2","\u1ce8"],"\u1ced","\u1cf4",["\u1cf8","\u1cf9"],["\u1dc0","\u1df5"],["\u1dfc","\u1dff"],["\u20d0","\u20dc"],"\u20e1",["\u20e5","\u20f0"],["\u2cef","\u2cf1"],"\u2d7f",["\u2de0","\u2dff"],["\u302a","\u302d"],["\u3099","\u309a"],"\ua66f",["\ua674","\ua67d"],["\ua69e","\ua69f"],["\ua6f0","\ua6f1"],"\ua802","\ua806","\ua80b",["\ua825","\ua826"],"\ua8c4",["\ua8e0","\ua8f1"],["\ua926","\ua92d"],["\ua947","\ua951"],["\ua980","\ua982"],"\ua9b3",["\ua9b6","\ua9b9"],"\ua9bc","\ua9e5",["\uaa29","\uaa2e"],["\uaa31","\uaa32"],["\uaa35","\uaa36"],"\uaa43","\uaa4c","\uaa7c","\uaab0",["\uaab2","\uaab4"],["\uaab7","\uaab8"],["\uaabe","\uaabf"],"\uaac1",["\uaaec","\uaaed"],"\uaaf6","\uabe5","\uabe8","\uabed","\ufb1e",["\ufe00","\ufe0f"],["\ufe20","\ufe2f"]],!1,!1),je=Je([["0","9"],["\u0660","\u0669"],["\u06f0","\u06f9"],["\u07c0","\u07c9"],["\u0966","\u096f"],["\u09e6","\u09ef"],["\u0a66","\u0a6f"],["\u0ae6","\u0aef"],["\u0b66","\u0b6f"],["\u0be6","\u0bef"],["\u0c66","\u0c6f"],["\u0ce6","\u0cef"],["\u0d66","\u0d6f"],["\u0de6","\u0def"],["\u0e50","\u0e59"],["\u0ed0","\u0ed9"],["\u0f20","\u0f29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17e0","\u17e9"],["\u1810","\u1819"],["\u1946","\u194f"],["\u19d0","\u19d9"],["\u1a80","\u1a89"],["\u1a90","\u1a99"],["\u1b50","\u1b59"],["\u1bb0","\u1bb9"],["\u1c40","\u1c49"],["\u1c50","\u1c59"],["\ua620","\ua629"],["\ua8d0","\ua8d9"],["\ua900","\ua909"],["\ua9d0","\ua9d9"],["\ua9f0","\ua9f9"],["\uaa50","\uaa59"],["\uabf0","\uabf9"],["\uff10","\uff19"]],!1,!1),Ne=Je([["\u16ee","\u16f0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303a"],["\ua6e6","\ua6ef"]],!1,!1),Le=Je(["_",["\u203f","\u2040"],"\u2054",["\ufe33","\ufe34"],["\ufe4d","\ufe4f"],"\uff3f"],!1,!1),Ue=Je([" ","\xa0","\u1680",["\u2000","\u200a"],"\u202f","\u205f","\u3000"],!1,!1),He=Xe(";",!1),Me=0,qe=0,Ve=[{line:1,column:1}],Ke=0,Ge=[],ze=0;if("startRule"in t){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=s[t.startRule]}function Ye(){return et(qe,Me)}function We(e,t){throw function(e,t){return new peg$SyntaxError(e,null,null,t)}(e,t=void 0!==t?t:et(qe,Me))}function Xe(e,t){return{type:"literal",text:e,ignoreCase:t}}function Je(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Ze(e){return{type:"other",description:e}}function Qe(t){var r,n=Ve[t];if(n)return n;for(r=t-1;!Ve[r];)r--;for(n={line:(n=Ve[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Ve[t]=n,n}function et(e,t){var r=Qe(e),n=Qe(t);return{source:o,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function tt(e){Me<Ke||(Me>Ke&&(Ke=Me,Ge=[]),Ge.push(e))}function rt(){var t,r,o,s,i,a;if(t=Me,Ot(),r=Me,(o=function(){var t,r,o,s;return t=Me,123===e.charCodeAt(Me)?(r="{",Me++):(r=n,0===ze&&tt(E)),r!==n&&(o=$t())!==n?(125===e.charCodeAt(Me)?(s="}",Me++):(s=n,0===ze&&tt(x)),s!==n&&Tt()!==n?(qe=t,t=function(e){return{type:"top_level_initializer",code:e[0],codeLocation:e[1],location:Ye()}}(o)):(Me=t,t=n)):(Me=t,t=n),t}())!==n?(s=Ot(),r=o):(Me=r,r=n),r===n&&(r=null),o=Me,(s=function(){var e,t;return e=Me,(t=$t())!==n&&Tt()!==n?(qe=e,e=function(e){return{type:"initializer",code:e[0],codeLocation:e[1],location:Ye()}}(t)):(Me=e,e=n),e}())!==n?(i=Ot(),o=s):(Me=o,o=n),o===n&&(o=null),s=[],i=Me,(a=nt())!==n?(Ot(),i=a):(Me=i,i=n),i!==n)for(;i!==n;)s.push(i),i=Me,(a=nt())!==n?(Ot(),i=a):(Me=i,i=n);else s=n;return s!==n?(qe=t,t={type:"grammar",topLevelInitializer:r,initializer:o,rules:s,location:Ye()}):(Me=t,t=n),t}function nt(){var t,r,o,s,i;return t=Me,(r=vt())!==n?(Ot(),o=Me,(s=wt())!==n?(Ot(),o=s):(Me=o,o=n),o===n&&(o=null),61===e.charCodeAt(Me)?(s="=",Me++):(s=n,0===ze&&tt(A)),s!==n?(Ot(),(i=ot())!==n&&Tt()!==n?(qe=t,t=function(e,t,r){return{type:"rule",name:e[0],nameLocation:e[1],expression:null!==t?{type:"named",name:t,expression:r,location:Ye()}:r,location:Ye()}}(r,o,i)):(Me=t,t=n)):(Me=t,t=n)):(Me=t,t=n),t}function ot(){var t,r,o,s,i,a,u,c;if(t=Me,(r=st())!==n){for(o=[],s=Me,Ot(),47===e.charCodeAt(Me)?(i="/",Me++):(i=n,0===ze&&tt(S)),i!==n?(Ot(),(a=st())!==n?s=a:(Me=s,s=n)):(Me=s,s=n);s!==n;)o.push(s),s=Me,Ot(),47===e.charCodeAt(Me)?(i="/",Me++):(i=n,0===ze&&tt(S)),i!==n?(Ot(),(a=st())!==n?s=a:(Me=s,s=n)):(Me=s,s=n);qe=t,u=r,t=(c=o).length>0?{type:"choice",alternatives:[u].concat(c),location:Ye()}:u}else Me=t,t=n;return t}function st(){var e,t,r,o;return e=Me,(t=function(){var e,t,r,o,s,i,a;if(e=Me,(t=it())!==n){for(r=[],o=Me,Ot(),(s=it())!==n?o=s:(Me=o,o=n);o!==n;)r.push(o),o=Me,Ot(),(s=it())!==n?o=s:(Me=o,o=n);qe=e,i=t,e=(a=r).length>0||"labeled"===i.type&&i.pick?{type:"sequence",elements:[i].concat(a),location:Ye()}:i}else Me=e,e=n;return e}())!==n?(r=Me,Ot(),(o=$t())!==n?r=o:(Me=r,r=n),r===n&&(r=null),qe=e,e=function(e,t){return null!==t?{type:"action",expression:e,code:t[0],codeLocation:t[1],location:Ye()}:e}(t,r)):(Me=e,e=n),e}function it(){var t,r,o,s,i,a,u;return t=Me,(r=function(){var t,r;return t=Me,64===e.charCodeAt(Me)?(r="@",Me++):(r=n,0===ze&&tt(C)),r!==n&&(qe=t,r=Ye()),r}())!==n?((o=at())===n&&(o=null),(s=ut())!==n?(qe=t,i=r,a=o,(u=s).type.startsWith("semantic_")&&We('"@" cannot be used on a semantic predicate',i),t={type:"labeled",label:null!==a?a[0]:null,labelLocation:null!==a?a[1]:i,pick:!0,expression:u,location:Ye()}):(Me=t,t=n)):(Me=t,t=n),t===n&&(t=Me,(r=at())!==n?(o=Ot(),(s=ut())!==n?(qe=t,t=function(e,t){return{type:"labeled",label:e[0],labelLocation:e[1],expression:t,location:Ye()}}(r,s)):(Me=t,t=n)):(Me=t,t=n),t===n&&(t=ut())),t}function at(){var t,r,o,s;return t=Me,(r=vt())!==n?(Ot(),58===e.charCodeAt(Me)?(o=":",Me++):(o=n,0===ze&&tt(P)),o!==n?(qe=t,s=r,Dt.indexOf(s[0])>=0&&We(`Label can't be a reserved word "${s[0]}"`,s[1]),t=s):(Me=t,t=n)):(Me=t,t=n),t}function ut(){var t,r,o,s;return t=Me,(r=function(){var t;return 36===e.charCodeAt(Me)?(t="$",Me++):(t=n,0===ze&&tt(I)),t===n&&(38===e.charCodeAt(Me)?(t="&",Me++):(t=n,0===ze&&tt(F)),t===n&&(33===e.charCodeAt(Me)?(t="!",Me++):(t=n,0===ze&&tt(k)))),t}())!==n?(Ot(),(o=ct())!==n?(qe=t,s=o,t={type:OPS_TO_PREFIXED_TYPES[r],expression:s,location:Ye()}):(Me=t,t=n)):(Me=t,t=n),t===n&&(t=ct()),t}function ct(){var t,r,o,s;return t=Me,(r=lt())!==n?(Ot(),(o=function(){var t;return 63===e.charCodeAt(Me)?(t="?",Me++):(t=n,0===ze&&tt(R)),t===n&&(42===e.charCodeAt(Me)?(t="*",Me++):(t=n,0===ze&&tt($)),t===n&&(43===e.charCodeAt(Me)?(t="+",Me++):(t=n,0===ze&&tt(O)))),t}())!==n?(qe=t,s=r,t={type:OPS_TO_SUFFIXED_TYPES[o],expression:s,location:Ye()}):(Me=t,t=n)):(Me=t,t=n),t===n&&(t=lt()),t}function lt(){var t,r,o,s,i;return(t=function(){var t,r,o;return ze++,t=Me,(r=wt())!==n?(105===e.charCodeAt(Me)?(o="i",Me++):(o=n,0===ze&&tt(ae)),o===n&&(o=null),qe=t,t={type:"literal",value:r,ignoreCase:null!==o,location:Ye()}):(Me=t,t=n),ze--,t===n&&(r=n,0===ze&&tt(ie)),t}())===n&&(t=function(){var t,r,o,s,i,a,u,c;if(ze++,t=Me,91===e.charCodeAt(Me)?(r="[",Me++):(r=n,0===ze&&tt(fe)),r!==n){for(94===e.charCodeAt(Me)?(o="^",Me++):(o=n,0===ze&&tt(he)),o===n&&(o=null),s=[],(i=At())===n&&(i=St());i!==n;)s.push(i),(i=At())===n&&(i=St());93===e.charCodeAt(Me)?(i="]",Me++):(i=n,0===ze&&tt(de)),i!==n?(105===e.charCodeAt(Me)?(a="i",Me++):(a=n,0===ze&&tt(ae)),a===n&&(a=null),qe=t,u=o,c=a,t={type:"class",parts:s.filter(e=>""!==e),inverted:null!==u,ignoreCase:null!==c,location:Ye()}):(Me=t,t=n)}else Me=t,t=n;return ze--,t===n&&(r=n,0===ze&&tt(pe)),t}())===n&&(t=function(){var t,r;return t=Me,46===e.charCodeAt(Me)?(r=".",Me++):(r=n,0===ze&&tt(Pe)),r!==n&&(qe=t,r={type:"any",location:Ye()}),r}())===n&&(t=function(){var t,r,o,s,i,a,u;return t=Me,(r=vt())!==n?(o=Me,ze++,s=Me,i=Ot(),a=Me,(u=wt())!==n?a=u=[u,Ot()]:(Me=a,a=n),a===n&&(a=null),61===e.charCodeAt(Me)?(u="=",Me++):(u=n,0===ze&&tt(A)),u!==n?s=i=[i,a,u]:(Me=s,s=n),ze--,s===n?o=void 0:(Me=o,o=n),o!==n?(qe=t,t=function(e){return{type:"rule_ref",name:e[0],location:Ye()}}(r)):(Me=t,t=n)):(Me=t,t=n),t}())===n&&(t=function(){var t,r,o;return t=Me,(r=function(){var t;return 38===e.charCodeAt(Me)?(t="&",Me++):(t=n,0===ze&&tt(F)),t===n&&(33===e.charCodeAt(Me)?(t="!",Me++):(t=n,0===ze&&tt(k))),t}())!==n?(Ot(),(o=$t())!==n?(qe=t,t=function(e,t){return{type:OPS_TO_SEMANTIC_PREDICATE_TYPES[e],code:t[0],codeLocation:t[1],location:Ye()}}(r,o)):(Me=t,t=n)):(Me=t,t=n),t}())===n&&(t=Me,40===e.charCodeAt(Me)?(r="(",Me++):(r=n,0===ze&&tt(T)),r!==n?(Ot(),(o=ot())!==n?(Ot(),41===e.charCodeAt(Me)?(s=")",Me++):(s=n,0===ze&&tt(D)),s!==n?(qe=t,t="labeled"===(i=o).type||"sequence"===i.type?{type:"group",expression:i,location:Ye()}:i):(Me=t,t=n)):(Me=t,t=n)):(Me=t,t=n)),t}function pt(){var t;return e.length>Me?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(B)),t}function ft(){var t;return ze++,9===e.charCodeAt(Me)?(t="\t",Me++):(t=n,0===ze&&tt(N)),t===n&&(11===e.charCodeAt(Me)?(t="\v",Me++):(t=n,0===ze&&tt(L)),t===n&&(12===e.charCodeAt(Me)?(t="\f",Me++):(t=n,0===ze&&tt(U)),t===n&&(32===e.charCodeAt(Me)?(t=" ",Me++):(t=n,0===ze&&tt(H)),t===n&&(160===e.charCodeAt(Me)?(t="\xa0",Me++):(t=n,0===ze&&tt(M)),t===n&&(65279===e.charCodeAt(Me)?(t="\ufeff",Me++):(t=n,0===ze&&tt(q)),t===n&&(t=function(){var t;return w.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Ue)),t}())))))),ze--,t===n&&0===ze&&tt(j),t}function ht(){var t;return a.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(V)),t}function dt(){var t;return ze++,10===e.charCodeAt(Me)?(t="\n",Me++):(t=n,0===ze&&tt(G)),t===n&&("\r\n"===e.substr(Me,2)?(t="\r\n",Me+=2):(t=n,0===ze&&tt(z)),t===n&&(13===e.charCodeAt(Me)?(t="\r",Me++):(t=n,0===ze&&tt(Y)),t===n&&(8232===e.charCodeAt(Me)?(t="\u2028",Me++):(t=n,0===ze&&tt(W)),t===n&&(8233===e.charCodeAt(Me)?(t="\u2029",Me++):(t=n,0===ze&&tt(X)))))),ze--,t===n&&0===ze&&tt(K),t}function _t(){var t;return ze++,(t=function(){var t,r,o,s,i,a;if(t=Me,"/*"===e.substr(Me,2)?(r="/*",Me+=2):(r=n,0===ze&&tt(Z)),r!==n){for(o=[],s=Me,i=Me,ze++,"*/"===e.substr(Me,2)?(a="*/",Me+=2):(a=n,0===ze&&tt(Q)),ze--,a===n?i=void 0:(Me=i,i=n),i!==n&&(a=pt())!==n?s=i=[i,a]:(Me=s,s=n);s!==n;)o.push(s),s=Me,i=Me,ze++,"*/"===e.substr(Me,2)?(a="*/",Me+=2):(a=n,0===ze&&tt(Q)),ze--,a===n?i=void 0:(Me=i,i=n),i!==n&&(a=pt())!==n?s=i=[i,a]:(Me=s,s=n);"*/"===e.substr(Me,2)?(s="*/",Me+=2):(s=n,0===ze&&tt(Q)),s!==n?t=r=[r,o,s]:(Me=t,t=n)}else Me=t,t=n;return t}())===n&&(t=yt()),ze--,t===n&&0===ze&&tt(J),t}function gt(){var t,r,o,s,i,a;if(t=Me,"/*"===e.substr(Me,2)?(r="/*",Me+=2):(r=n,0===ze&&tt(Z)),r!==n){for(o=[],s=Me,i=Me,ze++,"*/"===e.substr(Me,2)?(a="*/",Me+=2):(a=n,0===ze&&tt(Q)),a===n&&(a=ht()),ze--,a===n?i=void 0:(Me=i,i=n),i!==n&&(a=pt())!==n?s=i=[i,a]:(Me=s,s=n);s!==n;)o.push(s),s=Me,i=Me,ze++,"*/"===e.substr(Me,2)?(a="*/",Me+=2):(a=n,0===ze&&tt(Q)),a===n&&(a=ht()),ze--,a===n?i=void 0:(Me=i,i=n),i!==n&&(a=pt())!==n?s=i=[i,a]:(Me=s,s=n);"*/"===e.substr(Me,2)?(s="*/",Me+=2):(s=n,0===ze&&tt(Q)),s!==n?t=r=[r,o,s]:(Me=t,t=n)}else Me=t,t=n;return t}function yt(){var t,r,o,s,i,a;if(t=Me,"//"===e.substr(Me,2)?(r="//",Me+=2):(r=n,0===ze&&tt(ee)),r!==n){for(o=[],s=Me,i=Me,ze++,a=ht(),ze--,a===n?i=void 0:(Me=i,i=n),i!==n&&(a=pt())!==n?s=i=[i,a]:(Me=s,s=n);s!==n;)o.push(s),s=Me,i=Me,ze++,a=ht(),ze--,a===n?i=void 0:(Me=i,i=n),i!==n&&(a=pt())!==n?s=i=[i,a]:(Me=s,s=n);t=r=[r,o]}else Me=t,t=n;return t}function vt(){var e,t,r,o;if(ze++,e=Me,(t=mt())!==n){for(r=[],o=bt();o!==n;)r.push(o),o=bt();qe=e,e=[t+r.join(""),Ye()]}else Me=e,e=n;return ze--,e===n&&(t=n,0===ze&&tt(te)),e}function mt(){var t,r,o;return(t=function(){var t;return(t=function(){var t;return _.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Te)),t}())===n&&(t=function(){var t;return p.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(ke)),t}())===n&&(t=function(){var t;return d.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Oe)),t}())===n&&(t=function(){var t;return f.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Re)),t}())===n&&(t=function(){var t;return h.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt($e)),t}())===n&&(t=function(){var t;return m.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Ne)),t}()),t}())===n&&(36===e.charCodeAt(Me)?(t="$",Me++):(t=n,0===ze&&tt(I)),t===n&&(95===e.charCodeAt(Me)?(t="_",Me++):(t=n,0===ze&&tt(re)),t===n&&(t=Me,92===e.charCodeAt(Me)?(r="\\",Me++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Ft())!==n?t=o:(Me=t,t=n)))),t}function bt(){var t;return(t=mt())===n&&(t=function(){var t;return(t=function(){var t;return y.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Be)),t}())===n&&(t=function(){var t;return g.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(De)),t}()),t}())===n&&(t=function(){var t;return v.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(je)),t}())===n&&(t=function(){var t;return b.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Le)),t}())===n&&(8204===e.charCodeAt(Me)?(t="\u200c",Me++):(t=n,0===ze&&tt(oe)),t===n&&(8205===e.charCodeAt(Me)?(t="\u200d",Me++):(t=n,0===ze&&tt(se)))),t}function wt(){var t,r,o,s;if(ze++,t=Me,34===e.charCodeAt(Me)?(r='"',Me++):(r=n,0===ze&&tt(ce)),r!==n){for(o=[],s=Et();s!==n;)o.push(s),s=Et();34===e.charCodeAt(Me)?(s='"',Me++):(s=n,0===ze&&tt(ce)),s!==n?(qe=t,t=o.join("")):(Me=t,t=n)}else Me=t,t=n;if(t===n)if(t=Me,39===e.charCodeAt(Me)?(r="'",Me++):(r=n,0===ze&&tt(le)),r!==n){for(o=[],s=xt();s!==n;)o.push(s),s=xt();39===e.charCodeAt(Me)?(s="'",Me++):(s=n,0===ze&&tt(le)),s!==n?(qe=t,t=function(e){return e.join("")}(o)):(Me=t,t=n)}else Me=t,t=n;return ze--,t===n&&(r=n,0===ze&&tt(ue)),t}function Et(){var t,r,o,s;return t=Me,r=Me,o=Me,ze++,34===e.charCodeAt(Me)?(s='"',Me++):(s=n,0===ze&&tt(ce)),s===n&&(92===e.charCodeAt(Me)?(s="\\",Me++):(s=n,0===ze&&tt(ne)),s===n&&(s=ht())),ze--,s===n?o=void 0:(Me=o,o=n),o!==n&&(s=pt())!==n?r=o=[o,s]:(Me=r,r=n),(t=r!==n?e.substring(t,Me):r)===n&&(t=Me,92===e.charCodeAt(Me)?(r="\\",Me++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Pt())!==n?t=o:(Me=t,t=n),t===n&&(t=Ct())),t}function xt(){var t,r,o,s;return t=Me,r=Me,o=Me,ze++,39===e.charCodeAt(Me)?(s="'",Me++):(s=n,0===ze&&tt(le)),s===n&&(92===e.charCodeAt(Me)?(s="\\",Me++):(s=n,0===ze&&tt(ne)),s===n&&(s=ht())),ze--,s===n?o=void 0:(Me=o,o=n),o!==n&&(s=pt())!==n?r=o=[o,s]:(Me=r,r=n),(t=r!==n?e.substring(t,Me):r)===n&&(t=Me,92===e.charCodeAt(Me)?(r="\\",Me++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Pt())!==n?t=o:(Me=t,t=n),t===n&&(t=Ct())),t}function At(){var t,r,o,s,i,a;return t=Me,(r=St())!==n?(45===e.charCodeAt(Me)?(o="-",Me++):(o=n,0===ze&&tt(_e)),o!==n&&(s=St())!==n?(qe=t,a=s,(i=r).charCodeAt(0)>a.charCodeAt(0)&&We("Invalid character range: "+e.substring(qe,Me)+"."),t=[i,a]):(Me=t,t=n)):(Me=t,t=n),t}function St(){var t,r,o,s;return t=Me,r=Me,o=Me,ze++,93===e.charCodeAt(Me)?(s="]",Me++):(s=n,0===ze&&tt(de)),s===n&&(92===e.charCodeAt(Me)?(s="\\",Me++):(s=n,0===ze&&tt(ne)),s===n&&(s=ht())),ze--,s===n?o=void 0:(Me=o,o=n),o!==n&&(s=pt())!==n?r=o=[o,s]:(Me=r,r=n),(t=r!==n?e.substring(t,Me):r)===n&&(t=Me,92===e.charCodeAt(Me)?(r="\\",Me++):(r=n,0===ze&&tt(ne)),r!==n&&(o=Pt())!==n?t=o:(Me=t,t=n),t===n&&(t=Ct())),t}function Ct(){var t,r;return t=Me,92===e.charCodeAt(Me)?(r="\\",Me++):(r=n,0===ze&&tt(ne)),r!==n&&dt()!==n?(qe=t,t=""):(Me=t,t=n),t}function Pt(){var t,r,o,s;return(t=function(){var t;return(t=It())===n&&(t=function(){var t,r,o,s;return t=Me,r=Me,o=Me,ze++,(s=function(){var t;return(t=It())===n&&(t=kt())===n&&(120===e.charCodeAt(Me)?(t="x",Me++):(t=n,0===ze&&tt(xe)),t===n&&(117===e.charCodeAt(Me)?(t="u",Me++):(t=n,0===ze&&tt(Ae)))),t}())===n&&(s=ht()),ze--,s===n?o=void 0:(Me=o,o=n),o!==n&&(s=pt())!==n?r=o=[o,s]:(Me=r,r=n),r!==n?e.substring(t,Me):r}()),t}())===n&&(t=Me,48===e.charCodeAt(Me)?(r="0",Me++):(r=n,0===ze&&tt(ge)),r!==n?(o=Me,ze++,s=kt(),ze--,s===n?o=void 0:(Me=o,o=n),o!==n?(qe=t,t="\0"):(Me=t,t=n)):(Me=t,t=n),t===n&&(t=function(){var t,r,o,s,i,a,u;return t=Me,120===e.charCodeAt(Me)?(r="x",Me++):(r=n,0===ze&&tt(xe)),r!==n?(o=Me,s=Me,(i=Rt())!==n&&(a=Rt())!==n?s=i=[i,a]:(Me=s,s=n),(o=s!==n?e.substring(o,Me):s)!==n?(qe=t,u=o,t=String.fromCharCode(parseInt(u,16))):(Me=t,t=n)):(Me=t,t=n),t}())===n&&(t=Ft())),t}function It(){var t,r;return 39===e.charCodeAt(Me)?(t="'",Me++):(t=n,0===ze&&tt(le)),t===n&&(34===e.charCodeAt(Me)?(t='"',Me++):(t=n,0===ze&&tt(ce)),t===n&&(92===e.charCodeAt(Me)?(t="\\",Me++):(t=n,0===ze&&tt(ne)),t===n&&(t=Me,98===e.charCodeAt(Me)?(r="b",Me++):(r=n,0===ze&&tt(ye)),r!==n&&(qe=t,r="\b"),(t=r)===n&&(t=Me,102===e.charCodeAt(Me)?(r="f",Me++):(r=n,0===ze&&tt(ve)),r!==n&&(qe=t,r="\f"),(t=r)===n&&(t=Me,110===e.charCodeAt(Me)?(r="n",Me++):(r=n,0===ze&&tt(me)),r!==n&&(qe=t,r="\n"),(t=r)===n&&(t=Me,114===e.charCodeAt(Me)?(r="r",Me++):(r=n,0===ze&&tt(be)),r!==n&&(qe=t,r="\r"),(t=r)===n&&(t=Me,116===e.charCodeAt(Me)?(r="t",Me++):(r=n,0===ze&&tt(we)),r!==n&&(qe=t,r="\t"),(t=r)===n&&(t=Me,118===e.charCodeAt(Me)?(r="v",Me++):(r=n,0===ze&&tt(Ee)),r!==n&&(qe=t,r="\v"),t=r)))))))),t}function Ft(){var t,r,o,s,i,a,u,c,l;return t=Me,117===e.charCodeAt(Me)?(r="u",Me++):(r=n,0===ze&&tt(Ae)),r!==n?(o=Me,s=Me,(i=Rt())!==n&&(a=Rt())!==n&&(u=Rt())!==n&&(c=Rt())!==n?s=i=[i,a,u,c]:(Me=s,s=n),(o=s!==n?e.substring(o,Me):s)!==n?(qe=t,l=o,t=String.fromCharCode(parseInt(l,16))):(Me=t,t=n)):(Me=t,t=n),t}function kt(){var t;return u.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Se)),t}function Rt(){var t;return c.test(e.charAt(Me))?(t=e.charAt(Me),Me++):(t=n,0===ze&&tt(Ce)),t}function $t(){var t,r,o,s;return ze++,t=Me,123===e.charCodeAt(Me)?(r="{",Me++):(r=n,0===ze&&tt(E)),r!==n?(o=function(){var t,r;return t=Me,r=function t(){var r,o,s,i,a,u;if(r=Me,o=[],s=[],i=Me,a=Me,ze++,l.test(e.charAt(Me))?(u=e.charAt(Me),Me++):(u=n,0===ze&&tt(Fe)),ze--,u===n?a=void 0:(Me=a,a=n),a!==n&&(u=pt())!==n?i=a=[a,u]:(Me=i,i=n),i!==n)for(;i!==n;)s.push(i),i=Me,a=Me,ze++,l.test(e.charAt(Me))?(u=e.charAt(Me),Me++):(u=n,0===ze&&tt(Fe)),ze--,u===n?a=void 0:(Me=a,a=n),a!==n&&(u=pt())!==n?i=a=[a,u]:(Me=i,i=n);else s=n;for(s===n&&(s=Me,123===e.charCodeAt(Me)?(i="{",Me++):(i=n,0===ze&&tt(E)),i!==n?(a=t(),125===e.charCodeAt(Me)?(u="}",Me++):(u=n,0===ze&&tt(x)),u!==n?s=i=[i,a,u]:(Me=s,s=n)):(Me=s,s=n));s!==n;){if(o.push(s),s=[],i=Me,a=Me,ze++,l.test(e.charAt(Me))?(u=e.charAt(Me),Me++):(u=n,0===ze&&tt(Fe)),ze--,u===n?a=void 0:(Me=a,a=n),a!==n&&(u=pt())!==n?i=a=[a,u]:(Me=i,i=n),i!==n)for(;i!==n;)s.push(i),i=Me,a=Me,ze++,l.test(e.charAt(Me))?(u=e.charAt(Me),Me++):(u=n,0===ze&&tt(Fe)),ze--,u===n?a=void 0:(Me=a,a=n),a!==n&&(u=pt())!==n?i=a=[a,u]:(Me=i,i=n);else s=n;s===n&&(s=Me,123===e.charCodeAt(Me)?(i="{",Me++):(i=n,0===ze&&tt(E)),i!==n?(a=t(),125===e.charCodeAt(Me)?(u="}",Me++):(u=n,0===ze&&tt(x)),u!==n?s=i=[i,a,u]:(Me=s,s=n)):(Me=s,s=n))}return e.substring(r,Me)}(),qe=t,r=function(e){return[e,Ye()]}(r)}(),125===e.charCodeAt(Me)?(s="}",Me++):(s=n,0===ze&&tt(x)),s!==n?t=o:(Me=t,t=n)):(Me=t,t=n),ze--,t===n&&(r=n,0===ze&&tt(Ie)),t}function Ot(){var e,t;for(e=[],(t=ft())===n&&(t=dt())===n&&(t=_t());t!==n;)e.push(t),(t=ft())===n&&(t=dt())===n&&(t=_t());return e}function Tt(){var t,r,o,s;return t=Me,r=Ot(),59===e.charCodeAt(Me)?(o=";",Me++):(o=n,0===ze&&tt(He)),o!==n?t=r=[r,o]:(Me=t,t=n),t===n&&(t=Me,r=function(){var e,t;for(e=[],(t=ft())===n&&(t=gt());t!==n;)e.push(t),(t=ft())===n&&(t=gt());return e}(),(o=yt())===n&&(o=null),(s=dt())!==n?t=r=[r,o,s]:(Me=t,t=n),t===n&&(t=Me,r=Ot(),(o=function(){var t,r;return t=Me,ze++,e.length>Me?(r=e.charAt(Me),Me++):(r=n,0===ze&&tt(B)),ze--,r===n?t=void 0:(Me=t,t=n),t}())!==n?t=r=[r,o]:(Me=t,t=n))),t}const Dt=t.reservedWords||[];if((r=i())!==n&&Me===e.length)return r;throw r!==n&&Me<e.length&&tt({type:"end"}),function(e,t,r){return new peg$SyntaxError(peg$SyntaxError.buildMessage(e,t),e,t,r)}(Ge,Ke<e.length?e.charAt(Ke):null,Ke<e.length?et(Ke,Ke+1):et(Ke,Ke))}};const peg={VERSION:_$version_74,RESERVED_WORDS:["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],GrammarError:_$GrammarError_71,parser:_$parser_72,compiler:_$compiler_55,generate(e,t){const r="plugins"in(t=void 0!==t?t:{})?t.plugins:[],n={parser:peg.parser,passes:function(e){const t={};return Object.keys(e).forEach(r=>{t[r]=e[r].slice()}),t}(peg.compiler.passes),reservedWords:peg.RESERVED_WORDS.slice()};return r.forEach(e=>{e.use(n,t)}),peg.compiler.compile(n.parser.parse(e,{grammarSource:t.grammarSource,reservedWords:n.reservedWords}),n.passes,t)}};var _$peg_73=peg,_$surge_92={};function ___typeof_92(e){return(___typeof_92="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$surge_92,"__esModule",{value:!0}),_$surge_92.default=function(){return __parser_92||(__parser_92=peggy.generate(grammars)),__parser_92};var _templateObject,peggy=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_92(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_92(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(_$peg_73);function ___getRequireWildcardCache_92(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_92=function(e){return e?r:t})(e)}var strings,raw,__parser_92,grammars=String.raw(_templateObject||(strings=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleWebsocket() {\n        if (obfs.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers", obfs[\'ws-headers\']);\n            if (proxy[\'ws-opts\'] && proxy[\'ws-opts\'][\'headers\'] && proxy[\'ws-opts\'][\'headers\'].Host) {\n                proxy[\'ws-opts\'][\'headers\'].Host = proxy[\'ws-opts\'][\'headers\'].Host.replace(/^"(.*)"$/, \'$1\')\n            }\n        }\n    }\n    function handleShadowTLS() {\n        if (proxy[\'shadow-tls-password\'] && !proxy[\'shadow-tls-version\']) {\n            proxy[\'shadow-tls-version\'] = 2;\n        }\n    }\n}\n\nstart = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh) {\n    return proxy;\n}\n\nshadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ss";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\nvmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleWebsocket();\n    handleShadowTLS();\n}\ntrojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "trojan";\n    handleWebsocket();\n    handleShadowTLS();\n}\nhttps = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n    handleShadowTLS();\n}\nhttp = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    handleShadowTLS();\n}\nssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ssh";\n    handleShadowTLS();\n}\nsnell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "snell";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        $set(proxy, "obfs-opts.mode", obfs.type);\n        $set(proxy, "obfs-opts.host", obfs.host);\n        $set(proxy, "obfs-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\ntuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {\n    proxy.type = "tuic";\n    handleShadowTLS();\n}\ntuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {\n    proxy.type = "tuic";\n    proxy.version = 5;\n    handleShadowTLS();\n}\nwireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "wireguard-surge";\n    handleShadowTLS();\n}\nhysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {\n    proxy.type = "hysteria2";\n    handleShadowTLS();\n}\nsocks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    handleShadowTLS();\n}\nsocks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    proxy.tls = true;\n    handleShadowTLS();\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nport_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma match:[^,]+ { proxy.password = match.join(""); }\n\ntls = comma "tls" equals flag:bool { proxy.tls = flag; }\nsni = comma "sni" equals sni:("off"/domain) { \n    if (sni === "off") {\n        proxy["disable-sni"] = true;\n    } else {\n        proxy.sni = sni;\n    }\n}\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\ntls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\n\nsnell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }\nsnell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }\n\nusernamek = comma "username" equals match:[^,]+ { proxy.username = match.join(""); }\npasswordk = comma "password" equals match:[^,]+ { proxy.password = match.join(""); }\nvmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }\nvmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }\n\nmethod = comma "encrypt-method" equals cipher:cipher {\n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");\n\nws = comma "ws" equals flag:bool { obfs.type = "ws"; }\nws_headers = comma "ws-headers" equals headers:$[^,]+ {\n    const pairs = headers.split("|");\n    const result = {};\n    pairs.forEach(pair => {\n        const [key, value] = pair.trim().split(":");\n        result[key.trim()] = value.trim();\n    })\n    obfs["ws-headers"] = result;\n}\nws_path = comma "ws-path" equals path:uri { obfs.path = path; }\n\nobfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };\nobfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }\nuri = $[^,]+\n\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nreuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ntfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }\nip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }\nsection_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }\nno_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }\nunderlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\ntest_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }\ntest_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }\ntest_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }\ntos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }\ninterface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }\nallow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }\nhybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }\nidle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }\nprivate_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nserver_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nblock_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }\nshadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }\nshadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }\nshadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }\ntoken = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }\nalpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }\nuuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \r\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'],(raw=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleWebsocket() {\n        if (obfs.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers", obfs[\'ws-headers\']);\n            if (proxy[\'ws-opts\'] && proxy[\'ws-opts\'][\'headers\'] && proxy[\'ws-opts\'][\'headers\'].Host) {\n                proxy[\'ws-opts\'][\'headers\'].Host = proxy[\'ws-opts\'][\'headers\'].Host.replace(/^"(.*)"$/, \'$1\')\n            }\n        }\n    }\n    function handleShadowTLS() {\n        if (proxy[\'shadow-tls-password\'] && !proxy[\'shadow-tls-version\']) {\n            proxy[\'shadow-tls-version\'] = 2;\n        }\n    }\n}\n\nstart = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh) {\n    return proxy;\n}\n\nshadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ss";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\nvmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleWebsocket();\n    handleShadowTLS();\n}\ntrojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "trojan";\n    handleWebsocket();\n    handleShadowTLS();\n}\nhttps = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n    handleShadowTLS();\n}\nhttp = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "http";\n    handleShadowTLS();\n}\nssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "ssh";\n    handleShadowTLS();\n}\nsnell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "snell";\n    // handle obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        $set(proxy, "obfs-opts.mode", obfs.type);\n        $set(proxy, "obfs-opts.host", obfs.host);\n        $set(proxy, "obfs-opts.path", obfs.path);\n    }\n    handleShadowTLS();\n}\ntuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {\n    proxy.type = "tuic";\n    handleShadowTLS();\n}\ntuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {\n    proxy.type = "tuic";\n    proxy.version = 5;\n    handleShadowTLS();\n}\nwireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "wireguard-surge";\n    handleShadowTLS();\n}\nhysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {\n    proxy.type = "hysteria2";\n    handleShadowTLS();\n}\nsocks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    handleShadowTLS();\n}\nsocks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {\n    proxy.type = "socks5";\n    proxy.tls = true;\n    handleShadowTLS();\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nport_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma match:[^,]+ { proxy.password = match.join(""); }\n\ntls = comma "tls" equals flag:bool { proxy.tls = flag; }\nsni = comma "sni" equals sni:("off"/domain) { \n    if (sni === "off") {\n        proxy["disable-sni"] = true;\n    } else {\n        proxy.sni = sni;\n    }\n}\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\ntls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\n\nsnell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }\nsnell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }\n\nusernamek = comma "username" equals match:[^,]+ { proxy.username = match.join(""); }\npasswordk = comma "password" equals match:[^,]+ { proxy.password = match.join(""); }\nvmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }\nvmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }\n\nmethod = comma "encrypt-method" equals cipher:cipher {\n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");\n\nws = comma "ws" equals flag:bool { obfs.type = "ws"; }\nws_headers = comma "ws-headers" equals headers:$[^,]+ {\n    const pairs = headers.split("|");\n    const result = {};\n    pairs.forEach(pair => {\n        const [key, value] = pair.trim().split(":");\n        result[key.trim()] = value.trim();\n    })\n    obfs["ws-headers"] = result;\n}\nws_path = comma "ws-path" equals path:uri { obfs.path = path; }\n\nobfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };\nobfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }\nuri = $[^,]+\n\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nreuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ntfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }\nip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }\nsection_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }\nno_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }\nunderlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\ntest_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }\ntest_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }\ntest_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }\ntos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }\ninterface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }\nallow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }\nhybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }\nidle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }\nprivate_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nserver_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\nblock_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }\nshadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }\nshadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }\nshadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }\ntoken = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }\nalpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }\nuuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \\r\\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'])||(raw=strings.slice(0)),_templateObject=Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}})))),_$loon_90={};function ___typeof_90(e){return(___typeof_90="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$loon_90,"__esModule",{value:!0}),_$loon_90.default=function(){return __parser_90||(__parser_90=__peggy_90.generate(__grammars_90)),__parser_90};var ___templateObject_90,__peggy_90=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_90(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_90(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(_$peg_73);function ___getRequireWildcardCache_90(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_90=function(e){return e?r:t})(e)}var __strings_90,__raw_90,__parser_90,__grammars_90=String.raw(___templateObject_90||(__strings_90=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const transport = {};\n    const $ = {};\n\n    function handleTransport() {\n        if (transport.type === "tcp") { /* do nothing */ }\n        else if (transport.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", transport.path);\n            $set(proxy, "ws-opts.headers.Host", transport.host);\n        } else if (transport.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", transport.path);\n            $set(proxy, "http-opts.headers.Host", transport.host);\n        }\n    }\n}\n\nstart = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {\n    return proxy;\n}\n\nshadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/others)*{\n    proxy.type = "ssr";\n    // handle ssr obfs\n    proxy.obfs = obfs.type;\n}\nshadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/others)* {\n    proxy.type = "ss";\n    // handle ss obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n}\nvmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    proxy.alterId = proxy.alterId || 0;\n    handleTransport();\n}\nvless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "vless";\n    handleTransport();\n}\ntrojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "trojan";\n    handleTransport();\n}\nhysteria2 = tag equals "hysteria2"i address password (tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/others)* {\n    proxy.type = "hysteria2";\n}\nhttps = tag equals "https"i address (username password)? (tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n}\nhttp = tag equals "http"i address (username password)? (fast_open/udp_relay/others)* {\n    proxy.type = "http";\n}\nsocks5 = tag equals "socks5"i address (username password)? (over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "socks5";\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n    throw new Error("Invalid domain: " + domain);\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n    throw new Error("Invalid port number: " + port);\n}\n\nmethod = comma cipher:cipher { \n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305");\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma \'"\' match:[^"]* \'"\' { proxy.password = match.join(""); }\nuuid = comma \'"\' match:[^"]+ \'"\' { proxy.uuid = match.join(""); }\n\nobfs_typev = comma type:("http"/"tls") { obfs.type = type; }\nobfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }\n\nobfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }\n\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }\nobfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\nuri = $[^,]+\n\ntransport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }\ntransport_host = comma "host" equals host:domain { transport.host = host; }\ntransport_path = comma "path" equals path:uri { transport.path = path; }\n\nssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }\nssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nvmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } \n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma sni:("tls-name"/"sni") equals host:domain { proxy.sni = host; }\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\ntls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\ntls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\n\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\n\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\nsalamander_password = comma "salamander-password" equals match:[^,]+ { proxy[\'obfs-password\'] = match.join(""); proxy.obfs = \'salamander\'; }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \r\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'],(__raw_90=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parser initializer\n{\n    const proxy = {};\n    const obfs = {};\n    const transport = {};\n    const $ = {};\n\n    function handleTransport() {\n        if (transport.type === "tcp") { /* do nothing */ }\n        else if (transport.type === "ws") {\n            proxy.network = "ws";\n            $set(proxy, "ws-opts.path", transport.path);\n            $set(proxy, "ws-opts.headers.Host", transport.host);\n        } else if (transport.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", transport.path);\n            $set(proxy, "http-opts.headers.Host", transport.host);\n        }\n    }\n}\n\nstart = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {\n    return proxy;\n}\n\nshadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/others)*{\n    proxy.type = "ssr";\n    // handle ssr obfs\n    proxy.obfs = obfs.type;\n}\nshadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/others)* {\n    proxy.type = "ss";\n    // handle ss obfs\n    if (obfs.type == "http" || obfs.type === "tls") {\n        proxy.plugin = "obfs";\n        $set(proxy, "plugin-opts.mode", obfs.type);\n        $set(proxy, "plugin-opts.host", obfs.host);\n        $set(proxy, "plugin-opts.path", obfs.path);\n    }\n}\nvmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    proxy.alterId = proxy.alterId || 0;\n    handleTransport();\n}\nvless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "vless";\n    handleTransport();\n}\ntrojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "trojan";\n    handleTransport();\n}\nhysteria2 = tag equals "hysteria2"i address password (tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/others)* {\n    proxy.type = "hysteria2";\n}\nhttps = tag equals "https"i address (username password)? (tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "http";\n    proxy.tls = true;\n}\nhttp = tag equals "http"i address (username password)? (fast_open/udp_relay/others)* {\n    proxy.type = "http";\n}\nsocks5 = tag equals "socks5"i address (username password)? (over_tls/tls_host/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/others)* {\n    proxy.type = "socks5";\n}\n\naddress = comma server:server comma port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\n\nserver = ip/domain\n\nip = & {\n    const start = peg$currPos;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        j++;\n    }\n    peg$currPos = j;\n    $.ip = input.substring(start, j).trim();\n    return true;\n} { return $.ip; }\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n    throw new Error("Invalid domain: " + domain);\n}\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n    throw new Error("Invalid port number: " + port);\n}\n\nmethod = comma cipher:cipher { \n    proxy.cipher = cipher;\n}\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305");\n\nusername = & {\n    let j = peg$currPos; \n    let start, end;\n    let first = true;\n    while (j < input.length) {\n        if (input[j] === \',\') {\n            if (first) {\n                start = j + 1;\n                first = false;\n            } else {\n                end = j;\n                break;\n            }\n        }\n        j++;\n    }\n    const match = input.substring(start, end);\n    if (match.indexOf("=") === -1) {\n        $.username = match;\n        peg$currPos = end;\n        return true;\n    }\n} { proxy.username = $.username; }\npassword = comma \'"\' match:[^"]* \'"\' { proxy.password = match.join(""); }\nuuid = comma \'"\' match:[^"]+ \'"\' { proxy.uuid = match.join(""); }\n\nobfs_typev = comma type:("http"/"tls") { obfs.type = type; }\nobfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }\n\nobfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }\n\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }\nobfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\nuri = $[^,]+\n\ntransport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }\ntransport_host = comma "host" equals host:domain { transport.host = host; }\ntransport_path = comma "path" equals path:uri { transport.path = path; }\n\nssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }\nssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nvmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } \n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma sni:("tls-name"/"sni") equals host:domain { proxy.sni = host; }\ntls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }\ntls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\ntls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, \'$1\'); }\n\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\nudp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }\n\necn = comma "ecn" equals flag:bool { proxy.ecn = flag; }\ndownload_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }\nsalamander_password = comma "salamander-password" equals match:[^,]+ { proxy[\'obfs-password\'] = match.join(""); proxy.obfs = \'salamander\'; }\n\ntag = match:[^=,]* { proxy.name = match.join("").trim(); }\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \\r\\t]*\nbool = b:("true"/"false") { return b === "true" }\nothers = comma [^=,]+ equals [^=,]+\n'])||(__raw_90=__strings_90.slice(0)),___templateObject_90=Object.freeze(Object.defineProperties(__strings_90,{raw:{value:Object.freeze(__raw_90)}})))),_$qx_91={};function ___typeof_91(e){return(___typeof_91="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$qx_91,"__esModule",{value:!0}),_$qx_91.default=function(){return __parser_91||(__parser_91=__peggy_91.generate(__grammars_91)),__parser_91};var ___templateObject_91,__peggy_91=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_91(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_91(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(_$peg_73);function ___getRequireWildcardCache_91(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_91=function(e){return e?r:t})(e)}var __strings_91,__raw_91,__parser_91,__grammars_91=String.raw(___templateObject_91||(__strings_91=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parse initializer\n{\n\tconst proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleObfs() {\n        if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.network = "ws";\n            if (obfs.type === \'wss\') {\n                proxy.tls = true;\n            }\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers.Host", obfs.host);\n        } else if (obfs.type === "over-tls") {\n            proxy.tls = true;\n        } else if (obfs.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", obfs.path);\n            $set(proxy, "http-opts.headers.Host", obfs.host);\n        }\n    }\n}\n\nstart = (trojan/shadowsocks/vmess/vless/http/socks5) {\n    return proxy\n}\n\ntrojan = "trojan" equals address\n    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {\n    proxy.type = "trojan";\n    handleObfs();\n}\n\nshadowsocks = "shadowsocks" equals address\n    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp/fast_open/tag/server_check_url/others)* {\n    if (proxy.protocol || proxy.type === "ssr") {\n        proxy.type = "ssr";\n        if (!proxy.protocol) {\n            proxy.protocol = "origin";\n        }\n        // handle ssr obfs\n        if (obfs.host) proxy["obfs-param"] = obfs.host;\n        if (obfs.type) proxy.obfs = obfs.type;\n    } else {\n        proxy.type = "ss";\n        // handle ss obfs\n        if (obfs.type == "http" || obfs.type === "tls") {\n            proxy.plugin = "obfs";\n            $set(proxy, "plugin-opts", {\n                mode: obfs.type\n            });\n        } else if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.plugin = "v2ray-plugin";\n            $set(proxy, "plugin-opts.mode", "websocket");\n            if (obfs.type === "wss") {\n                $set(proxy, "plugin-opts.tls", true);\n            }\n        } else if (obfs.type === \'over-tls\') {\n            throw new Error(\'ss over-tls is not supported\');\n        }\n        if (obfs.type) {\n            $set(proxy, "plugin-opts.host", obfs.host);\n            $set(proxy, "plugin-opts.path", obfs.path);\n        }\n    }\n}\n\nvmess = "vmess" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleObfs();\n}\n\nvless = "vless" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vless";\n    proxy.cipher = proxy.cipher || "none";\n    handleObfs();\n}\n\nhttp = "http" equals address \n    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{\n    proxy.type = "http";\n}\n\nsocks5 = "socks5" equals address\n    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {\n    proxy.type = "socks5";\n}\n    \naddress = server:server ":" port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\nserver = ip/domain\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nip = & {\n    const start = peg$currPos;\n    let end;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        if (input[j] === ":") end = j;\n        j++;\n    }\n    peg$currPos = end || j;\n    $.ip = input.substring(start, end).trim();\n    return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nusername = comma "username" equals username:[^=,]+ { proxy.username = username.join("").trim(); }\npassword = comma "password" equals password:[^=,]+ { proxy.password = password.join("").trim(); }\nuuid = comma "password" equals uuid:[^=,]+ { proxy.uuid = uuid.join("").trim(); }\n\nmethod = comma "method" equals cipher:cipher { \n    proxy.cipher = cipher;\n};\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305");\naead = comma "aead" equals flag:bool { proxy.aead = flag; }\n\nudp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }\nudp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }\ntls_verification = comma "tls-verification" equals flag:bool { \n    proxy["skip-cert-verify"] = !flag;\n}\ntls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\ntls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }\ntls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }\ntls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { \n    proxy["tls-no-session-ticket"] = flag;\n}\ntls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { \n    proxy["tls-no-session-reuse"] = flag;\n}\n\nobfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }\nobfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\n\nssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }\nssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nserver_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }\n\nuri = $[^,]+\n\ntag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }\nothers = comma [^=,]+ equals [^=,]+\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \r\t]*\nbool = b:("true"/"false") { return b === "true" }\n'],(__raw_91=['\n// global initializer\n{{\n    function $set(obj, path, value) {\n      if (Object(obj) !== obj) return obj;\n      if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n      path\n        .slice(0, -1)\n        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n        path[path.length - 1]\n      ] = value;\n      return obj;\n    }\n}}\n\n// per-parse initializer\n{\n\tconst proxy = {};\n    const obfs = {};\n    const $ = {};\n\n    function handleObfs() {\n        if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.network = "ws";\n            if (obfs.type === \'wss\') {\n                proxy.tls = true;\n            }\n            $set(proxy, "ws-opts.path", obfs.path);\n            $set(proxy, "ws-opts.headers.Host", obfs.host);\n        } else if (obfs.type === "over-tls") {\n            proxy.tls = true;\n        } else if (obfs.type === "http") {\n            proxy.network = "http";\n            $set(proxy, "http-opts.path", obfs.path);\n            $set(proxy, "http-opts.headers.Host", obfs.host);\n        }\n    }\n}\n\nstart = (trojan/shadowsocks/vmess/vless/http/socks5) {\n    return proxy\n}\n\ntrojan = "trojan" equals address\n    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {\n    proxy.type = "trojan";\n    handleObfs();\n}\n\nshadowsocks = "shadowsocks" equals address\n    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp/fast_open/tag/server_check_url/others)* {\n    if (proxy.protocol || proxy.type === "ssr") {\n        proxy.type = "ssr";\n        if (!proxy.protocol) {\n            proxy.protocol = "origin";\n        }\n        // handle ssr obfs\n        if (obfs.host) proxy["obfs-param"] = obfs.host;\n        if (obfs.type) proxy.obfs = obfs.type;\n    } else {\n        proxy.type = "ss";\n        // handle ss obfs\n        if (obfs.type == "http" || obfs.type === "tls") {\n            proxy.plugin = "obfs";\n            $set(proxy, "plugin-opts", {\n                mode: obfs.type\n            });\n        } else if (obfs.type === "ws" || obfs.type === "wss") {\n            proxy.plugin = "v2ray-plugin";\n            $set(proxy, "plugin-opts.mode", "websocket");\n            if (obfs.type === "wss") {\n                $set(proxy, "plugin-opts.tls", true);\n            }\n        } else if (obfs.type === \'over-tls\') {\n            throw new Error(\'ss over-tls is not supported\');\n        }\n        if (obfs.type) {\n            $set(proxy, "plugin-opts.host", obfs.host);\n            $set(proxy, "plugin-opts.path", obfs.path);\n        }\n    }\n}\n\nvmess = "vmess" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vmess";\n    proxy.cipher = proxy.cipher || "none";\n    if (proxy.aead) {\n        proxy.alterId = 0;\n    } else {\n        proxy.alterId = proxy.alterId || 0;\n    }\n    handleObfs();\n}\n\nvless = "vless" equals address\n    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {\n    proxy.type = "vless";\n    proxy.cipher = proxy.cipher || "none";\n    handleObfs();\n}\n\nhttp = "http" equals address \n    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{\n    proxy.type = "http";\n}\n\nsocks5 = "socks5" equals address\n    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {\n    proxy.type = "socks5";\n}\n    \naddress = server:server ":" port:port {\n    proxy.server = server;\n    proxy.port = port;\n}\nserver = ip/domain\n\ndomain = match:[0-9a-zA-z-_.]+ { \n    const domain = match.join(""); \n    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n        return domain;\n    }\n}\n\nip = & {\n    const start = peg$currPos;\n    let end;\n    let j = start;\n    while (j < input.length) {\n        if (input[j] === ",") break;\n        if (input[j] === ":") end = j;\n        j++;\n    }\n    peg$currPos = end || j;\n    $.ip = input.substring(start, end).trim();\n    return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n    const port = parseInt(digits.join(""), 10); \n    if (port >= 0 && port <= 65535) {\n    \treturn port;\n    }\n}\n\nusername = comma "username" equals username:[^=,]+ { proxy.username = username.join("").trim(); }\npassword = comma "password" equals password:[^=,]+ { proxy.password = password.join("").trim(); }\nuuid = comma "password" equals uuid:[^=,]+ { proxy.uuid = uuid.join("").trim(); }\n\nmethod = comma "method" equals cipher:cipher { \n    proxy.cipher = cipher;\n};\ncipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305");\naead = comma "aead" equals flag:bool { proxy.aead = flag; }\n\nudp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }\nudp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }\nfast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }\n\nover_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }\ntls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }\ntls_verification = comma "tls-verification" equals flag:bool { \n    proxy["skip-cert-verify"] = !flag;\n}\ntls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }\ntls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }\ntls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }\ntls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { \n    proxy["tls-no-session-ticket"] = flag;\n}\ntls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { \n    proxy["tls-no-session-reuse"] = flag;\n}\n\nobfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }\nobfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }\nobfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };\n\nobfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }\nobfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }\n\nssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }\nssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }\n\nserver_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }\n\nuri = $[^,]+\n\ntag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }\nothers = comma [^=,]+ equals [^=,]+\ncomma = _ "," _\nequals = _ "=" _\n_ = [ \\r\\t]*\nbool = b:("true"/"false") { return b === "true" }\n'])||(__raw_91=__strings_91.slice(0)),___templateObject_91=Object.freeze(Object.defineProperties(__strings_91,{raw:{value:Object.freeze(__raw_91)}})))),_$trojanUri_93={};function ___typeof_93(e){return(___typeof_93="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$trojanUri_93,"__esModule",{value:!0}),_$trojanUri_93.default=function(){return __parser_93||(__parser_93=__peggy_93.generate(__grammars_93)),__parser_93};var ___templateObject_93,__peggy_93=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==___typeof_93(e)&&"function"!=typeof e)return{default:e};var r=___getRequireWildcardCache_93(void 0);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(_$peg_73);function ___getRequireWildcardCache_93(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(___getRequireWildcardCache_93=function(e){return e?r:t})(e)}var __strings_93,__raw_93,__parser_93,__grammars_93=String.raw(___templateObject_93||(__strings_93=['\n// global initializer\n{{\n  function $set(obj, path, value) {\n    if (Object(obj) !== obj) return obj;\n    if (!Array.isArray(path)) path = path.toString().match(/[^.[]]+/g) || [];\n    path\n      .slice(0, -1)\n      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n      path[path.length - 1]\n    ] = value;\n    return obj;\n  }\n\n  function toBool(str) {\n    if (typeof str === \'undefined\' || str === null) return undefined;\n    return /(TRUE)|1/i.test(str);\n  }\n}}\n\n{\n  const proxy = {};\n  const obfs = {};\n  const $ = {};\n  const params = {};\n}\n\nstart = (trojan) {\n  return proxy\n}\n\ntrojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{\n  proxy.type = "trojan";\n  proxy.password = password;\n  proxy.server = server;\n  proxy.port = port;\n  proxy.name = name;\n\n  // name may be empty\n  if (!proxy.name) {\n    proxy.name = server + ":" + port;\n  }\n};\n\npassword = match:$[^@]+ {\n  return decodeURIComponent(match);\n};\n\nserver = ip/domain;\n\ndomain = match:[0-9a-zA-z-_.]+ { \n  const domain = match.join(""); \n  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n    return domain;\n  }\n}\n\nip = & {\n  const start = peg$currPos;\n  let end;\n  let j = start;\n  while (j < input.length) {\n    if (input[j] === ",") break;\n    if (input[j] === ":") end = j;\n    j++;\n  }\n  peg$currPos = end || j;\n  $.ip = input.substring(start, end).trim();\n  return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n  const port = parseInt(digits.join(""), 10); \n  if (port >= 0 && port <= 65535) {\n    return port;\n  } else {\n    throw new Error("Invalid port: " + port);\n  }\n}\n\nparams = "?" head:param tail:("&"@param)* {\n  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);\n  proxy.sni = params["sni"] || params["peer"];\n\n  if (toBool(params["ws"])) {\n    proxy.network = "ws";\n    $set(proxy, "ws-opts.path", params["wspath"]);\n  }\n  \n  if (params["type"]) {\n    let httpupgrade\n    proxy.network = params["type"]\n    if(proxy.network === \'httpupgrade\') {\n      proxy.network = \'ws\'\n      httpupgrade = true\n    }\n    if ([\'grpc\'].includes(proxy.network)) {\n        proxy[proxy.network + \'-opts\'] = {\n            \'grpc-service-name\': params["serviceName"],\n            \'_grpc-type\': params["mode"],\n        };\n    } else {\n      if (params["path"]) {\n        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  \n      }\n      if (params["host"]) {\n        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); \n      }\n      if (httpupgrade) {\n        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); \n        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); \n      }\n    }\n  }\n\n  proxy.udp = toBool(params["udp"]);\n  proxy.tfo = toBool(params["tfo"]);\n}\n\nparam = kv/single;\n\nkv = key:$[a-z]i+ "=" value:$[^&#]i* {\n  params[key] = value;\n}\n\nsingle = key:$[a-z]i+ {\n  params[key] = true;\n};\n\nname = "#" + match:$.* {\n  return decodeURIComponent(match);\n}\n'],(__raw_93=['\n// global initializer\n{{\n  function $set(obj, path, value) {\n    if (Object(obj) !== obj) return obj;\n    if (!Array.isArray(path)) path = path.toString().match(/[^.[\\]]+/g) || [];\n    path\n      .slice(0, -1)\n      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[\n      path[path.length - 1]\n    ] = value;\n    return obj;\n  }\n\n  function toBool(str) {\n    if (typeof str === \'undefined\' || str === null) return undefined;\n    return /(TRUE)|1/i.test(str);\n  }\n}}\n\n{\n  const proxy = {};\n  const obfs = {};\n  const $ = {};\n  const params = {};\n}\n\nstart = (trojan) {\n  return proxy\n}\n\ntrojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{\n  proxy.type = "trojan";\n  proxy.password = password;\n  proxy.server = server;\n  proxy.port = port;\n  proxy.name = name;\n\n  // name may be empty\n  if (!proxy.name) {\n    proxy.name = server + ":" + port;\n  }\n};\n\npassword = match:$[^@]+ {\n  return decodeURIComponent(match);\n};\n\nserver = ip/domain;\n\ndomain = match:[0-9a-zA-z-_.]+ { \n  const domain = match.join(""); \n  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {\n    return domain;\n  }\n}\n\nip = & {\n  const start = peg$currPos;\n  let end;\n  let j = start;\n  while (j < input.length) {\n    if (input[j] === ",") break;\n    if (input[j] === ":") end = j;\n    j++;\n  }\n  peg$currPos = end || j;\n  $.ip = input.substring(start, end).trim();\n  return true;\n} { return $.ip; }\n\nport = digits:[0-9]+ { \n  const port = parseInt(digits.join(""), 10); \n  if (port >= 0 && port <= 65535) {\n    return port;\n  } else {\n    throw new Error("Invalid port: " + port);\n  }\n}\n\nparams = "?" head:param tail:("&"@param)* {\n  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);\n  proxy.sni = params["sni"] || params["peer"];\n\n  if (toBool(params["ws"])) {\n    proxy.network = "ws";\n    $set(proxy, "ws-opts.path", params["wspath"]);\n  }\n  \n  if (params["type"]) {\n    let httpupgrade\n    proxy.network = params["type"]\n    if(proxy.network === \'httpupgrade\') {\n      proxy.network = \'ws\'\n      httpupgrade = true\n    }\n    if ([\'grpc\'].includes(proxy.network)) {\n        proxy[proxy.network + \'-opts\'] = {\n            \'grpc-service-name\': params["serviceName"],\n            \'_grpc-type\': params["mode"],\n        };\n    } else {\n      if (params["path"]) {\n        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  \n      }\n      if (params["host"]) {\n        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); \n      }\n      if (httpupgrade) {\n        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); \n        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); \n      }\n    }\n  }\n\n  proxy.udp = toBool(params["udp"]);\n  proxy.tfo = toBool(params["tfo"]);\n}\n\nparam = kv/single;\n\nkv = key:$[a-z]i+ "=" value:$[^&#]i* {\n  params[key] = value;\n}\n\nsingle = key:$[a-z]i+ {\n  params[key] = true;\n};\n\nname = "#" + match:$.* {\n  return decodeURIComponent(match);\n}\n'])||(__raw_93=__strings_93.slice(0)),___templateObject_93=Object.freeze(Object.defineProperties(__strings_93,{raw:{value:Object.freeze(__raw_93)}})))),_$parsers_89={};Object.defineProperty(_$parsers_89,"__esModule",{value:!0}),_$parsers_89.default=void 0;var ___surge_89=___interopRequireDefault_89(_$surge_92),___loon_89=___interopRequireDefault_89(_$loon_90),___qx_89=___interopRequireDefault_89(_$qx_91),_trojanUri=___interopRequireDefault_89(_$trojanUri_93);function ___interopRequireDefault_89(e){return e&&e.__esModule?e:{default:e}}function __ownKeys_89(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ___objectSpread_89(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?__ownKeys_89(Object(r),!0).forEach((function(t){___defineProperty_89(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__ownKeys_89(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ___defineProperty_89(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___createForOfIteratorHelper_89(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_89(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___slicedToArray_89(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(u){a=!0,o=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw o}}return s}}(e,t)||___unsupportedIterableToArray_89(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___unsupportedIterableToArray_89(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_89(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_89(e,t):void 0}}function ___arrayLikeToArray_89(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function surge_port_hopping(e){var t=___slicedToArray_89(e.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[],2),r=t[0],n=t[1];return{port_hopping:n?n.replace(/;/g,","):void 0,line:r?e.replace(r,""):e}}function __isIP_89(e){return(0,_$utils_130.isIPv4)(e)||(0,_$utils_130.isIPv6)(e)}var ___default_89=[{name:"URI SS Parser",test:function(e){return/^ss:\/\//.test(e)},parse:function(e){var t,r=e.split("ss://")[1],n={name:decodeURIComponent(e.split("#")[1]),type:"ss"},o=(r=r.split("#")[0]).match(/@([^/]*)(\/|$)/),s=_$base64_20.Base64.decode(r.split("@")[0]),i="";if(!o){if(r.includes("?")){var a=r.match(/^(.*)(\?.*)$/);r=a[1],i=a[2]}if(r=_$base64_20.Base64.decode(r),i){if(/(&|\?)v2ray-plugin=/.test(i)){var u=i.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];u&&(n.plugin="v2ray-plugin",n["plugin-opts"]=JSON.parse(_$base64_20.Base64.decode(u)))}r="".concat(r).concat(i)}s=r.split("@")[0],o=r.match(/@([^/]*)(\/|$)/)}var c=o[1],l=c.lastIndexOf(":");n.server=c.substring(0,l),n.port=null===(t="".concat(c.substring(l+1)).match(/\d+/))||void 0===t?void 0:t[0];var p=s.match(/(^.*?):(.*$)/);if(n.cipher=p[1],n.password=p[2],-1!==r.indexOf("?plugin=")){var f,h={},d=___createForOfIteratorHelper_89(("plugin="+decodeURIComponent(r.split("?plugin=")[1].split("&")[0])).split(";"));try{for(d.s();!(f=d.n()).done;){var _=___slicedToArray_89(f.value.split("="),2),g=_[0],y=_[1];g&&(h[g]=y||!0)}}catch(v){d.e(v)}finally{d.f()}switch(h.plugin){case"obfs-local":case"simple-obfs":n.plugin="obfs",n["plugin-opts"]={mode:h.obfs,host:(0,_$utils_130.getIfNotBlank)(h["obfs-host"])};break;case"v2ray-plugin":n.plugin="v2ray-plugin",n["plugin-opts"]={mode:"websocket",host:(0,_$utils_130.getIfNotBlank)(h["obfs-host"]),path:(0,_$utils_130.getIfNotBlank)(h.path),tls:(0,_$utils_130.getIfPresent)(h.tls)};break;default:throw new Error("Unsupported plugin option: ".concat(h.plugin))}}return/(&|\?)uot=(1|true)/i.test(i)&&(n["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(i)&&(n.tfo=!0),n}},{name:"URI SSR Parser",test:function(e){return/^ssr:\/\//.test(e)},parse:function(e){var t=(e=_$base64_20.Base64.decode(e.split("ssr://")[1])).indexOf(":origin");-1===t&&(t=e.indexOf(":auth_"));var r=e.substring(0,t),n=r.substring(0,r.lastIndexOf(":")),o=r.substring(r.lastIndexOf(":")+1),s=e.substring(t+1).split("/?")[0].split(":"),i={type:"ssr",server:n,port:o,protocol:s[0],cipher:s[1],obfs:s[2],password:_$base64_20.Base64.decode(s[3])},a={};if((e=e.split("/?")[1].split("&")).length>1){var u,c=___createForOfIteratorHelper_89(e);try{for(c.s();!(u=c.n()).done;){var l=___slicedToArray_89(u.value.split("="),2),p=l[0],f=l[1];(f=f.trim()).length>0&&"(null)"!==f&&(a[p]=f)}}catch(h){c.e(h)}finally{c.f()}}return ___objectSpread_89(___objectSpread_89({},i),{},{name:a.remarks?_$base64_20.Base64.decode(a.remarks):i.server,"protocol-param":(0,_$utils_130.getIfNotBlank)(_$base64_20.Base64.decode(a.protoparam||"").replace(/\s/g,"")),"obfs-param":(0,_$utils_130.getIfNotBlank)(_$base64_20.Base64.decode(a.obfsparam||"").replace(/\s/g,""))})}},{name:"URI VMess Parser",test:function(e){return/^vmess:\/\//.test(e)},parse:function(t){t=t.split("vmess://")[1];var r=_$base64_20.Base64.decode(t);if(/=\s*vmess/.test(r)){var n,o=r.split(",").map((function(e){return e.trim()})),s={},i=___createForOfIteratorHelper_89(o);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(-1!==a.indexOf("=")){var u=___slicedToArray_89(a.split("="),2),c=u[0],l=u[1];s[c.trim()]=l.trim()}}}catch(M){i.e(M)}finally{i.f()}var p={name:o[0].split("=")[0].trim(),type:"vmess",server:o[1],port:o[2],cipher:(0,_$utils_130.getIfNotBlank)(o[3],"auto"),uuid:o[4].match(/^"(.*)"$/)[1],tls:"wss"===s.obfs,udp:(0,_$utils_130.getIfPresent)(s["udp-relay"]),tfo:(0,_$utils_130.getIfPresent)(s["fast-open"]),"skip-cert-verify":(0,_$utils_130.isPresent)(s["tls-verification"])?!s["tls-verification"]:void 0};if((0,_$utils_130.isPresent)(s.obfs)){if("ws"!==s.obfs&&"wss"!==s.obfs)throw new Error("Unsupported obfs: ".concat(s.obfs));p.network="ws",p["ws-opts"].path=((0,_$utils_130.getIfNotBlank)(s["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];var f=s["obfs-header"];f&&-1!==f.indexOf("Host")&&(f=f.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),(0,_$utils_130.isNotBlank)(f)&&(p["ws-opts"].headers={Host:f})}return p}var h,d,_,g,y={};try{y=JSON.parse(r)}catch(e){var v=___slicedToArray_89(/(^[^?]+?)\/?\?(.*)$/.exec(t),3),m=(v[0],v[1]),b=v[2];r=_$base64_20.Base64.decode(m);var w,E=___createForOfIteratorHelper_89(b.split("&"));try{for(E.s();!(w=E.n()).done;){var x=___slicedToArray_89(w.value.split("="),2),A=x[0],S=x[1],C=S;-1===(C=decodeURIComponent(S)).indexOf(",")?y[A]=C:y[A]=C.split(",")}}catch(M){E.e(M)}finally{E.f()}var P=___slicedToArray_89(/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(r),5),I=(P[0],P[1]),F=P[2],k=P[3],R=P[4];y.scy=I,y.id=F,y.port=R,y.add=k}var $=y.add,O=parseInt((0,_$utils_130.getIfPresent)(y.port),10),T={name:null!==(h=null!==(d=null!==(_=y.ps)&&void 0!==_?_:y.remarks)&&void 0!==d?d:y.remark)&&void 0!==h?h:"VMess ".concat($,":").concat(O),type:"vmess",server:$,port:O,cipher:(0,_$utils_130.getIfPresent)(y.scy,"auto"),uuid:y.id,alterId:parseInt((0,_$utils_130.getIfPresent)(null!==(g=y.aid)&&void 0!==g?g:y.alterId,0),10),tls:["tls",!0,1,"1"].includes(y.tls),"skip-cert-verify":(0,_$utils_130.isPresent)(y.verify_cert)?!y.verify_cert:void 0};!T["skip-cert-verify"]&&(0,_$utils_130.isPresent)(y.allowInsecure)&&(T["skip-cert-verify"]=/(TRUE)|1/i.test(y.allowInsecure)),T.tls&&T.sni&&(T.sni=y.sni);var D=!1;if("ws"===y.net||"websocket"===y.obfs?T.network="ws":["http"].includes(y.net)||["http"].includes(y.obfs)||["http"].includes(y.type)?T.network="http":["grpc"].includes(y.net)?T.network="grpc":"httpupgrade"===y.net||"httpupgrade"===T.network?(T.network="ws",D=!0):"h2"!==y.net&&"h2"!==T.network||(T.network="h2"),T.network){var B,j=null!==(B=y.host)&&void 0!==B?B:y.obfsParam;try{var N=JSON.parse(j),L=null==N?void 0:N.Host;L&&(j=L)}catch(e){}var U=y.path;if("http"===T.network&&(j&&(j=j.split(",").map((function(e){return e.trim()})),j=Array.isArray(j)?j[0]:j),U=U?Array.isArray(U)?U[0]:U:"/"),U||j)if(["grpc"].includes(T.network))T["".concat(T.network,"-opts")]={"grpc-service-name":(0,_$utils_130.getIfNotBlank)(U),"_grpc-type":(0,_$utils_130.getIfNotBlank)(y.type)};else{var H={path:(0,_$utils_130.getIfNotBlank)(U),headers:{Host:(0,_$utils_130.getIfNotBlank)(j)}};D&&(H["v2ray-http-upgrade"]=!0,H["v2ray-http-upgrade-fast-open"]=!0),T["".concat(T.network,"-opts")]=H}else delete T.network}return T}},{name:"URI VLESS Parser",test:function(e){return/^vless:\/\//.test(e)},parse:function(t){var r,n,o,s;t=t.split("vless://")[1];var i=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t);if(!i){var a=___slicedToArray_89(/^(.*?)(\?.*?$)/.exec(t),3),u=(a[0],a[1]),c=a[2];t="".concat(_$base64_20.Base64.decode(u)).concat(c),i=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(t),s=!0}var l=___slicedToArray_89(i,7),p=(l[0],l[1]),f=l[2],h=l[3],d=(l[4],l[5]),_=void 0===d?"":d,g=l[6];s&&(p=p.replace(/^.*?:/g,"")),h=parseInt("".concat(h),10),p=decodeURIComponent(p),null!=g&&(g=decodeURIComponent(g));var y,v,m={type:"vless",name:g,server:f,port:h,uuid:p},b={},w=___createForOfIteratorHelper_89(_.split("&"));try{for(w.s();!(y=w.n()).done;){var E,x=___slicedToArray_89(y.value.split("="),2),A=x[0],S=x[1];E=decodeURIComponent(S),b[A]=E}}catch(O){w.e(O)}finally{w.f()}if(m.name=null!==(r=null!==(n=null!==(o=g)&&void 0!==o?o:b.remarks)&&void 0!==n?n:b.remark)&&void 0!==r?r:"VLESS ".concat(f,":").concat(h),m.tls=b.security&&"none"!==b.security,s&&/TRUE|1/i.test(b.tls)&&(m.tls=!0,b.security=null!==(v=b.security)&&void 0!==v?v:"reality"),m.sni=b.sni||b.peer,m.flow=b.flow,!m.flow&&s&&b.xtls){var C=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][b.xtls];C&&(m.flow=C)}if(m["client-fingerprint"]=b.fp,m.alpn=b.alpn?b.alpn.split(","):void 0,m["skip-cert-verify"]=/(TRUE)|1/i.test(b.allowInsecure),["reality"].includes(b.security)){var P={};b.pbk&&(P["public-key"]=b.pbk),b.sid&&(P["short-id"]=b.sid),Object.keys(P).length>0&&(m["".concat(b.security,"-opts")]=P)}var I=!1;if(m.network=b.type,"tcp"===m.network&&"http"===b.headerType?m.network="http":"httpupgrade"===m.network&&(m.network="ws",I=!0),!m.network&&s&&b.obfs&&(m.network=b.obfs),["websocket"].includes(m.network)&&(m.network="ws"),m.network&&!["tcp","none"].includes(m.network)){var F,k={},R=null!==(F=b.host)&&void 0!==F?F:b.obfsParam;if(R)if(b.obfsParam)try{var $=JSON.parse(R);k.headers=$}catch(e){k.headers={Host:R}}else k.headers={Host:R};b.serviceName?k["".concat(m.network,"-service-name")]=b.serviceName:s&&b.path&&(["ws","http","h2"].includes(m.network)||(k["".concat(m.network,"-service-name")]=b.path,delete b.path)),b.path&&(k.path=b.path),["grpc"].includes(m.network)&&(k["_grpc-type"]=b.mode||"gun"),I&&(k["v2ray-http-upgrade"]=!0,k["v2ray-http-upgrade-fast-open"]=!0),Object.keys(k).length>0&&(m["".concat(m.network,"-opts")]=k)}return m}},{name:"URI TUIC Parser",test:function(e){return/^tuic:\/\//.test(e)},parse:function(e){var t;e=e.split(/tuic:\/\//)[1];var r=___slicedToArray_89(/^(.*?):(.*?)@(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),9),n=(r[0],r[1]),o=r[2],s=r[3],i=(r[4],r[5]),a=(r[6],r[7]),u=void 0===a?"":a,c=r[8];i=parseInt("".concat(i),10),isNaN(i)&&(i=443),o=decodeURIComponent(o),null!=c&&(c=decodeURIComponent(c));var l,p={type:"tuic",name:c=null!==(t=c)&&void 0!==t?t:"TUIC ".concat(s,":").concat(i),server:s,port:i,password:o,uuid:n},f=___createForOfIteratorHelper_89(u.split("&"));try{for(f.s();!(l=f.n()).done;){var h=___slicedToArray_89(l.value.split("="),2),d=h[0],_=h[1];d=d.replace(/_/,"-"),_=decodeURIComponent(_),["alpn"].includes(d)?p[d]=_?_.split(","):void 0:["allow-insecure"].includes(d)?p["skip-cert-verify"]=/(TRUE)|1/i.test(_):["disable-sni","reduce-rtt"].includes(d)?p[d]=/(TRUE)|1/i.test(_):p[d]=_}}catch(g){f.e(g)}finally{f.f()}return p}},{name:"URI WireGuard Parser",test:function(e){return/^(wireguard|wg):\/\//.test(e)},parse:function(e){var t;e=e.split(/(wireguard|wg):\/\//)[2];var r=___slicedToArray_89(/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),9),n=(r[0],r[1],r[2]),o=r[3],s=(r[4],r[5]),i=(r[6],r[7]),a=void 0===i?"":i,u=r[8];s=parseInt("".concat(s),10),isNaN(s)&&(s=51820),n=decodeURIComponent(n),null!=u&&(u=decodeURIComponent(u));var c,l={type:"wireguard",name:u=null!==(t=u)&&void 0!==t?t:"WireGuard ".concat(o,":").concat(s),server:o,port:s,"private-key":n,udp:!0},p=___createForOfIteratorHelper_89(a.split("&"));try{for(p.s();!(c=p.n()).done;){var f=___slicedToArray_89(c.value.split("="),2),h=f[0],d=f[1];if(h=h.replace(/_/,"-"),d=decodeURIComponent(d),["reserved"].includes(h)){var _=d.split(",").map((function(e){return parseInt(e.trim(),10)})).filter((function(e){return Number.isInteger(e)}));3===_.length&&(l[h]=_)}else if(["address","ip"].includes(h))d.split(",").map((function(e){var t=e.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");(0,_$utils_130.isIPv4)(t)?l.ip=t:(0,_$utils_130.isIPv6)(t)&&(l.ipv6=t)}));else if(["mtu"].includes(h)){var g=parseInt(d.trim(),10);Number.isInteger(g)&&(l[h]=g)}else/publickey/i.test(h)?l["public-key"]=d:/privatekey/i.test(h)?l["private-key"]=d:["udp"].includes(h)?l[h]=/(TRUE)|1/i.test(d):["flag"].includes(h)||(l[h]=d)}}catch(y){p.e(y)}finally{p.f()}return l}},{name:"URI Hysteria Parser",test:function(e){return/^(hysteria|hy):\/\//.test(e)},parse:function(e){var t;e=e.split(/(hysteria|hy):\/\//)[2];var r=___slicedToArray_89(/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),7),n=(r[0],r[1]),o=(r[2],r[3]),s=(r[4],r[5]),i=void 0===s?"":s,a=r[6];o=parseInt("".concat(o),10),isNaN(o)&&(o=443),null!=a&&(a=decodeURIComponent(a));var u,c={type:"hysteria",name:a=null!==(t=a)&&void 0!==t?t:"Hysteria ".concat(n,":").concat(o),server:n,port:o},l={},p=___createForOfIteratorHelper_89(i.split("&"));try{for(p.s();!(u=p.n()).done;){var f=___slicedToArray_89(u.value.split("="),2),h=f[0],d=f[1];h=h.replace(/_/,"-"),d=decodeURIComponent(d),["alpn"].includes(h)?c[h]=d?d.split(","):void 0:["insecure"].includes(h)?c["skip-cert-verify"]=/(TRUE)|1/i.test(d):["auth"].includes(h)?c["auth-str"]=d:["mport"].includes(h)?c.ports=d:["obfsParam"].includes(h)?c.obfs=d:["upmbps"].includes(h)?c.up=d:["downmbps"].includes(h)?c.down=d:["obfs"].includes(h)?c._obfs=d||"":["fast-open","peer"].includes(h)?l[h]=d:c[h]=d}}catch(_){p.e(_)}finally{p.f()}return!c.sni&&l.peer&&(c.sni=l.peer),!c["fast-open"]&&l.fastopen&&(c["fast-open"]=!0),c.protocol||(c.protocol="udp"),c}},{name:"URI Hysteria2 Parser",test:function(e){return/^(hysteria2|hy2):\/\//.test(e)},parse:function(e){var t,r;e=e.split(/(hysteria2|hy2):\/\//)[2];var n=___slicedToArray_89(/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(e),12),o=(n[0],n[1]),s=n[2],i=(n[3],n[4]),a=(n[5],n[6],n[7],n[8],n[9],n[10]),u=void 0===a?"":a,c=n[11];/^\d+$/.test(i)?(i=parseInt("".concat(i),10),isNaN(i)&&(i=443)):i?(r=i,i=(0,_$utils_130.getRandomPort)(r)):i=443,o=decodeURIComponent(o),null!=c&&(c=decodeURIComponent(c));var l,p={type:"hysteria2",name:c=null!==(t=c)&&void 0!==t?t:"Hysteria2 ".concat(s,":").concat(i),server:s,port:i,ports:r,password:o},f={},h=___createForOfIteratorHelper_89(u.split("&"));try{for(h.s();!(l=h.n()).done;){var d,_=___slicedToArray_89(l.value.split("="),2),g=_[0],y=_[1];d=decodeURIComponent(y),f[g]=d}}catch(v){h.e(v)}finally{h.f()}return p.sni=f.sni,!p.sni&&f.peer&&(p.sni=f.peer),f.obfs&&"none"!==f.obfs&&(p.obfs=f.obfs),p.ports=f.mport,p["obfs-password"]=f["obfs-password"],p["skip-cert-verify"]=/(TRUE)|1/i.test(f.insecure),p.tfo=/(TRUE)|1/i.test(f.fastopen),p["tls-fingerprint"]=f.pinSHA256,p}},{name:"URI Trojan Parser",test:function(e){return/^trojan:\/\//.test(e)},parse:function(t){var r=___slicedToArray_89(t.split(/#(.+)/,2),2),n=r[0],o=r[1],s=(0,_trojanUri.default)().parse(n);if((0,_$utils_130.isNotBlank)(o))try{s.name=decodeURIComponent(o)}catch(e){console.log(e)}return s}},{name:"Clash Parser",test:function(t){try{JSON.parse(t)}catch(e){return!1}return!0},parse:function(e){var t=JSON.parse(e);if(!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh"].includes(t.type))throw new Error("Clash does not support proxy with type: ".concat(t.type));return["vmess","vless"].includes(t.type)&&(t.sni=t.servername,delete t.servername),t["server-cert-fingerprint"]&&(t["tls-fingerprint"]=t["server-cert-fingerprint"]),t.fingerprint&&(t["tls-fingerprint"]=t.fingerprint),t["dialer-proxy"]&&(t["underlying-proxy"]=t["dialer-proxy"]),t["benchmark-url"]&&(t["test-url"]=t["benchmark-url"]),t["benchmark-timeout"]&&(t["test-timeout"]=t["benchmark-timeout"]),t}},{name:"Surge SSH Parser",test:function(e){return/^.*=\s*ssh/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge SS Parser",test:function(e){return/^.*=\s*ss/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge VMess Parser",test:function(e){return/^.*=\s*vmess/.test(e.split(",")[0])&&-1!==e.indexOf("username")},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge Trojan Parser",test:function(e){return/^.*=\s*trojan/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge HTTP Parser",test:function(e){return/^.*=\s*https?/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge Snell Parser",test:function(e){return/^.*=\s*snell/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge Tuic Parser",test:function(e){return/^.*=\s*tuic(-v5)?/.test(e.split(",")[0])},parse:function(e){var t=surge_port_hopping(e),r=t.port_hopping,n=t.line,o=(0,___surge_89.default)().parse(n);return o.ports=r,o}},{name:"Surge WireGuard Parser",test:function(e){return/^.*=\s*wireguard/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge Hysteria2 Parser",test:function(e){return/^.*=\s*hysteria2/.test(e.split(",")[0])},parse:function(e){var t=surge_port_hopping(e),r=t.port_hopping,n=t.line,o=(0,___surge_89.default)().parse(n);return o.ports=r,o}},{name:"Surge Socks5 Parser",test:function(e){return/^.*=\s*socks5(-tls)?/.test(e.split(",")[0])},parse:function(e){return(0,___surge_89.default)().parse(e)}},{name:"Surge External Parser",test:function(e){return/^.*=\s*external/.test(e.split(",")[0])},parse:function(e){var t,r,n,o=___slicedToArray_89(/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(e),3),s=(o[0],o[1]),i=o[2],a=null===(t=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(e=i))||void 0===t?void 0:t[2];a||(a=null===(n=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(e))||void 0===n?void 0:n[2]);var u,c=null===(r=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(e))||void 0===r?void 0:r[2];c||(c=null===(u=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(e))||void 0===u?void 0:u[2]);for(var l,p=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,f=[];null!==(l=p.exec(e));)null!=l[3]?f.push(l[3]):null!=l[4]&&f.push(l[4]);for(var h,d=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,_=[];null!==(h=d.exec(e));){var g=void 0;null!=h[3]?g=h[3]:null!=h[4]&&(g=h[4]),null!=g&&(g="".concat(g).trim().replace(/^\[/,"").replace(/\]$/,"")),__isIP_89(g)&&_.push(g)}return{type:"external",name:s,exec:a,"local-port":c,args:f,addresses:_}}},{name:"Loon SS Parser",test:function(e){return"shadowsocks"===e.split(",")[0].split("=")[1].trim().toLowerCase()},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon SSR Parser",test:function(e){return"shadowsocksr"===e.split(",")[0].split("=")[1].trim().toLowerCase()},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon VMess Parser",test:function(e){return/^.*=\s*vmess/i.test(e.split(",")[0])&&-1===e.indexOf("username")},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon Vless Parser",test:function(e){return/^.*=\s*vless/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon Hysteria2 Parser",test:function(e){return/^.*=\s*Hysteria2/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon Trojan Parser",test:function(e){return/^.*=\s*trojan/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon HTTP Parser",test:function(e){return/^.*=\s*http/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon SOCKS5 Parser",test:function(e){return/^.*=\s*socks5/i.test(e.split(",")[0])},parse:function(e){return(0,___loon_89.default)().parse(e)}},{name:"Loon WireGuard Parser",test:function(e){return/^.*=\s*wireguard/i.test(e.split(",")[0])},parse:function(e){var t,r,n,o,s,i,a,u,c,l,p,f,h,d,_=null===(t=e.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i))||void 0===t?void 0:t[1],g=null===(r=(e=e.replace(_,"").replace(/^\s*?=\s*?wireguard\s*/i,"")).match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i))||void 0===r?void 0:r[1],y=g.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),v=null==y?void 0:y[2],m=parseInt(null==y?void 0:y[3],10),b=null===(n=e.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i))||void 0===n?void 0:n[2];b&&(b=parseInt(b,10));var w=null===(o=e.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i))||void 0===o?void 0:o[2];w&&(w=parseInt(w,10));var E,x=null===(s=g.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i))||void 0===s?void 0:s[2];x&&(x=JSON.parse(x));var A=null===(i=e.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===i?void 0:i[2],S=null===(a=e.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===a?void 0:a[2];(A||S)&&(E=[],A&&E.push(A),S&&E.push(S));var C=null===(u=g.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i))||void 0===u||null===(c=u[2])||void 0===c?void 0:c.split(",").map((function(e){return e.trim()})),P=null===(l=g.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===l?void 0:l[2],I=null===(p=e.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===p?void 0:p[2],F=null===(f=e.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===f?void 0:f[2],k=null===(h=g.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===h?void 0:h[2],R={type:"wireguard",name:_,server:v,port:m,ip:I,ipv6:F,"private-key":null===(d=e.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i))||void 0===d?void 0:d[2],"public-key":k,mtu:b,keepalive:w,reserved:x,"allowed-ips":C,"preshared-key":P,dns:E,udp:!0,peers:[{server:v,port:m,ip:I,ipv6:F,"public-key":k,"pre-shared-key":P,"allowed-ips":C,reserved:x}]};return Array.isArray(R.dns)&&R.dns.length>0&&(R["remote-dns-resolve"]=!0),R}},{name:"QX SS Parser",test:function(e){return/^shadowsocks\s*=/.test(e.split(",")[0].trim())&&-1===e.indexOf("ssr-protocol")},parse:function(e){return(0,___qx_89.default)().parse(e)}},{name:"QX SSR Parser",test:function(e){return/^shadowsocks\s*=/.test(e.split(",")[0].trim())&&-1!==e.indexOf("ssr-protocol")},parse:function(e){return(0,___qx_89.default)().parse(e)}},{name:"QX VMess Parser",test:function(e){return/^vmess\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_89.default)().parse(e)}},{name:"QX VLESS Parser",test:function(e){return/^vless\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_89.default)().parse(e)}},{name:"QX Trojan Parser",test:function(e){return/^trojan\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_89.default)().parse(e)}},{name:"QX HTTP Parser",test:function(e){return/^http\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_89.default)().parse(e)}},{name:"QX Socks5 Parser",test:function(e){return/^socks5\s*=/.test(e.split(",")[0].trim())},parse:function(e){return(0,___qx_89.default)().parse(e)}}];_$parsers_89.default=___default_89;var _$download_116={};function ___typeof_116(e){return(___typeof_116="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_$download_116,"__esModule",{value:!0}),_$download_116.default=function(e){var t,r,n,o;e.get("/download/collection/:name",downloadCollection),e.get("/download/:name",downloadSubscription),e.get("/download/collection/:name/api/v1/server/details",(o=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function e(t,r){return ___regeneratorRuntime_116().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha",e.next=5,downloadCollection(t,r);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})),e.get("/download/:name/api/v1/server/details",(n=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function e(t,r){return ___regeneratorRuntime_116().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha",e.next=5,downloadSubscription(t,r);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})),e.get("/download/collection/:name/api/v1/monitor/:nezhaIndex",(r=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function e(t,r){return ___regeneratorRuntime_116().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha-monitor",e.next=5,downloadCollection(t,r);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})),e.get("/download/:name/api/v1/monitor/:nezhaIndex",(t=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function e(t,r){return ___regeneratorRuntime_116().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha-monitor",e.next=5,downloadSubscription(t,r);case 5:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)}))};var ___proxyUtils_116=_$proxyUtils_88({}),___app_116=___interopRequireDefault_116(_$app_87),___sync_116=_$sync_121({}),___env_116=___interopRequireDefault_116(_$env_125);function ___interopRequireDefault_116(e){return e&&e.__esModule?e:{default:e}}function ___toConsumableArray_116(e){return function(e){if(Array.isArray(e))return ___arrayLikeToArray_116(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||___unsupportedIterableToArray_116(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___createForOfIteratorHelper_116(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=___unsupportedIterableToArray_116(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw s}}}}function ___unsupportedIterableToArray_116(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_116(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_116(e,t):void 0}}function ___arrayLikeToArray_116(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___regeneratorRuntime_116(){___regeneratorRuntime_116=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_116(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __asyncGeneratorStep_116(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_116(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_116(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_116(s,n,o,i,a,"throw",e)}i(void 0)}))}}function downloadSubscription(e,t){return _downloadSubscription.apply(this,arguments)}function _downloadSubscription(){return(_downloadSubscription=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function t(r,n){var o,s,i,a,u,c,l,p,f,h,d,_,g,y,v,m,b,w,E,x,A,S,C,P,I,F,k,R,$,O,T,D,B,j,N,L;return ___regeneratorRuntime_116().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.params,s=o.name,i=o.nezhaIndex,s=decodeURIComponent(s),i=decodeURIComponent(i),a="SurgeMac"===r.query.target,u=r.query.target||(0,_$userAgent_136.getPlatformFromHeaders)(r.headers)||"JSON",___app_116.default.info("\u6b63\u5728\u4e0b\u8f7d\u8ba2\u9605\uff1a".concat(s,"\n\u8bf7\u6c42 User-Agent: ").concat(r.headers["user-agent"]||r.headers["User-Agent"])),c=r.query,l=c.url,p=c.ua,f=c.content,h=c.mergeSources,d=c.ignoreFailedRemoteSub,_=c.produceType,g=c.includeUnsupportedProxy,y=c.resultFormat,v=c.proxy,m={},r.query.$options){try{m=JSON.parse(decodeURIComponent(r.query.$options))}catch(e){b=___createForOfIteratorHelper_116(r.query.$options.split("&"));try{for(b.s();!(w=b.n()).done;)E=w.value,x=E.split("=")[0],A=E.split("=")[1],m[x]=null==A||""===A||decodeURIComponent(A)}catch(U){b.e(U)}finally{b.f()}}___app_116.default.info("\u4f20\u5165 $options: ".concat(JSON.stringify(m)))}if(l&&(l=decodeURIComponent(l),___app_116.default.info("\u6307\u5b9a\u8fdc\u7a0b\u8ba2\u9605 URL: ".concat(l))),v&&(v=decodeURIComponent(v),___app_116.default.info("\u6307\u5b9a\u8fdc\u7a0b\u8ba2\u9605\u4f7f\u7528\u4ee3\u7406/\u7b56\u7565 proxy: ".concat(v))),p&&(p=decodeURIComponent(p),___app_116.default.info("\u6307\u5b9a\u8fdc\u7a0b\u8ba2\u9605 User-Agent: ".concat(p))),f&&(f=decodeURIComponent(f),___app_116.default.info("\u6307\u5b9a\u672c\u5730\u8ba2\u9605: ".concat(f))),h&&(h=decodeURIComponent(h),___app_116.default.info("\u6307\u5b9a\u5408\u5e76\u6765\u6e90: ".concat(h))),null!=d&&""!==d&&(d=decodeURIComponent(d),___app_116.default.info("\u6307\u5b9a\u5ffd\u7565\u5931\u8d25\u7684\u8fdc\u7a0b\u8ba2\u9605: ".concat(d))),_&&(_=decodeURIComponent(_),___app_116.default.info("\u6307\u5b9a\u751f\u4ea7\u7c7b\u578b: ".concat(_))),g&&(g=decodeURIComponent(g),___app_116.default.info("\u5305\u542b\u4e0d\u652f\u6301\u7684\u8282\u70b9: ".concat(g))),a&&___app_116.default.info("\u624b\u52a8\u6307\u5b9a\u4e86 target \u4e3a SurgeMac, \u5c06\u4f7f\u7528 Mihomo External"),S=___app_116.default.read(_$constants_86.SUBS_KEY),!(C=(0,_$database_122.findByName)(S,s))){t.next=66;break}return t.prev=21,t.next=24,(0,___sync_116.produceArtifact)({type:"subscription",name:s,platform:u,url:l,ua:p,content:f,mergeSources:h,ignoreFailedRemoteSub:d,produceType:_,produceOpts:{"include-unsupported-proxy":g,useMihomoExternal:a},$options:m,proxy:v});case 24:if(P=t.sent,"local"===C.source&&!["localFirst","remoteFirst"].includes(C.mergeSources)){t.next=42;break}if(t.prev=26,l=(null===(I="".concat(l||C.url).split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})))||void 0===I?void 0:I[0])||"",F={},k=l.split("#"),l=l.split("#")[0],k.length>1)try{F=JSON.parse(decodeURIComponent(k[1]))}catch(e){R=___createForOfIteratorHelper_116(k[1].split("&"));try{for(R.s();!($=R.n()).done;)O=$.value,T=O.split("=")[0],D=O.split("=")[1],F[T]=null==D||""===D||decodeURIComponent(D)}catch(U){R.e(U)}finally{R.f()}}if(F.noFlow){t.next=37;break}return t.next=35,(0,_$flow_126.getFlowHeaders)(l,F.flowUserAgent,void 0,v||C.proxy,F.flowUrl);case 35:(B=t.sent)&&n.set("subscription-userinfo",B);case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(26),___app_116.default.error("\u8ba2\u9605 ".concat(s," \u83b7\u53d6\u6d41\u91cf\u4fe1\u606f\u65f6\u53d1\u751f\u9519\u8bef: ").concat(JSON.stringify(t.t0)));case 42:if(C.subUserinfo&&n.set("subscription-userinfo",C.subUserinfo),"JSON"!==u){t.next=56;break}if("nezha"!==y){t.next=48;break}P=nezhaTransform(P),t.next=53;break;case 48:if("nezha-monitor"!==y){t.next=53;break}return i=/^\d+$/.test(i)?parseInt(i,10):P.findIndex((function(e){return e.name===i})),t.next=52,nezhaMonitor(P[i],i,r.query);case 52:P=t.sent;case 53:n.set("Content-Type","application/json;charset=utf-8").send(P),t.next=57;break;case 56:n.send(P);case 57:t.next=64;break;case 59:t.prev=59,t.t1=t.catch(21),___app_116.default.notify("\ud83c\udf0d Sub-Store \u4e0b\u8f7d\u8ba2\u9605\u5931\u8d25","\u274c \u65e0\u6cd5\u4e0b\u8f7d\u8ba2\u9605\uff1a".concat(s,"\uff01"),"\ud83e\udd14 \u539f\u56e0\uff1a".concat(null!==(j=t.t1.message)&&void 0!==j?j:t.t1)),___app_116.default.error(null!==(N=t.t1.message)&&void 0!==N?N:t.t1),(0,_$response_120.failed)(n,new _$errors_117.InternalServerError("INTERNAL_SERVER_ERROR","Failed to download subscription: ".concat(s),"Reason: ".concat(null!==(L=t.t1.message)&&void 0!==L?L:t.t1)));case 64:t.next=68;break;case 66:___app_116.default.notify("\ud83c\udf0d Sub-Store \u4e0b\u8f7d\u8ba2\u9605\u5931\u8d25","\u274c \u672a\u627e\u5230\u8ba2\u9605\uff1a".concat(s,"\uff01")),(0,_$response_120.failed)(n,new _$errors_117.ResourceNotFoundError("RESOURCE_NOT_FOUND","Subscription ".concat(s," does not exist!")),404);case 68:case"end":return t.stop()}}),t,null,[[21,59],[26,39]])})))).apply(this,arguments)}function downloadCollection(e,t){return _downloadCollection.apply(this,arguments)}function _downloadCollection(){return(_downloadCollection=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function t(r,n){var o,s,i,a,u,c,l,p,f,h,d,_,g,y,v,m,b,w,E,x,A,S,C,P,I,F,k,R,$,O,T,D,B,j,N;return ___regeneratorRuntime_116().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.params,s=o.name,i=o.nezhaIndex,s=decodeURIComponent(s),i=decodeURIComponent(i),a="SurgeMac"===r.query.target,u=r.query.target||(0,_$userAgent_136.getPlatformFromHeaders)(r.headers)||"JSON",c=___app_116.default.read(_$constants_86.COLLECTIONS_KEY),l=(0,_$database_122.findByName)(c,s),___app_116.default.info("\u6b63\u5728\u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\uff1a".concat(s,"\n\u8bf7\u6c42 User-Agent: ").concat(r.headers["user-agent"]||r.headers["User-Agent"])),p=r.query,f=p.ignoreFailedRemoteSub,h=p.produceType,d=p.includeUnsupportedProxy,_=p.resultFormat,g=p.proxy,y={},r.query.$options){try{y=JSON.parse(decodeURIComponent(r.query.$options))}catch(e){v=___createForOfIteratorHelper_116(r.query.$options.split("&"));try{for(v.s();!(m=v.n()).done;)b=m.value,w=b.split("=")[0],E=b.split("=")[1],y[w]=null==E||""===E||decodeURIComponent(E)}catch(L){v.e(L)}finally{v.f()}}___app_116.default.info("\u4f20\u5165 $options: ".concat(JSON.stringify(y)))}if(g&&(g=decodeURIComponent(g),___app_116.default.info("\u6307\u5b9a\u8fdc\u7a0b\u8ba2\u9605\u4f7f\u7528\u4ee3\u7406/\u7b56\u7565 proxy: ".concat(g))),null!=f&&""!==f&&(f=decodeURIComponent(f),___app_116.default.info("\u6307\u5b9a\u5ffd\u7565\u5931\u8d25\u7684\u8fdc\u7a0b\u8ba2\u9605: ".concat(f))),h&&(h=decodeURIComponent(h),___app_116.default.info("\u6307\u5b9a\u751f\u4ea7\u7c7b\u578b: ".concat(h))),d&&(d=decodeURIComponent(d),___app_116.default.info("\u5305\u542b\u4e0d\u652f\u6301\u7684\u8282\u70b9: ".concat(d))),a&&___app_116.default.info("\u624b\u52a8\u6307\u5b9a\u4e86 target \u4e3a SurgeMac, \u5c06\u4f7f\u7528 Mihomo External"),!l){t.next=65;break}return t.prev=17,t.next=20,(0,___sync_116.produceArtifact)({type:"collection",name:s,platform:u,ignoreFailedRemoteSub:f,produceType:h,produceOpts:{"include-unsupported-proxy":d,useMihomoExternal:a},$options:y,proxy:g});case 20:if(x=t.sent,A=___app_116.default.read(_$constants_86.SUBS_KEY),!((S=l.subscriptions).length>0)){t.next=43;break}if("local"===(C=(0,_$database_122.findByName)(A,S[0])).source&&!["localFirst","remoteFirst"].includes(C.mergeSources)){t.next=42;break}if(t.prev=26,I=(null===(P="".concat(C.url).split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})))||void 0===P?void 0:P[0])||"",F={},k=I.split("#"),I=I.split("#")[0],k.length>1)try{F=JSON.parse(decodeURIComponent(k[1]))}catch(e){R=___createForOfIteratorHelper_116(k[1].split("&"));try{for(R.s();!($=R.n()).done;)O=$.value,T=O.split("=")[0],D=O.split("=")[1],F[T]=null==D||""===D||decodeURIComponent(D)}catch(L){R.e(L)}finally{R.f()}}if(F.noFlow){t.next=37;break}return t.next=35,(0,_$flow_126.getFlowHeaders)(I,F.flowUserAgent,void 0,g||C.proxy||l.proxy,F.flowUrl);case 35:(B=t.sent)&&n.set("subscription-userinfo",B);case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(26),___app_116.default.error("\u7ec4\u5408\u8ba2\u9605 ".concat(s," \u4e2d\u7684\u5b50\u8ba2\u9605 ").concat(C.name," \u83b7\u53d6\u6d41\u91cf\u4fe1\u606f\u65f6\u53d1\u751f\u9519\u8bef: ").concat(null!==(j=t.t0.message)&&void 0!==j?j:t.t0));case 42:C.subUserinfo&&n.set("subscription-userinfo",C.subUserinfo);case 43:if("JSON"!==u){t.next=56;break}if("nezha"!==_){t.next=48;break}x=nezhaTransform(x),t.next=53;break;case 48:if("nezha-monitor"!==_){t.next=53;break}return i=/^\d+$/.test(i)?parseInt(i,10):x.findIndex((function(e){return e.name===i})),t.next=52,nezhaMonitor(x[i],i,r.query);case 52:x=t.sent;case 53:n.set("Content-Type","application/json;charset=utf-8").send(x),t.next=57;break;case 56:n.send(x);case 57:t.next=63;break;case 59:t.prev=59,t.t1=t.catch(17),___app_116.default.notify("\ud83c\udf0d Sub-Store \u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\u5931\u8d25","\u274c \u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\u9519\u8bef\uff1a".concat(s,"\uff01"),"\ud83e\udd14 \u539f\u56e0\uff1a".concat(t.t1)),(0,_$response_120.failed)(n,new _$errors_117.InternalServerError("INTERNAL_SERVER_ERROR","Failed to download collection: ".concat(s),"Reason: ".concat(null!==(N=t.t1.message)&&void 0!==N?N:t.t1)));case 63:t.next=67;break;case 65:___app_116.default.notify("\ud83c\udf0d Sub-Store \u4e0b\u8f7d\u7ec4\u5408\u8ba2\u9605\u5931\u8d25","\u274c \u672a\u627e\u5230\u7ec4\u5408\u8ba2\u9605\uff1a".concat(s,"\uff01")),(0,_$response_120.failed)(n,new _$errors_117.ResourceNotFoundError("RESOURCE_NOT_FOUND","Collection ".concat(s," does not exist!")),404);case 67:case"end":return t.stop()}}),t,null,[[17,59],[26,39]])})))).apply(this,arguments)}function nezhaMonitor(e,t,r){return _nezhaMonitor.apply(this,arguments)}function _nezhaMonitor(){return(_nezhaMonitor=___asyncToGenerator_116(___regeneratorRuntime_116().mark((function e(t,r,n){var o,s,i,a,u,c,l,p,f,h,d,_,g,y,v,m;return ___regeneratorRuntime_116().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={code:0,message:"success",result:[]},e.prev=1,s=___app_116.default.env,i=s.isLoon,a=s.isSurge,i||a){e.next=5;break}throw new Error("\u4ec5\u652f\u6301 Loon \u548c Surge(ability=http-client-policy)");case 5:if(u=___proxyUtils_116.ProxyUtils.produce([t],i?"Loon":"Surge")){e.next=8;break}throw new Error("\u5f53\u524d\u5ba2\u6237\u7aef\u4e0d\u517c\u5bb9\u6b64\u8282\u70b9");case 8:c=t._monitors||[{name:"Cloudflare",url:"http://cp.cloudflare.com/generate_204",method:"HEAD",number:3,timeout:2e3},{name:"Google",url:"http://www.google.com/generate_204",method:"HEAD",number:3,timeout:2e3}],l=n.number||Math.max.apply(Math,___toConsumableArray_116(c.map((function(e){return e.number}))))||3,p=___createForOfIteratorHelper_116(c),e.prev=11,p.s();case 13:if((f=p.n()).done){e.next=39;break}h=f.value,d=6e5,_={monitor_id:c.indexOf(h),server_id:r,monitor_name:h.name,server_name:t.name,created_at:[],avg_delay:[]},g=0;case 18:if(!(g<l)){e.next=36;break}return y=Date.now(),e.prev=20,e.next=23,___app_116.default.http[(h.method||"HEAD").toLowerCase()]({timeout:h.timeout||2e3,url:h.url,"policy-descriptor":u,node:u});case 23:v=Date.now()-y,___app_116.default.info("".concat(h.name," latency: ").concat(v)),_.avg_delay.push(v),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(20),___app_116.default.error(e.t0),_.avg_delay.push(0);case 32:_.created_at.push(Date.now()-d*(h.number-g-1));case 33:g++,e.next=18;break;case 36:o.result.push(_);case 37:e.next=13;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e.catch(11),p.e(e.t1);case 44:return e.prev=44,p.f(),e.finish(44);case 47:e.next=53;break;case 49:e.prev=49,e.t2=e.catch(1),___app_116.default.error(e.t2),o.result.push({monitor_id:0,server_id:0,monitor_name:"\u274c ".concat(null!==(m=e.t2.message)&&void 0!==m?m:e.t2),server_name:t.name,created_at:[Date.now()],avg_delay:[0]});case 53:return e.abrupt("return",JSON.stringify(o,null,2));case 54:case"end":return e.stop()}}),e,null,[[1,49],[11,41,44,47],[20,28]])})))).apply(this,arguments)}function nezhaTransform(e){var t={code:0,message:"success",result:[]};return e.map((function(e,r){var n,o,s=(null===(n=e._geo)||void 0===n?void 0:n.countryCode)||(null===(o=e._geo)||void 0===o?void 0:o.country);if(/^[a-z]{2}$/i.test(s)||(s=(0,_$geo_127.getISO)(e.name)),/^[a-z]{2}$/i.test(s)){var i,a=Math.round((new Date).getTime()/1e3),u=e._unavailable?0:a,c=parseInt(e._uptime||0,10);t.result.push({id:r,name:e.name,tag:"".concat(null!==(i=e._tag)&&void 0!==i?i:""),last_active:u,valid_ip:e._IP||e.server,ipv4:e._IPv4||e.server,ipv6:e._IPv6||((0,_$utils_130.isIPv6)(e.server)?e.server:""),host:{Platform:"Sub-Store",PlatformVersion:___env_116.default.version,CPU:[],MemTotal:1024,DiskTotal:1024,SwapTotal:1024,Arch:"",Virtualization:"",BootTime:a-c,CountryCode:s,Version:"0.0.1"},status:{CPU:0,MemUsed:0,SwapUsed:0,DiskUsed:0,NetInTransfer:0,NetOutTransfer:0,NetInSpeed:0,NetOutSpeed:0,Uptime:c,Load1:0,Load5:0,Load15:0,TcpConnCount:0,UdpConnCount:0,ProcessCount:0}})}})),JSON.stringify(t,null,2)}var _$preview_119={};Object.defineProperty(_$preview_119,"__esModule",{value:!0}),_$preview_119.default=function(e){e.post("/api/preview/sub",compareSub),e.post("/api/preview/collection",compareCollection),e.post("/api/preview/file",previewFile)};var ___proxyUtils_119=_$proxyUtils_88({}),___download_119=___interopRequireDefault_119(_$download_124),___app_119=___interopRequireDefault_119(_$app_87);function ___interopRequireDefault_119(e){return e&&e.__esModule?e:{default:e}}function ___typeof_119(e){return(___typeof_119="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ___toConsumableArray_119(e){return function(e){if(Array.isArray(e))return ___arrayLikeToArray_119(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ___arrayLikeToArray_119(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?___arrayLikeToArray_119(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ___arrayLikeToArray_119(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ___defineProperty_119(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ___regeneratorRuntime_119(){___regeneratorRuntime_119=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_119(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __asyncGeneratorStep_119(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function ___asyncToGenerator_119(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_119(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_119(s,n,o,i,a,"throw",e)}i(void 0)}))}}function previewFile(e,t){return _previewFile.apply(this,arguments)}function _previewFile(){return(_previewFile=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t,r){var n,o,s,i,a,u,c,l,p;return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"local"!==(o=t.body).source||["localFirst","remoteFirst"].includes(o.mergeSources)){e.next=6;break}s=o.content,e.next=13;break;case 6:return i={},e.next=9,Promise.all(o.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t){return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,___download_119.default)(t,o.ua);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),i[t]=e.t0,___app_119.default.error("\u6587\u4ef6 ".concat(o.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 9:if(s=e.sent,o.ignoreFailedRemoteFile||!(Object.keys(i).length>0)){e.next=12;break}throw new Error("\u6587\u4ef6 ".concat(o.name," \u7684\u8fdc\u7a0b\u6587\u4ef6 ").concat(Object.keys(i).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 12:"localFirst"===o.mergeSources?s.unshift(o.content):"remoteFirst"===o.mergeSources&&s.push(o.content);case 13:if(a=(Array.isArray(s)?s:[s]).flat(),u=a.filter((function(e){return null!=e&&""!==e})).join("\n"),!(Array.isArray(o.process)&&o.process.length>0)){e.next=21;break}return e.next=18,___proxyUtils_119.ProxyUtils.process({$files:a,$content:u},o.process);case 18:e.t0=e.sent,e.next=22;break;case 21:e.t0={$content:u,$files:a};case 22:c=e.t0,(0,_$response_120.success)(r,{original:u,processed:null!==(n=null==c?void 0:c.$content)&&void 0!==n?n:""}),e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),___app_119.default.error(null!==(l=e.t1.message)&&void 0!==l?l:e.t1),(0,_$response_120.failed)(r,new _$errors_117.InternalServerError("INTERNAL_SERVER_ERROR","Failed to preview file","Reason: ".concat(null!==(p=e.t1.message)&&void 0!==p?p:e.t1)));case 30:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function compareSub(e,t){return _compareSub.apply(this,arguments)}function _compareSub(){return(_compareSub=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t,r){var n,o,s,i,a,u,c,l;return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.body,o=t.query.target||"JSON","local"!==n.source||["localFirst","remoteFirst"].includes(n.mergeSources)){e.next=7;break}s=n.content,e.next=14;break;case 7:return i={},e.next=10,Promise.all(n.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t){return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,___download_119.default)(t,n.ua,void 0,n.proxy);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),i[t]=e.t0,___app_119.default.error("\u8ba2\u9605 ".concat(n.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 10:if(s=e.sent,n.ignoreFailedRemoteSub||!(Object.keys(i).length>0)){e.next=13;break}throw new Error("\u8ba2\u9605 ".concat(n.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(i).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 13:"localFirst"===n.mergeSources?s.unshift(n.content):"remoteFirst"===n.mergeSources&&s.push(n.content);case 14:return(a=(Array.isArray(s)?s:[s]).map((function(e){return ___proxyUtils_119.ProxyUtils.parse(e)})).flat()).forEach((function(e,t){e.id=t,e._subName=n.name,e._subDisplayName=n.displayName})),e.next=18,___proxyUtils_119.ProxyUtils.process(a,n.process||[],o,___defineProperty_119({},n.name,n));case 18:u=e.sent,(0,_$response_120.success)(r,{original:a,processed:u}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),___app_119.default.error(null!==(c=e.t0.message)&&void 0!==c?c:e.t0),(0,_$response_120.failed)(r,new _$errors_117.InternalServerError("INTERNAL_SERVER_ERROR","Failed to preview subscription","Reason: ".concat(null!==(l=e.t0.message)&&void 0!==l?l:e.t0)));case 26:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function compareCollection(e,t){return _compareCollection.apply(this,arguments)}function _compareCollection(){return(_compareCollection=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t,r){var n,o,s,i,a,u,c,l,p,f;return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=___app_119.default.read(_$constants_86.SUBS_KEY),o=t.body,s=___toConsumableArray_119(o.subscriptions),i=o.subscriptionTags,Array.isArray(i)&&i.length>0&&n.forEach((function(e){Array.isArray(e.tag)&&e.tag.length>0&&!s.includes(e.name)&&e.tag.some((function(e){return i.includes(e)}))&&s.push(e.name)})),a={},u={},e.next=10,Promise.all(s.map(function(){var e=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t){var r,s,i,c,l;return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,_$database_122.findByName)(n,t),e.prev=1,"local"!==r.source||["localFirst","remoteFirst"].includes(r.mergeSources)){e.next=6;break}i=r.content,e.next=13;break;case 6:return c={},e.next=9,Promise.all(r.url.split(/[\r\n]+/).map((function(e){return e.trim()})).filter((function(e){return e.length})).map(function(){var e=___asyncToGenerator_119(___regeneratorRuntime_119().mark((function e(t){return ___regeneratorRuntime_119().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,___download_119.default)(t,r.ua,void 0,r.proxy);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),c[t]=e.t0,___app_119.default.error("\u8ba2\u9605 ".concat(r.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(t," \u53d1\u751f\u9519\u8bef: ").concat(e.t0)),e.abrupt("return","");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 9:if(i=e.sent,r.ignoreFailedRemoteSub||!(Object.keys(c).length>0)){e.next=12;break}throw new Error("\u8ba2\u9605 ".concat(r.name," \u7684\u8fdc\u7a0b\u8ba2\u9605 ").concat(Object.keys(c).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 12:"localFirst"===r.mergeSources?i.unshift(r.content):"remoteFirst"===r.mergeSources&&i.push(r.content);case 13:return(l=(Array.isArray(i)?i:[i]).map((function(e){return ___proxyUtils_119.ProxyUtils.parse(e)})).flat()).forEach((function(e){e._subName=r.name,e._subDisplayName=r.displayName,e._collectionName=o.name,e._collectionDisplayName=o.displayName})),e.next=17,___proxyUtils_119.ProxyUtils.process(l,r.process||[],"JSON",(___defineProperty_119(s={},r.name,r),___defineProperty_119(s,"_collection",o),s));case 17:l=e.sent,a[t]=l,e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),u[t]=e.t0,___app_119.default.error("\u274c \u5904\u7406\u7ec4\u5408\u8ba2\u9605 ".concat(o.name," \u4e2d\u7684\u5b50\u8ba2\u9605: ").concat(r.name,"\u65f6\u51fa\u73b0\u9519\u8bef\uff1a").concat(e.t0,"\uff01"));case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}()));case 10:if(o.ignoreFailedRemoteSub||!(Object.keys(u).length>0)){e.next=12;break}throw new Error("\u7ec4\u5408\u8ba2\u9605 ".concat(o.name," \u4e2d\u7684\u5b50\u8ba2\u9605 ").concat(Object.keys(u).join(", ")," \u53d1\u751f\u9519\u8bef, \u8bf7\u67e5\u770b\u65e5\u5fd7"));case 12:return(c=Array.prototype.concat.apply([],s.map((function(e){return a[e]||[]})))).forEach((function(e,t){e.id=t,e._collectionName=o.name,e._collectionDisplayName=o.displayName})),e.next=16,___proxyUtils_119.ProxyUtils.process(c,o.process||[],"JSON",{_collection:o});case 16:l=e.sent,(0,_$response_120.success)(r,{original:c,processed:l}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),___app_119.default.error(null!==(p=e.t0.message)&&void 0!==p?p:e.t0),(0,_$response_120.failed)(r,new _$errors_117.InternalServerError("INTERNAL_SERVER_ERROR","Failed to preview collection","Reason: ".concat(null!==(f=e.t0.message)&&void 0!==f?f:e.t0)));case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}var _$nodeInfo_118={};Object.defineProperty(_$nodeInfo_118,"__esModule",{value:!0}),_$nodeInfo_118.default=function(e){e.post("/api/utils/node-info",getNodeInfo)};var __obj_118,___producers_118=(__obj_118=_$producers_98)&&__obj_118.__esModule?__obj_118:{default:__obj_118};function ___typeof_118(e){return(___typeof_118="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ___regeneratorRuntime_118(){___regeneratorRuntime_118=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(C){a=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof p?t:p,s=Object.create(o.prototype),i=new x(n||[]);return s._invoke=function(e,t,r){var n="suspendedStart";return function(o,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw s;return{value:void 0,done:!0}}for(r.method=o,r.arg=s;;){var i=r.delegate;if(i){var a=b(i,r);if(a){if(a===l)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var l={};function p(){}function f(){}function h(){}var d={};a(d,o,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(A([])));g&&g!==t&&r.call(g,o)&&(d=g);var y=h.prototype=p.prototype=Object.create(d);function v(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(o,s){function i(){return new t((function(n,i){!function n(o,s,i,a){var u=c(e[o],e,s);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==___typeof_118(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,a)}))}a(u.arg)}(o,s,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=h,a(y,"constructor",h),a(h,"constructor",f),f.displayName=a(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(m.prototype),a(m.prototype,s,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,n,o,s){void 0===s&&(s=Promise);var i=new m(u(t,r,n,o),s);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(y),a(y,i,"Generator"),a(y,o,(function(){return this})),a(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function __asyncGeneratorStep_118(e,t,r,n,o,s,i){try{var a=e[s](i),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,o)}function getNodeInfo(e,t){return _getNodeInfo.apply(this,arguments)}function _getNodeInfo(){var e;return e=___regeneratorRuntime_118().mark((function e(t,r){var n,o,s,i,a;return ___regeneratorRuntime_118().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.body,o=t.query.lang||"zh-CN";try{s=___producers_118.default.URI.produce(n)}catch(u){}return e.prev=3,i=(0,_$openApi_140.HTTP)(),e.next=7,i.get({url:"http://ip-api.com/json/".concat(encodeURIComponent("".concat(n.server).trim().replace(/^\[/,"").replace(/\]$/,"")),"?lang=").concat(o),headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15"}}).then((function(e){var t=JSON.parse(e.body);if("success"!==t.status)throw new Error(t.message);return delete t.status,t}));case 7:a=e.sent,(0,_$response_120.success)(r,{shareUrl:s,info:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),(0,_$response_120.failed)(r,new _$errors_117.NetworkError("FAILED_TO_GET_NODE_INFO","Failed to get node info","Reason: ".concat(e.t0)));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})),(_getNodeInfo=function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){__asyncGeneratorStep_118(s,n,o,i,a,"next",e)}function a(e){__asyncGeneratorStep_118(s,n,o,i,a,"throw",e)}i(void 0)}))}).apply(this,arguments)}var _$subStore1_114={},$app,_migration=___interopRequireDefault_114(_$migration_132),_express=___interopRequireDefault_114(_$express_138),___app_114=___interopRequireDefault_114(_$app_87),___download_114=___interopRequireDefault_114(_$download_116),_preview=___interopRequireDefault_114(_$preview_119),___sync_114=___interopRequireDefault_114(_$sync_121({})),_nodeInfo=___interopRequireDefault_114(_$nodeInfo_118);function ___interopRequireDefault_114(e){return e&&e.__esModule?e:{default:e}}console.log("\n\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\n     Sub-Store -- v".concat(_$package_85.version,"\n\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\n")),(0,_migration.default)(),$app=(0,_express.default)({substore:___app_114.default}),(0,___download_114.default)($app),(0,_preview.default)($app),(0,___sync_114.default)($app),(0,_nodeInfo.default)($app),$app.options("/",(function(e,t){t.status(200).end()})),$app.start()}();